function setCookie(t,e,i){var n=(i=i||{}).expires;if("number"==typeof n&&n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=i.expires=r}n&&n.toUTCString&&(i.expires=n.toUTCString());var s=t+"="+(e=encodeURIComponent(e));for(var a in i){s+="; "+a;var o=i[a];!0!==o&&(s+="="+o)}document.cookie=s}function adaptive(){var t=$(".header_top"),e=$("#mainsidebar"),i=$("#mainnewscolumn"),n=getCurrentWidth();if($(".mainmenu").prepend('<a class="version_switcher" id="go_to_full">\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0434\u0435\u0441\u043a\u0442\u043e\u043f \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430</a>'),t.find(".wrapper").append('<a class="hamburger"><span class="line" /><span class="line" /><span class="line" /></a>'),t.find(".mmsearch").insertBefore(t.find(".mainmenu")),t.on("touchstart",".hamburger",function(){$(this).toggleClass("m-active"),t.find(".mmsearch, .mainmenu").toggle()}),$(".mainmenu .menubar").prepend($(".secondmenu .menubar").html()),$(".header_body").find(".wrapper").append('<div class="header__links"><a class="header__live-link" href="/sounds/stream.html">\u041f\u0440\u044f\u043c\u043e\u0439 \u044d\u0444\u0438\u0440</a><a class="header__podcasts-link" href="/podcasts/">\u041f\u043e\u0434\u043a\u0430\u0441\u0442\u044b</a></div>'),i.length?i.after('<div class="sidebar"><div id="adv_0"></div></div>'):$(".main").before('<div class="sidebar"><div id="adv_0"></div></div>'),1!==window.gfi&&adv_insert("adv_0"),e.insertAfter("#onair").show(),$(".supermaincarousel").addClass("owl-carousel owl-theme").owlCarousel({margin:0,touchDrag:!0,autoHeight:!0,responsive:{0:{items:1},480:{items:2}}}),$(".previewcarousel").find(".carousel").removeClass("carousel").addClass("owl-carousel owl-theme").owlCarousel({touchDrag:!0,autoHeight:!0,margin:20,responsive:{0:{items:1},480:{items:2},740:{items:3}}}),$("#onair").on("click","h2",function(){location.href="/schedule/"}),$("iframe[src*='videos']").on("load",function(){var t=$(this);t.css({width:n-40,height:n-40}),setTimeout(function(){var e=t.contents();e.find("[id*=otv_play], .content_video-dimensions").css({width:n-40,height:n-40}),e.find("video").css({width:n-40,top:0}),e.find("body").css({margin:0}),n<360&&e.find(".vjs-remaining-time").addClass("vjs-hidden")},5e3)}),"/"===window.location.pathname){var r,s=1;for(r=n<=480?"2n":n<=720?"4n":"6n",$(".mainpreview").find(".preview:nth-child("+r+")").after(function(){if(!(s>10))return'<div id="adv_'+s+++'" class="adv_banner"></div>'});s>1;)adv_insert("adv_"+--s)}}function passwordSwitcher(){$(".switch-password").off("click.switchPass").on("click.switchPass",function(){var t=$(this),e=$(this).parent().find("input");t.hasClass("visible")?(t.removeClass("visible"),e.attr("type","text")):(t.addClass("visible"),e.attr("type","password"))})}function setSlider(t){var e=!0;t.css("overflow","hidden"),0==t.find(".scroll-content").length&&t.children().wrapAll('<div class="scroll-content"> /');var i=t.find(".scroll-content").height()-t.height();if(t.data("difference",i),i<=0&&t.find(".slider-wrap").length>0&&(t.find(".slider-wrap").remove(),t.find(".scroll-content").css({top:0})),i>0){var n=i/t.find(".scroll-content").height(),r=Math.round((1-n)*t.height());r-=r%2;var s=t.find(".scroll-content").position(),a=100*(1-Math.abs(s.top)/i);0==t.find(".slider-wrap").length&&(t.append('<div class="slider-wrap"><div class="slider-vertical"></div></div>'),a=100),t.find(".slider-wrap").height(t.height()),t.find(".slider-vertical").slider({orientation:"vertical",min:0,max:100,range:"min",value:a,slide:function(e,n){var r=-(100-n.value)*i/100;t.find(".scroll-content").css({top:r}),$("ui-slider-range").height(n.value+"%")},change:function(e,i){var n=-(100-i.value)*(t.find(".scroll-content").height()-t.height())/100;t.find(".scroll-content").css({top:n}),$("ui-slider-range").height(i.value+"%")}}),t.find(".ui-slider-handle").css({height:r,"margin-bottom":-.5*r});var o=t.height(),l=o-r,c=.5*(o-l);t.find(".ui-slider").css({height:l,"margin-top":c}),t.find(".ui-slider-range").css({bottom:-c}),e&&($(".ui-slider-handle").append('<span class="scrollbar-top" />'),$(".ui-slider-handle").append('<span class="scrollbar-bottom" />'),$(".ui-slider-handle").append('<span class="scrollbar-grip" />'))}$(".ui-slider").click(function(t){t.stopPropagation()}),$(".slider-wrap").click(function(t){var e=$(this).offset().top,i=100*(t.pageY-e)/$(this).height();$(this).find(".slider-vertical").slider("value",100-i)}),$.fn.mousewheel&&(t.unmousewheel(),t.mousewheel(function(e,i){var n=Math.round(5e3/t.data("difference"));n<1&&(n=1),n>100&&(n=100);var r=$(this).find(".slider-vertical").slider("value");r+=i*n,$(this).find(".slider-vertical").slider("value",r),e.preventDefault()}))}
/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/function setQuality(t,e,i,n){$(e).addClass("active").siblings().removeClass("active"),$("#notaplayer_"+t).jPlayer("setMedia",{mp3:i}).jPlayer("playHead",0).jPlayer("play"),localStorage.setItem("mediaQuality",n)}function isNoAnotherPage(t){var e=$(t),i=e.attr("href");return!i||""!=i&&"#"!=i.substring(0,1)&&"javascript:"!=i.substring(0,11)&&!e.attr("target")&&"external"!=e.attr("rel")&&"ajax"!=e.attr("rel")}function bodyclassName(t,e,i){echoears||(t.width()<1300?(_columns=4,e.removeClass("widescreen")):(_columns=5,e.addClass("widescreen"))),i.length>0&&i.height()<$("#mainsidebar").height()?(_columns--,e.addClass("smallheight")):e.removeClass("smallheight")}function attacheWheelEvents(t,e){t.addEventListener?"onwheel"in document?t.addEventListener("wheel",e,!1):"onmousewheel"in document?t.addEventListener("mousewheel",e,!1):t.addEventListener("MozMousePixelScroll",e,!1):t.attachEvent("onmousewheel",e)}function pageUp(){var t,e=$(".up_link");touchdevice||$(window).scroll(function(){window.clearTimeout(t),t=window.setTimeout(function(){$(document).scrollTop()>$(window).height()?e.slideDown(200):e.slideUp(100)},100)})}function popularblFunc(){var t,e=$(".popular");if(0!==e.length&&!touchdevice){null!=localStorage.getItem("lock")&&"2"==localStorage.getItem("lock")&&($(".up_link").css("bottom",0),$(".popular").removeClass("open")),e.find(".door").on("click",function(){return"2"==localStorage.getItem("lock")?($(".up_link").css("bottom",80),e.addClass("open"),localStorage.setItem("lock","1")):($(".up_link").css("bottom",0),e.removeClass("open"),localStorage.setItem("lock","2")),!1});var i=$(".header_body").height()+$(".header_body").offset().top,n=$(".footer .links_block").offset().top;$(window).scroll(function(){window.clearTimeout(t),t=window.setTimeout(function(){var t=$(document).scrollTop()+$(window).height()-537;$(document).scrollTop()>i&&t<n?e.addClass("fixedpopul"):e.removeClass("fixedpopul")},100)})}}function aab(t){t.blocked}!function(t,e){var i;(function(){var e=t(document).data("events");return e&&e.click&&t.grep(e.click,function(t){return"rails"===t.namespace}).length})()&&t.error("jquery-ujs has already been loaded!"),t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var r=t.Event(i);return e.trigger(r,n),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var r,s,a,o,l,c,u,d;if(i.fire(n,"ajax:before")){if(l=(o=n.data("cross-domain"))===e?null:o,c=n.data("with-credentials")||null,u=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),s=n.attr("action"),a=n.serializeArray();var h=n.data("ujs:submit-button");h&&(a.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),s=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(r=n.data("method"),s=i.href(n),a=n.data("params")||null);d={type:r||"GET",data:a,dataType:u,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[t,r])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},xhrFields:{withCredentials:c},crossDomain:l},s&&(d.url=s);var p=i.ajax(d);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var r=i.href(n),s=n.data("method"),a=n.attr("target"),o=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+s+'" type="hidden" />';l!==e&&o!==e&&(u+='<input name="'+l+'" value="'+o+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),r=!1;return!n||(i.fire(t,"confirm")&&(r=i.confirm(n),e=i.fire(t,"confirm:complete",[r])),r&&e)},blankInputs:function(e,i,n){var r,s=t(),a=i||"input,textarea";return e.find(a).each(function(){r=t(this),(r.is(":checkbox,:radio")?r.is(":checked"):r.val())==!!n&&(s=s.add(r))}),!!s.length&&s},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var r=i.data("events"),s=!0;return r!==e&&r.submit!==e&&t.each(r.submit,function(t,e){if("function"==typeof e.handler)return s=e.handler(n)}),s},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},i.fire(t(document),"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),t(document).delegate(i.linkClickSelector,"click.rails",function(n){var r=t(this),s=r.data("method"),a=r.data("params");return i.allowAction(r)?(r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==e?!(!n.metaKey&&!n.ctrlKey||s&&"GET"!==s||a)||(!1===i.handleRemote(r)&&i.enableElement(r),!1):r.data("method")?(i.handleMethod(r),!1):void 0):i.stopEverything(n)}),t(document).delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),t(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var r=t(this),s=r.data("remote")!==e,a=i.blankInputs(r,i.requiredInputSelector),o=i.nonBlankInputs(r,i.fileInputSelector);return i.allowAction(r)?a&&r.attr("novalidate")==e&&i.fire(r,"ajax:aborted:required",[a])?i.stopEverything(n):s?o?(setTimeout(function(){i.disableFormElements(r)},13),i.fire(r,"ajax:aborted:file",[o])):!t.support.submitBubbles&&t().jquery<"1.7"&&!1===i.callFormSubmitBindings(r,n)?i.stopEverything(n):(i.handleRemote(r),!1):void setTimeout(function(){i.disableFormElements(r)},13):i.stopEverything(n)}),t(document).delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var r=n.attr("name"),s=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),t(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),t(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){csrf_token=t("meta[name=csrf-token]").attr("content"),csrf_param=t("meta[name=csrf-param]").attr("content"),t('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),function(t,e,i,n){function r(e,i){this.settings=null,this.options=t.extend({},r.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy(function(e,i){this._handlers[i]=t.proxy(this[i],this)},this)),t.each(r.Plugins,t.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(r.Workers,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}r.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},r.Width={Default:"default",Inner:"inner",Outer:"outer"},r.Type={Event:"event",State:"state"},r.Plugins={},r.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,r={width:"auto","margin-left":n?e:"","margin-right":n?"":e};!i&&this.$stage.children().css(r),t.css=r}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,r=!this.settings.autoWidth,s=[];for(t.items={merge:!1,width:e};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,s[n]=r?e*i:this._items[n].width();this._widths=s}},{filter:["items","settings"],run:function(){var e=[],i=this._items,n=this.settings,r=Math.max(2*n.items,4),s=2*Math.ceil(i.length/2),a=n.loop&&i.length?n.rewind?r:Math.max(r,s):0,o="",l="";for(a/=2;a--;)e.push(this.normalize(e.length/2,!0)),o+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),l=i[e[e.length-1]][0].outerHTML+l;this._clones=e,t(o).addClass("cloned").appendTo(this.$stage),t(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,n=0,r=0,s=[];++i<e;)n=s[i-1]||0,r=this._widths[this.relative(i)]+this.settings.margin,s.push(n+r*t);this._coordinates=s}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],n.eq(e).css(t.css);else i&&(t.css.width=t.items.width,n.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,r=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,a=this.coordinates(this.current())+s,o=a+this.width()*r,l=[];for(i=0,n=this._coordinates.length;i<n;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+s*r,(this.op(t,"<=",a)&&this.op(t,">",o)||this.op(e,"<",a)&&this.op(e,">",o))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],r.prototype.initialize=function(){var e,i,r;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(e=this.$element.find("img"),i=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,r=this.$element.children(i).width(),e.length&&r<=0&&this.preloadAutoWidthImages(e));this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},r.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,n=-1,r=null;i?(t.each(i,function(t){t<=e&&t>n&&(n=Number(t))}),"function"==typeof(r=t.extend({},this.options,i[n])).stagePadding&&(r.stagePadding=r.stagePadding()),delete r.responsive,r.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):r=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:r}}),this._breakpoint=n,this.settings=r,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},r.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},r.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},r.prototype.update=function(){for(var e=0,i=this._pipe.length,n=t.proxy(function(t){return this[t]},this._invalidated),r={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,n).length>0)&&this._pipe[e].run(r),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},r.prototype.width=function(t){switch(t=t||r.Width.Default){case r.Width.Inner:case r.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},r.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},r.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},r.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},r.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},r.prototype.onDragStart=function(e){var n=null;3!==e.which&&(t.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(t.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy(function(e){var n=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},r.prototype.onDragMove=function(t){var e=null,i=null,n=null,r=this.difference(this._drag.pointer,this.pointer(t)),s=this.difference(this._drag.stage.start,r);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,s.x=((s.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*r.x/5:0,s.x=Math.max(Math.min(s.x,e+n),i+n)),this._drag.stage.current=s,this.animate(s.x))},r.prototype.onDragEnd=function(e){var n=this.difference(this._drag.pointer,this.pointer(e)),r=this._drag.stage.current,s=n.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(r.x,0!==n.x?s:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=s,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},r.prototype.closest=function(e,i){var n=-1,r=30,s=this.width(),a=this.coordinates();return this.settings.freeDrag||t.each(a,t.proxy(function(t,o){return"left"===i&&e>o-r&&e<o+r?n=t:"right"===i&&e>o-s-r&&e<o-s+r?n=t+1:this.op(e,"<",o)&&this.op(e,">",a[t+1]||o-s)&&(n="left"===i?t+1:t),-1===n},this)),this.settings.loop||(this.op(e,">",a[this.minimum()])?n=e=this.minimum():this.op(e,"<",a[this.maximum()])&&(n=e=this.maximum())),n},r.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},r.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},r.prototype.current=function(t){if(t===n)return this._current;if(0===this._items.length)return n;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==n&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},r.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,function(t,e){return e})},r.prototype.reset=function(t){(t=this.normalize(t))!==n&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},r.prototype.normalize=function(t,e){var i=this._items.length,r=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=n:(t<0||t>=i+r)&&(t=((t-r/2)%i+i)%i+r/2),t},r.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},r.prototype.maximum=function(t){var e,i,n,r=this.settings,s=this._coordinates.length;if(r.loop)s=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){for(e=this._items.length,i=this._items[--e].width(),n=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>n););s=e+1}else s=r.center?this._items.length-1:this._items.length-r.items;return t&&(s-=this._clones.length/2),Math.max(s,0)},r.prototype.minimum=function(t){return t?0:this._clones.length/2},r.prototype.items=function(t){return t===n?this._items.slice():(t=this.normalize(t,!0),this._items[t])},r.prototype.mergers=function(t){return t===n?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},r.prototype.clones=function(e){var i=this._clones.length/2,r=i+this._items.length,s=function(t){return t%2==0?r+t/2:i-(t+1)/2};return e===n?t.map(this._clones,function(t,e){return s(e)}):t.map(this._clones,function(t,i){return t===e?s(i):null})},r.prototype.speed=function(t){return t!==n&&(this._speed=t),this._speed},r.prototype.coordinates=function(e){var i,r=1,s=e-1;return e===n?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(r=-1,s=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[s]||0))/2*r):i=this._coordinates[s]||0,i=Math.ceil(i))},r.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},r.prototype.to=function(t,e){var i=this.current(),n=null,r=t-this.relative(i),s=(r>0)-(r<0),a=this._items.length,o=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>a/2&&(r+=-1*s*a),(n=(((t=i+r)-o)%a+a)%a+o)!==t&&n-r<=l&&n-r>0&&(i=n-r,t=n,this.reset(i))):this.settings.rewind?t=(t%(l+=1)+l)%l:t=Math.max(o,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.$element.is(":visible")&&this.update()},r.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},r.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},r.prototype.onTransitionEnd=function(t){if(t!==n&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},r.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==e?n=t(this.options.responsiveBaseElement).width():t(e).width()?n=t(e).width():i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},r.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},r.prototype.add=function(e,i){var r=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[r]&&this.reset(this._items[r].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},r.prototype.remove=function(t){(t=this.normalize(t,!0))!==n&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},r.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy(function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy(function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},r.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},r.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:t<i;case">":return n?t<i:t>i;case">=":return n?t<=i:t>=i;case"<=":return n?t>=i:t<=i}},r.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},r.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},r.prototype.trigger=function(e,i,n){var s={item:{count:this._items.length,index:this.current()}},a=t.camelCase(t.grep(["on",e,n],function(t){return t}).join("-").toLowerCase()),o=t.Event([e,"owl",n||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},s,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(o)}),this.register({type:r.Type.Event,name:e}),this.$element.trigger(o),this.settings&&"function"==typeof this.settings[a]&&this.settings[a].call(this,o)),o},r.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]===n&&(this._states.current[e]=0),this._states.current[e]++},this))},r.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]--},this))},r.prototype.register=function(e){if(e.type===r.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===r.Type.State&&(this._states.tags[e.name]?this._states.tags[e.name]=this._states.tags[e.name].concat(e.tags):this._states.tags[e.name]=e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy(function(i,n){return t.inArray(i,this._states.tags[e.name])===n},this)))},r.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},r.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},r.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},r.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},r.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),s=n.data("owl.carousel");s||(s=new r(this,"object"==typeof e&&e),n.data("owl.carousel",s),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(e,i){s.register({type:r.Type.Event,name:i}),s.$element.on(i+".owl.carousel.core",t.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),s[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},s))})),"string"==typeof e&&"_"!==e.charAt(0)&&s[e].apply(s,i)})},t.fn.owlCarousel.Constructor=r}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoRefresh:!0,autoRefreshInterval:500},i.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},i.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},i.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=i}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var r=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type))for(var i=this._core.settings,r=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*r||0,a=(e.property&&e.property.value!==n?e.property.value:this._core.current())+s,o=this._core.clones().length,l=t.proxy(function(t,e){this.load(e)},this);s++<r;)this.load(o/2+this._core.relative(a)),o&&t.each(this._core.clones(this._core.relative(a)),l),a++},this)},this._core.options=t.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={lazyLoad:!1},r.prototype.load=function(i){var n=this._core.$stage.children().eq(i),r=n&&n.find(".owl-lazy");!r||t.inArray(n.get(0),this._loaded)>-1||(r.each(t.proxy(function(i,n){var r,s=t(n),a=e.devicePixelRatio>1&&s.attr("data-src-retina")||s.attr("data-src");this._core.trigger("load",{element:s,url:a},"lazy"),s.is("img")?s.one("load.owl.lazy",t.proxy(function(){s.css("opacity",1),this._core.trigger("loaded",{element:s,url:a},"lazy")},this)).attr("src",a):((r=new Image).onload=t.proxy(function(){s.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:s,url:a},"lazy")},this),r.src=a)},this)),this._loaded.push(n.get(0)))},r.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=r}(window.Zepto||window.jQuery,window,document),function(t){var e=function(i){this._core=i,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"==t.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(t){
t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var e=this._core._current,i=e+this._core.settings.items,n=this._core.$stage.children().toArray().slice(e,i),r=[],s=0;t.each(n,function(e,i){r.push(t(i).height())}),s=Math.max.apply(null,r),this._core.$stage.parent().height(s).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),r=t.attr("data-width")||this._core.settings.videoWidth,s=t.attr("data-height")||this._core.settings.videoHeight,a=t.attr("href");if(!a)throw new Error("Missing video URL.");if((n=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[a]={type:i,id:n,width:r,height:s},e.attr("data-video",a),this.thumbnail(t,this._videos[a])},n.prototype.thumbnail=function(e,i){var n,r,s,a=i.width&&i.height?'style="width:'+i.width+"px;height:"+i.height+'px;"':"",o=e.find("img"),l="src",c="",u=this._core.settings,d=function(t){r='<div class="owl-video-play-icon"></div>',n=u.lazyLoad?'<div class="owl-video-tn '+c+'" '+l+'="'+t+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+t+')"></div>',e.after(n),e.after(r)};if(e.wrap('<div class="owl-video-wrapper"'+a+"></div>"),this._core.settings.lazyLoad&&(l="data-src",c="owl-lazy"),o.length)return d(o.attr(l)),o.remove(),!1;"youtube"===i.type?(s="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",d(s)):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){s=t[0].thumbnail_large,d(s)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){s=t.framegrab_url,d(s)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(e){var i,n=t(e.target).closest("."+this._core.settings.itemClass),r=this._videos[n.attr("data-video")],s=r.width||"100%",a=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),"youtube"===r.type?i='<iframe width="'+s+'" height="'+a+'" src="//www.youtube.com/embed/'+r.id+"?autoplay=1&rel=0&v="+r.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===r.type?i='<iframe src="//player.vimeo.com/video/'+r.id+'?autoplay=1" width="'+s+'" height="'+a+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===r.type&&(i='<iframe frameborder="0"height="'+a+'"width="'+s+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+r.id+'/player?autoplay=true"></iframe>'),t('<div class="owl-video-frame">'+i+"</div>").insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var r=function(e){this.core=e,this.core.options=t.extend({},r.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":t.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};r.Defaults={animateOut:!1,animateIn:!1},r.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),r=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(a)),s&&r.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(s))}},r.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},r.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=r}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":t.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":t.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype.play=function(){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},n.prototype._getNextTimeout=function(n,r){return this._timeout&&e.clearTimeout(this._timeout),e.setTimeout(t.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||i.hidden||this._core.next(r||this._core.settings.autoplaySpeed)},this),n||this._core.settings.autoplayTimeout)},n.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},n.prototype.stop=function(){this._core.is("rotating")&&(e.clearTimeout(this._timeout),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t){"use strict";var e=function(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy(function(){this.prev(i.navSpeed)},this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy(function(){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[t("<div>").addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",t.proxy(function(e){var n=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[e]=t.proxy(this[e],this)},e.prototype.destroy=function(){var t,e,i,n;for(t in this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.prototype.update=function(){var t,e,i=this._core.clones().length/2,n=i+this._core.items().length,r=this._core.maximum(!0),s=this._core.settings,a=s.center||s.autoWidth||s.dotsData?1:s.dotsEach||s.items;if("page"!==s.slideBy&&(s.slideBy=Math.min(s.slideBy,s.items)),s.dots||"page"==s.slideBy)for(this._pages=[],t=i,e=0,0;t<n;t++){if(e>=a||0===e){if(this._pages.push({start:Math.min(r,t-i),end:t-i+a-1}),Math.min(r,t-i)===r)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},e.prototype.draw=function(){var e,i=this._core.settings,n=this._core.items().length<=i.items,r=this._core.relative(this._core.current()),s=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!s&&r<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!s&&r>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},e.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy(function(t){return t.start<=e&&t.end>=e},this)).pop()},e.prototype.getPosition=function(e){var i,n,r=this._core.settings;return"page"==r.slideBy?(i=t.inArray(this.current(),this._pages),n=this._pages.length,e?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,e?i+=r.slideBy:i-=r.slideBy),i},e.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},e.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},e.prototype.to=function(e,i,n){var r;!n&&this._pages.length?(r=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%r+r)%r].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";var r=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}},this),"changed.owl.carousel":t.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),r=t.map(this._hashes,function(t,e){return t===n?e:null}).join();if(!r||e.location.hash.slice(1)===r)return;e.location.hash=r}},this)},this._core.options=t.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(){var t=e.location.hash.substring(1),i=this._core.$stage.children(),r=this._hashes[t]&&i.index(this._hashes[t]);r!==n&&r!==this._core.current()&&this._core.to(this._core.relative(r),!1,!0)},this))};r.Defaults={URLhashListener:!1},r.prototype.destroy=function(){var i,n;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=r}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){function r(e,i){var r=!1,s=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+o.join(s+" ")+s).split(" "),function(t,e){if(a[e]!==n)return r=!i||e,!1}),r}function s(t){return r(t,!0)}var a=t("<support>").get(0).style,o="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c={csstransforms:function(){return!!r("transform")},csstransforms3d:function(){return!!r("perspective")},csstransitions:function(){return!!r("transition")},cssanimations:function(){return!!r("animation")}};c.csstransitions()&&(t.support.transition=new String(s("transition")),t.support.transition.end=l.transition.end[t.support.transition]),c.cssanimations()&&(t.support.animation=new String(s("animation")),t.support.animation.end=l.animation.end[t.support.animation]),c.csstransforms()&&(t.support.transform=new String(s("transform")),t.support.transform3d=c.csstransforms3d())}(window.Zepto||window.jQuery,window,document);var addthis_config={services_compact:"email,link,telegram,google_plusone_share,more"};$(function(){window.isOperaMini||(window.is_adaptive?adaptive():getCurrentWidth()<=getMaxWidth()&&$("footer .copy").before('<a class="version_switcher" id="go_to_adaptive">\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430</a>'),$("body").on("click","#go_to_adaptive",function(t){t.preventDefault(),setCookie("not_adaptive","0"),window.ga&&ga instanceof Function&&ga("send","event","switch","to_responsive"),location.reload()}).on("click","#go_to_full",function(t){t.preventDefault(),setCookie("not_adaptive","1"),setCookie("not_adaptive_header","1",{expires:3600}),window.ga&&ga instanceof Function&&ga("send","event","switch","to_desktop"),location.reload()}))}),$(function(){$(".adv_inside, .video_adv_1").on("DOMSubtreeModified",function(){var t=$(this),e=t.children("div");t.width()>480&&(t.css({float:"none",clear:"both",marginBottom:"1em"}),e.css({float:"none",margin:"0"}))})}),function(){function t(t,e){var i;for(i in t||(t={}),e)t[i]=e[i];return t}function e(){var t,e,i=arguments,n={},r=function(t,e){var i,n;for(n in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(n)&&((i=e[n])&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"number"!=typeof i.nodeType?t[n]=r(t[n]||{},i):t[n]=e[n]);return t};for(!0===i[0]&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;t<e;t++)n=r(n,i[t]);return n}function i(){for(var t=0,e=arguments,i=e.length,n={};t<i;t++)n[e[t++]]=e[t];return n}function n(t,e){return parseInt(t,e||10)}function r(t){return"string"==typeof t}function s(t){return"object"==typeof t}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"number"==typeof t}function l(t){return ft.log(t)/ft.LN10}function c(t){return ft.pow(10,t)}function u(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function d(t){return t!==H&&null!==t}function h(t,e,i){var n,a,o="setAttribute";if(r(e))d(i)?t[o](e,i):t&&t.getAttribute&&(a=t.getAttribute(e));else if(d(e)&&s(e))for(n in e)t[o](n,e[n]);return a}function p(t){return a(t)?t:[t]}function f(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++)if(null!=(e=i[t]))return e}function m(e,i){Et&&i&&i.opacity!==H&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function g(e,i,n,r,s){var a=ht.createElement(e);return i&&t(a,i),s&&m(a,{padding:0,border:Kt,margin:0}),n&&m(a,n),r&&r.appendChild(a),a}function v(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function y(t,e,i,r){var s=$.lang,a=+t||0,o=-1===e?(a.toString().split(".")[1]||"").length:isNaN(e=bt(e))?2:e,l=i===undefined?s.decimalPoint:i,c=r===undefined?s.thousandsSep:r,u=a<0?"-":"",d=String(n(a=bt(a).toFixed(o))),h=d.length>3?d.length%3:0;return u+(h?d.substr(0,h)+c:"")+d.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?l+bt(a-d).toFixed(o).slice(2):"")}function _(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function b(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function w(t,e){var i,n=/f$/,r=/\.([0-9])/,s=$.lang;return e=n.test(t)?y(e,i=(i=t.match(r))?i[1]:-1,s.decimalPoint,t.indexOf(",")>-1?s.thousandsSep:""):G(t,e)}function T(t,e){for(var i,n,r,s,a,o,l,c="{",u=!1,d=[];-1!==(l=t.indexOf(c));){if(i=t.slice(0,l),u){for(a=(r=(n=i.split(":")).shift().split(".")).length,o=e,s=0;s<a;s++)o=o[r[s]];n.length&&(o=w(n.join(":"),o)),d.push(o)}else d.push(i);t=t.slice(l+1),c=(u=!u)?"}":"{"}return d.push(t),d.join("")}function k(t){return ft.pow(10,gt(ft.log(t)/ft.LN10))}function S(t,e,i,n){var r,s;for(r=t/(i=f(i,1)),e||(e=[1,2,2.5,5,10],n&&!1===n.allowDecimals&&(1===i?e=[1,2,5,10]:i<=.1&&(e=[1/i]))),s=0;s<e.length&&(t=e[s],!(r<=(e[s]+(e[s+1]||e[s]))/2));s++);return t*=i}function C(){this.color=0,this.symbol=0}function x(t,e){var i,n,r=t.length;for(n=0;n<r;n++)t[n].ss_i=n;for(t.sort(function(t,n){return 0===(i=e(t,n))?t.ss_i-n.ss_i:i}),n=0;n<r;n++)delete t[n].ss_i}function E(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function A(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function P(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function I(t){q||(q=g(Ht)),t&&q.appendChild(t),q.innerHTML=""}function L(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;pt.console&&console.log(i)}function D(t){return parseFloat(t.toPrecision(14))}function O(t,e){X=f(t,e.animation)}function M(){var t=$.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";J=6e4*(t&&$.global.timezoneOffset||0),Z=t?Date.UTC:function(t,e,i,n,r,s){return new Date(t,e,f(i,1),f(n,0),f(r,0),f(s,0)).getTime()},tt=e+"Minutes",et=e+"Hours",it=e+"Day",nt=e+"Date",rt=e+"Month",st=e+"FullYear",at=i+"Minutes",ot=i+"Hours",lt=i+"Date",ct=i+"Month",ut=i+"FullYear"}function j(t){return $=e(!0,$,t),M(),$}function R(){return $}function N(){}function F(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function B(){this.init.apply(this,arguments)}function U(t,e,i,n,r,s){var a=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=r,this.percent="percent"===s,this.alignOptions={align:e.align||(a?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(a?"middle":i?"bottom":"top"),y:f(e.y,a?4:i?14:-6),x:f(e.x,a?i?-6:6:0)},this.textAlign=e.textAlign||(a?i?"right":"left":"center")}function z(){this.init.apply(this,arguments)}function V(){this.init.apply(this,arguments)}var H,W,q,$,G,X,Y,K,Q,Z,J,tt,et,it,nt,rt,st,at,ot,lt,ct,ut,dt,ht=document,pt=window,ft=Math,mt=ft.round,gt=ft.floor,vt=ft.ceil,yt=ft.max,_t=ft.min,bt=ft.abs,wt=ft.cos,Tt=ft.sin,kt=ft.PI,St=2*kt/360,Ct=navigator.userAgent,xt=pt.opera,Et=/msie/i.test(Ct)&&!xt,At=8===ht.documentMode,Pt=/AppleWebKit/.test(Ct),It=/Firefox/.test(Ct),Lt=/(Mobile|Android|Windows Phone)/.test(Ct),Dt="http://www.w3.org/2000/svg",Ot=!!ht.createElementNS&&!!ht.createElementNS(Dt,"svg").createSVGRect,Mt=It&&parseInt(Ct.split("Firefox/")[1],10)<4,jt=!Ot&&!Et&&!!ht.createElement("canvas").getContext,Rt=ht.documentElement.ontouchstart!==H,Nt={},Ft=0,Bt=function(){},Ut=[],zt="Highcharts",Vt="3.0.9",Ht="div",Wt="absolute",qt="relative",$t="hidden",Gt="highcharts-",Xt="visible",Yt="px",Kt="none",Qt="M",Zt="L",Jt=/^[0-9]+$/,te="rgba(192,192,192,"+(Ot?1e-4:.002)+")",ee="",ie="hover",ne="select",re="millisecond",se="second",ae="minute",oe="hour",le="day",ce="week",ue="month",de="year",he="stroke-width",pe={};pt.Highcharts=pt.Highcharts?L(16,!0):{},G=function(e,i,n){if(!d(i)||isNaN(i))return"Invalid date";e=f(e,"%Y-%m-%d %H:%M:%S");var r,s=new Date(i-J),a=s[et](),o=s[it](),l=s[nt](),c=s[rt](),u=s[st](),h=$.lang,p=h.weekdays,m=t({a:p[o].substr(0,3),A:p[o],d:_(l),e:l,b:h.shortMonths[c],B:h.months[c],m:_(c+1),y:u.toString().substr(2,2),Y:u,H:_(a),I:_(a%12||12),l:a%12||12,M:_(s[tt]()),p:a<12?"AM":"PM",P:a<12?"am":"pm",S:_(s.getSeconds()),L:_(mt(i%1e3),3)},Highcharts.dateFormats);for(r in m)for(;-1!==e.indexOf("%"+r);)e=e.replace("%"+r,"function"==typeof m[r]?m[r](i):m[r]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},C.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},K=i(re,1,se,1e3,ae,6e4,oe,36e5,le,864e5,ce,6048e5,ue,26784e5,de,31556952e3),Y={init:function(t,e,i){e=e||"";var n,r,s,a,o,l=t.shift,c=e.indexOf("C")>-1,u=c?7:3,d=e.split(" "),h=[].concat(i),p=function(t){for(s=t.length;s--;)t[s]===Qt&&t.splice(s+1,0,t[s+1],t[s+2],t[s+1],t[s+2])};if(c&&(p(d),p(h)),t.isArea&&(a=d.splice(d.length-6,6),o=h.splice(h.length-6,6)),l<=h.length/u&&d.length===h.length)for(;l--;)h=[].concat(h).splice(0,u).concat(h);if(t.shift=0,d.length)for(n=h.length;d.length<n;)r=[].concat(d).splice(d.length-u,u),c&&(r[u-6]=r[u-2],r[u-5]=r[u-1]),d=d.concat(r);return a&&(d=d.concat(a),h=h.concat(o)),[d,h]},step:function(t,e,i,n){var r,s=[],a=t.length;if(1===i)s=n;else if(a===e.length&&i<1)for(;a--;)r=parseFloat(t[a]),s[a]=isNaN(r)?t[a]:i*parseFloat(e[a]-r)+r;else s=e;return s}},dt=pt.jQuery,pt.HighchartsAdapter=pt.HighchartsAdapter||dt&&{init:function(t){var e,i=dt.fx,n=i.step,s=dt.Tween,a=s&&s.propHooks,o=dt.cssHooks.opacity;dt.extend(dt.easing,{easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i}}),dt.each(["cur","_default","width","height","opacity"],function(t,e){var r,o=n;"cur"===e?o=i.prototype:"_default"===e&&s&&(o=a[e],e="set"),(r=o[e])&&(o[e]=function(i){var n;if("align"!==(i=t?i:this).prop)return(n=i.elem).attr?n.attr(i.prop,"cur"===e?H:i.now):r.apply(this,arguments)})}),b(o,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),e=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},s?a.d={set:e}:n.d=e,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i,t))return i},dt.fn.highcharts=function(){var t,e,i="Chart",n=arguments;return r(n[0])&&(i=n[0],n=Array.prototype.slice.call(n,1)),(t=n[0])!==H&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new Highcharts[i](t,n[1]),e=this),t===H&&(e=Ut[h(this[0],"data-highcharts-chart")]),e}},getScript:dt.getScript,inArray:dt.inArray,adapterRun:function(t,e){return dt(t)[e]()},grep:dt.grep,map:function(t,e){for(var i=[],n=0,r=t.length;n<r;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return dt(t).offset()},addEvent:function(t,e,i){dt(t).bind(e,i)},removeEvent:function(t,e,i){var n=ht.removeEventListener?"removeEventListener":"detachEvent";ht[n]&&t&&!t[n]&&(t[n]=function(){}),dt(t).unbind(e,i)},fireEvent:function(e,i,n,r){var s,a=dt.Event(i),o="detached"+i;!Et&&n&&(delete n.layerX,delete n.layerY),t(a,n),e[i]&&(e[o]=e[i],e[i]=null),dt.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),dt(e).trigger(a),e[o]&&(e[i]=e[o],e[o]=null),!r||a.isDefaultPrevented()||s||r(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===H&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,e,i){var n=dt(t);t.style||(t.style={}),e.d&&(t.toD=e.d,e.d=1),n.stop(),e.opacity!==H&&t.attr&&(e.opacity+="px"),n.animate(e,i)},stop:function(t){dt(t).stop()}};var fe=pt.HighchartsAdapter,me=fe||{};fe&&fe.init.call(fe,Y);var ge=me.adapterRun,ve=me.getScript,ye=me.inArray,_e=me.each,be=me.grep,we=me.offset,Te=me.map,ke=me.addEvent,Se=me.removeEvent,Ce=me.fireEvent,xe=me.washMouseEvent,Ee=me.animate,Ae=me.stop,Pe={enabled:!0,x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px"}},Ie=($={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.9/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.9/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Pe,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Wt,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Wt,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:qt,top:"1em"},style:{position:Wt,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ot,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:Lt?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}).plotOptions,Le=Ie.line;M();var De=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Oe=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Me=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,je=function(t){function i(t){t&&t.stops?c=Te(t.stops,function(t){return je(t[1])}):(l=De.exec(t))?u=[n(l[1]),n(l[2]),n(l[3]),parseFloat(l[4],10)]:(l=Oe.exec(t))?u=[n(l[1],16),n(l[2],16),n(l[3],16),1]:(l=Me.exec(t))&&(u=[n(l[1]),n(l[2]),n(l[3]),1])}function r(i){var n;return c?((n=e(t)).stops=[].concat(n.stops),_e(c,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=u&&!isNaN(u[0])?"rgb"===i?"rgb("+u[0]+","+u[1]+","+u[2]+")":"a"===i?u[3]:"rgba("+u.join(",")+")":t,n}function s(t){
if(c)_e(c,function(e){e.brighten(t)});else if(o(t)&&0!==t){var e;for(e=0;e<3;e++)u[e]+=n(255*t),u[e]<0&&(u[e]=0),u[e]>255&&(u[e]=255)}return this}function a(t){return u[3]=t,this}var l,c,u=[];return i(t),{get:r,brighten:s,rgba:u,setOpacity:a}};N.prototype={init:function(t,e){var i=this;i.element="span"===e?g(e):ht.createElementNS(Dt,e),i.renderer=t,i.attrSetters={}},opacity:1,animate:function(t,i,n){var r=f(i,X,!0);Ae(this),r?(r=e(r),n&&(r.complete=n),Ee(this,t,r)):(this.attr(t),n&&n())},attr:function(t,e){var i,s,a,o,l,c,u,p,m,g=this,v=g.element,y=v.nodeName.toLowerCase(),_=g.renderer,b=g.attrSetters,w=g.shadows,T=g;if(r(t)&&d(e)&&(i=t,(t={})[i]=e),r(t))i=t,"circle"===y?i={x:"cx",y:"cy"}[i]||i:"strokeWidth"===i&&(i="stroke-width"),T=h(v,i)||g[i]||0,"d"!==i&&"visibility"!==i&&"fill"!==i&&(T=parseFloat(T));else{for(i in t)if(c=!1,s=t[i],!1!==(a=b[i]&&b[i].call(g,s,i))){if(a!==H&&(s=a),"d"===i)s&&s.join&&(s=s.join(" ")),/(NaN| {2}|^$)/.test(s)&&(s="M 0 0");else if("x"===i&&"text"===y)for(o=0;o<v.childNodes.length;o++)h(l=v.childNodes[o],"x")===h(v,"x")&&h(l,"x",s);else if(!g.rotation||"x"!==i&&"y"!==i)if("fill"===i)s=_.color(s,v,i);else if("circle"!==y||"x"!==i&&"y"!==i)if("rect"===y&&"r"===i)h(v,{rx:s,ry:s}),c=!0;else if("translateX"===i||"translateY"===i||"rotation"===i||"verticalAlign"===i||"scaleX"===i||"scaleY"===i)m=!0,c=!0;else if("stroke"===i)s=_.color(s,v,i);else if("dashstyle"===i){if(i="stroke-dasharray","solid"===(s=s&&s.toLowerCase()))s=Kt;else if(s){for(o=(s=s.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;o--;)s[o]=n(s[o])*f(t["stroke-width"],g["stroke-width"]);s=s.join(",")}}else"width"===i?s=n(s):"align"===i?(i="text-anchor",s={left:"start",center:"middle",right:"end"}[s]):"title"===i&&((u=v.getElementsByTagName("title")[0])||(u=ht.createElementNS(Dt,"title"),v.appendChild(u)),u.textContent=s);else i={x:"cx",y:"cy"}[i]||i;else m=!0;if("strokeWidth"===i&&(i="stroke-width"),"stroke-width"!==i&&"stroke"!==i||(g[i]=s,g.stroke&&g["stroke-width"]?(h(v,"stroke",g.stroke),h(v,"stroke-width",g["stroke-width"]),g.hasStroke=!0):"stroke-width"===i&&0===s&&g.hasStroke&&(v.removeAttribute("stroke"),g.hasStroke=!1),c=!0),g.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(p||(g.symbolAttr(t),p=!0),c=!0),w&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i))for(o=w.length;o--;)h(w[o],i,"height"===i?yt(s-(w[o].cutHeight||0),0):s);("width"===i||"height"===i)&&"rect"===y&&s<0&&(s=0),g[i]=s,"text"===i?(s!==g.textStr&&delete g.bBox,g.textStr=s,g.added&&_.buildText(g)):c||h(v,i,s)}m&&g.updateTransform()}return T},addClass:function(t){var e=this.element,i=h(e,"class")||"";return-1===i.indexOf(t)&&h(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;_e(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=f(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Kt)},crisp:function(t,e,i,n,r){var s,a,o=this,l={},c={};for(s in t=t||o.strokeWidth||o.attr&&o.attr("stroke-width")||0,a=mt(t)%2/2,c.x=gt(e||o.x||0)+a,c.y=gt(i||o.y||0)+a,c.width=gt((n||o.width||0)-2*a),c.height=gt((r||o.height||0)-2*a),c.strokeWidth=t,c)o[s]!==c[s]&&(o[s]=l[s]=c[s]);return l},css:function(e){var i,r=this,s=r.element,a=r.textWidth=e&&e.width&&"text"===s.nodeName.toLowerCase()&&n(e.width),o="",l=function(t,e){return"-"+e.toLowerCase()};if(e&&e.color&&(e.fill=e.color),e=t(r.styles,e),r.styles=e,a&&delete e.width,Et&&!Ot)m(r.element,e);else{for(i in e)o+=i.replace(/([A-Z])/g,l)+":"+e[i]+";";h(s,"style",o)}return a&&r.added&&r.renderer.buildText(r),r},on:function(t,e){var i=this,n=i.element;return Rt&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Ct.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,r=e.scaleX,s=e.scaleY,a=e.inverted,o=e.rotation;a&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],a?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+(e.x||0)+" "+(e.y||0)+")"),(d(r)||d(s))&&t.push("scale("+f(r,1)+" "+f(s,1)+")"),t.length&&h(e.element,"transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,s,a,o,l,c={},d=this.renderer,h=d.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,i&&!r(i)||(this.alignTo=l=i||"renderer",u(h,this),h.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=f(i,d[l],d),n=t.align,s=t.verticalAlign,a=(i.x||0)+(t.x||0),o=(i.y||0)+(t.y||0),"right"!==n&&"center"!==n||(a+=(i.width-(t.width||0))/{right:1,center:2}[n]),c[e?"translateX":"x"]=mt(a),"bottom"!==s&&"middle"!==s||(o+=(i.height-(t.height||0))/({bottom:1,middle:2}[s]||1)),c[e?"translateY":"y"]=mt(o),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(){var e,i,n,r=this,s=r.bBox,a=r.renderer,o=r.rotation,l=r.element,c=r.styles,u=o*St,d=r.textStr;if((""===d||Jt.test(d))&&(n=d.length+"|"+c.fontSize+"|"+c.fontFamily,s=a.cache[n]),!s){if(l.namespaceURI===Dt||a.forExport){try{s=l.getBBox?t({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight}}catch(h){}(!s||s.width<0)&&(s={width:0,height:0})}else s=r.htmlGetBBox();a.isSVG&&(e=s.width,i=s.height,Et&&c&&"11px"===c.fontSize&&"16.9"===i.toPrecision(3)&&(s.height=i=14),o&&(s.width=bt(i*Tt(u))+bt(e*wt(u)),s.height=bt(i*wt(u))+bt(e*Tt(u)))),r.bBox=s,n&&(a.cache[n]=s)}return s},show:function(){return this.attr({visibility:Xt})},hide:function(){return this.attr({visibility:$t})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,i,r,s,a=this.renderer,o=t||a,l=o.element||a.box,c=l.childNodes,u=this.element,p=h(u,"zIndex");if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,this.textStr!==undefined&&a.buildText(this),p&&(o.handleZ=!0,p=n(p)),o.handleZ)for(r=0;r<c.length;r++)if(i=h(e=c[r],"zIndex"),e!==u&&(n(i)>p||!d(p)&&d(i))){l.insertBefore(u,e),s=!0;break}return s||l.appendChild(u),this.added=!0,Ce(this,"add"),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,r=n.element||{},s=n.shadows,a=n.renderer.isSVG&&"SPAN"===r.nodeName&&n.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,Ae(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(r),s&&_e(s,function(t){n.safeRemoveChild(t)});a&&0===a.div.childNodes.length;)t=a.parentGroup,n.safeRemoveChild(a.div),delete a.div,a=t;for(e in n.alignTo&&u(n.renderer.alignedObjects,n),n)delete n[e];return null},shadow:function(t,e,i){var n,r,s,a,o,l,c=[],u=this.element;if(t){for(a=f(t.width,3),o=(t.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+f(t.offsetX,1)+", "+f(t.offsetY,1)+")",n=1;n<=a;n++)s=2*a+1-2*n,h(r=u.cloneNode(0),{isShadow:"true",stroke:t.color||"black","stroke-opacity":o*n,"stroke-width":s,transform:"translate"+l,fill:Kt}),i&&(h(r,"height",yt(h(r,"height")-s,0)),r.cutHeight=s),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),c.push(r);this.shadows=c}return this}};var Re,Ne,Fe,Be,Ue=function(){this.init.apply(this,arguments)};if(Ue.prototype={Element:N,init:function(t,e,i,n){var r,s,a,o,l=this,c=location;s=(r=l.createElement("svg").attr({version:"1.1"})).element,t.appendChild(s),-1===t.innerHTML.indexOf("xmlns")&&h(s,"xmlns",Dt),l.isSVG=!0,l.box=s,l.boxWrapper=r,l.alignedObjects=[],l.url=(It||Pt)&&ht.getElementsByTagName("base").length?c.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(ht.createTextNode("Created with "+zt+" "+Vt)),l.defs=this.createElement("defs").add(),l.forExport=n,l.gradients={},l.cache={},l.setSize(e,i,!1),It&&t.getBoundingClientRect&&(l.subPixelFix=a=function(){m(t,{left:0,top:0}),o=t.getBoundingClientRect(),m(t,{left:vt(o.left)-o.left+Yt,top:vt(o.top)-o.top+Yt})},a(),ke(pt,"resize",a))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),P(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.subPixelFix&&Se(pt,"resize",t.subPixelFix),t.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e=t.element,i=this,r=i.forExport,s=f(t.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),a=e.childNodes,o=/style="([^"]+)"/,l=/href="(http[^"]+)"/,c=h(e,"x"),u=t.styles,d=t.textWidth,p=u&&u.lineHeight,g=a.length,v=function(t){return p?n(p):i.fontMetrics(/px$/.test(t&&t.style.fontSize)?t.style.fontSize:u.fontSize||11).h};g--;)e.removeChild(a[g]);d&&!t.added&&this.box.appendChild(e),""===s[s.length-1]&&s.pop(),_e(s,function(n,s){var a,p=0;n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),a=n.split("|||"),_e(a,function(n){if(""!==n||1===a.length){var f,g={},y=ht.createElementNS(Dt,"tspan");if(o.test(n)&&h(y,"style",f=n.match(o)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),l.test(n)&&!r&&(h(y,"onclick",'location.href="'+n.match(l)[1]+'"'),m(y,{cursor:"pointer"}))," "!==(n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"))&&(y.appendChild(ht.createTextNode(n)),p?g.dx=0:g.x=c,h(y,g),!p&&s&&(!Ot&&r&&m(y,{display:"block"}),h(y,"dy",v(y),Pt&&y.offsetHeight)),e.appendChild(y),p++,d))for(var _,b=n.replace(/([^\^])-/g,"$1- ").split(" "),w=b.length>1&&"nowrap"!==u.whiteSpace,T=t._clipHeight,k=[],S=v(),C=1;w&&(b.length||k.length);)delete t.bBox,_=t.getBBox().width,!Ot&&i.forExport&&(_=i.measureSpanWidth(y.firstChild.data,t.styles)),_>d&&1!==b.length?(y.removeChild(y.firstChild),k.unshift(b.pop())):(b=k,k=[],b.length&&(T&&++C*S>T?(b=["..."],t.attr("title",t.textStr)):(h(y=ht.createElementNS(Dt,"tspan"),{dy:S,x:c}),f&&h(y,"style",f),e.appendChild(y),_>d&&(d=_)))),b.length&&y.appendChild(ht.createTextNode(b.join(" ").replace(/- /g,"-")))}})})},button:function(i,n,r,s,a,o,l,c,u){var d,h,p,f,m,g,v=this.label(i,n,r,u,null,null,null,null,"button"),y=0,_="style",b={x1:0,y1:0,x2:0,y2:1};return a=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:b,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},a),p=a[_],delete a[_],o=e(a,{stroke:"#68A",fill:{linearGradient:b,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),f=o[_],delete o[_],l=e(a,{stroke:"#68A",fill:{linearGradient:b,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),m=l[_],delete l[_],c=e(a,{style:{color:"#CCC"}},c),g=c[_],delete c[_],ke(v.element,Et?"mouseover":"mouseenter",function(){3!==y&&v.attr(o).css(f)}),ke(v.element,Et?"mouseout":"mouseleave",function(){3!==y&&(d=[a,o,l][y],h=[p,f,m][y],v.attr(d).css(h))}),v.setState=function(t){v.state=y=t,t?2===t?v.attr(l).css(m):3===t&&v.attr(c).css(g):v.attr(a).css(p)},v.on("click",function(){3!==y&&s.call(v)}).attr(a).css(t({cursor:"default"},p))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=mt(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=mt(t[2])+e%2/2),t},path:function(e){var i={fill:Kt};return a(e)?i.d=e:s(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){var n=s(t)?t:{x:t,y:e,r:i};return this.createElement("circle").attr(n)},arc:function(t,e,i,n,r,a){var o;return s(t)&&(e=t.y,i=t.r,n=t.innerR,r=t.start,a=t.end,t=t.x),(o=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:r||0,end:a||0})).r=i,o},rect:function(t,e,i,n,r,a){r=s(t)?t.r:r;var o=this.createElement("rect").attr({rx:r,ry:r,fill:Kt});return o.attr(s(t)?t:o.crisp(a,t,e,yt(i,0),yt(n,0)))},setSize:function(t,e,i){var n=this,r=n.alignedObjects,s=r.length;for(n.width=t,n.height=e,n.boxWrapper[f(i,!0)?"animate":"attr"]({width:t,height:e});s--;)r[s].align()},g:function(t){var e=this.createElement("g");return d(t)?e.attr({"class":Gt+t}):e},image:function(e,i,n,r,s){var a,o={preserveAspectRatio:Kt};return arguments.length>1&&t(o,{x:i,y:n,width:r,height:s}),(a=this.createElement("image").attr(o)).element.setAttributeNS?a.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):a.element.setAttribute("hc-svg-href",e),a},symbol:function(e,i,n,r,s,a){var o,l,c,u,d=this.symbols[e],h=d&&d(mt(i),mt(n),r,s,a),p=/^url\((.*?)\)$/;return h?(t(o=this.path(h),{symbolName:e,x:i,y:n,width:r,height:s}),a&&t(o,a)):p.test(e)&&(u=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(mt((r-e[0])/2),mt((s-e[1])/2)))},l=e.match(p)[1],c=Nt[l],(o=this.image(l).attr({x:i,y:n})).isImg=!0,c?u(o,c):(o.attr({width:0,height:0}),g("img",{onload:function(){u(o,Nt[l]=[this.width,this.height])},src:l}))),o},symbols:{circle:function(t,e,i,n){var r=.166*i;return[Qt,t+i/2,e,"C",t+i+r,e,t+i+r,e+n,t+i/2,e+n,"C",t-r,e+n,t-r,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[Qt,t,e,Zt,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[Qt,t+i/2,e,Zt,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[Qt,t,e,Zt,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[Qt,t+i/2,e,Zt,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,r){var s=r.start,a=r.r||i||n,o=r.end-.001,l=r.innerR,c=r.open,u=wt(s),d=Tt(s),h=wt(o),p=Tt(o),f=r.end-s<kt?0:1;return[Qt,t+a*u,e+a*d,"A",a,a,0,f,1,t+a*h,e+a*p,c?Qt:Zt,t+l*h,e+l*p,"A",l,l,0,f,0,t+l*u,e+l*d,c?"":"Z"]}},clipRect:function(t,e,i,n){var r,s=Gt+Ft++,a=this.createElement("clipPath").attr({id:s}).add(this.defs);return(r=this.rect(t,e,i,n,0).add(a)).id=s,r.clipPath=a,r},color:function(t,i,n){var r,s,o,l,c,u,p,f,m,g,v,y=this,_=/^rgba/,b=[];if(t&&t.linearGradient?s="linearGradient":t&&t.radialGradient&&(s="radialGradient"),s){for(g in o=t[s],l=y.gradients,u=t.stops,m=i.radialReference,a(o)&&(t[s]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&m&&!d(o.gradientUnits)&&(o=e(o,{cx:m[0]-m[2]/2+o.cx*m[2],cy:m[1]-m[2]/2+o.cy*m[2],r:o.r*m[2],gradientUnits:"userSpaceOnUse"})),o)"id"!==g&&b.push(g,o[g]);for(g in u)b.push(u[g]);return l[b=b.join(",")]?v=l[b].id:(o.id=v=Gt+Ft++,l[b]=c=y.createElement(s).attr(o).add(y.defs),c.stops=[],_e(u,function(t){var e;_.test(t[1])?(r=je(t[1]),p=r.get("rgb"),f=r.get("a")):(p=t[1],f=1),e=y.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":f}).add(c),c.stops.push(e)})),"url("+y.url+"#"+v+")"}return _.test(t)?(h(i,n+"-opacity",(r=je(t)).get("a")),r.get("rgb")):(i.removeAttribute(n+"-opacity"),t)},text:function(t,e,i,n){var r,s=this,a=$.chart.style,o=jt||!Ot&&s.forExport;return n&&!s.forExport?s.html(t,e,i):(e=mt(f(e,0)),i=mt(f(i,0)),r=s.createElement("text").attr({x:e,y:i,text:t}).css({fontFamily:a.fontFamily,fontSize:a.fontSize}),o&&r.css({position:Wt}),r.x=e,r.y=i,r)},fontMetrics:function(t){var e=(t=n(t||11))<24?t+4:mt(1.2*t);return{h:e,b:mt(.8*e)}},label:function(i,n,r,s,a,o,l,c,u){function h(){var t,i,n=x.element.style;v=(y===undefined||_===undefined||C.styles.textAlign)&&x.getBBox(),C.width=(y||v.width||0)+2*A+P,C.height=(_||v.height||0)+2*A,T=A+S.fontMetrics(n&&n.fontSize).b,k&&(g||(t=mt(-E*A),i=c?-T:0,C.box=g=s?S.symbol(s,t,i,C.width,C.height,L):S.rect(t,i,C.width,C.height,0,L[he]),g.add(C)),g.isImg||g.attr(e({width:C.width,height:C.height},L)),L=null)}function p(){var t,e=C.styles,i=e&&e.textAlign,n=P+A*(1-E);t=c?0:T,!d(y)||"center"!==i&&"right"!==i||(n+={center:.5,right:1}[i]*(y-v.width)),n===x.x&&t===x.y||x.attr({x:n,y:t}),x.x=n,x.y=t}function f(t,e){g?g.attr(t,e):L[t]=e}function m(){x.add(C),C.attr({text:i,x:n,y:r}),g&&d(a)&&C.attr({anchorX:a,anchorY:o})}var g,v,y,_,b,w,T,k,S=this,C=S.g(u),x=S.text("",0,0,l).attr({zIndex:1}),E=0,A=3,P=0,I=0,L={},D=C.attrSetters;ke(C,"add",m),D.width=function(t){return y=t,!1},D.height=function(t){return _=t,!1},D.padding=function(t){return d(t)&&t!==A&&(A=t,p()),!1},D.paddingLeft=function(t){return d(t)&&t!==P&&(P=t,p()),!1},D.align=function(t){return E={left:0,center:.5,right:1}[t],!1},D.text=function(t,e){return x.attr(e,t),h(),p(),!1},D[he]=function(t,e){return k=!0,I=t%2/2,f(e,t),!1},D.stroke=D.fill=D.r=function(t,e){return"fill"===e&&(k=!0),f(e,t),!1},D.anchorX=function(t,e){return a=t,f(e,t+I-b),!1},D.anchorY=function(t,e){return o=t,f(e,t-w),!1},D.x=function(t){return C.x=t,t-=E*((y||v.width)+A),b=mt(t),C.attr("translateX",b),!1},D.y=function(t){return w=C.y=mt(t),C.attr("translateY",w),!1};var O=C.css;return t(C,{css:function(t){if(t){var i={};t=e(t),_e(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],function(e){t[e]!==H&&(i[e]=t[e],delete t[e])}),x.css(i)}return O.call(C,t)},getBBox:function(){return{width:v.width+2*A,height:v.height+2*A,x:v.x-A,y:v.y-A}},shadow:function(t){return g&&g.shadow(t),C},destroy:function(){Se(C,"add",m),Se(C.element,"mouseenter"),Se(C.element,"mouseleave"),x&&(x=x.destroy()),g&&(g=g.destroy()),N.prototype.destroy.call(C),C=S=h=p=f=m=null}})}},W=Ue,t(N.prototype,{htmlCss:function(e){var i=this,n=i.element,r=e&&"SPAN"===n.tagName&&e.width;return r&&(delete e.width,i.textWidth=r,i.updateTransform()),i.styles=t(i.styles,e),m(i.element,e),i},htmlGetBBox:function(){var t=this,e=t.element,i=t.bBox;return i||("text"===e.nodeName&&(e.style.position=Wt),i=t.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),i},htmlUpdateTransform:function(){if(this.added){var t=this,e=t.renderer,i=t.element,r=t.translateX||0,s=t.translateY||0,a=t.x||0,o=t.y||0,l=t.textAlign||"left",c={left:0,center:.5,right:1}[l],u=t.shadows;if(m(i,{marginLeft:r,marginTop:s}),u&&_e(u,function(t){m(t,{marginLeft:r+1,marginTop:s+1})}),t.inverted&&_e(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName){var h,p,g=t.rotation,v=n(t.textWidth),y=[g,l,i.innerHTML,t.textWidth].join(",");y!==t.cTT&&(p=e.fontMetrics(i.style.fontSize).b,d(g)&&t.setSpanRotation(g,c,p),(h=f(t.elemWidth,i.offsetWidth))>v&&/[ \-]/.test(i.textContent||i.innerText)&&(m(i,{width:v+Yt,display:"block",whiteSpace:"normal"}),h=v),t.getSpanCorrection(h,p,c,g,l)),m(i,{left:a+(t.xCorr||0)+Yt,top:o+(t.yCorr||0)+Yt}),Pt&&(p=i.offsetHeight),t.cTT=y}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},r=Et?"-ms-transform":Pt?"-webkit-transform":It?"MozTransform":xt?"-o-transform":"";n[r]=n.transform="rotate("+t+"deg)",n[r+(It?"Origin":"-origin")]=100*e+"% "+i+"px",m(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),t(Ue.prototype,{html:function(e,i,n){var r=$.chart.style,s=this.createElement("span"),a=s.attrSetters,o=s.element,l=s.renderer;return a.text=function(t){return t!==o.innerHTML&&delete this.bBox,o.innerHTML=t,!1},a.x=a.y=a.align=a.rotation=function(t,e){return"align"===e&&(e="textAlign"),s[e]=t,s.htmlUpdateTransform(),!1},s.attr({text:e,x:mt(i),y:mt(n)}).css({position:Wt,whiteSpace:"nowrap",fontFamily:r.fontFamily,fontSize:r.fontSize}),s.css=s.htmlCss,l.isSVG&&(s.add=function(e){var i,n,r=l.box.parentNode,a=[];if(this.parentGroup=e,e){if(!(i=e.div)){for(n=e;n;)a.push(n),n=n.parentGroup;_e(a.reverse(),function(e){var n;i=e.div=e.div||g(Ht,{className:h(e.element,"class")},{position:Wt,left:(e.translateX||0)+Yt,top:(e.translateY||0)+Yt},i||r),n=i.style,t(e.attrSetters,{translateX:function(t){n.left=t+Yt},translateY:function(t){n.top=t+Yt},visibility:function(t,e){n[e]=t}})})}}else i=r;return i.appendChild(o),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s}}),!Ot&&!jt){Highcharts.VMLElement=Ne={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],r=["position: ",Wt,";"],s=e===Ht;("shape"===e||s)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",s?$t:Xt),n.push(' style="',r.join(""),'"/>'),e&&(n=s||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=g(n)),i.renderer=t,i.attrSetters={}},add:function(t){var e=this,i=e.renderer,n=e.element,r=i.box,s=t&&t.inverted,a=t?t.element||t:r;return s&&i.invertChild(n,a),a.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),Ce(e,"add"),e},updateTransform:N.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=wt(t*St),i=Tt(t*St);m(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Kt})},getSpanCorrection:function(t,e,i,n,r){var s,a=n?wt(n*St):1,o=n?Tt(n*St):0,l=f(this.elemHeight,this.element.offsetHeight),c=r&&"left"!==r;this.xCorr=a<0&&-t,this.yCorr=o<0&&-l,s=a*o<0,this.xCorr+=o*e*(s?1-i:i),this.yCorr-=a*e*(n?s?i:1-i:1),c&&(this.xCorr-=t*i*(a<0?-1:1),n&&(this.yCorr-=l*i*(o<0?-1:1)),m(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)o(t[e])?i[e]=mt(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},attr:function(t,e){var i,n,s,a,l,c,u=this,p=u.element||{},f=p.style,m=p.nodeName,v=u.renderer,y=u.symbolName,_=u.shadows,b=u.attrSetters,w=u;if(r(t)&&d(e)&&(i=t,(t={})[i]=e),r(t))w="strokeWidth"===(i=t)||"stroke-width"===i?u.strokeweight:u[i];else for(i in t)if(n=t[i],c=!1,!1!==(a=b[i]&&b[i].call(u,n,i))&&null!==n){if(a!==H&&(n=a),y&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(i))l||(u.symbolAttr(t),l=!0),c=!0;else if("d"===i){if(n=n||[],u.d=n.join(" "),p.path=n=u.pathToVML(n),_)for(s=_.length;s--;)_[s].path=_[s].cutOff?this.cutOffPath(n,_[s].cutOff):n;c=!0}else if("visibility"===i){if(_)for(s=_.length;s--;)_[s].style[i]=n;"DIV"===m&&(n=n===$t?"-999em":0,At||(f[i]=n?Xt:$t),i="top"),f[i]=n,c=!0}else if("zIndex"===i)n&&(f[i]=n),c=!0;else if(-1!==ye(i,["x","y","width","height"]))u[i]=n,"x"===i||"y"===i?i={x:"left",y:"top"}[i]:n=yt(0,n),u.updateClipping?(u[i]=n,u.updateClipping()):f[i]=n,c=!0;else if("class"===i&&"DIV"===m)p.className=n;else if("stroke"===i)n=v.color(n,p,i),i="strokecolor";else if("stroke-width"===i||"strokeWidth"===i)p.stroked=!!n,u[i="strokeweight"]=n,o(n)&&(n+=Yt);else if("dashstyle"===i){(p.getElementsByTagName("stroke")[0]||g(v.prepVML(["<stroke/>"]),null,null,p))[i]=n||"solid",u.dashstyle=n,c=!0}else"fill"===i?"SPAN"===m?f.color=n:"IMG"!==m&&(p.filled=n!==Kt,n=v.color(n,p,i,u),i="fillcolor"):"opacity"===i?c=!0:"shape"===m&&"rotation"===i?(u[i]=p.style[i]=n,p.style.left=-mt(Tt(n*St)+1)+Yt,p.style.top=mt(wt(n*St))+Yt):"translateX"!==i&&"translateY"!==i&&"rotation"!==i||(u[i]=n,u.updateTransform(),c=!0);c||(At?p[i]=n:h(p,i,n))}return w},clip:function(t){var e,i,n=this;return t?(u(e=t.members,n),e.push(n),n.destroyClip=function(){u(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:At?"inherit":"rect(auto)"}),n.css(i)},css:N.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&I(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),N.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=pt.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return 9!==(i=(t=t.split(/[ ,]/)).length)&&11!==i||(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var r,s,a,o,l,c,u,d=[],h=this.element,p=this.renderer,m=h.style,v=h.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,t){for(c=f(t.width,3),u=(t.opacity||.15)/c,r=1;r<=3;r++)o=2*c+1-2*r,i&&(l=this.cutOffPath(v.value,o+.5)),a=['<shape isShadow="true" strokeweight="',o,'" filled="false" path="',l,'" coordsize="10 10" style="',h.style.cssText,'" />'],s=g(p.prepVML(a),null,{left:n(m.left)+f(t.offsetX,1),top:n(m.top)+f(t.offsetY,1)}),i&&(s.cutOff=o+1),a=['<stroke color="',t.color||"black",'" opacity="',u*r,'"/>'],g(p.prepVML(a),null,null,s),e?e.element.appendChild(s):h.parentNode.insertBefore(s,h),d.push(s);this.shadows=d}return this}};var ze={Element:Ne=v(N,Ne),isIE8:Ct.indexOf("MSIE 8.0")>-1,init:function(t,e,i){var n,r,s,a=this;if(a.alignedObjects=[],(r=(n=a.createElement(Ht)).element).style.position=qt,t.appendChild(n.element),a.isVML=!0,a.box=r,a.boxWrapper=n,a.cache={},a.setSize(e,i,!1),!ht.namespaces.hcv){ht.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),s="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{ht.createStyleSheet().cssText=s}catch(o){ht.styleSheets[0].cssText+=s}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,r){var a=this.createElement(),o=s(e);return t(a,{members:[],left:(o?e.x:e)+1,top:(o?e.y:i)+1,width:(o?e.width:n)-1,height:(o?e.height:r)-1,getCSS:function(e){var i=e.element,n=i.nodeName,r="shape"===n,s=e.inverted,a=this,o=a.top-(r?i.offsetTop:0),l=a.left,c=l+a.width,u=o+a.height,d={clip:"rect("+mt(s?l:o)+"px,"+mt(s?u:c)+"px,"+mt(s?c:u)+"px,"+mt(s?o:l)+"px)"};return!s&&At&&"DIV"===n&&t(d,{width:c+Yt,height:u+Yt}),d},updateClipping:function(){_e(a.members,function(t){t.css(a.getCSS(t))})}})},color:function(t,e,i,n){var r,s,a,o=this,l=/^rgba/,c=Kt;if(t&&t.linearGradient?a="gradient":t&&t.radialGradient&&(a="pattern"),a){var u,d,h,p,f,m,v,y,_,b,w,T,k=t.linearGradient||t.radialGradient,S="",C=t.stops,x=[],E=function(){s=['<fill colors="'+x.join(",")+'" opacity="',y,'" o:opacity2="',v,'" type="',a,'" ',S,'focus="100%" method="any" />'],g(o.prepVML(s),null,null,e)};if(w=C[0],T=C[C.length-1],w[0]>0&&C.unshift([0,w[1]]),T[0]<1&&C.push([1,T[1]]),_e(C,function(t,e){l.test(t[1])?(r=je(t[1]),u=r.get("rgb"),d=r.get("a")):(u=t[1],d=1),x.push(100*t[0]+"% "+u),e?(y=d,_=u):(v=d,b=u)}),"fill"===i)if("gradient"===a)h=k.x1||k[0]||0,p=k.y1||k[1]||0,f=k.x2||k[2]||0,m=k.y2||k[3]||0,S='angle="'+(90-180*ft.atan((m-p)/(f-h))/kt)+'"',E();else{var A,P=k.r,I=2*P,L=2*P,D=k.cx,O=k.cy,M=e.radialReference,j=function(){M&&(A=n.getBBox(),D+=(M[0]-A.x)/A.width-.5,O+=(M[1]-A.y)/A.height-.5,I*=M[2]/A.width,L*=M[2]/A.height),S='src="'+$.global.VMLRadialGradientURL+'" size="'+I+","+L+'" origin="0.5,0.5" position="'+D+","+O+'" color2="'+b+'" ',E()};n.added?j():ke(n,"add",j),c=_}else c=u}else if(l.test(t)&&"IMG"!==e.tagName)r=je(t),s=["<",i,' opacity="',r.get("a"),'"/>'],g(this.prepVML(s),null,null,e),c=r.get("rgb");else{var R=e.getElementsByTagName(i);R.length&&(R[0].opacity=1,R[0].type="solid"),c=t}return c},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),t=i?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:Ue.prototype.html,path:function(e){var i={coordsize:"10 10"};return a(e)?i.d=e:s(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return s(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:Gt+t,"class":Gt+t}),this.createElement(Ht).attr(e)},image:function(t,e,i,n,r){var s=this.createElement("img").attr({src:t});return arguments.length>1&&s.attr({x:e,y:i,width:n,height:r}),s},rect:function(t,e,i,n,r,a){var o=this.symbol("rect");return o.r=s(t)?t.r:r,o.attr(s(t)?t:o.crisp(a,t,e,yt(i,0),yt(n,0)))},invertChild:function(t,e){var i=e.style;m(t,{flip:"x",left:n(i.width)-1,top:n(i.height)-1,rotation:-90})},symbols:{arc:function(t,e,i,n,r){var s,a=r.start,o=r.end,l=r.r||i||n,c=r.innerR,u=wt(a),d=Tt(a),h=wt(o),p=Tt(o);return o-a==0?["x"]:(s=["wa",t-l,e-l,t+l,e+l,t+l*u,e+l*d,t+l*h,e+l*p],r.open&&!c&&s.push("e",Qt,t,e),s.push("at",t-c,e-c,t+c,e+c,t+c*h,e+c*p,t+c*u,e+c*d,"x","e"),s.isArc=!0,s)},circle:function(t,e,i,n,r){return r&&(i=n=2*r.r),r&&r.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,r){var s,a,o=t+i,l=e+n;return d(r)&&r.r?(a=_t(r.r,i,n),s=[Qt,t+a,e,Zt,o-a,e,"wa",o-2*a,e,o,e+2*a,o-a,e,o,e+a,Zt,o,l-a,"wa",o-2*a,l-2*a,o,l,o,l-a,o-a,l,Zt,t+a,l,"wa",t,l-2*a,t+2*a,l,t+a,l,t,l-a,Zt,t,e+a,"wa",t,e,t+2*a,e+2*a,t,e+a,t+a,e,"x","e"]):s=Ue.prototype.symbols.square.apply(0,arguments),s}}};Highcharts.VMLRenderer=Re=function(){this.init.apply(this,arguments)},Re.prototype=e(Ue.prototype,ze),W=Re}Ue.prototype.measureSpanWidth=function(t,e){var i,n=ht.createElement("span"),r=ht.createTextNode(t);return n.appendChild(r),m(n,e),this.box.appendChild(n),i=n.offsetWidth,I(n),i},jt&&(Highcharts.CanVGRenderer=Fe=function(){Dt="http://www.w3.org/1999/xhtml"},Fe.prototype.symbols={},Be=function(){function t(){var t,i=e.length;for(t=0;t<i;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&ve(n,t),e.push(i)}}}(),W=Fe),F.prototype={addLabel:function(){var e,i,n,r,s=this,a=s.axis,l=a.options,u=a.chart,h=a.horiz,p=a.categories,m=a.names,g=s.pos,v=l.labels,y=a.tickPositions,_=h&&p&&!v.step&&!v.staggerLines&&!v.rotation&&u.plotWidth/y.length||!h&&(u.margin[3]||.33*u.chartWidth),b=g===y[0],w=g===y[y.length-1],T=p?f(p[g],m[g],g):g,k=s.label,S=y.info;a.isDatetimeAxis&&S&&(r=l.dateTimeLabelFormats[S.higherRanks[g]||S.unitName]),s.isFirst=b,s.isLast=w,e=a.labelFormatter.call({axis:a,chart:u,isFirst:b,isLast:w,dateTimeLabelFormat:r,value:a.isLog?D(c(T)):T}),i=t(i=_&&{width:yt(1,mt(_-2*(v.padding||10)))+Yt},v.style),d(k)?k&&k.attr({text:e}).css(i):(n={align:a.labelAlign},o(v.rotation)&&(n.rotation=v.rotation),_&&v.ellipsis&&(n._clipHeight=a.len/y.length),s.label=d(e)&&v.enabled?u.renderer.text(e,0,0,v.useHTML).attr(n).css(i).add(a.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,i=e.horiz,n=e.options.labels,r=i?t.width:t.height,s=i?r*{left:0,center:.5,right:1}[e.labelAlign]-n.x:r;return[-s,r-s]},handleOverflow:function(t,e){var i,n,r=!0,s=this.axis,a=this.isFirst,o=this.isLast,l=s.horiz?e.x:e.y,c=s.reversed,u=s.tickPositions,d=this.getLabelSides(),h=d[0],p=d[1],f=s.pos,m=f+s.len,g=this.label.line||0,v=s.labelEdge,y=s.justifyLabels&&(a||o);return v[g]===H||l+h>v[g]?v[g]=l+p:y||(r=!1),y&&(n=(i=s.ticks[u[t+(a?1:-1)]])&&i.label.xy&&i.label.xy.x+i.getLabelSides()[a?0:1],a&&!c||o&&c?l+h<f&&(l=f-h,i&&l+p>n&&(r=!1)):l+p>m&&(l=m-p,i&&l+h<n&&(r=!1)),e.x=l),r},getPosition:function(t,e,i,n){var r=this.axis,s=r.chart,a=n&&s.oldChartHeight||s.chartHeight;return{x:t?r.translate(e+i,null,null,n)+r.transB:r.left+r.offset+(r.opposite?(n&&s.oldChartWidth||s.chartWidth)-r.right-r.left:0),y:t?a-r.bottom+r.offset-(r.opposite?r.height:0):a-r.translate(e+i,null,null,n)-r.transB}},getLabelPosition:function(t,e,i,n,r,s,a,o){var l=this.axis,c=l.transA,u=l.reversed,h=l.staggerLines,p=l.chart.renderer.fontMetrics(r.style.fontSize).b,f=r.rotation;return t=t+r.x-(s&&n?s*c*(u?-1:1):0),e=e+r.y-(s&&!n?s*c*(u?1:-1):0),f&&2===l.side&&(e-=p-p*wt(f*St)),d(r.y)||f||(e+=p-i.getBBox().height/2),h&&(i.line=a/(o||1)%h,e+=i.line*(l.labelOffset/h)),{x:t,y:e}},getMarkPath:function(t,e,i,n,r,s){return s.crispLine([Qt,t,e,Zt,t+(r?0:-i),e+(r?i:0)],n)},render:function(t,e,i){var n,r,s,a=this,o=a.axis,l=o.options,c=o.chart.renderer,u=o.horiz,d=a.type,h=a.label,p=a.pos,m=l.labels,g=a.gridLine,v=d?d+"Grid":"grid",y=d?d+"Tick":"tick",_=l[v+"LineWidth"],b=l[v+"LineColor"],w=l[v+"LineDashStyle"],T=l[y+"Length"],k=l[y+"Width"]||0,S=l[y+"Color"],C=l[y+"Position"],x=a.mark,E=m.step,A=!0,P=o.tickmarkOffset,I=a.getPosition(u,p,P,e),L=I.x,D=I.y,O=u&&L===o.pos+o.len||!u&&D===o.pos?-1:1;this.isActive=!0,_&&(n=o.getPlotLinePath(p+P,_*O,e,!0),g===H&&(s={stroke:b,"stroke-width":_},w&&(s.dashstyle=w),d||(s.zIndex=1),e&&(s.opacity=0),a.gridLine=g=_?c.path(n).attr(s).add(o.gridGroup):null),!e&&g&&n&&g[a.isNew?"attr":"animate"]({d:n,opacity:i})),k&&T&&("inside"===C&&(T=-T),o.opposite&&(T=-T),r=a.getMarkPath(L,D,T,k*O,u,c),x?x.animate({d:r,opacity:i}):a.mark=c.path(r).attr({stroke:S,"stroke-width":k,opacity:i}).add(o.axisGroup)),h&&!isNaN(L)&&(h.xy=I=a.getLabelPosition(L,D,h,u,m,P,t,E),a.isFirst&&!a.isLast&&!f(l.showFirstLabel,1)||a.isLast&&!a.isFirst&&!f(l.showLastLabel,1)?A=!1:o.isRadial||m.step||m.rotation||e||0===i||(A=a.handleOverflow(t,I)),E&&t%E&&(A=!1),A&&!isNaN(I.y)?(I.opacity=i,h[a.isNew?"attr":"animate"](I),a.isNew=!1):h.attr("y",-9999))},destroy:function(){P(this,this.axis)}};var Ve=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)};Ve.prototype={
render:function(){var t,i,n,r,s,a,o,c=this,u=c.axis,h=u.horiz,p=(u.pointRange||0)/2,m=c.options,g=m.label,v=c.label,y=m.width,_=m.to,b=m.from,w=d(b)&&d(_),T=m.value,k=m.dashStyle,S=c.svgElem,C=[],x=m.color,P=m.zIndex,I=m.events,L=u.chart.renderer;if(u.isLog&&(b=l(b),_=l(_),T=l(T)),y)C=u.getPlotLinePath(T,y),o={stroke:x,"stroke-width":y},k&&(o.dashstyle=k);else{if(!w)return;b=yt(b,u.min-p),_=_t(_,u.max+p),C=u.getPlotBandPath(b,_,m),o={fill:x},m.borderWidth&&(o.stroke=m.borderColor,o["stroke-width"]=m.borderWidth)}if(d(P)&&(o.zIndex=P),S)C?S.animate({d:C},null,S.onGetPath):(S.hide(),S.onGetPath=function(){S.show()},v&&(c.label=v=v.destroy()));else if(C&&C.length&&(c.svgElem=S=L.path(C).attr(o).add(),I))for(i in t=function(t){S.on(t,function(e){I[t].apply(c,[e])})},I)t(i);return g&&d(g.text)&&C&&C.length&&u.width>0&&u.height>0?(g=e({align:h&&w&&"center",x:h?!w&&4:10,verticalAlign:!h&&w&&"middle",y:h?w?16:10:w?6:-4,rotation:h&&!w&&90},g),v||(c.label=v=L.text(g.text,0,0,g.useHTML).attr({align:g.textAlign||g.align,rotation:g.rotation,zIndex:P}).css(g.style).add()),n=[C[1],C[4],f(C[6],C[1])],r=[C[2],C[5],f(C[7],C[2])],s=E(n),a=E(r),v.align(g,!1,{x:s,y:a,width:A(n)-s,height:A(r)-a}),v.show()):v&&v.hide(),c},destroy:function(){u(this.axis.plotLinesAndBands,this),delete this.axis,P(this)}},Q={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new Ve(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();_e([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&u(e,e[r])})}},B.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Pe,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:Pe.style}},defaultLeftAxisOptions:{labels:{x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-5},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e);var r=this.options,s=r.type,a="datetime"===s;n.labelFormatter=r.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.chart=t,n.reversed=r.reversed,n.zoomEnabled=!1!==r.zoomEnabled,n.categories=r.categories||"category"===s,n.names=[],n.isLog="logarithmic"===s,n.isDatetimeAxis=a,n.isLinked=d(r.linkedTo),n.tickmarkOffset=n.categories&&"between"===r.tickmarkPlacement?.5:0,n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=r.minRange||r.maxZoom,n.range=r.range,n.offset=r.offset||0,n.stacks={},n.oldStacks={},n.stackExtremes={},n.max=null,n.min=null,n.crosshair=f(r.crosshair,p(t.options.tooltip.crosshairs)[i?0:1],!1);var o,u=n.options.events;for(o in-1===ye(n,t.axes)&&(t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===H&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine,u)ke(n,o,u[o]);n.isLog&&(n.val2lin=l,n.lin2val=c)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e($[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,r=i.categories,s=this.dateTimeLabelFormat,a=$.lang.numericSymbols,o=a&&a.length,l=i.options.labels.format,c=i.isLog?n:i.tickInterval;if(l)e=T(l,this);else if(r)e=n;else if(s)e=G(s,n);else if(o&&c>=1e3)for(;o--&&e===H;)c>=(t=Math.pow(1e3,o+1))&&null!==a[o]&&(e=y(n/t,-1)+a[o]);return e===H&&(e=n>=1e4?y(n,0):y(n,-1,H,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,t.stackExtremes={},t.buildStacks(),_e(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,r,s,a=i.options.threshold;t.hasVisibleSeries=!0,t.isLog&&a<=0&&(a=null),t.isXAxis?(n=i.xData).length&&(t.dataMin=_t(f(t.dataMin,n[0]),E(n)),t.dataMax=yt(f(t.dataMax,n[0]),A(n))):(i.getExtremes(),s=i.dataMax,d(r=i.dataMin)&&d(s)&&(t.dataMin=_t(f(t.dataMin,r),r),t.dataMax=yt(f(t.dataMax,s),s)),d(a)&&(t.dataMin>=a?(t.dataMin=a,t.ignoreMinPadding=!0):t.dataMax<a&&(t.dataMax=a,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,i,n,r,s){var a,l=this,c=l.len,u=1,d=0,h=n?l.oldTransA:l.transA,p=n?l.oldMin:l.min,f=l.minPixelPadding,m=(l.options.ordinal||l.isLog&&r)&&l.lin2val;return h||(h=l.transA),i&&(u*=-1,d=c),l.reversed&&(d-=(u*=-1)*c),e?(t=t*u+d,a=(t-=f)/h+p,m&&(a=l.lin2val(a))):(m&&(t=l.val2lin(t)),"between"===s&&(s=.5),a=u*(t-p)*h+d+u*f+(o(s)?h*s*l.pointRange:0)),a},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,r){var s,a,o,l,c,u=this,d=u.chart,h=u.left,p=u.top,m=i&&d.oldChartHeight||d.chartHeight,g=i&&d.oldChartWidth||d.chartWidth,v=u.transB;return r=f(r,u.translate(t,null,null,i)),s=o=mt(r+v),a=l=mt(m-r-v),isNaN(r)?c=!0:u.horiz?(a=p,l=m-u.bottom,(s<h||s>h+u.width)&&(c=!0)):(s=h,o=g-u.right,(a<p||a>p+u.height)&&(c=!0)),c&&!n?null:d.renderer.crispLine([Qt,s,a,Zt,o,l],e||1)},getLinearTickPositions:function(t,e,i){var n,r,s=D(gt(e/t)*t),a=D(vt(i/t)*t),o=[];for(n=s;n<=a&&(o.push(n),(n=D(n+t))!==r);)r=n;return o},getMinorTickPositions:function(){var t,e,i,n=this,r=n.options,s=n.tickPositions,a=n.minorTickInterval,o=[];if(n.isLog)for(i=s.length,e=1;e<i;e++)o=o.concat(n.getLogTickPositions(a,s[e-1],s[e],!0));else if(n.isDatetimeAxis&&"auto"===r.minorTickInterval)(o=o.concat(n.getTimeTicks(n.normalizeTimeTickInterval(a),n.min,n.max,r.startOfWeek)))[0]<n.min&&o.shift();else for(t=n.min+(s[0]-n.min)%a;t<=n.max;t+=a)o.push(t);return o},adjustForMinRange:function(){var t,e,i,n,r,s,a,o,l=this,c=l.options,u=l.min,h=l.max,p=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===H&&!l.isLog&&(d(c.min)||d(c.max)?l.minRange=null:(_e(l.series,function(t){for(r=t.xData,s=t.xIncrement?1:r.length-1,i=s;i>0;i--)n=r[i]-r[i-1],(e===H||n<e)&&(e=n)}),l.minRange=_t(5*e,l.dataMax-l.dataMin))),h-u<l.minRange){var m=l.minRange;a=[u-(t=(m-h+u)/2),f(c.min,u-t)],p&&(a[2]=l.dataMin),o=[(u=A(a))+m,f(c.max,u+m)],p&&(o[2]=l.dataMax),(h=E(o))-u<m&&(a[0]=h-m,a[1]=f(c.min,h-m),u=A(a))}l.min=u,l.max=h},setAxisTranslation:function(t){var e,i,n=this,s=n.max-n.min,a=0,o=0,l=0,c=n.linkedParent,u=!!n.categories,h=n.transA;(n.isXAxis||u)&&(c?(o=c.minPointOffset,l=c.pointRangePadding):_e(n.series,function(t){var i=yt(t.pointRange,+u),n=t.options.pointPlacement,c=t.closestPointRange;i>s&&(i=0),a=yt(a,i),o=yt(o,r(n)?0:i/2),l=yt(l,"on"===n?0:i),!t.noSharedTooltip&&d(c)&&(e=d(e)?_t(e,c):c)}),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=o*=i,n.pointRangePadding=l*=i,n.pointRange=_t(a,s),n.closestPointRange=e),t&&(n.oldTransA=h),n.translationSlope=n.transA=h=n.len/(s+l||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=h*o},setTickPositions:function(t){var e,i,n,r,s=this,a=s.chart,o=s.options,c=s.isLog,u=s.isDatetimeAxis,h=s.isXAxis,p=s.isLinked,m=s.options.tickPositioner,g=o.maxPadding,v=o.minPadding,y=o.tickInterval,_=o.minTickInterval,b=o.tickPixelInterval,w=s.categories;if(p?(s.linkedParent=a[s.coll][o.linkedTo],i=s.linkedParent.getExtremes(),s.min=f(i.min,i.dataMin),s.max=f(i.max,i.dataMax),o.type!==s.linkedParent.options.type&&L(11,1)):(s.min=f(s.userMin,o.min,s.dataMin),s.max=f(s.userMax,o.max,s.dataMax)),c&&(!t&&_t(s.min,f(s.dataMin,s.min))<=0&&L(10,1),s.min=D(l(s.min)),s.max=D(l(s.max))),s.range&&d(s.max)&&(s.userMin=s.min=yt(s.min,s.max-s.range),s.userMax=s.max,s.range=null),s.beforePadding&&s.beforePadding(),s.adjustForMinRange(),w||s.usePercentage||p||!d(s.min)||!d(s.max)||(e=s.max-s.min)&&(d(o.min)||d(s.userMin)||!v||!(s.dataMin<0)&&s.ignoreMinPadding||(s.min-=e*v),d(o.max)||d(s.userMax)||!g||!(s.dataMax>0)&&s.ignoreMaxPadding||(s.max+=e*g)),s.min===s.max||s.min===undefined||s.max===undefined?s.tickInterval=1:p&&!y&&b===s.linkedParent.options.tickPixelInterval?s.tickInterval=s.linkedParent.tickInterval:(s.tickInterval=f(y,w?1:(s.max-s.min)*b/yt(s.len,b)),!d(y)&&s.len<b&&!this.isRadial&&!w&&o.startOnTick&&o.endOnTick&&(r=!0,s.tickInterval/=4)),h&&!t&&_e(s.series,function(t){t.processData(s.min!==s.oldMin||s.max!==s.oldMax)}),s.setAxisTranslation(!0),s.beforeSetTickPositions&&s.beforeSetTickPositions(),s.postProcessTickInterval&&(s.tickInterval=s.postProcessTickInterval(s.tickInterval)),s.pointRange&&(s.tickInterval=yt(s.pointRange,s.tickInterval)),!y&&s.tickInterval<_&&(s.tickInterval=_),u||c||y||(s.tickInterval=S(s.tickInterval,null,k(s.tickInterval),o)),s.minorTickInterval="auto"===o.minorTickInterval&&s.tickInterval?s.tickInterval/5:o.minorTickInterval,s.tickPositions=n=o.tickPositions?[].concat(o.tickPositions):m&&m.apply(s,[s.min,s.max]),n||(!s.ordinalPositions&&(s.max-s.min)/s.tickInterval>yt(2*s.len,200)&&L(19,!0),n=u?s.getTimeTicks(s.normalizeTimeTickInterval(s.tickInterval,o.units),s.min,s.max,o.startOfWeek,s.ordinalPositions,s.closestPointRange,!0):c?s.getLogTickPositions(s.tickInterval,s.min,s.max):s.getLinearTickPositions(s.tickInterval,s.min,s.max),r&&n.splice(1,n.length-2),s.tickPositions=n),!p){var T,C=n[0],x=n[n.length-1],E=s.minPointOffset||0;o.startOnTick?s.min=C:s.min-E>C&&n.shift(),o.endOnTick?s.max=x:s.max+E<x&&n.pop(),1===n.length&&(T=.001,s.min-=T,s.max+=T)}},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&!1!==this.options.alignTicks&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this,e=t.chart,i=t._maxTicksKey,n=t.tickPositions,r=e.maxTicks;if(r&&r[i]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&!1!==t.options.alignTicks&&this.min!==H){var s,a=t.tickAmount,o=n.length;if(t.tickAmount=s=r[i],o<s){for(;n.length<s;)n.push(D(n[n.length-1]+t.tickInterval));t.transA*=(o-1)/(s-1),t.max=n[n.length-1]}d(a)&&s!==a&&(t.isDirty=!0)}},setScale:function(){var t,e,i,n,r=this,s=r.stacks;if(r.oldMin=r.min,r.oldMax=r.max,r.oldAxisLength=r.len,r.setAxisSize(),n=r.len!==r.oldAxisLength,_e(r.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),n||i||r.isLinked||r.forceRedraw||r.userMin!==r.oldUserMin||r.userMax!==r.oldUserMax){if(!r.isXAxis)for(t in s)for(e in s[t])s[t][e].total=null,s[t][e].cum=0;r.forceRedraw=!1,r.getSeriesExtremes(),r.setTickPositions(),r.oldUserMin=r.userMin,r.oldUserMax=r.userMax,r.isDirty||(r.isDirty=n||r.min!==r.oldMin||r.max!==r.oldMax)}else if(!r.isXAxis)for(t in r.oldStacks&&(s=r.stacks=r.oldStacks),s)for(e in s[t])s[t][e].cum=s[t][e].total;r.setMaxTicks()},setExtremes:function(e,i,n,r,s){var a=this,o=a.chart;n=f(n,!0),s=t(s,{min:e,max:i}),Ce(a,"setExtremes",s,function(){a.userMin=e,a.userMax=i,a.eventArgs=s,a.isDirtyExtremes=!0,n&&o.redraw(r)})},zoom:function(t,e){return this.allowZoomOutside||(d(this.dataMin)&&t<=this.dataMin&&(t=H),d(this.dataMax)&&e>=this.dataMax&&(e=H)),this.displayBtn=t!==H||e!==H,this.setExtremes(t,e,!1,H,{trigger:"zoom"}),!0},setAxisSize:function(){var t,e,i,n,r=this.chart,s=this.options,a=s.offsetLeft||0,o=s.offsetRight||0,l=this.horiz;this.left=n=f(s.left,r.plotLeft+a),this.top=i=f(s.top,r.plotTop),this.width=t=f(s.width,r.plotWidth-a+o),this.height=e=f(s.height,r.plotHeight),this.bottom=r.chartHeight-e-i,this.right=r.chartWidth-t-n,this.len=yt(l?t:e,0),this.pos=l?n:i},getExtremes:function(){var t=this,e=t.isLog;return{min:e?D(c(t.min)):t.min,max:e?D(c(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?c(e.min):e.min,r=i?c(e.max):e.max;return n>t||null===t?t=n:r<t&&(t=r),e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e=(f(t,0)-90*this.side+720)%360;return e>15&&e<165?"right":e>195&&e<345?"left":"center"},getOffset:function(){var t,e,i,n,r,s,a,o,l,c,u,h,p,m=this,g=m.chart,v=g.renderer,y=m.options,_=m.tickPositions,b=m.ticks,w=m.horiz,T=m.side,k=g.inverted?[1,0,3,2][T]:T,S=0,C=0,x=y.title,E=y.labels,A=0,P=g.axisOffset,I=g.clipOffset,L=[-1,1,1,-1][T],D=1,O=f(E.maxStaggerLines,5);if(m.hasData=t=m.hasVisibleSeries||d(m.min)&&d(m.max)&&!!_,m.showAxis=e=t||f(y.showEmpty,!0),m.staggerLines=m.horiz&&E.staggerLines,m.axisGroup||(m.gridGroup=v.g("grid").attr({zIndex:y.gridZIndex||1}).add(),m.axisGroup=v.g("axis").attr({zIndex:y.zIndex||2}).add(),m.labelGroup=v.g("axis-labels").attr({zIndex:E.zIndex||7}).add()),t||m.isLinked){if(m.labelAlign=f(E.align||m.autoLabelAlign(E.rotation)),_e(_,function(t){b[t]?b[t].addLabel():b[t]=new F(m,t)}),m.horiz&&!m.staggerLines&&O&&!E.rotation){for(s=m.reversed?[].concat(_).reverse():_;D<O;){for(a=[],o=!1,r=0;r<s.length;r++)l=s[r],p=r%D,(h=(c=b[l].label&&b[l].label.getBBox())?c.width:0)&&(u=m.translate(l),a[p]!==H&&u<a[p]&&(o=!0),a[p]=u+h);if(!o)break;D++}D>1&&(m.staggerLines=D)}_e(_,function(t){0!==T&&2!==T&&{1:"left",3:"right"}[T]!==m.labelAlign||(A=yt(b[t].getLabelSize(),A))}),m.staggerLines&&(A*=m.staggerLines,m.labelOffset=A)}else for(n in b)b[n].destroy(),delete b[n];x&&x.text&&!1!==x.enabled&&(m.axisTitle||(m.axisTitle=v.text(x.text,0,0,x.useHTML).attr({zIndex:7,rotation:x.rotation||0,align:x.textAlign||{low:"left",middle:"center",high:"right"}[x.align]}).css(x.style).add(m.axisGroup),m.axisTitle.isNew=!0),e&&(S=m.axisTitle.getBBox()[w?"height":"width"],C=f(x.margin,w?5:10),i=x.offset),m.axisTitle[e?"show":"hide"]()),m.offset=L*f(y.offset,P[T]),m.axisTitleMargin=f(i,A+C+(2!==T&&A&&L*y.labels[w?"y":"x"])),P[T]=yt(P[T],m.axisTitleMargin+S+L*m.offset),I[k]=yt(I[k],2*gt(y.lineWidth/2))},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,r=this.horiz,s=this.left+(i?this.width:0)+n,a=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([Qt,r?this.left:s,r?a:this.top,Zt,r?e.chartWidth-this.right:s,r?a:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,r=this.len,s=this.options.title,a=t?e:i,o=this.opposite,l=this.offset,c=n(s.style.fontSize||12),u={low:a+(t?0:r),middle:a+r/2,high:a+(t?r:0)}[s.align],d=(t?i+this.height:e)+(t?1:-1)*(o?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?u:d+(o?this.width:0)+l+(s.x||0),y:t?d-(o?this.height:0)+l:u+(s.y||0)}},render:function(){var t,e,i,n,r=this,s=r.horiz,a=r.reversed,o=r.chart,l=o.renderer,u=r.options,h=r.isLog,p=r.isLinked,f=r.tickPositions,m=r.axisTitle,g=r.stacks,v=r.ticks,y=r.minorTicks,_=r.alternateBands,b=u.stackLabels,w=u.alternateGridColor,T=r.tickmarkOffset,k=u.lineWidth,S=o.hasRendered&&d(r.oldMin)&&!isNaN(r.oldMin),C=r.hasData,x=r.showAxis,E=r.justifyLabels=!r.staggerLines&&s&&"justify"===u.labels.overflow;if(r.labelEdge.length=0,_e([v,y,_],function(t){var e;for(e in t)t[e].isActive=!1}),(C||p)&&(r.minorTickInterval&&!r.categories&&_e(r.getMinorTickPositions(),function(t){y[t]||(y[t]=new F(r,t,"minor")),S&&y[t].isNew&&y[t].render(null,!0),y[t].render(null,!1,1)}),f.length&&(t=f.slice(),(s&&a||!s&&!a)&&t.reverse(),E&&(t=t.slice(1).concat([t[0]])),_e(t,function(e,i){E&&(i=i===t.length-1?0:i+1),(!p||e>=r.min&&e<=r.max)&&(v[e]||(v[e]=new F(r,e)),S&&v[e].isNew&&v[e].render(i,!0,.1),v[e].render(i,!1,1))}),T&&0===r.min&&(v[-1]||(v[-1]=new F(r,-1,null,!0)),v[-1].render(-1))),w&&_e(f,function(t,e){e%2==0&&t<r.max&&(_[t]||(_[t]=new Ve(r)),i=t+T,n=f[e+1]!==H?f[e+1]+T:r.max,_[t].options={from:h?c(i):i,to:h?c(n):n,color:w},_[t].render(),_[t].isActive=!0)}),r._addedPlotLB||(_e((u.plotLines||[]).concat(u.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),_e([v,y,_],function(t){var e,i,n=[],r=X?X.duration||500:0,s=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==_&&o.hasRendered&&r?r&&setTimeout(s,r):s()}),k&&(e=r.getLinePath(k),r.axisLine?r.axisLine.animate({d:e}):r.axisLine=l.path(e).attr({stroke:u.lineColor,"stroke-width":k,zIndex:7}).add(r.axisGroup),r.axisLine[x?"show":"hide"]()),m&&x&&(m[m.isNew?"attr":"animate"](r.getTitlePosition()),m.isNew=!1),b&&b.enabled){var A,P,I,L=r.stackTotalGroup;for(A in L||(r.stackTotalGroup=L=l.g("stack-labels").attr({visibility:Xt,zIndex:6}).add()),L.translate(o.plotLeft,o.plotTop),g)for(I in P=g[A])P[I].render(L)}r.isDirty=!1},redraw:function(){var t=this,e=t.chart.pointer;e.reset&&e.reset(!0),t.render(),_e(t.plotLinesAndBands,function(t){t.render()}),_e(t.series,function(t){t.isDirty=!0})},buildStacks:function(){var t=this.series,e=t.length;if(!this.isXAxis){for(;e--;)t[e].setStackedPoints();if(this.usePercentage)for(e=0;e<t.length;e++)t[e].setPercentStacks()}},destroy:function(t){var e,i,n=this,r=n.stacks,s=n.plotLinesAndBands;for(e in t||Se(n),r)P(r[e]),r[e]=null;for(_e([n.ticks,n.minorTicks,n.alternateBands],function(t){P(t)}),i=s.length;i--;)s[i].destroy();_e(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair)if(!1!==(d(e)||!f(this.crosshair.snap,!0))){var i,n,r=this.crosshair,s=r.animation;if(f(r.snap,!0)?d(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,null!==(i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:f(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n)))if(this.cross)this.cross.attr({visibility:Xt})[s?"animate":"attr"]({d:i},s);else{var a={"stroke-width":r.width||1,stroke:r.color||"#C0C0C0",zIndex:r.zIndex||2};r.dashStyle&&(a.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(i).attr(a).add()}else this.hideCrosshair()}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(B.prototype,Q),B.prototype.getLogTickPositions=function(t,e,i,n){var r=this,s=r.options,a=r.len,o=[];if(n||(r._minorAutoInterval=null),t>=.5)t=mt(t),o=r.getLinearTickPositions(t,e,i);else if(t>=.08){var u,d,h,p,m,g,v;for(u=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],d=gt(e);d<i+1&&!v;d++)for(p=u.length,h=0;h<p&&!v;h++)(m=l(c(d)*u[h]))>e&&(!n||g<=i)&&o.push(g),g>i&&(v=!0),g=m}else{var y=c(e),_=c(i),b=s[n?"minorTickInterval":"tickInterval"],w="auto"===b?null:b,T=s.tickPixelInterval/(n?5:1),C=n?a/r.tickPositions.length:a;t=S(t=f(w,r._minorAutoInterval,(_-y)*T/(C||1)),null,k(t)),o=Te(r.getLinearTickPositions(t,y,_),l),n||(r._minorAutoInterval=t/5)}return n||(r.tickInterval=t),o},B.prototype.getTimeTicks=function(e,i,n,r){var s,a,o=[],l={},c=$.global.useUTC,u=new Date(i-J),h=e.unitRange,p=e.count;if(d(i)){h>=K[se]&&(u.setMilliseconds(0),u.setSeconds(h>=K[ae]?0:p*gt(u.getSeconds()/p))),h>=K[ae]&&u[at](h>=K[oe]?0:p*gt(u[tt]()/p)),h>=K[oe]&&u[ot](h>=K[le]?0:p*gt(u[et]()/p)),h>=K[le]&&u[lt](h>=K[ue]?1:p*gt(u[nt]()/p)),h>=K[ue]&&(u[ct](h>=K[de]?0:p*gt(u[rt]()/p)),a=u[st]()),h>=K[de]&&(a-=a%p,u[ut](a)),h===K[ce]&&u[lt](u[nt]()-u[it]()+f(r,1)),s=1,J&&(u=new Date(u.getTime()+J)),a=u[st]();for(var m=u.getTime(),g=u[rt](),v=u[nt](),y=c?J:(864e5+60*u.getTimezoneOffset()*1e3)%864e5;m<n;)o.push(m),h===K[de]?m=Z(a+s*p,0):h===K[ue]?m=Z(a,g+s*p):c||h!==K[le]&&h!==K[ce]?m+=h*p:m=Z(a,g,v+s*p*(h===K[le]?1:7)),s++;o.push(m),_e(be(o,function(t){return h<=K[oe]&&t%K[le]===y}),function(t){l[t]=le})}return o.info=t(e,{higherRanks:l,totalRange:h*p}),o},B.prototype.normalizeTimeTickInterval=function(t,e){var i,n=e||[[re,[1,2,5,10,20,25,50,100,200,500]],[se,[1,2,5,10,15,30]],[ae,[1,2,5,10,15,30]],[oe,[1,2,3,4,6,8,12]],[le,[1,2]],[ce,[1,2]],[ue,[1,2,3,4,6]],[de,null]],r=n[n.length-1],s=K[r[0]],a=r[1];for(i=0;i<n.length;i++){if(r=n[i],s=K[r[0]],a=r[1],n[i+1])if(t<=(s*a[a.length-1]+K[n[i+1][0]])/2)break}return s===K[de]&&t<5*s&&(a=[1,2,5]),{unitRange:s,count:S(t/s,a,r[0]===de?yt(k(t/s),1):1),unitName:r[0]}},U.prototype={destroy:function(){P(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?T(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:$t}):this.label=this.axis.chart.renderer.text(n,0,0,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:$t}).add(t)},setOffset:function(t,e){var i,n=this.axis,r=n.chart,s=r.inverted,a=this.isNegative,o=n.translate(this.percent?100:this.total,0,0,0,1),l=n.translate(0),c=bt(o-l),u=r.xAxis[0].translate(this.x)+t,d=r.plotHeight,h={x:s?a?o:o-c:u,y:s?d-u-e:a?d-o-c:d-o,width:s?c:e,height:s?e:c},p=this.label;p&&(p.align(this.alignOptions,null,h),i=p.alignAttr,p.attr({visibility:!1===this.options.crop||r.isInsidePlot(i.x,i.y)?Ot?"inherit":Xt:$t}))}},z.prototype={init:function(t,e){var i=e.borderWidth,r=e.style,s=n(r.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape,null,null,e.useHTML,null,"tooltip").attr({padding:s,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(r).css({padding:0}).add().attr({y:-999}),jt||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,r){var s=this,a=s.now,o=!1!==s.options.animation&&!s.isHidden;t(a,{x:o?(2*a.x+e)/3:e,y:o?(a.y+i)/2:i,anchorX:o?(2*a.anchorX+n)/3:n,anchorY:o?(a.anchorY+r)/2:r}),s.label.attr(a),o&&(bt(e-a.x)>1||bt(i-a.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(e,i,n,r)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},f(this.options.hideDelay,500)),t&&_e(t,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var i,n,r=this.chart,s=r.inverted,a=r.plotTop,o=0,l=0;return i=(t=p(t))[0].tooltipPos,this.followPointer&&e&&(e.chartX===H&&(e=r.pointer.normalize(e)),i=[e.chartX-r.plotLeft,e.chartY-a]),i||(_e(t,function(t){n=t.series.yAxis,o+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!s&&n?n.top-a:0)}),o/=t.length,l/=t.length,i=[s?r.plotWidth-l:o,this.shared&&!s&&t.length>1&&e?e.chartY-a:s?r.plotHeight-o:l]),Te(i,mt)},getPosition:function(t,e,i){var n,r=this.chart,s=r.plotLeft,a=r.plotTop,o=r.plotWidth,l=r.plotHeight,c=f(this.options.distance,12),u=i.plotX,d=i.plotY,h=u+s+(r.inverted?c:-t-c),p=d-e+a+15;return h<7&&(h=s+yt(u,0)+c),h+t>s+o&&(h-=h+t-(s+o),p=d-e+a-c,n=!0),p<a+5&&(p=a+5,n&&d>=p&&d<=p+e&&(p=d+a+c)),p+e>a+l&&(p=yt(a,a+l-e-c)),{x:h,y:p}},defaultFormatter:function(t){var e,i=this.points||p(this),n=i[0].series;return e=[n.tooltipHeaderFormatter(i[0])],_e(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,r,s,a,o,l=this,c=l.chart,u=l.label,d=l.options,h={},f=[],m=d.formatter||l.defaultFormatter,g=c.hoverPoints,v=l.shared;clearTimeout(this.hideTimer),l.followPointer=p(t)[0].series.tooltipOptions.followPointer,i=(r=l.getAnchor(t,e))[0],n=r[1],!v||t.series&&t.series.noSharedTooltip?h=t.getLabelConfig():(c.hoverPoints=t,g&&_e(g,function(t){t.setState()}),_e(t,function(t){t.setState(ie),f.push(t.getLabelConfig())}),(h={x:t[0].category,y:t[0].y}).points=f,t=t[0]),s=m.call(h,l),o=t.series,!1===s?this.hide():(l.isHidden&&(Ae(u),u.attr("opacity",1).show()),u.attr({text:s}),a=d.borderColor||t.color||o.color||"#606060",u.attr({stroke:a}),l.updatePosition({plotX:i,plotY:n}),this.isHidden=!1),Ce(c,"tooltipRefresh",{text:s,x:i+c.plotLeft,y:n+c.plotTop,borderColor:a})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(mt(n.x),mt(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)}};var He=Highcharts.Pointer=function(t,e){this.init(t,e)};He.prototype={init:function(t,e){var i,n,r=e.chart,s=r.events,a=jt?"":r.zoomType,o=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(a),this.zoomY=n=/y/.test(a),this.zoomHor=i&&!o||n&&o,this.zoomVert=n&&!o||i&&o,this.runChartClick=s&&!!s.click,this.pinchDown=[],this.lastValidTouch={},e.tooltip.enabled&&(t.tooltip=new z(t,e.tooltip)),this.setDOMEvents()},normalize:function(e,i){var n,r,s;return(e=e||pt.event).target||(e.target=e.srcElement),s=(e=xe(e)).touches?e.touches.item(0):e,i||(this.chartPosition=i=we(this.chart.container)),s.pageX===H?(n=yt(e.x,e.clientX-i.left),r=e.y):(n=s.pageX-i.left,r=s.pageY-i.top),t(e,{chartX:mt(n),chartY:mt(r)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return _e(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,r,s,a=this,o=a.chart,l=o.series,c=o.tooltip,u=o.hoverPoint,d=o.hoverSeries,h=o.chartWidth,p=a.getIndex(t);if(c&&a.options.tooltip.shared&&(!d||!d.noSharedTooltip)){for(i=[],n=l.length,r=0;r<n;r++)l[r].visible&&!1!==l[r].options.enableMouseTracking&&!l[r].noSharedTooltip&&l[r].tooltipPoints.length&&(e=l[r].tooltipPoints[p])&&e.series&&(e._dist=bt(p-e.clientX),h=_t(h,e._dist),i.push(e));for(n=i.length;n--;)i[n]._dist>h&&i.splice(n,1);i.length&&i[0].clientX!==a.hoverX&&(c.refresh(i,t),a.hoverX=i[0].clientX)}d&&d.tracker?(e=d.tooltipPoints[p])&&e!==u&&e.onMouseOver(t):c&&c.followPointer&&!c.isHidden&&(s=c.getAnchor([{}],t),c.updatePosition({plotX:s[0],plotY:s[1]})),c&&!a._onDocumentMouseMove&&(a._onDocumentMouseMove=function(t){a.onDocumentMouseMove(t)},ke(ht,"mousemove",a._onDocumentMouseMove)),_e(o.axes,function(i){i.drawCrosshair(t,f(e,u))})},reset:function(t){var e=this,i=e.chart,n=i.hoverSeries,r=i.hoverPoint,s=i.tooltip,a=s&&s.shared?i.hoverPoints:r;(t=t&&s&&a)&&p(a)[0].plotX===H&&(t=!1),t?(s.refresh(a),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),n&&n.onMouseOut(),s&&s.hide(),e._onDocumentMouseMove&&(Se(ht,"mousemove",e._onDocumentMouseMove),e._onDocumentMouseMove=null),_e(i.axes,function(t){t.hideCrosshair()}),e.hoverX=null)},scaleGroups:function(t,e){var i,n=this.chart;_e(n.series,function(r){i=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&(r.group.attr(i),r.markerGroup&&(r.markerGroup.attr(i),r.markerGroup.clip(e?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},pinchTranslate:function(t,e,i,n,r,s,a,o){t&&this.pinchTranslateDirection(!0,i,n,r,s,a,o),e&&this.pinchTranslateDirection(!1,i,n,r,s,a,o)},pinchTranslateDirection:function(t,e,i,n,r,s,a,o){var l,c,u,d,h,p,f=this.chart,m=t?"x":"y",g=t?"X":"Y",v="chart"+g,y=t?"width":"height",_=f["plot"+(t?"Left":"Top")],b=o||1,w=f.inverted,T=f.bounds[t?"h":"v"],k=1===e.length,S=e[0][v],C=i[0][v],x=!k&&e[1][v],E=!k&&i[1][v],A=function(){!k&&bt(S-x)>20&&(b=o||bt(C-E)/bt(S-x)),u=(_-C)/b+S,l=f["plot"+(t?"Width":"Height")]/b};A(),(c=u)<T.min?(c=T.min,d=!0):c+l>T.max&&(c=T.max-l,d=!0),d?(C-=.8*(C-a[m][0]),k||(E-=.8*(E-a[m][1])),A()):a[m]=[C,E],w||(s[m]=u-_,s[y]=l),p=w?t?"scaleY":"scaleX":"scale"+g,h=w?1/b:b,r[y]=l,r[m]=c,n[p]=b,n["translate"+g]=h*_+(C-h*S)},pinch:function(e){var i=this,n=i.chart,r=i.pinchDown,s=n.tooltip&&n.tooltip.options.followTouchMove,a=e.touches,o=a.length,l=i.lastValidTouch,c=i.zoomHor||i.pinchHor,u=i.zoomVert||i.pinchVert,d=c||u,h=i.selectionMarker,p={},f=1===o&&(i.inClass(e.target,Gt+"tracker")&&n.runTrackerClick||n.runChartClick),m={};!d&&!s||f||e.preventDefault(),Te(a,function(t){return i.normalize(t)}),"touchstart"===e.type?(_e(a,function(t,e){r[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[r[0].chartX,r[1]&&r[1].chartX],l.y=[r[0].chartY,r[1]&&r[1].chartY],_e(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,r=t.toPixels(t.dataMin),s=t.toPixels(t.dataMax),a=_t(r,s),o=yt(r,s);e.min=_t(t.pos,a-i),e.max=yt(t.pos+t.len,o+i)}})):r.length&&(h||(i.selectionMarker=h=t({destroy:Bt},n.plotBox)),i.pinchTranslate(c,u,r,a,p,h,m,l),i.hasPinched=d,i.scaleGroups(p,m),!d&&s&&1===o&&this.runPointActions(i.normalize(e)))},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,r=n.options.chart,s=t.chartX,a=t.chartY,o=this.zoomHor,l=this.zoomVert,c=n.plotLeft,u=n.plotTop,d=n.plotWidth,h=n.plotHeight,p=this.mouseDownX,f=this.mouseDownY;s<c?s=c:s>c+d&&(s=c+d),a<u?a=u:a>u+h&&(a=u+h),this.hasDragged=Math.sqrt(Math.pow(p-s,2)+Math.pow(f-a,2)),this.hasDragged>10&&(e=n.isInsidePlot(p-c,f-u),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(c,u,o?1:d,l?1:h,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&o&&(i=s-p,this.selectionMarker.attr({width:bt(i),x:(i>0?0:i)+p})),this.selectionMarker&&l&&(i=a-f,this.selectionMarker.attr({height:bt(i),y:(i>0?0:i)+f})),e&&!this.selectionMarker&&r.panning&&n.pan(t,r.panning))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var r,s={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},a=this.selectionMarker,o=a.x,l=a.y;(this.hasDragged||n)&&(_e(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.toValue(e?o:l),n=t.toValue(e?o+a.width:l+a.height);isNaN(i)||isNaN(n)||(s[t.coll].push({axis:t,min:_t(i,n),max:yt(i,n)}),r=!0)}}),r&&Ce(i,"selection",s,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(m(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){(t=this.normalize(t)).preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){this.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries;t=this.normalize(t,i),i&&n&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(t){var e=this.chart;t=this.normalize(t),"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=h(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(Gt+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement,n=i&&i.point&&i.point.series;!e||e.options.stickyTracking||this.inClass(i,Gt+"tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var i,n,r,s=this.chart,a=s.hoverPoint,o=s.plotLeft,l=s.plotTop,c=s.inverted;(e=this.normalize(e)).cancelBubble=!0,s.cancelClick||(a&&this.inClass(e.target,Gt+"tracker")?(i=this.chartPosition,n=a.plotX,r=a.plotY,t(a,{pageX:i.left+o+(c?s.plotWidth-r:n),pageY:i.top+l+(c?s.plotHeight-n:r)}),Ce(a.series,"click",t(e,{point:a})),s.hoverPoint&&a.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),s.isInsidePlot(e.chartX-o,e.chartY-l)&&Ce(s,"click",e)))},onContainerTouchStart:function(t){var e=this.chart;1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),
this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){1!==t.touches.length&&2!==t.touches.length||this.pinch(t)},onDocumentTouchEnd:function(t){this.drop(t)},setDOMEvents:function(){var t,e=this,i=e.chart.container;this._events=t=[[i,"onmousedown","onContainerMouseDown"],[i,"onmousemove","onContainerMouseMove"],[i,"onclick","onContainerClick"],[i,"mouseleave","onContainerMouseLeave"],[ht,"mouseup","onDocumentMouseUp"]],Rt&&t.push([i,"ontouchstart","onContainerTouchStart"],[i,"ontouchmove","onContainerTouchMove"],[ht,"touchend","onDocumentTouchEnd"]),_e(t,function(t){e["_"+t[2]]=function(i){e[t[2]](i)},0===t[1].indexOf("on")?t[0][t[1]]=e["_"+t[2]]:ke(t[0],t[1],e["_"+t[2]])})},destroy:function(){var t=this;_e(t._events,function(e){0===e[1].indexOf("on")?e[0][e[1]]=null:Se(e[0],e[1],t["_"+e[2]])}),delete t._events,clearInterval(t.tooltipTimeout)}};var We=Highcharts.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,r=n&&{cursor:n},s=function(i){var n,r=i.target;for(e.hoverSeries!==t&&t.onMouseOver();r&&!n;)n=r.point,r=r.parentNode;n!==H&&n!==e.hoverPoint&&n.onMouseOver(i)};_e(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(_e(t.trackerGroups,function(e){t[e]&&(t[e].addClass(Gt+"tracker").on("mouseover",s).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(r),Rt&&t[e].on("touchstart",s))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e,i=this,n=i.options,r=n.trackByArea,s=[].concat(r?i.areaPath:i.graphPath),a=s.length,o=i.chart,l=o.pointer,c=o.renderer,u=o.options.tooltip.snap,d=i.tracker,h=n.cursor,p=h&&{cursor:h},f=i.singlePoints,m=function(){o.hoverSeries!==i&&i.onMouseOver()};if(a&&!r)for(e=a+1;e--;)s[e]===Qt&&s.splice(e+1,0,s[e+1]-u,s[e+2],Zt),(e&&s[e]===Qt||e===a)&&s.splice(e,0,Zt,s[e-2]+u,s[e-1]);for(e=0;e<f.length;e++)t=f[e],s.push(Qt,t.plotX-u,t.plotY,Zt,t.plotX+u,t.plotY);d?d.attr({d:s}):(i.tracker=c.path(s).attr({"stroke-linejoin":"round",visibility:i.visible?Xt:$t,stroke:te,fill:r?te:Kt,"stroke-width":n.lineWidth+(r?0:2*u),zIndex:2}).add(i.group),_e([i.tracker,i.markerGroup],function(t){t.addClass(Gt+"tracker").on("mouseover",m).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(p),Rt&&t.on("touchstart",m)}))}};if(pt.PointerEvent||pt.MSPointerEvent){var qe={};He.prototype.getWebkitTouches=function(){var t,e=[];for(t in e.item=function(t){return this[t]},qe)qe.hasOwnProperty(t)&&e.push({pageX:qe[t].pageX,pageY:qe[t].pageY,target:qe[t].target});return e},b(He.prototype,"init",function(t,e,i){e.container.style["-ms-touch-action"]=e.container.style["touch-action"]="none",t.call(this,e,i)}),b(He.prototype,"setDOMEvents",function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1)),e=[[this.chart.container,"PointerDown","touchstart","onContainerTouchStart",function(t){qe[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}}],[this.chart.container,"PointerMove","touchmove","onContainerTouchMove",function(t){qe[t.pointerId]={pageX:t.pageX,pageY:t.pageY},qe[t.pointerId].target||(qe[t.pointerId].target=t.currentTarget)}],[document,"PointerUp","touchend","onDocumentTouchEnd",function(t){delete qe[t.pointerId]}]],_e(e,function(t){ke(t[0],window.PointerEvent?t[1].toLowerCase():"MS"+t[1],function(e){"touch"!==(e=e.originalEvent).pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||(t[4](e),i[t[3]]({type:t[2],target:e.currentTarget,preventDefault:Bt,touches:i.getWebkitTouches()}))})})})}var $e=Highcharts.Legend=function(t,e){this.init(t,e)};$e.prototype={init:function(t,i){var r=this,s=i.itemStyle,a=f(i.padding,8),o=i.itemMarginTop||0;this.options=i,i.enabled&&(r.baseline=n(s.fontSize)+3+o,r.itemStyle=s,r.itemHiddenStyle=e(s,i.itemHiddenStyle),r.itemMarginTop=o,r.padding=a,r.initialItemX=a,r.initialItemY=a-5,r.maxItemWidth=0,r.chart=t,r.itemHeight=0,r.lastLineHeight=0,r.symbolWidth=f(i.symbolWidth,16),r.pages=[],r.render(),ke(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,r=this,s=r.options,a=t.legendItem,o=t.legendLine,l=t.legendSymbol,c=r.itemHiddenStyle.color,u=e?s.itemStyle.color:c,d=e?t.legendColor||t.color:c,h=t.options&&t.options.marker,p={stroke:d,fill:d};if(a&&a.css({fill:u,color:u}),o&&o.attr({stroke:d}),l){if(h&&l.isMarker)for(i in h=t.convertAttribs(h))(n=h[i])!==H&&(p[i]=n);l.attr(p)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,r=!i.rtl,s=t._legendItemPos,a=s[0],o=s[1],l=t.checkbox;t.legendGroup&&t.legendGroup.translate(r?a:e.legendWidth-a-2*n-4,o),l&&(l.x=a,l.y=o)},destroyItem:function(t){var e=t.checkbox;_e(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&I(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,_e(this.allItems,function(r){var s,a=r.checkbox;a&&(s=e+a.y+(t||0)+3,m(a,{left:i.translateX+r.legendItemWidth+a.x-20+Yt,top:s+Yt,display:s>e-6&&s<e+n-6?"":Kt}))}))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),r=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},renderItem:function(t){var i,n,r,s=this,a=s.chart,o=a.renderer,l=s.options,c="horizontal"===l.layout,u=s.symbolWidth,d=l.symbolPadding,h=s.itemStyle,p=s.itemHiddenStyle,m=s.padding,v=c?f(l.itemDistance,8):0,y=!l.rtl,_=l.width,b=l.itemMarginBottom||0,w=s.itemMarginTop,k=s.initialItemX,S=t.legendItem,C=t.series&&t.series.drawLegendSymbol?t.series:t,x=C.options,E=x&&x.showCheckbox,A=l.useHTML;S||(t.legendGroup=o.g("legend-item").attr({zIndex:1}).add(s.scrollGroup),C.drawLegendSymbol(s,t),t.legendItem=S=o.text(l.labelFormat?T(l.labelFormat,t):l.labelFormatter.call(t),y?u+d:-d,s.baseline,A).css(e(t.visible?h:p)).attr({align:y?"left":"right",zIndex:2}).add(t.legendGroup),(A?S:t.legendGroup).on("mouseover",function(){t.setState(ie),S.css(s.options.itemHoverStyle)}).on("mouseout",function(){S.css(t.visible?h:p),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):Ce(t,i,e,n)}),s.colorizeItem(t,t.visible),E&&(t.checkbox=g("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},l.itemCheckboxStyle,a.container),ke(t.checkbox,"click",function(e){var i=e.target;Ce(t,"checkboxClick",{checked:i.checked},function(){t.select()})}))),n=S.getBBox(),r=t.legendItemWidth=l.itemWidth||t.legendItemWidth||u+d+n.width+v+(E?20:0),s.itemHeight=i=mt(t.legendItemHeight||n.height),c&&s.itemX-k+r>(_||a.chartWidth-2*m-k)&&(s.itemX=k,s.itemY+=w+s.lastLineHeight+b,s.lastLineHeight=0),s.maxItemWidth=yt(s.maxItemWidth,r),s.lastItemY=w+s.itemY+b,s.lastLineHeight=yt(i,s.lastLineHeight),t._legendItemPos=[s.itemX,s.itemY],c?s.itemX+=r:(s.itemY+=w+i+b,s.lastLineHeight=i),s.offsetWidth=_||yt((c?s.itemX-k-v:r)+m,s.offsetWidth)},getAllItems:function(){var t=[];return _e(this.chart.series,function(e){var i=e.options;f(i.showInLegend,!d(i.linkedTo)&&H,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},render:function(){var e,i,n,r,s=this,a=s.chart,o=a.renderer,l=s.group,c=s.box,u=s.options,d=s.padding,h=u.borderWidth,p=u.backgroundColor;s.itemX=s.initialItemX,s.itemY=s.initialItemY,s.offsetWidth=0,s.lastItemY=0,l||(s.group=l=o.g("legend").attr({zIndex:7}).add(),s.contentGroup=o.g().attr({zIndex:1}).add(l),s.scrollGroup=o.g().add(s.contentGroup)),s.renderTitle(),x(e=s.getAllItems(),function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),u.reversed&&e.reverse(),s.allItems=e,s.display=i=!!e.length,_e(e,function(t){s.renderItem(t)}),n=u.width||s.offsetWidth,r=s.lastItemY+s.lastLineHeight+s.titleHeight,r=s.handleOverflow(r),(h||p)&&(n+=d,r+=d,c?n>0&&r>0&&(c[c.isNew?"attr":"animate"](c.crisp(null,null,null,n,r)),c.isNew=!1):(s.box=c=o.rect(0,0,n,r,u.borderRadius,h||0).attr({stroke:u.borderColor,"stroke-width":h||0,fill:p||Kt}).add(l).shadow(u.shadow),c.isNew=!0),c[i?"show":"hide"]()),s.legendWidth=n,s.legendHeight=r,_e(e,function(t){s.positionItem(t)}),i&&l.align(t({width:n,height:r},u),!0,"spacingBox"),a.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,r=this.chart,s=r.renderer,a=this.options,o=a.y,l="top"===a.verticalAlign,c=r.spacingBox.height+(l?-o:o)-this.padding,u=a.maxHeight,d=this.clipRect,h=a.navigation,p=f(h.animation,!0),m=h.arrowSize||12,g=this.nav,v=this.pages,y=this.allItems;return"horizontal"===a.layout&&(c/=2),u&&(c=_t(c,u)),v.length=0,t>c&&!a.useHTML?(this.clipHeight=e=c-20-this.titleHeight-this.padding,this.currentPage=f(this.currentPage,1),this.fullHeight=t,_e(y,function(t,n){var r=t._legendItemPos[1],s=mt(t.legendItem.bBox.height),a=v.length;(!a||r-v[a-1]>e)&&v.push(i||r),n===y.length-1&&r+s-v[a-1]>e&&v.push(r),r!==i&&(i=r)}),d||(d=n.clipRect=s.clipRect(0,this.padding,9999,0),n.contentGroup.clip(d)),d.attr({height:e}),g||(this.nav=g=s.g().attr({zIndex:1}).add(this.group),this.up=s.symbol("triangle",0,0,m,m).on("click",function(){n.scroll(-1,p)}).add(g),this.pager=s.text("",15,10).css(h.style).add(g),this.down=s.symbol("triangle-down",0,0,m,m).on("click",function(){n.scroll(1,p)}).add(g)),n.scroll(0),t=c):g&&(d.attr({height:r.chartHeight}),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,r=n.length,s=this.currentPage+t,a=this.clipHeight,o=this.options.navigation,l=o.activeColor,c=o.inactiveColor,u=this.pager,d=this.padding;s>r&&(s=r),s>0&&(e!==H&&O(e,this.chart),this.nav.attr({translateX:d,translateY:a+this.padding+7+this.titleHeight,visibility:Xt}),this.up.attr({fill:1===s?c:l}).css({cursor:1===s?"default":"pointer"}),u.attr({text:s+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:s===r?c:l}).css({cursor:s===r?"default":"pointer"}),i=-n[s-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=s,this.positionCheckboxes(i))}};var Ge=Highcharts.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-i/2,t.symbolWidth,i,f(t.options.symbolRadius,2)).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,r=this.options,s=r.marker,a=t.options,o=t.symbolWidth,l=this.chart.renderer,c=this.legendGroup,u=t.baseline-mt(.3*l.fontMetrics(a.itemStyle.fontSize).b);r.lineWidth&&(n={"stroke-width":r.lineWidth},r.dashStyle&&(n.dashstyle=r.dashStyle),this.legendLine=l.path([Qt,0,u,Zt,o,u]).attr(n).add(c)),s&&s.enabled&&(e=s.radius,this.legendSymbol=i=l.symbol(this.symbol,o/2-e,u-e,2*e,2*e).add(c),i.isMarker=!0)}};/Trident\/7\.0/.test(Ct)&&b($e.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};i.chart.renderer.forExport?n():setTimeout(n)}),V.prototype={init:function(t,i){var n,r=t.series;t.series=null,(n=e($,t)).series=t.series=r,this.userOptions=t;var s=n.chart;this.margin=this.splashArray("margin",s),this.spacing=this.splashArray("spacing",s);var a=s.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=s.showAxes;var o,l=this;if(l.index=Ut.length,Ut.push(l),!1!==s.reflow&&ke(l,"load",function(){l.initReflow()}),a)for(o in a)ke(l,o,a[o]);l.xAxis=[],l.yAxis=[],l.animation=!jt&&f(s.animation,!0),l.pointCount=0,l.counters=new C,l.firstRender()},initSeries:function(t){var e,i=this.options.chart,n=t.type||i.type||i.defaultSeriesType,r=pe[n];return r||L(17,!0),(e=new r).init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,r=i?t:e;return n>=0&&n<=this.plotWidth&&r>=0&&r<=this.plotHeight},adjustTickAmounts:function(){!1!==this.options.chart.alignTicks&&_e(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var i,n,r,s=this,a=s.axes,o=s.series,l=s.pointer,c=s.legend,u=s.isDirtyLegend,d=s.isDirtyBox,h=o.length,p=h,f=s.renderer,m=f.isHidden(),g=[];for(O(e,s),m&&s.cloneRenderTo(),s.layOutTitles();p--;)if((r=o[p]).options.stacking&&(i=!0,r.isDirty)){n=!0;break}if(n)for(p=h;p--;)(r=o[p]).options.stacking&&(r.isDirty=!0);_e(o,function(t){t.isDirty&&"point"===t.options.legendType&&(u=!0)}),u&&c.options.enabled&&(c.render(),s.isDirtyLegend=!1),i&&s.getStacks(),s.hasCartesianSeries&&(s.isResizing||(s.maxTicks=null,_e(a,function(t){t.setScale()})),s.adjustTickAmounts(),s.getMargins(),_e(a,function(t){t.isDirty&&(d=!0)}),_e(a,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,g.push(function(){Ce(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(d||i)&&e.redraw()})),d&&s.drawChartBox(),_e(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),l&&l.reset&&l.reset(!0),f.draw(),Ce(s,"redraw"),m&&s.cloneRenderTo(!0),_e(g,function(t){t.call()})},get:function(t){var e,i,n,r=this,s=r.axes,a=r.series;for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<a.length;e++)if(a[e].options.id===t)return a[e];for(e=0;e<a.length;e++)for(n=a[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e=this,i=this.options,n=i.xAxis=p(i.xAxis||{}),r=i.yAxis=p(i.yAxis||{});_e(n,function(t,e){t.index=e,t.isX=!0}),_e(r,function(t,e){t.index=e}),t=n.concat(r),_e(t,function(t){new B(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return _e(this.series,function(e){t=t.concat(be(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return be(this.series,function(t){return t.selected})},getStacks:function(){var t=this;_e(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),_e(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+f(e.options.stack,""))})},showResetZoom:function(){var t=this,e=$.lang,i=t.options.chart.resetZoomButton,n=i.theme,r=n.states,s="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,r&&r.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,s)},zoomOut:function(){var t=this;Ce(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,r=n.pointer,a=!1;!t||t.resetSelection?_e(n.axes,function(t){e=t.zoom()}):_e(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(r[n?"zoomX":"zoomY"]||r[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(a=!0))}),i=n.resetZoomButton,a&&!i?n.showResetZoom():!a&&s(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(f(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,r=n.hoverPoints;r&&_e(r,function(t){t.setState()}),_e("xy"===e?[1,0]:[1],function(e){var r=t[e?"chartX":"chartY"],s=n[e?"xAxis":"yAxis"][0],a=n[e?"mouseDownX":"mouseDownY"],o=(s.pointRange||0)/2,l=s.getExtremes(),c=s.toValue(a-r,!0)+o,u=s.toValue(a+n[e?"plotWidth":"plotHeight"]-r,!0)-o;s.series.length&&c>_t(l.dataMin,l.min)&&u<yt(l.dataMax,l.max)&&(s.setExtremes(c,u,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=r}),i&&n.redraw(!1),m(n.container,{cursor:"move"})},setTitle:function(t,i){var n,r,s=this,a=s.options;n=a.title=e(a.title,t),r=a.subtitle=e(a.subtitle,i),_e([["title",t,n],["subtitle",i,r]],function(t){var e=t[0],i=s[e],n=t[1],r=t[2];i&&n&&(s[e]=i=i.destroy()),r&&r.text&&!i&&(s[e]=s.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,"class":Gt+e,zIndex:r.zIndex||4}).css(r.style).add())}),s.layOutTitles()},layOutTitles:function(){var e=0,i=this.title,n=this.subtitle,r=this.options,s=r.title,a=r.subtitle,o=this.spacingBox.width-44;i&&(i.css({width:(s.width||o)+Yt}).align(t({y:15},s),!1,"spacingBox"),s.floating||s.verticalAlign||(e=i.getBBox().height)>=18&&e<=25&&(e=15)),n&&(n.css({width:(a.width||o)+Yt}).align(t({y:e+s.margin},a),!1,"spacingBox"),a.floating||a.verticalAlign||(e=vt(e+n.getBBox().height))),this.titleOffset=e},getChartSize:function(){var t=this,e=t.options.chart,i=t.renderToClone||t.renderTo;t.containerWidth=ge(i,"width"),t.containerHeight=ge(i,"height"),t.chartWidth=yt(0,e.width||t.containerWidth||600),t.chartHeight=yt(0,f(e.height,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),I(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),m(e,{position:Wt,top:"-9999px",display:"block"}),ht.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,s,a,o,l,c=this,u=c.options.chart,d="data-highcharts-chart";c.renderTo=a=u.renderTo,l=Gt+Ft++,r(a)&&(c.renderTo=a=ht.getElementById(a)),a||L(13,!0),o=n(h(a,d)),!isNaN(o)&&Ut[o]&&Ut[o].destroy(),h(a,d,c.index),a.innerHTML="",a.offsetWidth||c.cloneRenderTo(),c.getChartSize(),i=c.chartWidth,s=c.chartHeight,c.container=e=g(Ht,{className:Gt+"container"+(u.className?" "+u.className:""),id:l},t({position:qt,overflow:$t,width:i+Yt,height:s+Yt,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},u.style),c.renderToClone||a),c._cursor=e.style.cursor,c.renderer=u.forExport?new Ue(e,i,s,!0):new W(e,i,s),jt&&c.renderer.create(c,e,i,s)},getMargins:function(){var t,e=this,i=e.spacing,n=e.legend,r=e.margin,s=e.options.legend,a=f(s.margin,10),o=s.x,l=s.y,c=s.align,u=s.verticalAlign,h=e.titleOffset;e.resetMargins(),t=e.axisOffset,h&&!d(r[0])&&(e.plotTop=yt(e.plotTop,h+e.options.title.margin+i[0])),n.display&&!s.floating&&("right"===c?d(r[1])||(e.marginRight=yt(e.marginRight,n.legendWidth-o+a+i[1])):"left"===c?d(r[3])||(e.plotLeft=yt(e.plotLeft,n.legendWidth+o+a+i[3])):"top"===u?d(r[0])||(e.plotTop=yt(e.plotTop,n.legendHeight+l+a+i[0])):"bottom"===u&&(d(r[2])||(e.marginBottom=yt(e.marginBottom,n.legendHeight-l+a+i[2])))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&_e(e.axes,function(t){t.getOffset()}),d(r[3])||(e.plotLeft+=t[3]),d(r[0])||(e.plotTop+=t[0]),d(r[2])||(e.marginBottom+=t[2]),d(r[1])||(e.marginRight+=t[1]),e.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,r=i.width||ge(n,"width"),s=i.height||ge(n,"height"),a=t?t.target:pt,o=function(){e.container&&(e.setSize(r,s,!1),e.hasUserSize=null)};e.hasUserSize||!r||!s||a!==pt&&a!==ht||(r===e.containerWidth&&s===e.containerHeight||(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(o,100):o()),e.containerWidth=r,e.containerHeight=s)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};ke(pt,"resize",e),ke(t,"destroy",function(){Se(pt,"resize",e)})},setSize:function(t,e,i){var n,r,s,a=this;a.isResizing+=1,s=function(){a&&Ce(a,"endResize",null,function(){a.isResizing-=1})},O(i,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,d(t)&&(a.chartWidth=n=yt(0,mt(t)),a.hasUserSize=!!n),d(e)&&(a.chartHeight=r=yt(0,mt(e))),(X?Ee:m)(a.container,{width:n+Yt,height:r+Yt},X),a.setChartSize(!0),a.renderer.setSize(n,r,i),a.maxTicks=null,_e(a.axes,function(t){t.isDirty=!0,t.setScale()}),_e(a.series,function(t){t.isDirty=!0}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.getMargins(),a.redraw(i),a.oldChartHeight=null,Ce(a,"resize"),!1===X?s():setTimeout(s,X&&X.duration||500)},setChartSize:function(t){var e,i,n,r,s,a,o,l=this,c=l.inverted,u=l.renderer,d=l.chartWidth,h=l.chartHeight,p=l.options.chart,f=l.spacing,m=l.clipOffset;l.plotLeft=n=mt(l.plotLeft),l.plotTop=r=mt(l.plotTop),l.plotWidth=s=yt(0,mt(d-n-l.marginRight)),l.plotHeight=a=yt(0,mt(h-r-l.marginBottom)),l.plotSizeX=c?a:s,l.plotSizeY=c?s:a,l.plotBorderWidth=p.plotBorderWidth||0,l.spacingBox=u.spacingBox={x:f[3],y:f[0],width:d-f[3]-f[1],height:h-f[0]-f[2]},l.plotBox=u.plotBox={x:n,y:r,width:s,height:a},o=2*gt(l.plotBorderWidth/2),e=vt(yt(o,m[3])/2),i=vt(yt(o,m[0])/2),l.clipBox={x:e,y:i,width:gt(l.plotSizeX-yt(o,m[1])/2-e),height:gt(l.plotSizeY-yt(o,m[2])/2-i)},t||_e(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.spacing,i=t.margin;t.plotTop=f(i[0],e[0]),t.marginRight=f(i[1],e[1]),t.marginBottom=f(i[2],e[2]),t.plotLeft=f(i[3],e[3]),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,r=i.renderer,s=i.chartWidth,a=i.chartHeight,o=i.chartBackground,l=i.plotBackground,c=i.plotBorder,u=i.plotBGImage,d=n.borderWidth||0,h=n.backgroundColor,p=n.plotBackgroundColor,f=n.plotBackgroundImage,m=n.plotBorderWidth||0,g=i.plotLeft,v=i.plotTop,y=i.plotWidth,_=i.plotHeight,b=i.plotBox,w=i.clipRect,T=i.clipBox;t=d+(n.shadow?8:0),(d||h)&&(o?o.animate(o.crisp(null,null,null,s-t,a-t)):(e={fill:h||Kt},d&&(e.stroke=n.borderColor,e["stroke-width"]=d),i.chartBackground=r.rect(t/2,t/2,s-t,a-t,n.borderRadius,d).attr(e).add().shadow(n.shadow))),p&&(l?l.animate(b):i.plotBackground=r.rect(g,v,y,_,0).attr({fill:p}).add().shadow(n.plotShadow)),f&&(u?u.animate(b):i.plotBGImage=r.image(f,g,v,y,_).add()),w?w.animate({width:T.width,height:T.height}):i.clipRect=r.clipRect(T),m&&(c?c.animate(c.crisp(null,g,v,y,_)):i.plotBorder=r.rect(g,v,y,_,0,-m).attr({stroke:n.plotBorderColor,"stroke-width":m,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,r=n.options.chart,s=n.options.series;_e(["inverted","angular","polar"],function(a){for(t=pe[r.type||r.defaultSeriesType],i=n[a]||r[a]||t&&t.prototype[a],e=s&&s.length;!i&&e--;)(t=pe[s[e].type])&&t.prototype[a]&&(i=!0);n[a]=i})},linkSeries:function(){var t=this,e=t.series;_e(e,function(t){t.linkedSeries.length=0}),_e(e,function(e){var i=e.options.linkedTo;r(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i))&&(i.linkedSeries.push(e),e.linkedParent=i)})},render:function(){var e,i=this,r=i.axes,s=i.renderer,a=i.options,o=a.labels,l=a.credits;i.setTitle(),i.legend=new $e(i,a.legend),i.getStacks(),_e(r,function(t){t.setScale()}),i.getMargins(),i.maxTicks=null,_e(r,function(t){t.setTickPositions(!0),t.setMaxTicks()}),i.adjustTickAmounts(),i.getMargins(),i.drawChartBox(),i.hasCartesianSeries&&_e(r,function(t){t.render()}),i.seriesGroup||(i.seriesGroup=s.g("series-group").attr({zIndex:3}).add()),_e(i.series,function(t){t.translate(),t.setTooltipPoints(),t.render()}),o.items&&_e(o.items,function(e){var r=t(o.style,e.style),a=n(r.left)+i.plotLeft,l=n(r.top)+i.plotTop+12;delete r.left,delete r.top,s.text(e.html,a,l).attr({zIndex:2}).css(r).add()}),l.enabled&&!i.credits&&(e=l.href,i.credits=s.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),i.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,r=e.container,s=r&&r.parentNode;for(Ce(e,"destroy"),Ut[e.index]=H,e.renderTo.removeAttribute("data-highcharts-chart"),Se(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();for(t in _e(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),r&&(r.innerHTML="",Se(r),s&&I(r)),e)delete e[t]},isReadyToRender:function(){var t=this;return!(!Ot&&pt==pt.top&&"complete"!==ht.readyState||jt&&!pt.canvg)||(jt?Be.push(function(){t.firstRender()},t.options.global.canvasToolsURL):ht.attachEvent("onreadystatechange",function(){ht.detachEvent("onreadystatechange",t.firstRender),"complete"===ht.readyState&&t.firstRender()}),!1)},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),Ce(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),_e(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Ce(t,"beforeRender"),t.pointer=new He(t,e),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),_e(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),Ce(t,"load"))},splashArray:function(t,e){var i=e[t],n=s(i)?i:[i,i,i,i];return[f(e[t+"Top"],n[0]),f(e[t+"Right"],n[1]),f(e[t+"Bottom"],n[2]),f(e[t+"Left"],n[3])]}},V.prototype.callbacks=[];var Xe=Highcharts.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,r=this.chart,s=2*(i.slicedOffset||0),a=r.plotWidth-2*s,o=r.plotHeight-2*s,l=i.center,c=[f(l[0],"50%"),f(l[1],"50%"),i.size||"100%",i.innerSize||0],u=_t(a,o);return Te(c,function(i,r){return e=/%$/.test(i),t=r<2||2===r&&e,(e?[a,o,u,u][r]*n(i)/100:i)+(t?s:0)})}},Ye=function(){};Ye.prototype={init:function(t,e,i){var n,r=this;return r.series=t,r.applyOptions(e,i),r.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,r.color=r.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,r},applyOptions:function(e,i){var n=this,r=n.series,s=r.pointValKey;return t(n,e=Ye.prototype.optionsToObject.call(this,e)),n.options=n.options?t(n.options,e):e,s&&(n.y=n[s]),n.x===H&&r&&(n.x=i===H?r.autoIncrement():i),n},optionsToObject:function(t){var e,i={},n=this.series,r=n.pointArrayMap||["y"],s=r.length,o=0,l=0;if("number"==typeof t||null===t)i[r[0]]=t;else if(a(t))for(t.length>s&&("string"===(e=typeof t[0])?i.name=t[0]:"number"===e&&(i.x=t[0]),o++);l<s;)i[r[l++]]=t[o++];else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this,i=e.series.chart,n=i.hoverPoints;for(t in i.pointCount--,n&&(e.setState(),u(n,e),n.length||(i.hoverPoints=null)),e===i.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(Se(e),e.destroyElements()),e.legendItem&&i.legend.destroyItem(e),e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)e[t=i[n]]&&(e[t]=e[t].destroy())},getLabelConfig:function(){var t=this;return{x:t.category,y:t.y,key:t.name||t.category,series:t.series,point:t,percentage:t.percentage,total:t.total||t.stackTotal}},select:function(t,e){var i=this,n=i.series,r=n.chart;t=f(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[ye(i,n.data)]=i.options,i.setState(t&&ne),e||_e(r.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[ye(t,n.data)]=t.options,t.setState(ee),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this,i=e.series,n=i.chart,r=n.tooltip,s=n.hoverPoint;s&&s!==e&&s.onMouseOut(),e.firePointEvent("mouseOver"),!r||r.shared&&!i.noSharedTooltip||r.refresh(e,t),e.setState(ie),n.hoverPoint=e},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&-1!==ye(this,e)||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=f(i.valueDecimals,""),r=i.valuePrefix||"",s=i.valueSuffix||"";return _e(e.pointArrayMap||["y"],function(e){e="{point."+e,(r||s)&&(t=t.replace(e+"}",r+e+"}"+s)),t=t.replace(e+"}",e+":,."+n+"f}")}),T(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,r=this.series.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ce(this,t,e,i)},importEvents:function(){if(!this.hasImportedEvents){var t,i=this,n=e(i.series.options.point,i.options).events;for(t in i.events=n,n)ke(i,t,n[t]);this.hasImportedEvents=!0}},setState:function(t,i){var n,r,s=this,a=s.plotX,o=s.plotY,l=s.series,c=l.options.states,u=Ie[l.type].marker&&l.options.marker,d=u&&!u.enabled,h=u&&u.states[t],p=h&&!1===h.enabled,f=l.stateMarkerGraphic,m=s.marker||{},g=l.chart,v=s.pointAttr;i=i&&f,(t=t||ee)===s.state&&!i||s.selected&&t!==ne||c[t]&&!1===c[t].enabled||t&&(p||d&&!h.enabled)||t&&m.states&&m.states[t]&&!1===m.states[t].enabled||(s.graphic?(n=u&&s.graphic.symbolName&&v[t].r,s.graphic.attr(e(v[t],n?{x:a-n,y:o-n,width:2*n,height:2*n}:{}))):(t&&h&&(n=h.radius,r=m.symbol||l.symbol,f&&f.currentSymbol!==r&&(f=f.destroy()),f?f[i?"animate":"attr"]({x:a-n,y:o-n}):(l.stateMarkerGraphic=f=g.renderer.symbol(r,a-n,o-n,2*n,2*n).attr(v[t]).add(l.markerGroup),f.currentSymbol=r)),f&&f[t&&g.isInsidePlot(a,o,g.inverted)?"show":"hide"]()),s.state=t)}};var Ke=function(){};Ke.prototype={isCartesian:!0,type:"line",pointClass:Ye,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,i){var n,r,s=this,a=e.series,o=function(t,e){return f(t.options.index,t._i)-f(e.options.index,e._i)};for(n in s.chart=e,s.options=i=s.setOptions(i),s.linkedSeries=[],s.bindAxes(),t(s,{name:i.name,state:ee,pointAttr:{},visible:!1!==i.visible,selected:!0===i.selected}),jt&&(i.animation=!1),r=i.events)ke(s,n,r[n]);(r&&r.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),s.getColor(),s.getSymbol(),_e(s.parallelArrays,function(t){s[t+"Data"]=[]}),s.setData(i.data,!1),s.isCartesian&&(e.hasCartesianSeries=!0),a.push(s),s._i=a.length-1,x(a,o),this.yAxis&&x(this.yAxis.series,o),_e(a,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;_e(e.axisTypes||[],function(r){_e(n[r],function(n){t=n.options,(i[r]===t.index||i[r]!==H&&i[r]===t.id||i[r]===H&&0===t.index)&&(n.series.push(e),e[r]=n,n.isDirty=!0)}),e[r]||e.optionalAxis===r||L(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,r="number"==typeof e?function(n){var r="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=r}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};_e(i.parallelArrays,r)},autoIncrement:function(){var t=this,e=t.options,i=t.xIncrement;return i=f(i,e.pointStart,0),t.pointInterval=f(t.pointInterval,e.pointInterval,1),t.xIncrement=i+t.pointInterval,i},getSegments:function(){var t,e=this,i=-1,n=[],r=e.points,s=r.length;if(s)if(e.options.connectNulls){for(t=s;t--;)null===r[t].y&&r.splice(t,1);r.length&&(n=[r])}else _e(r,function(t,e){null===t.y?(e>i+1&&n.push(r.slice(i+1,e)),i=e):e===s-1&&n.push(r.slice(i+1,e+1))});e.segments=n},setOptions:function(t){var i,n=this.chart,r=n.options.plotOptions,s=n.userOptions||{},a=s.plotOptions||{},o=r[this.type];return this.userOptions=t,i=e(o,r.series,t),this.tooltipOptions=e($.tooltip,$.plotOptions[this.type].tooltip,s.tooltip,a.series&&a.series.tooltip,a[this.type]&&a[this.type].tooltip,t.tooltip),null===o.marker&&delete i.marker,i},getColor:function(){var t,e,i=this.options,n=this.userOptions,r=this.chart.options.colors,s=this.chart.counters;(t=i.color||Ie[this.type].color)||i.colorByPoint||(d(n._colorIndex)?e=n._colorIndex:(n._colorIndex=s.color,e=s.color++),t=r[e]),this.color=t,s.wrapColor(r.length)},getSymbol:function(){var t,e=this,i=e.userOptions,n=e.options.marker,r=e.chart,s=r.options.symbols,a=r.counters;e.symbol=n.symbol,e.symbol||(d(i._symbolIndex)?t=i._symbolIndex:(i._symbolIndex=a.symbol,t=a.symbol++),e.symbol=s[t]),/^url/.test(e.symbol)&&(n.radius=0),a.wrapSymbol(s.length)},drawLegendSymbol:Ge.drawLineMarker,setData:function(t,e){var i,n=this,s=n.points,l=n.options,c=n.chart,u=null,d=n.xAxis,h=d&&!!d.categories;n.xIncrement=null,n.pointRange=h?1:l.pointRange,n.colorCounter=0;var p,m=(t=t||[]).length,g=l.turboThreshold,v=this.xData,y=this.yData,_=n.pointArrayMap,b=_&&_.length;if(_e(this.parallelArrays,function(t){n[t+"Data"].length=0}),g&&m>g){for(i=0;null===u&&i<m;)u=t[i],i++;if(o(u)){var w=f(l.pointStart,0),T=f(l.pointInterval,1);for(i=0;i<m;i++)v[i]=w,y[i]=t[i],w+=T;n.xIncrement=w}else if(a(u))if(b)for(i=0;i<m;i++)p=t[i],v[i]=p[0],y[i]=p.slice(1,b+1);else for(i=0;i<m;i++)p=t[i],v[i]=p[0],y[i]=p[1];else L(12)}else for(i=0;i<m;i++)t[i]!==H&&(p={series:n},n.pointClass.prototype.applyOptions.apply(p,[t[i]]),n.updateParallelArrays(p,i),h&&p.name&&(d.names[p.x]=p.name));for(r(y[0])&&L(14,!0),n.data=[],n.options.data=t,i=s&&s.length||0;i--;)s[i]&&s[i].destroy&&s[i].destroy();d&&(d.minRange=d.userMinRange),n.isDirty=n.isDirtyData=c.isDirtyBox=!0,f(e,!0)&&c.redraw(!1)},processData:function(t){var e,i,n,r,s,a=this,o=a.xData,l=a.yData,c=o.length,u=0,d=a.xAxis,h=a.options,p=h.cropThreshold,f=a.isCartesian;if(f&&!a.isDirty&&!d.isDirty&&!a.yAxis.isDirty&&!t)return!1;if(f&&a.sorted&&(!p||c>p||a.forceCrop)){var m=d.min,g=d.max;o[c-1]<m||o[0]>g?(o=[],
l=[]):(o[0]<m||o[c-1]>g)&&(o=(e=this.cropData(a.xData,a.yData,m,g)).xData,l=e.yData,u=e.start,i=!0)}for(s=o.length-1;s>=0;s--)(n=o[s]-o[s-1])>0&&(r===H||n<r)?r=n:n<0&&a.requireSorting&&L(15);a.cropped=i,a.cropStart=u,a.processedXData=o,a.processedYData=l,null===h.pointRange&&(a.pointRange=r||1),a.closestPointRange=r},cropData:function(t,e,i,n){var r,s=t.length,a=0,o=s,l=f(this.cropShoulder,1);for(r=0;r<s;r++)if(t[r]>=i){a=yt(0,r-l);break}for(;r<s;r++)if(t[r]>n){o=r+l;break}return{xData:t.slice(a,o),yData:e.slice(a,o),start:a,end:o}},generatePoints:function(){var t,e,i,n,r=this,s=r.options.data,a=r.data,o=r.processedXData,l=r.processedYData,c=r.pointClass,u=o.length,d=r.cropStart||0,h=r.hasGroupedData,f=[];if(!a&&!h){var m=[];m.length=s.length,a=r.data=m}for(n=0;n<u;n++)e=d+n,h?f[n]=(new c).init(r,[o[n]].concat(p(l[n]))):(a[e]?i=a[e]:s[e]!==H&&(a[e]=i=(new c).init(r,s[e],o[n])),f[n]=i);if(a&&(u!==(t=a.length)||h))for(n=0;n<t;n++)n!==d||h||(n+=u),a[n]&&(a[n].destroyElements(),a[n].plotX=H);r.data=a,r.points=f},setStackedPoints:function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,i,n,r,s,a,o=this,l=o.processedXData,c=o.processedYData,u=[],d=c.length,h=o.options,p=h.threshold,f=h.stack,m=h.stacking,g=o.stackKey,v="-"+g,y=o.negStacks,_=o.yAxis,b=_.stacks,w=_.oldStacks;for(r=0;r<d;r++)s=l[r],a=c[r],b[n=(t=y&&a<p)?v:g]||(b[n]={}),b[n][s]||(w[n]&&w[n][s]?(b[n][s]=w[n][s],b[n][s].total=null):b[n][s]=new U(_,_.options.stackLabels,t,s,f,m)),(e=b[n][s]).points[o.index]=[e.cum||0],"percent"===m?(i=t?g:v,y&&b[i]&&b[i][s]?(i=b[i][s],e.total=i.total=yt(i.total,e.total)+bt(a)||0):e.total=D(e.total+(bt(a)||0))):e.total=D(e.total+(a||0)),e.cum=(e.cum||0)+(a||0),e.points[o.index].push(e.cum),u[r]=e.cum;"percent"===m&&(_.usePercentage=!0),this.stackedYData=u,_.oldStacks={}}},setPercentStacks:function(){var t=this,e=t.stackKey,i=t.yAxis.stacks;_e([e,"-"+e],function(e){for(var n,r,s,a,o=t.xData.length;o--;)n=t.xData[o],(s=(r=i[e]&&i[e][n])&&r.points[t.index])&&(a=r.total?100/r.total:0,s[0]=D(s[0]*a),s[1]=D(s[1]*a),t.stackedYData[o]=s[1])})},getExtremes:function(t){var e,i,n,r,s,a,o,l,c,u=this.xAxis,d=this.yAxis,h=this.processedXData,p=[],m=0,g=u.getExtremes(),v=g.min,y=g.max;for(e=(t=t||this.stackedYData||this.processedYData).length,l=0;l<e;l++)if(a=h[l],i=null!==(o=t[l])&&o!==H&&(!d.isLog||o.length||o>0),n=this.getExtremesFromAll||this.cropped||(h[l+1]||a)>=v&&(h[l-1]||a)<=y,i&&n)if(c=o.length)for(;c--;)null!==o[c]&&(p[m++]=o[c]);else p[m++]=o;this.dataMin=f(r,E(p)),this.dataMax=f(s,A(p))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e=this,i=e.options,n=i.stacking,r=e.xAxis,s=r.categories,a=e.yAxis,l=e.points,c=l.length,u=!!e.modifyValue,h=i.pointPlacement,p="between"===h||o(h),m=i.threshold;for(t=0;t<c;t++){var g,v,y=l[t],_=y.x,b=y.y,w=y.low,T=n&&a.stacks[(e.negStacks&&b<m?"-":"")+e.stackKey];a.isLog&&b<=0&&(y.y=b=null),y.plotX=r.translate(_,0,0,0,1,h,"flags"===this.type),n&&e.visible&&T&&T[_]&&(w=(v=(g=T[_]).points[e.index])[0],b=v[1],0===w&&(w=f(m,a.min)),a.isLog&&w<=0&&(w=null),y.total=y.stackTotal=g.total,y.percentage="percent"===n&&y.y/g.total*100,y.stackY=b,g.setOffset(e.pointXOffset||0,e.barW||0)),y.yBottom=d(w)?a.translate(w,0,1,0,1):null,u&&(b=e.modifyValue(b,y)),y.plotY="number"==typeof b&&b!==Infinity?a.translate(b,0,1,0,1):H,y.clientX=p?r.translate(_,0,0,0,1):y.plotX,y.negative=y.y<(m||0),y.category=s&&s[y.x]!==H?s[y.x]:y.x}e.getSegments()},setTooltipPoints:function(t){var e,i,n,r,s,a,o,l=this,c=[],u=l.xAxis,d=u&&u.getExtremes(),h=u?u.tooltipLen||u.len:l.chart.plotSizeX,p=[];if(!1!==l.options.enableMouseTracking){for(t&&(l.tooltipPoints=null),_e(l.segments||l.points,function(t){c=c.concat(t)}),u&&u.reversed&&(c=c.reverse()),l.orderTooltipPoints&&l.orderTooltipPoints(c),e=c.length,o=0;o<e;o++)if((s=(r=c[o]).x)>=d.min&&s<=d.max)for(a=c[o+1],i=n===H?0:n+1,n=c[o+1]?_t(yt(0,gt((r.clientX+(a?a.wrappedClientX||a.clientX:h))/2)),h):h;i>=0&&i<=n;)p[i++]=r;l.tooltipPoints=p}},tooltipHeaderFormatter:function(t){var e,i=this,n=i.tooltipOptions,r=n.dateTimeLabelFormats,s=n.xDateFormat,a=i.xAxis,l=a&&"datetime"===a.options.type,c=n.headerFormat,u=a&&a.closestPointRange;if(l&&!s){if(u){for(e in K)if(K[e]>=u){s=r[e];break}}else s=r.day;s=s||r.year}return l&&s&&o(t.key)&&(c=c.replace("{point.key}","{point.key:"+s+"}")),T(c,{point:t,series:i})},onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&Ce(t,"mouseOver"),t.setState(ie),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,r=i.hoverPoint;r&&r.onMouseOut(),t&&e.events.mouseOut&&Ce(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState(),i.hoverSeries=null},animate:function(e){var i,n,r,a=this,o=a.chart,l=o.renderer,c=a.options.animation,u=o.clipBox,d=o.inverted;c&&!s(c)&&(c=Ie[a.type].animation),r="_sharedClip"+c.duration+c.easing,e?(i=o[r],n=o[r+"m"],i||(o[r]=i=l.clipRect(t(u,{width:0})),o[r+"m"]=n=l.clipRect(-99,d?-o.plotLeft:-o.plotTop,99,d?o.chartWidth:o.chartHeight)),a.group.clip(i),a.markerGroup.clip(n),a.sharedClipKey=r):((i=o[r])&&(i.animate({width:o.plotSizeX},c),o[r+"m"].animate({width:o.plotSizeX+99},c)),a.animate=null,a.animationTimeout=setTimeout(function(){a.afterAnimate()},c.duration))},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group;i&&!1!==this.options.clip&&(i.clip(t.clipRect),this.markerGroup.clip()),setTimeout(function(){e&&t[e]&&(t[e]=t[e].destroy(),t[e+"m"]=t[e+"m"].destroy())},100)},drawPoints:function(){var e,i,n,r,s,a,o,l,c,u,d,h,p=this,m=p.points,g=p.chart,v=p.options.marker,y=p.markerGroup;if(v.enabled||p._hasPointMarkers)for(r=m.length;r--;)s=m[r],i=gt(s.plotX),n=s.plotY,c=s.graphic,u=s.marker||{},d=v.enabled&&u.enabled===H||u.enabled,h=g.isInsidePlot(mt(i),n,g.inverted),d&&n!==H&&!isNaN(n)&&null!==s.y?(a=(e=s.pointAttr[s.selected?ne:ee]).r,l=0===(o=f(u.symbol,p.symbol)).indexOf("url"),c?c.attr({visibility:h?Ot?"inherit":Xt:$t}).animate(t({x:i-a,y:n-a},c.symbolName?{width:2*a,height:2*a}:{})):h&&(a>0||l)&&(s.graphic=c=g.renderer.symbol(o,i-a,n-a,2*a,2*a).attr(e).add(y))):c&&(s.graphic=c.destroy())},convertAttribs:function(t,e,i,n){var r,s,a=this.pointAttrToOptions,o={};for(r in t=t||{},e=e||{},i=i||{},n=n||{},a)s=a[r],o[r]=f(t[s],e[r],i[r],n[r]);return o},getAttribs:function(){var e,i,n,r,s,a,o,l=this,c=l.options,u=Ie[l.type].marker?c.marker:c,h=u.states,p=h[ie],f=l.color,m={stroke:f,fill:f},g=l.points||[],v=[],y=l.pointAttrToOptions,_=c.negativeColor,b=u.lineColor,w=u.fillColor;for(c.marker?(p.radius=p.radius||u.radius+2,p.lineWidth=p.lineWidth||u.lineWidth+1):p.color=p.color||je(p.color||f).brighten(p.brightness).get(),v[ee]=l.convertAttribs(u,m),_e([ie,ne],function(t){v[t]=l.convertAttribs(h[t],v[ee])}),l.pointAttr=v,i=g.length;i--;){if((u=(n=g[i]).options&&n.options.marker||n.options)&&!1===u.enabled&&(u.radius=0),n.negative&&_&&(n.color=n.fillColor=_),s=c.colorByPoint||n.color,n.options)for(o in y)d(u[y[o]])&&(s=!0);s?(r=[],e=(h=(u=u||{}).states||{})[ie]=h[ie]||{},c.marker||(e.color=je(e.color||n.color).brighten(e.brightness||p.brightness).get()),a={color:n.color},w||(a.fillColor=n.color),b||(a.lineColor=n.color),r[ee]=l.convertAttribs(t(a,u),v[ee]),r[ie]=l.convertAttribs(h[ie],v[ie],r[ee]),r[ne]=l.convertAttribs(h[ne],v[ne],r[ee])):r=v,n.pointAttr=r}},destroy:function(){var t,e,i,n,r,s=this,a=s.chart,o=/AppleWebKit\/533/.test(Ct),l=s.data||[];for(Ce(s,"destroy"),Se(s),_e(s.axisTypes||[],function(t){(r=s[t])&&(u(r.series,s),r.isDirty=r.forceRedraw=!0)}),s.legendItem&&s.chart.legend.destroyItem(s),e=l.length;e--;)(i=l[e])&&i.destroy&&i.destroy();for(n in s.points=null,clearTimeout(s.animationTimeout),_e(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(e){s[e]&&(t=o&&"group"===e?"hide":"destroy",s[e][t]())}),a.hoverSeries===s&&(a.hoverSeries=null),u(a.series,s),s)delete s[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return _e(t,function(r,s){var a,o=r.plotX,l=r.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,r,s)):(i.push(s?Zt:Qt),n&&s&&(a=t[s-1],"right"===n?i.push(a.plotX,l):"center"===n?i.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,l):i.push(o,a.plotY)),i.push(r.plotX,r.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return _e(e.segments,function(r){t=e.getSegmentPath(r),r.length>1?i=i.concat(t):n.push(r[0])}),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,r=e.dashStyle,s="square"!==e.linecap,a=this.getGraphPath(),o=e.negativeColor;o&&i.push(["graphNeg",o]),_e(i,function(i,o){var l,c=i[0],u=t[c];u?(Ae(u),u.animate({d:a})):n&&a.length&&(l={stroke:i[1],"stroke-width":n,zIndex:1},r?l.dashstyle=r:s&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[c]=t.chart.renderer.path(a).attr(l).add(t.group).shadow(!o&&e.shadow))})},clipNeg:function(){var t,e,i,n,r,s=this.options,a=this.chart,o=a.renderer,l=s.negativeColor||s.negativeFillColor,c=this.graph,u=this.area,d=this.posClip,h=this.negClip,p=a.chartWidth,f=a.chartHeight,m=yt(p,f),g=this.yAxis;l&&(c||u)&&((t=mt(g.toPixels(s.threshold||0,!0)))<0&&(m-=t),n={x:0,y:0,width:m,height:t},r={x:0,y:t,width:m,height:m},a.inverted&&(n.height=r.y=a.plotWidth-t,o.isVML&&(n={x:a.plotWidth-t-a.plotLeft,y:0,width:p,height:f},r={x:t+a.plotLeft-p,y:0,width:a.plotLeft+t,height:p})),g.reversed?(e=r,i=n):(e=n,i=r),d?(d.animate(e),h.animate(i)):(this.posClip=d=o.clipRect(e),this.negClip=h=o.clipRect(i),c&&this.graphNeg&&(c.clip(d),this.graphNeg.clip(h)),u&&(u.clip(d),this.areaNeg.clip(h))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};_e(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(ke(i,"resize",t),ke(e,"destroy",function(){Se(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,r){var s=this[t],a=!s;return a&&(this[t]=s=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(r)),s[a?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){return{translateX:this.xAxis?this.xAxis.left:this.chart.plotLeft,translateY:this.yAxis?this.yAxis.top:this.chart.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,r=n.animation&&!!e.animate&&i.renderer.isSVG,s=e.visible?Xt:$t,a=n.zIndex,o=e.hasRendered,l=i.seriesGroup;t=e.plotGroup("group","series",s,a,l),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,l),r&&e.animate(!0),e.getAttribs(),t.inverted=!!e.isCartesian&&i.inverted,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),!1!==e.options.enableMouseTracking&&e.drawTracker(),i.inverted&&e.invertGroups(),!1===n.clip||e.sharedClipKey||o||t.clip(i.clipRect),r?e.animate():o||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.group,r=t.xAxis,s=t.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:f(r&&r.left,e.plotLeft),translateY:f(s&&s.top,e.plotTop)})),t.translate(),t.setTooltipPoints(!0),t.render(),i&&Ce(t,"updatedData")},setState:function(t){var e,i=this,n=i.options,r=i.graph,s=i.graphNeg,a=n.states,o=n.lineWidth;if(t=t||ee,i.state!==t){if(i.state=t,a[t]&&!1===a[t].enabled)return;t&&(o=a[t].lineWidth||o+1),r&&!r.dashstyle&&(e={"stroke-width":o},r.attr(e),s&&s.attr(e))}},setVisible:function(t,e){var i,n=this,r=n.chart,s=n.legendItem,a=r.options.chart.ignoreHiddenSeries,o=n.visible;n.visible=t=n.userOptions.visible=t===H?!o:t,i=t?"show":"hide",_e(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),r.hoverSeries===n&&n.onMouseOut(),s&&r.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&_e(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),_e(n.linkedSeries,function(e){e.setVisible(t,!1)}),a&&(r.isDirtyBox=!0),!1!==e&&r.redraw(),Ce(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===H?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),Ce(e,t?"select":"unselect")},drawTracker:We.drawTrackerGraph},t(V.prototype,{addSeries:function(t,e,i){var n,r=this;return t&&(e=f(e,!0),Ce(r,"addSeries",{options:t},function(){n=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(i)})),n},addAxis:function(t,i,n,r){var s=i?"xAxis":"yAxis",a=this.options;new B(this,e(t,{index:this[s].length,isX:i})),a[s]=p(a[s]||{}),a[s].push(t),f(n,!0)&&this.redraw(r)},showLoading:function(e){var i=this,n=i.options,r=i.loadingDiv,s=n.loading;r||(i.loadingDiv=r=g(Ht,{className:Gt+"loading"},t(s.style,{zIndex:10,display:Kt}),i.container),i.loadingSpan=g("span",null,s.labelStyle,r)),i.loadingSpan.innerHTML=e||n.lang.loading,i.loadingShown||(m(r,{opacity:0,display:"",left:i.plotLeft+Yt,top:i.plotTop+Yt,width:i.plotWidth+Yt,height:i.plotHeight+Yt}),Ee(r,{opacity:s.style.opacity},{duration:s.showDuration||0}),i.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&Ee(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){m(e,{display:Kt})}}),this.loadingShown=!1}}),t(Ye.prototype,{update:function(t,e,i){var n,r=this,a=r.series,o=r.graphic,l=a.data,c=a.chart,u=a.options;e=f(e,!0),r.firePointEvent("update",{options:t},function(){r.applyOptions(t),s(t)&&(a.getAttribs(),o&&(t&&t.marker&&t.marker.symbol?r.graphic=o.destroy():o.attr(r.pointAttr[r.state||""])),t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy())),n=ye(r,l),a.updateParallelArrays(r,n),u.data[n]=r.options,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(c.isDirtyBox=!0),"point"===u.legendType&&c.legend.destroyItem(r),e&&c.redraw(i)})},remove:function(t,e){var i,n=this,r=n.series,s=r.points,a=r.chart,o=r.data;O(e,a),t=f(t,!0),n.firePointEvent("remove",null,function(){i=ye(n,o),o.length===s.length&&s.splice(i,1),o.splice(i,1),r.options.data.splice(i,1),r.updateParallelArrays(n,"splice",i,1),n.destroy(),r.isDirty=!0,r.isDirtyData=!0,t&&a.redraw()})}}),t(Ke.prototype,{addPoint:function(t,e,i,n){var r,s,a,o,l=this,c=l.options,u=l.data,d=l.graph,h=l.area,p=l.chart,m=l.xAxis&&l.xAxis.names,g=d&&d.shift||0,v=c.data,y=l.xData;if(O(n,p),i&&_e([d,h,l.graphNeg,l.areaNeg],function(t){t&&(t.shift=g+1)}),h&&(h.isArea=!0),e=f(e,!0),r={series:l},l.pointClass.prototype.applyOptions.apply(r,[t]),a=r.x,o=y.length,l.requireSorting&&a<y[o-1])for(s=!0;o&&y[o-1]>a;)o--;l.updateParallelArrays(r,"splice",o,0,0),l.updateParallelArrays(r,o),m&&(m[a]=r.name),v.splice(o,0,t),s&&(l.data.splice(o,0,null),l.processData()),"point"===c.legendType&&l.generatePoints(),i&&(u[0]&&u[0].remove?u[0].remove(!1):(u.shift(),l.updateParallelArrays(r,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),p.redraw())},remove:function(t,e){var i=this,n=i.chart;t=f(t,!0),i.isRemoving||(i.isRemoving=!0,Ce(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(i,n){var r,s=this.chart,a=this.userOptions,o=this.type,l=pe[o].prototype;for(r in i=e(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},i),this.remove(!1),l)l.hasOwnProperty(r)&&(this[r]=H);t(this,pe[i.type||o].prototype),this.init(s,i),f(n,!0)&&s.redraw(!1)}}),t(B.prototype,{update:function(i,n){var r=this.chart;i=r.options[this.coll][this.options.index]=e(this.userOptions,i),this.destroy(!0),this._addedPlotLB=this.userMin=this.userMax=H,this.init(r,t(i,{events:H})),r.isDirtyBox=!0,f(n,!0)&&r.redraw()},remove:function(t){var e=this.chart,i=this.coll;_e(this.series,function(t){t.remove(!1)}),u(e.axes,this),u(e[i],this),e.options[i].splice(this.options.index,1),_e(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,f(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Qe=v(Ke);pe.line=Qe,Ie.area=e(Le,{threshold:0});var Ze=v(Ke,{type:"area",getSegments:function(){var t,e,i,n,r,s=[],a=[],o=[],l=this.xAxis,c=this.yAxis,u=c.stacks[this.stackKey],d={},h=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<h.length;n++)d[h[n].x]=h[n];for(r in u)null!==u[r].total&&o.push(+r);o.sort(function(t,e){return t-e}),_e(o,function(n){(!p||d[n]&&null!==d[n].y)&&(d[n]?a.push(d[n]):(t=l.translate(n),i=u[n].percent?u[n].total?100*u[n].cum/u[n].total:0:u[n].cum,e=c.toPixels(i,!0),a.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Bt})))}),a.length&&s.push(a)}else Ke.prototype.getSegments.call(this),s=this.segments;this.segments=s},getSegmentPath:function(t){var e,i,n=Ke.prototype.getSegmentPath.call(this,t),r=[].concat(n),s=this.options,a=n.length,o=this.yAxis.getThreshold(s.threshold);if(3===a&&r.push(Zt,n[1],n[2]),s.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)i=f(t[e].yBottom,o),e<t.length-1&&s.step&&r.push(t[e+1].plotX,i),r.push(t[e].plotX,i);else this.closeSegment(r,t,o);return this.areaPath=this.areaPath.concat(r),n},closeSegment:function(t,e,i){t.push(Zt,e[e.length-1].plotX,i,Zt,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Ke.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,r=i.negativeFillColor,s=[["area",this.color,i.fillColor]];(n||r)&&s.push(["areaNeg",n,r]),_e(s,function(n){var r=n[0],s=t[r];s?s.animate({d:e}):t[r]=t.chart.renderer.path(e).attr({fill:f(n[2],je(n[1]).setOpacity(f(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Ge.drawRectangle});pe.area=Ze,Ie.spline=e(Le);var Je=v(Ke,{type:"spline",getPointSpline:function(t,e,i){var n,r,s,a,o,l=1.5,c=l+1,u=e.plotX,d=e.plotY,h=t[i-1],p=t[i+1];if(h&&p){var f,m=h.plotX,g=h.plotY,v=p.plotX,y=p.plotY;a=(l*d+y)/c,a+=f=(a-(r=(l*d+g)/c))*((s=(l*u+v)/c)-u)/(s-(n=(l*u+m)/c))+d-a,(r+=f)>g&&r>d?a=2*d-(r=yt(g,d)):r<g&&r<d&&(a=2*d-(r=_t(g,d))),a>y&&a>d?r=2*d-(a=yt(y,d)):a<y&&a<d&&(r=2*d-(a=_t(y,d))),e.rightContX=s,e.rightContY=a}return i?(o=["C",h.rightContX||h.plotX,h.rightContY||h.plotY,n||u,r||d,u,d],h.rightContX=h.rightContY=null):o=[Qt,u,d],o}});pe.spline=Je,Ie.areaspline=e(Ie.area);var ti=Ze.prototype,ei=v(Je,{type:"areaspline",closedStacks:!0,getSegmentPath:ti.getSegmentPath,closeSegment:ti.closeSegment,drawGraph:ti.drawGraph,drawLegendSymbol:Ge.drawRectangle});pe.areaspline=ei,Ie.column=e(Le,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var ii=v(Ke,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Ke.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&_e(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,r=i.xAxis,s=i.yAxis,a=r.reversed,o={},l=0;!1===n.grouping?l=1:_e(i.chart.series,function(n){var r=n.options,a=n.yAxis;n.type===i.type&&n.visible&&s.len===a.len&&s.pos===a.pos&&(r.stacking?(t=n.stackKey,o[t]===H&&(o[t]=l++),e=o[t]):!1!==r.grouping&&(e=l++),n.columnIndex=e)});var c=_t(bt(r.transA)*(r.ordinalSlope||n.pointRange||r.closestPointRange||1),r.len),u=c*n.groupPadding,h=(c-2*u)/l,p=n.pointWidth,m=d(p)?(h-p)/2:h*n.pointPadding,g=f(p,h-2*m),v=m+(u+((a?l-(i.columnIndex||0):i.columnIndex)||0)*h-c/2)*(a?-1:1);return i.columnMetrics={width:g,offset:v}},translate:function(){var t=this,e=t.chart,i=t.options,n=i.borderWidth,r=t.yAxis,s=i.threshold,a=t.translatedThreshold=r.getThreshold(s),o=f(i.minPointLength,5),l=t.getColumnMetrics(),c=l.width,u=t.barW=vt(yt(c,1+2*n)),d=t.pointXOffset=l.offset,h=-(n%2?.5:0),p=n%2?.5:1;e.renderer.isVML&&e.inverted&&(p+=1),Ke.prototype.translate.apply(t),_e(t.points,function(t){var e,i,n=f(t.yBottom,a),s=_t(yt(-999-n,t.plotY),r.len+999+n),l=t.plotX+d,m=u,g=_t(s,n),v=yt(s,n)-g;bt(v)<o&&o&&(v=o,g=mt(bt(g-a)>o?n-o:a-(r.translate(t.y,0,1,0,1)<=a?o:0))),t.barX=l,t.pointWidth=c,i=bt(l)<.5,m=mt(l+m)+h-(l=mt(l)+h),e=bt(g)<.5,v=mt(g+v)+p-(g=mt(g)+p),i&&(l+=1,m-=1),e&&(g-=1,v+=1),t.shapeType="rect",t.shapeArgs={x:l,y:g,width:m,height:v}})},getSymbol:Bt,drawLegendSymbol:Ge.drawRectangle,drawGraph:Bt,drawPoints:function(){var t,i=this,n=this.chart,r=i.options,s=n.renderer,a=n.options.animationLimit||250;_e(i.points,function(o){var l=o.plotY,c=o.graphic;l===H||isNaN(l)||null===o.y?c&&(o.graphic=c.destroy()):(t=o.shapeArgs,c?(Ae(c),c[n.pointCount<a?"animate":"attr"](e(t))):o.graphic=c=s[o.shapeType](t).attr(o.pointAttr[o.selected?ne:ee]).add(i.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},drawTracker:We.drawTrackerPoint,animate:function(t){var e,i=this,n=this.yAxis,r=i.options,s=this.chart.inverted,a={};Ot&&(t?(a.scaleY=.001,e=_t(n.pos+n.len,yt(n.pos,n.toPixels(r.threshold))),s?a.translateX=e-n.len:a.translateY=e,i.group.attr(a)):(a.scaleY=1,a[s?"translateX":"translateY"]=n.pos,i.group.animate(a,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&_e(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Ke.prototype.remove.apply(t,arguments)}});pe.column=ii,Ie.bar=e(Ie.column);var ni=v(ii,{type:"bar",inverted:!0});pe.bar=ni,Ie.scatter=e(Le,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var ri=v(Ke,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,drawTracker:We.drawTrackerPoint,drawGraph:function(){this.options.lineWidth&&Ke.prototype.drawGraph.call(this)},setTooltipPoints:Bt});pe.scatter=ri,Ie.pie=e(Le,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var si={type:"pie",isCartesian:!1,pointClass:v(Ye,{init:function(){Ye.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:!1!==i.visible,name:f(i.name,"Slice")}),ke(i,"select",e=function(t){i.slice("select"===t.type)}),ke(i,"unselect",e),i},setVisible:function(t){var e,i=this,n=i.series,r=n.chart;i.visible=i.options.visible=t=t===H?!i.visible:t,n.options.data[ye(i,n.data)]=i.options,e=t?"show":"hide",_e(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e]()}),i.legendItem&&r.legend.colorizeItem(i,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,r.redraw())},slice:function(t,e,i){var n,r=this,s=r.series;O(i,s.chart),e=f(e,!0),r.sliced=r.options.sliced=t=d(t)?t:!r.sliced,s.options.data[ye(r,s.data)]=r.options,n=t?r.slicedTranslation:{translateX:0,translateY:0},r.graphic.animate(n),r.shadowGroup&&r.shadowGroup.animate(n)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Bt,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(_e(i,function(t){var i=t.graphic,r=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:r.r,start:r.start,end:r.end},e.options.animation))}),e.animate=null)},setData:function(t,e){Ke.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),f(e,!0)&&this.chart.redraw()},generatePoints:function(){var t,e,i,n,r=0,s=this.options.ignoreHiddenPoint;for(Ke.prototype.generatePoints.call(this),i=(e=this.points).length,t=0;t<i;t++)n=e[t],r+=s&&!n.visible?0:n.y;for(this.total=r,t=0;t<i;t++)(n=e[t]).percentage=r>0?n.y/r*100:0,n.total=r},translate:function(t){this.generatePoints();var e,i,n,r,s,a,o,l=this,c=0,u=1e3,d=l.options,h=d.slicedOffset,p=h+d.borderWidth,f=d.startAngle||0,m=l.startAngleRad=kt/180*(f-90),g=(l.endAngleRad=kt/180*((d.endAngle||f+360)-90))-m,v=l.points,y=d.dataLabels.distance,_=d.ignoreHiddenPoint,b=v.length;for(t||(l.center=t=l.getCenter()),l.getX=function(e,i){return n=ft.asin((e-t[1])/(t[2]/2+y)),t[0]+(i?-1:1)*(wt(n)*(t[2]/2+y))},a=0;a<b;a++)o=v[a],e=m+c*g,_&&!o.visible||(c+=o.percentage/100),i=m+c*g,o.shapeType="arc",o.shapeArgs={x:t[0],y:t[1],r:t[2]/(2.5-o.percentage/100),innerR:t[3]/2,start:mt(e*u)/u,end:mt(i*u)/u},(n=(i+e)/2)>.75*g&&(n-=2*kt),o.slicedTranslation={translateX:mt(wt(n)*h),translateY:mt(Tt(n)*h)},r=wt(n)*t[2]/2,s=Tt(n)*t[2]/2,o.tooltipPos=[t[0]+.7*r,t[1]+.7*s],o.half=n<-kt/2||n>kt/2?1:0,o.angle=n,p=_t(p,y/2),o.labelPos=[t[0]+r+wt(n)*y,t[1]+s+Tt(n)*y,t[0]+r+wt(n)*p,t[1]+s+Tt(n)*p,t[0]+r,t[1]+s,y<0?"center":o.half?"right":"left",n]},setTooltipPoints:Bt,drawGraph:null,drawPoints:function(){var e,i,n,r,s=this,a=s.chart.renderer,o=s.options.shadow;o&&!s.shadowGroup&&(s.shadowGroup=a.g("shadow").add(s.group)),_e(s.points,function(l){i=l.graphic,r=l.shapeArgs,n=l.shadowGroup,o&&!n&&(n=l.shadowGroup=a.g("shadow").add(s.shadowGroup)),e=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(r,e)):l.graphic=i=a.arc(r).setRadialReference(s.center).attr(l.pointAttr[l.selected?ne:ee]).attr({"stroke-linejoin":"round"}).attr(e).add(s.group).shadow(o,n),l.visible!==undefined&&l.setVisible(l.visible)})},sortByAngle:function(t,e){t.sort(function(t,i){return t.angle!==undefined&&(i.angle-t.angle)*e})},drawTracker:We.drawTrackerPoint,drawLegendSymbol:Ge.drawRectangle,getCenter:Xe.getCenter,getSymbol:Bt};si=v(Ke,si),pe.pie=si,Ke.prototype.drawDataLabels=function(){var i,n,r,s,a=this,o=a.options,l=o.cursor,c=o.dataLabels,u=a.points;(c.enabled||a._hasPointLabels)&&(a.dlProcessOptions&&a.dlProcessOptions(c),s=a.plotGroup("dataLabelsGroup","data-labels",a.visible?Xt:$t,c.zIndex||6),n=c,_e(u,function(o){var u,h,p,m,g,v=o.dataLabel,y=o.connector,_=!0;if(u=f((i=o.options&&o.options.dataLabels)&&i.enabled,n.enabled),v&&!u)o.dataLabel=v.destroy();else if(u){if(g=(c=e(n,i)).rotation,h=o.getLabelConfig(),r=c.format?T(c.format,h):c.formatter.call(h,c),c.style.color=f(c.color,c.style.color,a.color,"black"),v)d(r)?(v.attr({text:r}),_=!1):(o.dataLabel=v=v.destroy(),y&&(o.connector=y.destroy()));else if(d(r)){for(m in p={fill:c.backgroundColor,stroke:c.borderColor,"stroke-width":c.borderWidth,r:c.borderRadius||0,rotation:g,padding:c.padding,zIndex:1})p[m]===H&&delete p[m];v=o.dataLabel=a.chart.renderer[g?"text":"label"](r,0,-999,null,null,null,c.useHTML).attr(p).css(t(c.style,l&&{cursor:l})).add(s).shadow(c.shadow)}v&&a.alignDataLabel(o,v,c,null,_)}}))},Ke.prototype.alignDataLabel=function(e,i,n,r,s){var a,o=this.chart,l=o.inverted,c=f(e.plotX,-999),u=f(e.plotY,-999),d=i.getBBox(),h=this.visible&&(e.series.forceDL||o.isInsidePlot(e.plotX,e.plotY,l));h&&(r=t({x:l?o.plotWidth-u:c,y:mt(l?o.plotHeight-c:u),width:0,height:0},r),t(n,{width:d.width,height:d.height}),n.rotation?(a={align:n.align,x:r.x+n.x+r.width/2,y:r.y+n.y+r.height/2},i[s?"attr":"animate"](a)):(i.align(n,null,r),a=i.alignAttr,"justify"===f(n.overflow,"justify")?this.justifyDataLabel(i,n,a,d,r,s):f(n.crop,!0)&&(h=o.isInsidePlot(a.x,a.y)&&o.isInsidePlot(a.x+d.width,a.y+d.height)))),h||(i.attr({y:-999}),i.placed=!1)},Ke.prototype.justifyDataLabel=function(t,e,i,n,r,s){var a,o,l=this.chart,c=e.align,u=e.verticalAlign;(a=i.x)<0&&("right"===c?e.align="left":e.x=-a,o=!0),(a=i.x+n.width)>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-a,o=!0),(a=i.y)<0&&("bottom"===u?e.verticalAlign="top":e.y=-a,o=!0),(a=i.y+n.height)>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-a,o=!0),o&&(t.placed=!s,t.align(e,null,r))},pe.pie&&(pe.pie.prototype.drawDataLabels=function(){var t,e,i,n,r,s,a,o,l,c,u,d,h,p=this,m=p.data,g=p.chart,v=p.options.dataLabels,y=f(v.connectorPadding,10),_=f(v.connectorWidth,1),b=g.plotWidth,w=g.plotHeight,T=f(v.softConnector,!0),k=v.distance,S=p.center,C=S[2]/2,x=S[1],E=k>0,P=[[],[]],I=[0,0,0,0],L=function(t,e){return e.y-t.y};if(p.visible&&(v.enabled||p._hasPointLabels)){for(Ke.prototype.drawDataLabels.apply(p),_e(m,function(t){t.dataLabel&&t.visible&&P[t.half].push(t)}),d=0;!a&&m[d];)a=m[d]&&m[d].dataLabel&&(m[d].dataLabel.getBBox().height||21),d++;for(d=2;d--;){var D,O,M,j=[],R=[],N=P[d],F=N.length;if(p.sortByAngle(N,d-.5),k>0){for(O=x-C-k;O<=x+C+k;O+=a)j.push(O);if(F>(D=j.length)){for((u=[].concat(N)).sort(L),h=F;h--;)u[h].rank=h;for(h=F;h--;)N[h].rank>=D&&N.splice(h,1);F=N.length}for(h=0;h<F;h++){t=N[h],s=t.labelPos;var B,U,z=9999;for(U=0;U<D;U++)(B=bt(j[U]-s[1]))<z&&(z=B,M=U);if(M<h&&null!==j[h])M=h;else if(D<F-h+M&&null!==j[h])for(M=D-F+h;null===j[M];)M++;else for(;null===j[M];)M++;R.push({i:M,y:j[M]}),j[M]=null}R.sort(L)}for(h=0;h<F;h++){var V,H;t=N[h],s=t.labelPos,n=t.dataLabel,c=!1===t.visible?$t:Xt,H=s[1],k>0?(M=(V=R.pop()).i,(H>(l=V.y)&&null!==j[M+1]||H<l&&null!==j[M-1])&&(l=H)):l=H,o=v.justify?S[0]+(d?-1:1)*(C+k):p.getX(0===M||M===j.length-1?H:l,d),n._attr={visibility:c,align:s[6]},n._pos={x:o+v.x+({left:y,right:-y}[s[6]]||0),y:l+v.y-10},n.connX=o,n.connY=l,null===this.options.size&&(r=n.width,o-r<y?I[3]=yt(mt(r-o+y),I[3]):o+r>b-y&&(I[1]=yt(mt(o+r-b+y),I[1])),l-a/2<0?I[0]=yt(mt(a/2-l),I[0]):l+a/2>w&&(I[2]=yt(mt(l+a/2-w),I[2])))}}(0===A(I)||this.verifyDataLabelOverflow(I))&&(this.placeDataLabels(),E&&_&&_e(this.points,function(t){e=t.connector,s=t.labelPos,(n=t.dataLabel)&&n._pos?(c=n._attr.visibility,o=n.connX,l=n.connY,i=T?[Qt,o+("left"===s[6]?5:-5),l,"C",o,l,2*s[2]-s[4],2*s[3]-s[5],s[2],s[3],Zt,s[4],s[5]]:[Qt,o+("left"===s[6]?5:-5),l,Zt,s[2],s[3],Zt,s[4],s[5]],e?(e.animate({d:i}),e.attr("visibility",c)):t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":_,stroke:v.connectorColor||t.color||"#606060",visibility:c}).add(p.group)):e&&(t.connector=e.destroy())}))}},pe.pie.prototype.placeDataLabels=function(){_e(this.points,function(t){var e,i=t.dataLabel;i&&((e=i._pos)?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))})},pe.pie.prototype.alignDataLabel=Bt,pe.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,r=n.center,s=n.minSize||80,a=s;return null!==r[0]?a=yt(i[2]-yt(t[1],t[3]),s):(a=yt(i[2]-t[1]-t[3],s),i[0]+=(t[3]-t[1])/2),null!==r[1]?a=yt(_t(a,i[2]-yt(t[0],t[2])),s):(a=yt(_t(a,i[2]-t[0]-t[2]),s),i[1]+=(t[0]-t[2])/2),a<i[2]?(i[2]=a,this.translate(i),_e(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),pe.column&&(pe.column.prototype.alignDataLabel=function(t,i,n,r,s){var a=this.chart,o=a.inverted,l=t.dlBox||t.shapeArgs,c=t.below||t.plotY>f(this.translatedThreshold,a.plotSizeY),u=f(n.inside,!!this.options.stacking);l&&(r=e(l),o&&(r={x:a.plotWidth-r.y-r.height,y:a.plotHeight-r.x-r.width,width:r.height,height:r.width}),u||(o?(r.x+=c?0:r.width,r.width=0):(r.y+=c?r.height:0,r.height=0))),n.align=f(n.align,!o||u?"center":c?"right":"left"),n.verticalAlign=f(n.verticalAlign,o||u?"middle":c?"top":"bottom"),Ke.prototype.alignDataLabel.call(this,t,i,n,r,s)}),t(Highcharts,{Axis:B,Chart:V,Color:je,Point:Ye,Tick:F,Tooltip:z,Renderer:W,Series:Ke,SVGElement:N,SVGRenderer:Ue,arrayMin:E,arrayMax:A,charts:Ut,dateFormat:G,format:T,pathAnim:Y,getOptions:R,hasBidiBug:Mt,isTouchDevice:Lt,numberFormat:y,seriesTypes:pe,setOptions:j,addEvent:ke,removeEvent:Se,createElement:g,discardElement:I,css:m,each:_e,extend:t,map:Te,merge:e,pick:f,splat:p,extendClass:v,pInt:n,wrap:b,svg:Ot,canvas:jt,vml:!Ot&&!jt,product:zt,version:Vt})}(),function(t){t.fn.htmlarea=function(t){if(t&&"string"==typeof t){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var r=e(this[0]),s=r[t];if(s)return s.apply(r,i)}return this.each(function(){e(this,t)})};var e=window.jHtmlArea=function(t,i){return t.jquery?e(t[0]):t.jhtmlareaObject?t.jhtmlareaObject:new e.fn.init(t,i)};e.fn=e.prototype={jhtmlarea:"0.7.5",init:function(n,r){if("textarea"===n.nodeName.toLowerCase()){var s=t.extend({},e.defaultOptions,r);n.jhtmlareaObject=this;var a=this.textarea=t(n),o=this.container=t("<div/>").addClass("jHtmlArea").width(a.width()).insertAfter(a),l=this.toolbar=t("<div/>").addClass("ToolBar").appendTo(o);i.initToolBar.call(this,s);var c=this.iframe=t("<iframe/>").height(a.height());c.width(a.width()-(t.browser.msie?0:4));var u=this.htmlarea=t("<div/>").append(c);o.append(u).append(a.hide()),i.initEditor.call(this,s),i.attachEditorEvents.call(this),c.height(c.height()-l.height()),
l.width(a.width()-2),s.loaded&&s.loaded.call(this)}},dispose:function(){this.textarea.show().insertAfter(this.container),this.container.remove(),this.textarea[0].jhtmlareaObject=null},execCommand:function(t,e,i){this.iframe[0].contentWindow.focus(),this.editor.execCommand(t,e||!1,i||null),this.updateTextArea()},ec:function(t,e,i){this.execCommand(t,e,i)},queryCommandValue:function(t){return this.iframe[0].contentWindow.focus(),this.editor.queryCommandValue(t)},qc:function(t){return this.queryCommandValue(t)},getSelectedHTML:function(){if(t.browser.msie)return this.getRange().htmlText;var e=this.getRange().cloneContents();return t("<p/>").append(t(e)).html()},getSelection:function(){return t.browser.msie?this.editor.selection:this.iframe[0].contentDocument.defaultView.getSelection()},getRange:function(){var t=this.getSelection();return t?t.getRangeAt?t.getRangeAt(0):t.createRange():null},html:function(t){if(!t)return this.toHtmlString();this.textarea.val(t),this.updateHtmlArea()},pasteHTML:function(e){this.iframe[0].contentWindow.focus();var i=this.getRange();t.browser.msie?i.pasteHTML(e):t.browser.mozilla?(i.deleteContents(),i.insertNode(t(0!=e.indexOf("<")?t("<span/>").append(e):e)[0])):(i.deleteContents(),i.insertNode(t(this.iframe[0].contentWindow.document.createElement("span")).append(t(0!=e.indexOf("<")?"<span>"+e+"</span>":e))[0])),i.collapse(!1),i.select()},cut:function(){this.ec("cut")},copy:function(){this.ec("copy")},paste:function(){this.ec("paste")},bold:function(){this.ec("bold")},italic:function(){this.ec("italic")},underline:function(){this.ec("underline")},strikeThrough:function(){this.ec("strikethrough")},image:function(e){t.browser.msie&&!e?this.ec("insertImage",!0):this.ec("insertImage",!1,e||prompt("Image URL:","http://"))},removeFormat:function(){this.ec("removeFormat",!1,[]),this.unlink()},link:function(){t.browser.msie?this.ec("createLink",!0):this.ec("createLink",!1,prompt("Link URL:","http://"))},unlink:function(){this.ec("unlink",!1,[])},orderedList:function(){this.ec("insertorderedlist")},unorderedList:function(){this.ec("insertunorderedlist")},superscript:function(){this.ec("superscript")},subscript:function(){this.ec("subscript")},p:function(){this.formatBlock("<p>")},h1:function(){this.heading(1)},h2:function(){this.heading(2)},h3:function(){this.heading(3)},h4:function(){this.heading(4)},h5:function(){this.heading(5)},h6:function(){this.heading(6)},heading:function(e){this.formatBlock(t.browser.msie?"Heading "+e:"h"+e)},indent:function(){this.ec("indent")},outdent:function(){this.ec("outdent")},insertHorizontalRule:function(){this.ec("insertHorizontalRule",!1,"ht")},justifyLeft:function(){this.ec("justifyLeft")},justifyCenter:function(){this.ec("justifyCenter")},justifyRight:function(){this.ec("justifyRight")},increaseFontSize:function(){t.browser.msie?this.ec("fontSize",!1,this.qc("fontSize")+1):t.browser.safari?this.getRange().surroundContents(t(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","larger")[0]):this.ec("increaseFontSize",!1,"big")},decreaseFontSize:function(){t.browser.msie?this.ec("fontSize",!1,this.qc("fontSize")-1):t.browser.safari?this.getRange().surroundContents(t(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","smaller")[0]):this.ec("decreaseFontSize",!1,"small")},forecolor:function(t){this.ec("foreColor",!1,t||prompt("Enter HTML Color:","#"))},formatBlock:function(t){this.ec("formatblock",!1,t||null)},showHTMLView:function(){this.updateTextArea(),this.textarea.show(),this.htmlarea.hide(),t("ul li:not(li:has(a.html))",this.toolbar).hide(),t("ul:not(:has(:visible))",this.toolbar).hide(),t("ul li a.html",this.toolbar).addClass("highlighted")},hideHTMLView:function(){this.updateHtmlArea(),this.textarea.hide(),this.htmlarea.show(),t("ul",this.toolbar).show(),t("ul li",this.toolbar).show().find("a.html").removeClass("highlighted")},toggleHTMLView:function(){this.textarea.is(":hidden")?this.showHTMLView():this.hideHTMLView()},toHtmlString:function(){return this.editor.body.innerHTML},toString:function(){return this.editor.body.innerText},updateTextArea:function(){this.textarea.val(this.toHtmlString())},updateHtmlArea:function(){this.editor.body.innerHTML=this.textarea.val()}},e.fn.init.prototype=e.fn,e.defaultOptions={toolbar:[["html"],["bold","italic","underline","strikethrough","|","subscript","superscript"],["increasefontsize","decreasefontsize"],["orderedlist","unorderedlist"],["indent","outdent"],["justifyleft","justifycenter","justifyright"],["link","unlink","image","horizontalrule"],["p","h1","h2","h3","h4","h5","h6"],["cut","copy","paste"]],css:null,toolbarText:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",cut:"Cut",copy:"Copy",paste:"Paste",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",indent:"Indent",outdent:"Outdent",horizontalrule:"Insert Horizontal Rule",justifyleft:"Left Justify",justifycenter:"Center Justify",justifyright:"Right Justify",increasefontsize:"Increase Font Size",decreasefontsize:"Decrease Font Size",forecolor:"Text Color",link:"Insert Link",unlink:"Remove Link",image:"Insert Image",orderedlist:"Insert Ordered List",unorderedlist:"Insert Unordered List",subscript:"Subscript",superscript:"Superscript",html:"Show/Hide HTML Source View"}};var i={toolbarButtons:{strikethrough:"strikeThrough",orderedlist:"orderedList",unorderedlist:"unorderedList",horizontalrule:"insertHorizontalRule",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",increasefontsize:"increaseFontSize",decreasefontsize:"decreaseFontSize",html:function(){this.toggleHTMLView()}},initEditor:function(t){var e=this.editor=this.iframe[0].contentWindow.document;if(e.designMode="on",e.open(),e.write(this.textarea.val()),e.close(),t.css){var i=e.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t.css,e.getElementsByTagName("head")[0].appendChild(i)}},initToolBar:function(e){function n(n){for(var a=t("<ul/>").appendTo(r.toolbar),o=0;o<n.length;o++){var l=n[o];if("string"===(typeof l).toLowerCase())if("|"===l)a.append(t('<li class="separator"/>'));else{var c=function(t){var e=i.toolbarButtons[t]||t;return"function"===(typeof e).toLowerCase()?function(t){e.call(this,t)}:function(){this[e](),this.editor.body.focus()}}(l.toLowerCase()),u=e.toolbarText[l.toLowerCase()];a.append(s(l.toLowerCase(),u||l,c))}else a.append(s(l.css,l.text,l.action))}}var r=this,s=function(e,i,n){return t("<li/>").append(t("<a href='javascript:void(0);'/>").addClass(e).attr("title",i).click(function(){n.call(r,t(this))}))};if(0!==e.toolbar.length&&i.isArray(e.toolbar[0]))for(var a=0;a<e.toolbar.length;a++)n(e.toolbar[a]);else n(e.toolbar)},attachEditorEvents:function(){var e=this,i=function(){e.updateHtmlArea()};this.textarea.click(i).keyup(i).keydown(i).mousedown(i).blur(i);var n=function(){e.updateTextArea()};if(t(this.editor.body).click(n).keyup(n).keydown(n).mousedown(n).blur(n),t("form").submit(function(){e.toggleHTMLView(),e.toggleHTMLView()}),window.__doPostBack){var r=__doPostBack;window.__doPostBack=function(){return e&&e.toggleHTMLView&&(e.toggleHTMLView(),e.toggleHTMLView()),r.apply(window,arguments)}}},isArray:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")}}}(jQuery),function(t){if(jHtmlArea){var e=jHtmlArea.fn.forecolor;jHtmlArea.fn.forecolor=function(i){if(i)e.call(this,i);else{var n=this,r=this.getRange();jHtmlAreaColorPickerMenu(t(".forecolor",this.toolbar),{colorChosen:function(e){t.browser.msie?r.execCommand("ForeColor",!1,e):n.forecolor(e)}})}}}var i=window.jHtmlAreaColorPickerMenu=function(t,e){return new jHtmlAreaColorPickerMenu.fn.init(t,e)};i.fn=i.prototype={jhtmlareacolorpickermenu:"0.7.0",init:function(e,n){var r=t.extend({},i.defaultOptions,n),s=this,a=this.owner=t(e),o=a.position();i.instance&&i.instance.hide(),jHtmlAreaColorPickerMenu.instance=this;for(var l=this.picker=t("<div/>").css({position:"absolute",left:o.left+r.offsetLeft,top:o.top+a.height()+r.offsetTop,"z-index":r["z-index"]}).addClass("jHtmlAreaColorPickerMenu"),c=0;c<r.colors.length;c++){var u=r.colors[c];t("<div/>").css("background-color",u).appendTo(l).click(function(t){return function(){r.colorChosen&&r.colorChosen.call(this,t),s.hide()}}(u))}t("<div/>").html("<div></div>Automatic").addClass("automatic").appendTo(l).click(function(){r.colorChosen&&r.colorChosen.call(this,null),s.hide()});var d=!1;l.appendTo(a.parent()).show().mouseout(function(){d=!0,s.currentTimeout=window.setTimeout(function(){!0===d&&s.hide()},1e3)}).mouseover(function(){s.currentTimeout&&(window.clearTimeout(s.currentTimeout),s.currentTimeout=null),d=!1})},hide:function(){this.picker.hide(),this.picker.remove()}},i.fn.init.prototype=i.fn,i.defaultOptions={"z-index":0,offsetTop:0,offsetLeft:0,colors:["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99FFFF","#33FFFF","#66CCCC","#00CCCC","#339999","#336666","#003333","#CCFFFF","#66FFFF","#33CCFF","#3366FF","#3333FF","#000099","#000066","#CCCCFF","#9999FF","#6666CC","#6633FF","#6600CC","#333399","#330099","#FFCCFF","#FF99FF","#CC66CC","#CC33CC","#993399","#663366","#330033"],colorChosen:null}}(jQuery),function(t,e,n,r){function s(e,i){this.element=e,this.options=t.extend({},c,i),this._defaults=c,this._name=l,this.init()}function a(){return!!("ontouchstart"in e)}function o(){var t=(n.body||n.documentElement).style,e="transition";if("string"==typeof t[e])return!0;v=["Moz","Webkit","Khtml","O","ms"],e=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof t[v[i]+e])return!0;return!1}var l="tooltipster",c={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(t,e){e()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},u=!0;o()||(u=!1);var d=a();t(e).on("mousemove.tooltipster",function(){d=!1,t(e).off("mousemove.tooltipster")}),s.prototype={init:function(){var e=t(this.element),i=this,s=!0;if(0==i.options.touchDevices&&d&&(s=!1),n.all&&!n.querySelector&&(s=!1),1==s){if(1==this.options.iconDesktop&&!d||1==this.options.iconTouch&&d){var a=e.attr("title");e.removeAttr("title");var o=i.options.iconTheme,l=t('<span class="'+o.replace(".","")+'" title="'+a+'">'+this.options.icon+"</span>");l.insertAfter(e),e.data("tooltipsterIcon",l),e=l}var c=t.trim(i.options.content).length>0?i.options.content:e.attr("title");e.data("tooltipsterContent",c),e.removeAttr("title"),1!=this.options.touchDevices||!d||"click"!=this.options.trigger&&"hover"!=this.options.trigger?("hover"==this.options.trigger&&(e.on("mouseenter.tooltipster",function(){i.showTooltip()}),1==this.options.interactive?e.on("mouseleave.tooltipster",function(){var t=e.data("tooltipster"),n=!1;if(t!==r&&""!==t){t.mouseenter(function(){n=!0}),t.mouseleave(function(){n=!1});setTimeout(function(){1==n&&t.mouseleave(function(){})},i.options.interactiveTolerance)}}):e.on("mouseleave.tooltipster",function(){})),"click"==this.options.trigger&&e.on("click.tooltipster",function(){""==e.data("tooltipster")||e.data("tooltipster")==r?i.showTooltip():i.hideTooltip()})):e.bind("touchstart",function(){i.showTooltip()})}},showTooltip:function(){var e=t(this.element),i=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon")),e.hasClass("tooltipster-disable")||(t(".tooltipster-base").not(".tooltipster-dying").length>0&&1==i.options.onlyOne&&t(".tooltipster-base").not(".tooltipster-dying").not(e.data("tooltipster")).each(function(){t(this).addClass("tooltipster-kill"),t(this).data("origin").data("plugin_tooltipster").hideTooltip()}),e.clearQueue().delay(i.options.delay).queue(function(){i.options.functionBefore(e,function(){if(e.data("tooltipster")!==r&&""!==e.data("tooltipster")){if(!(m=e.data("tooltipster")).hasClass("tooltipster-kill")){var n="tooltipster-"+i.options.animation;if(m.removeClass("tooltipster-dying"),1==u&&m.clearQueue().addClass(n+"-show"),i.options.timer>0){var s=m.data("tooltipsterTimer");clearTimeout(s),s=setTimeout(function(){m.data("tooltipsterTimer",r),i.hideTooltip()},i.options.timer),m.data("tooltipsterTimer",s)}1==i.options.touchDevices&&d&&t("body").bind("touchstart",function(e){if(1==i.options.interactive){var n=t(e.target),r=!0;n.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),1==r&&(i.hideTooltip(),t("body").unbind("touchstart"))}else i.hideTooltip(),t("body").unbind("touchstart")})}}else{t("body").css("overflow-x","hidden");var a=e.data("tooltipsterContent"),l=i.options.theme.replace(".",""),c=(n="tooltipster-"+i.options.animation,"-webkit-transition-duration: "+i.options.speed+"ms; -webkit-animation-duration: "+i.options.speed+"ms; -moz-transition-duration: "+i.options.speed+"ms; -moz-animation-duration: "+i.options.speed+"ms; -o-transition-duration: "+i.options.speed+"ms; -o-animation-duration: "+i.options.speed+"ms; -ms-transition-duration: "+i.options.speed+"ms; -ms-animation-duration: "+i.options.speed+"ms; transition-duration: "+i.options.speed+"ms; animation-duration: "+i.options.speed+"ms;"),h=i.options.fixedWidth>0?"width:"+i.options.fixedWidth+"px;":"",p=i.options.maxWidth>0?"max-width:"+i.options.maxWidth+"px;":"",f=1==i.options.interactive?"pointer-events: auto;":"",m=t('<div class="tooltipster-base '+l+" "+n+'" style="'+h+" "+p+" "+f+" "+c+'"></div>'),g=t('<div class="tooltipster-content"></div>');g.html(a),m.append(g),m.appendTo("body"),e.data("tooltipster",m),m.data("origin",e),i.positionTooltip(),i.options.functionReady(e,m),1==u?m.addClass(n+"-show"):m.css("display","none").removeClass(n).fadeIn(i.options.speed);var v=a,y=setInterval(function(){var n=e.data("tooltipsterContent");0==t("body").find(e).length?(m.addClass("tooltipster-dying"),i.hideTooltip()):v!==n&&""!==n&&(v=n,m.find(".tooltipster-content").html(n),1==i.options.updateAnimation&&(o()?(m.css({width:"","-webkit-transition":"all "+i.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+i.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+i.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+i.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+i.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){m.removeClass("tooltipster-content-changing"),setTimeout(function(){m.css({"-webkit-transition":i.options.speed+"ms","-moz-transition":i.options.speed+"ms","-o-transition":i.options.speed+"ms","-ms-transition":i.options.speed+"ms",transition:i.options.speed+"ms"})},i.options.speed)},i.options.speed)):m.fadeTo(i.options.speed,.5,function(){m.fadeTo(i.options.speed,1)})),i.positionTooltip()),0!=t("body").find(m).length&&0!=t("body").find(e).length||clearInterval(y)},200);if(i.options.timer>0){s=setTimeout(function(){m.data("tooltipsterTimer",r),i.hideTooltip()},i.options.timer+i.options.speed);m.data("tooltipsterTimer",s)}1==i.options.touchDevices&&d&&t("body").bind("touchstart",function(e){if(1==i.options.interactive){var n=t(e.target),r=!0;n.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),1==r&&(i.hideTooltip(),t("body").unbind("touchstart"))}else i.hideTooltip(),t("body").unbind("touchstart")}),m.mouseleave(function(){})}}),e.dequeue()}))},hideTooltip:function(){var e=t(this.element),i=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon"));var n=e.data("tooltipster");if(n==r&&(n=t(".tooltipster-dying")),e.clearQueue(),n!==r&&""!==n){var s=n.data("tooltipsterTimer");s!==r&&clearTimeout(s);var a="tooltipster-"+i.options.animation;1==u?n.clearQueue().removeClass(a+"-show").addClass("tooltipster-dying").delay(i.options.speed).queue(function(){n.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),i.options.functionAfter(e)}):n.clearQueue().addClass("tooltipster-dying").fadeOut(i.options.speed,function(){n.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),i.options.functionAfter(e)})}},positionTooltip:function(){var n=t(this.element),s=this;if(n.data("tooltipsterIcon")!==r&&(n=n.data("tooltipsterIcon")),n.data("tooltipster")!==r&&""!==n.data("tooltipster")){var a=n.data("tooltipster");a.css("width","");var o=t(e).width(),l=n.outerWidth(!1),c=n.outerHeight(!1),u=a.outerWidth(!1),d=a.innerWidth()+1,h=a.outerHeight(!1),p=n.offset(),f=p.top,m=p.left,g=r;if(n.is("area")){var v=n.attr("shape"),y=n.parent().attr("name"),_=t('img[usemap="#'+y+'"]'),b=_.offset().left,w=_.offset().top,T=n.attr("coords")!==r?n.attr("coords").split(","):r;if("circle"==v){var k=parseInt(T[0]),S=parseInt(T[1]),C=parseInt(T[2]);c=2*C,l=2*C,f=w+S-C,m=b+k-C}else if("rect"==v){k=parseInt(T[0]),S=parseInt(T[1]);var x=parseInt(T[2]),E=parseInt(T[3]);c=E-S,l=x-k,f=w+S,m=b+k}else if("poly"==v){var A=0,P=0,I=0,L=0,D="even";for(i=0;i<T.length;i++){var O=parseInt(T[i]);"even"==D?(O>I&&(I=O,0==i&&(A=I)),O<A&&(A=O),D="odd"):(O>L&&(L=O,1==i&&(P=L)),O<P&&(P=O),D="even")}c=L-P,l=I-A,f=w+P,m=b+A}else c=_.outerHeight(!1),l=_.outerWidth(!1),f=w,m=b}0==s.options.fixedWidth&&a.css({width:d+"px","padding-left":"0px","padding-right":"0px"});var M=0,j=0,R=parseInt(s.options.offsetY),N=parseInt(s.options.offsetX),F="";function B(){var i=t(e).scrollLeft();if(M-i<0){var n=M-i;M=i,a.data("arrow-reposition",n)}if(M+u-i>o){n=M-(o+i-u);M=o+i-u,a.data("arrow-reposition",n)}}function U(i,n){f-t(e).scrollTop()-h-R-12<0&&n.indexOf("top")>-1&&(s.options.position=i,g=n),f+c+h+12+R>t(e).scrollTop()+t(e).height()&&n.indexOf("bottom")>-1&&(s.options.position=i,g=n,j=f-h-R-12)}if("top"==s.options.position)M=m+N-(m+u-(m+l))/2,j=f-h-R-12,B(),U("bottom","top");if("top-left"==s.options.position&&(M=m+N,j=f-h-R-12,B(),U("bottom-left","top-left")),"top-right"==s.options.position&&(M=m+l+N-u,j=f-h-R-12,B(),U("bottom-right","top-right")),"bottom"==s.options.position)M=m-(m+u-(m+l))/2+N,j=f+c+R+12,B(),U("top","bottom");if("bottom-left"==s.options.position&&(M=m+N,j=f+c+R+12,B(),U("top-left","bottom-left")),"bottom-right"==s.options.position&&(M=m+l+N-u,j=f+c+R+12,B(),U("top-right","bottom-right")),"left"==s.options.position){M=m-N-u-12,myLeftMirror=m+N+l+12;var z=f+h-(f+n.outerHeight(!1));if(j=f-z/2-R,M<0&&myLeftMirror+u>o){var V=2*parseFloat(a.css("border-width")),H=u+M-V;a.css("width",H+"px"),h=a.outerHeight(!1),M=m-N-H-12-V,z=f+h-(f+n.outerHeight(!1)),j=f-z/2-R}else M<0&&(M=m+N+l+12,a.data("arrow-reposition","left"))}if("right"==s.options.position){M=m+N+l+12,myLeftMirror=m-N-u-12;z=f+h-(f+n.outerHeight(!1));if(j=f-z/2-R,M+u>o&&myLeftMirror<0){V=2*parseFloat(a.css("border-width")),H=o-M-V;a.css("width",H+"px"),h=a.outerHeight(!1),z=f+h-(f+n.outerHeight(!1)),j=f-z/2-R}else M+u>o&&(M=m-N-u-12,a.data("arrow-reposition","right"))}if(1==s.options.arrow){var W="tooltipster-arrow-"+s.options.position;if(s.options.arrowColor.length<1)var q=a.css("background-color");else q=s.options.arrowColor;var $=a.data("arrow-reposition");if($?"left"==$?(W="tooltipster-arrow-right",$=""):"right"==$?(W="tooltipster-arrow-left",$=""):$="left:"+$+"px;":$="","top"==s.options.position||"top-left"==s.options.position||"top-right"==s.options.position)var G=parseFloat(a.css("border-bottom-width")),X=a.css("border-bottom-color");else if("bottom"==s.options.position||"bottom-left"==s.options.position||"bottom-right"==s.options.position)G=parseFloat(a.css("border-top-width")),X=a.css("border-top-color");else if("left"==s.options.position)G=parseFloat(a.css("border-right-width")),X=a.css("border-right-color");else if("right"==s.options.position)G=parseFloat(a.css("border-left-width")),X=a.css("border-left-color");else G=parseFloat(a.css("border-bottom-width")),X=a.css("border-bottom-color");G>1&&G++;var Y="";if(0!==G){var K="",Q="border-color: "+X+";";-1!==W.indexOf("bottom")?K="margin-top: -"+G+"px;":-1!==W.indexOf("top")?K="margin-bottom: -"+G+"px;":-1!==W.indexOf("left")?K="margin-right: -"+G+"px;":-1!==W.indexOf("right")&&(K="margin-left: -"+G+"px;"),Y='<span class="tooltipster-arrow-border" style="'+K+" "+Q+';"></span>'}a.find(".tooltipster-arrow").remove(),F='<div class="'+W+' tooltipster-arrow" style="'+$+'">'+Y+'<span style="border-color:'+q+';"></span></div>',a.append(F)}a.css({top:j+"px",left:M+"px"}),g!==r&&(s.options.position=g)}}},t.fn[l]=function(e){if("string"==typeof e){var i=this,n=arguments[1];if(i.data("plugin_tooltipster")==r){var a=i.find("*");i=t(),a.each(function(){t(this).data("plugin_tooltipster")!==r&&i.push(t(this))})}return i.each(function(){switch(e.toLowerCase()){case"show":t(this).data("plugin_tooltipster").showTooltip();break;case"hide":t(this).data("plugin_tooltipster").hideTooltip();break;case"disable":t(this).addClass("tooltipster-disable");break;case"enable":t(this).removeClass("tooltipster-disable");break;case"destroy":t(this).data("plugin_tooltipster").hideTooltip(),t(this).data("plugin_tooltipster","").attr("title",i.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":if(t(this).data("tooltipsterIcon")==r)t(this).data("tooltipsterContent",n);else t(this).data("tooltipsterIcon").data("tooltipsterContent",n);break;case"reposition":t(this).data("plugin_tooltipster").positionTooltip()}}),this}return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new s(this,e));var i=t(this).data("plugin_tooltipster").options;if(1==i.iconDesktop&&!d||1==i.iconTouch&&d){var n=t(this).data("plugin_tooltipster");t(this).next().data("plugin_tooltipster",n)}})},d&&e.addEventListener("orientationchange",function(){t(".tooltipster-base").length>0&&t(".tooltipster-base").each(function(){t(this).data("origin").data("plugin_tooltipster").hideTooltip()})},!1),t(e).on("resize.tooltipster",function(){var e=t(".tooltipster-base").data("origin");null!==e&&e!==r&&e.tooltipster("reposition")})}(jQuery,window,document),function(t){function e(){var t,e,i=document.getElementsByTagName("mark")[0];document.createRange?((e=document.createRange()).selectNode(i),(t=window.getSelection()).removeAllRanges(),t.addRange(e)):((e=document.body.createTextRange()).moveToElementText(i),e.select())}t.fn.contentshare=function(i){var n=t.extend({},t.fn.contentshare.defaults,i);t.extend(t.fn.contentshare,{init:function(e){t.fn.contentshare.defaults.shareable=e},getContent:function(){for(var e="",i=0;i<n.shareLinks.length;i++)e+='<a href="'+n.shareLinks[i]+encodeURIComponent(t("mark.contentshare").html().replace(/\&nbsp;/g," ").replace(/(<([^>]+)>)/g,""))+'" '+(n.newTab?'target="_blank"':"")+'><img src="'+n.shareIcons[i]+'" '+(0!=i?'style="margin-left:5px"':"")+"/></a>";return e},getSelection:function(e){return window.getSelection?"string"==e?encodeURIComponent(t.trim(window.getSelection().getRangeAt(0).toString())):window.getSelection().getRangeAt(0):document.selection?"string"==e?encodeURIComponent(t.trim(document.selection.createRange().text)):document.selection.createRange():void 0},showTooltip:function(){if(this.clear(),!(this.getSelection("string").length<n.minLength)){this.preloadShareIcons(n.shareIcons);var i=this.getSelection(),r=document.createElement("mark");i.surroundContents(r),t("mark").addClass(n.className),t("."+n.className).tooltipster({trigger:"custom",interactive:!0,content:this.getContent(),animation:n.animation}),t("."+n.className).tooltipster("show"),e()}},preloadShareIcons:function(t){for(var e=0;e<t.length;e++){(new Image).src=t[e]}},clear:function(){t("."+n.className).tooltipster("hide"),t("mark").contents().unwrap(),t("mark").remove()}}),t.fn.contentshare.init(this)},t.fn.contentshare.defaults={shareable:{},shareIcons:["img/fb.png","img/tw.png"],shareLinks:["http://www.facebook.com/sharer.php?s=100&p[url]="+document.URL+"&p[title]="+document.title+"&p[summary]=","http://twitter.com/intent/tweet?text="],minLength:5,newTab:!0,className:"contentshare",animation:"grow"}}(jQuery),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function r(e,i){t.fn[e]=function(r){if("string"==typeof r){for(var a=n.call(arguments,1),o=0,l=this.length;l>o;o++){var c=this[o],u=t.data(c,e);if(u)if(t.isFunction(u[r])&&"_"!==r.charAt(0)){var d=u[r].apply(u,a);if(void 0!==d)return d}else s("no such method '"+r+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+r+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(r),n._init()):(n=new i(this,r),t.data(this,e,n))})}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),r(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i(t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var r=function(){};i.removeEventListener?r=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(r=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var s={bind:n,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:t.eventie=s}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;if(!e.isReady&&!i){e.isReady=!0;for(var n=0,a=s.length;a>n;n++){(0,s[n])()}}}function n(n){return n.bind(r,"DOMContentLoaded",i),n.bind(r,"readystatechange",i),n.bind(t,"load",i),e}var r=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],n)):t.docReady=n(t.eventie)}(this),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,r=this,s=r.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp)for(i in e={},n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i]);else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&((e={})[t]=i),e||i},n.addListener=function(t,i){var n,r=this.getListenersAsObject(t),s="object"==typeof i;for(n in r)r.hasOwnProperty(n)&&-1===e(r[n],i)&&r[n].push(s?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&(-1!==(n=e(s[r],i))&&s[r].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,r,s=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)s.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(r=e[n])&&("function"==typeof r?s.call(this,n,r):a.call(this,n,r));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,r,s=this.getListenersAsObject(t);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].length;n--;)!0===(i=s[r][n]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=s,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,r=0,s=i.length;s>r;r++)if(e=i[r]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=a.length;i>e;e++){t[a[e]]=0}return t}function n(t){function n(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var n=s(t);if("none"===n.display)return i();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var u=r.isBorderBox=!(!c||!n[c]||"border-box"!==n[c]),d=0,h=a.length;h>d;d++){var p=a[d],f=n[p];f=o(t,f);var m=parseFloat(f);r[p]=isNaN(m)?0:m}var g=r.paddingLeft+r.paddingRight,v=r.paddingTop+r.paddingBottom,y=r.marginLeft+r.marginRight,_=r.marginTop+r.marginBottom,b=r.borderLeftWidth+r.borderRightWidth,w=r.borderTopWidth+r.borderBottomWidth,T=u&&l,k=e(n.width);!1!==k&&(r.width=k+(T?0:g+b));var S=e(n.height);return!1!==S&&(r.height=S+(T?0:v+w)),r.innerWidth=r.width-(g+b),r.innerHeight=r.height-(v+w),r.outerWidth=r.width+y,r.outerHeight=r.height+_,r}}function o(t,e){if(r||-1===e.indexOf("%"))return e;var i=t.style,n=i.left,s=t.runtimeStyle,a=s&&s.left;return a&&(s.left=t.currentStyle.left),i.left=e,e=i.pixelLeft,i.left=n,a&&(s.left=a),e}var l,c=t("boxSizing");return function(){if(c){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[c]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=s(t);l=200===e(n.width),i.removeChild(t)}}(),n}var r=t.getComputedStyle,s=r?function(t){return r(t,null)}:function(t){return t.currentStyle},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("get-style-property")):t.getSize=n(t.getStyleProperty)}(window),function(t,e){function i(t,e){return t[o](e)}function n(t){t.parentNode||document.createDocumentFragment().appendChild(t)}function r(t,e){n(t);for(var i=t.parentNode.querySelectorAll(e),r=0,s=i.length;s>r;r++)if(i[r]===t)return!0;return!1}function s(t,e){return n(t),i(t,e)}var a,o=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,n=t.length;n>i;i++){var r=t[i]+"MatchesSelector";if(e[r])return r}}();if(o){var l=i(document.createElement("div"),"div");a=l?i:s}else a=r;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return a}):window.matchesSelector=a}(0,Element.prototype),
function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function r(t,r,s){function o(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=s("transition"),c=s("transform"),u=l&&c,d=!!s("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],p=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=p.length;i>e;e++){var n=p[e],r=s(n);r&&r!==n&&(t[n]=r)}return t}();e(o.prototype,t.prototype),o.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.getSize=function(){this.size=r(this.element)},o.prototype.css=function(t){var e=this.element.style;for(var i in t){e[f[i]||i]=t[i]}},o.prototype.getPosition=function(){var t=a(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,r=parseInt(t[i?"left":"right"],10),s=parseInt(t[n?"top":"bottom"],10);r=isNaN(r)?0:r,s=isNaN(s)?0:s;var o=this.layout.size;r-=i?o.paddingLeft:o.paddingRight,s-=n?o.paddingTop:o.paddingBottom,this.position.x=r,this.position.y=s},o.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=d?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};o.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,r=parseInt(t,10),s=parseInt(e,10),a=r===this.position.x&&s===this.position.y;if(this.setPosition(t,e),!a||this.isTransitioning){var o=t-i,l=e-n,c={},u=this.layout.options;o=u.isOriginLeft?o:-o,l=u.isOriginTop?l:-l,c.transform=m(o,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},o.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},o.prototype.moveTo=u?o.prototype._transitionTo:o.prototype.goTo,o.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},o.prototype._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},o.prototype._transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var g=c&&n(c)+",opacity";o.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},o.prototype.transition=o.prototype[l?"_transition":"_nonTransition"],o.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},o.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};o.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=v[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd)e.onEnd[n].call(this),delete e.onEnd[n];this.emitEvent("transitionEnd",[this])}},o.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},o.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var y={transitionProperty:"",transitionDuration:""};return o.prototype.removeTransitionStyles=function(){this.css(y)},o.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},o.prototype.remove=function(){if(l&&parseFloat(this.layout.options.transitionDuration)){var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()}else this.removeElem()},o.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},o.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},o.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}var s=t.getComputedStyle,a=s?function(t){return s(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],r):(t.Outlayer={},t.Outlayer.Item=r(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===d.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,r=t.length;r>n;n++)e.push(t[n]);else e.push(t);return e}function r(t,e){var i=p(e,t);-1!==i&&e.splice(i,1)}function s(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function a(i,a,d,p,f,m){function g(t,i){if("string"==typeof t&&(t=o.querySelector(t)),t&&h(t)){this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++v;this.element.outlayerGUID=n,y[n]=this,this._create(),this.options.isInitLayout&&this.layout()}else l&&l.error("Bad "+this.constructor.namespace+" element: "+t)}var v=0,y={};return g.namespace="outlayer",g.Item=m,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(g.prototype,d.prototype),g.prototype.option=function(t){e(this.options,t)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],r=0,s=e.length;s>r;r++){var a=new i(e[r],this);n.push(a)}return n},g.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],r=0,s=t.length;s>r;r++){var a=t[r];if(h(a))if(e){f(a,e)&&i.push(a);for(var o=a.querySelectorAll(e),l=0,c=o.length;c>l;l++)i.push(o[l])}else i.push(a)}return i},g.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=p(this.element)},g.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):h(n)&&(i=n),this[t]=i?p(i)[e]:n):this[t]=0},g.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},g.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var r=t[i];r.isIgnored||e.push(r)}return e},g.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(t&&t.length){this._itemsOn(t,"layout",i);for(var r=[],s=0,a=t.length;a>s;s++){var o=t[s],l=this._getItemLayoutPosition(o);l.item=o,l.isInstant=e||o.isLayoutInstant,r.push(l)}this._processLayoutQueue(r)}else i()},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},g.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},g.prototype._getContainerSize=u,g.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},g.prototype._itemsOn=function(t,e,i){function n(){return++r===s&&i.call(a),!0}for(var r=0,s=t.length,a=this,o=0,l=t.length;l>o;o++){t[o].on(e,n)}},g.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},g.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},g.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},g.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];r(n,this.stamps),this.unignore(n)}},g.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},g.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},g.prototype._manageStamp=u,g.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=p(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},g.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},g.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var t=p(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},g.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},g.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},g.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){t[i].reveal()}},g.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){t[i].hide()}},g.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},g.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var r=t[i],s=this.getItem(r);s&&e.push(s)}return e}},g.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,s=e.length;s>i;i++){var a=e[i];a.remove(),r(a,this.items)}}},g.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){this.items[e].destroy()}this.unbindResize(),delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},g.data=function(t){var e=t&&t.outlayerGUID;return e&&y[e]},g.create=function(t,i){function n(){g.apply(this,arguments)}return Object.create?n.prototype=Object.create(g.prototype):e(n.prototype,g.prototype),n.prototype.constructor=n,n.defaults=e({},g.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=g.data,n.Item=function(){m.apply(this,arguments)},n.Item.prototype=new m,a(function(){for(var e=s(t),i=o.querySelectorAll(".js-"+e),r="data-"+e+"-options",a=0,u=i.length;u>a;a++){var d,h=i[a],p=h.getAttribute(r);try{d=p&&JSON.parse(p)}catch(f){l&&l.error("Error parsing "+r+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+f);continue}var m=new n(h,d);c&&c.data(h,t,m)}}),c&&c.bridget&&c.bridget(t,n),n},g.Item=m,g}var o=t.document,l=t.console,c=t.jQuery,u=function(){},d=Object.prototype.toString,h="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},p=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],a):t.Outlayer=a(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=Math[e&&1>e?"round":"ceil"](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this._getColGroup(n),s=Math.min.apply(Math,r),a=i(r,s),o={x:this.columnWidth*a,y:s},l=s+t.size.outerHeight,c=this.cols+1-r.length,u=0;c>u;u++)this.colYs[a+u]=l;return o},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var r=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,r)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),r=this.options.isOriginLeft?n.left:n.right,s=r+i.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var o=Math.floor(s/this.columnWidth);o-=s%this.columnWidth?0:1,o=Math.min(this.cols-1,o);for(var l=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,c=a;o>=c;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){if(t[i]===e)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window),window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){var t,e=arguments;e.callee=e.callee.caller,t=[].slice.call(e),"object"==typeof console.log?log.apply.call(console.log,console,t):console.log.apply(console,t)}},function(t){function e(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)t[i]=t[i]||e}(function(){try{return console.log(),window.console}catch(t){return window.console={}}}()),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var i=t.scrollTo=function(e,i,n){t(window).scrollTo(e,i,n)};i.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this;if(!(!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])))return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(n,r,s){return"object"==typeof r&&(s=r,r=0),"function"==typeof s&&(s={onAfter:s}),"max"==n&&(n=9e9),s=t.extend({},i.defaults,s),r=r||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(r/=2),s.offset=e(s.offset),s.over=e(s.over),this._scrollable().each(function(){function a(t){c.animate(d,r,s.easing,t&&function(){t.call(this,n,s)})}if(null!=n){var o,l=this,c=t(l),u=n,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=e(u);break}if(!(u=t(u,this)).length)return;case"object":(u.is||u.style)&&(o=(u=t(u)).offset())}t.each(s.axis.split(""),function(t,e){var n="x"==e?"Left":"Top",r=n.toLowerCase(),p="scroll"+n,f=l[p],m=i.max(l,e);if(o)d[p]=o[r]+(h?0:f-c.offset()[r]),s.margin&&(d[p]-=parseInt(u.css("margin"+n))||0,d[p]-=parseInt(u.css("border"+n+"Width"))||0),d[p]+=s.offset[r]||0,s.over[r]&&(d[p]+=u["x"==e?"width":"height"]()*s.over[r]);else{var g=u[r];d[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}s.limit&&/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],m)),!t&&s.queue&&(f!=d[p]&&a(s.onAfterFirst),delete d[p])}),a(s.onAfter)}}).end()},i.max=function(e,i){var n="x"==i?"Width":"Height",r="scroll"+n;if(!t(e).is("html,body"))return e[r]-t(e)[n.toLowerCase()]();var s="client"+n,a=e.ownerDocument.documentElement,o=e.ownerDocument.body;return Math.max(a[r],o[r])-Math.min(a[s],o[s])}}(jQuery),$(window).load(function(){!function(t){function e(t){if(t&&t.length){var e=t.match(n.text)[1],i=e.match(n.url);return i?'<img src="'+i[1]+'" />':e}}function i(i,n,r){"after"!=i&&"before"!=i||(r=e(n.currentStyle[i]))&&t(n)["before"==i?"prepend":"append"](t(document.createElement("span")).addClass(i).html(r))}var n={text:/^['"]?(.+?)["']?$/,url:/^url\(["']?(.+?)['"]?\)$/};if(t.pseudo=function(t){i("before",t),i("after",t),t.runtimeStyle.behavior=null},document.createStyleSheet){var r=document.createStyleSheet(null,0);r.addRule(".dummy","display: static;"),r.cssText="html, head, head *, body, *.before, *.after, *.before *, *.after * { behavior: none; } * { behavior: expression($.pseudo(this)); }"}}(jQuery)}),function(t){t.fn.fileupload=function(){this.each(function(){function e(){file=i.value,reWin=/.*\\(.*)/;var e=file.replace(reWin,"$1");reUnix=/.*\/(.*)/,e=e.replace(reUnix,"$1"),n.innerHTML=e;var s=/.*\.(.*)/,a=e.replace(s,"$1");r.indexOf("."+a.toLowerCase())<0&&(i.value="",t(n).addClass("error").text("\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430"),window.setTimeout(function(){t(n).removeClass("error").text("")},3e3))}var i=t(this).get(0),n=t(this).siblings(".cf_file_progress").get(0);i.value="",i.onchange=e;var r=i.accept.split(",")})}}(jQuery),function(t){t.fn.formValidator=function(e){var i={};this.each(function(){t.extend(i,e);var n=t(this),r=t(":input",n);r.length;r.removeClass("error").each(function(){var e=t(this),i=e.parents(".fieldrow"),n=e.val();if(gr=e.data("group"),e.parent().removeClass("error"),i.find("em.error").css("display","none"),e.data("validate")||e.data("required"))if(e.data("required")&&""==e.val())e.addClass("error"),e.parent().addClass("error"),i.find(".error.required").css("display","block");else{if(gr){var s=r.filter('[data-group="'+gr+'"]'),a=!1;s.each(function(){(t(this).is('[type="checkbox"]')?t(this)[0].checked:t(this).val())&&(a=!0)}),a?s.removeClass("error").closest("div.fieldrow").find(".error.group").hide():s.addClass("error").closest("div.fieldrow").find(".error.group").show()}switch(e.data("validate")){case"number":if(""!=n)for(var o="-+0123456789. ",l=n.length-1;l>=0;l--){var c=new String(n.charAt(l));if(!(o.lastIndexOf(c)>-1)){e.addClass("error"),e.parent().addClass("error"),i.find(".error.validate").css("display","block");break}}break;case"password":""!=n&&n.length<6&&(e.addClass("error"),i.find(".error.validate").css("display","block"));break;case"email":""!=n&&(/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(n)||(e.addClass("error"),e.parent().addClass("error"),i.find(".error.validate").css("display","block")))}if(e.data("minlength")&&""!=n&&(n.length<1*e.data("minlength")?(e.removeClass("ok"),e.parent().addClass("error"),e.addClass("error"),i.find(".error.minlength").css("display","block")):(e.removeClass("error"),i.addClass("ok"))),e.data("identity")){var u=t(e.data("identity"));u.length<1&&alert("\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440 \u0432 \u043f\u043e\u043b\u0435 "+e.attr("name")),""!=n&&""!=u.val()&&n!=u.val()&&(e.addClass("error"),e.parent().addClass("error"),i.find(".error.identity").css("display","block"))}}}),n.data("valid",0==t(":input.error",n).length)})}}(jQuery),
/*
 * jQuery Easing Compatibility v1 - http://gsgd.co.uk/sandbox/jquery.easing.php
 *
 * Adds compatibility for applications that use the pre 1.2 easing names
 *
 * Copyright (c) 2007 George Smith
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 */
jQuery.extend(jQuery.easing,{easeIn:function(t,e,i,n,r){return jQuery.easing.easeInQuad(t,e,i,n,r)},easeOut:function(t,e,i,n,r){return jQuery.easing.easeOutQuad(t,e,i,n,r)},easeInOut:function(t,e,i,n,r){return jQuery.easing.easeInOutQuad(t,e,i,n,r)},expoin:function(t,e,i,n,r){return jQuery.easing.easeInExpo(t,e,i,n,r)},expoout:function(t,e,i,n,r){return jQuery.easing.easeOutExpo(t,e,i,n,r)},expoinout:function(t,e,i,n,r){return jQuery.easing.easeInOutExpo(t,e,i,n,r)},bouncein:function(t,e,i,n,r){return jQuery.easing.easeInBounce(t,e,i,n,r)},bounceout:function(t,e,i,n,r){return jQuery.easing.easeOutBounce(t,e,i,n,r)},bounceinout:function(t,e,i,n,r){return jQuery.easing.easeInOutBounce(t,e,i,n,r)},elasin:function(t,e,i,n,r){return jQuery.easing.easeInElastic(t,e,i,n,r)},elasout:function(t,e,i,n,r){return jQuery.easing.easeOutElastic(t,e,i,n,r)},elasinout:function(t,e,i,n,r){return jQuery.easing.easeInOutElastic(t,e,i,n,r)},backin:function(t,e,i,n,r){return jQuery.easing.easeInBack(t,e,i,n,r)},backout:function(t,e,i,n,r){return jQuery.easing.easeOutBack(t,e,i,n,r)},backinout:function(t,e,i,n,r){return jQuery.easing.easeInOutBack(t,e,i,n,r)}}),function(t){t.fn.replaceCheckBox=function(){this.each(function(){var e=t(this);t("label[for="+e.attr("id")+"]");if(e.hasClass("custom"))return!1;e.wrap('<span class="field checkbox" />').wrap("<span />");var i=e.parents("span.checkbox:eq(0)");e.prop("checked")&&i.addClass("checked"),i.on("click",function(){if(e.attr("disabled"))return!1;e.trigger("change")}),e.on("change",function(){if(e.attr("disabled"))return!1;e.prop("checked")?(i.removeClass("checked"),e.prop("checked",!1)):(i.addClass("checked"),e.prop("checked",!0))})})}}(jQuery),function(t){t.fn.selectReplace=function(){this.each(function(){var e=t(this),i=t('<span class="inpselblock"></span>'),n=t('<span class="inpseltxt"></span>'),r=e.width();if(e.hasClass("custom"))return!1;i.parent().width(r),e.wrap(i),n.insertBefore(e),n.text(t("option:selected",e).text());var s=t('<a class="selopener" href="#"></a>').insertBefore(n),a=t('<div class="optcontainer'+(e.hasClass("round")?" round":"")+'" id="'+e.attr("name")+'opts"></div>').appendTo("body");a.css("min-width",r).hide(function(){t(this).addClass("hide")}),t("option",e).each(function(i){var r=t(this),o=t('<a href="#" title="'+r.text()+'">'+r.text()+"</a>").appendTo(a);o.click(function(){return e.get(0).selectedIndex=i,n.text(t("option:eq("+i+")",e).text()),a.find(".selected").removeClass("selected"),t(this).addClass("selected"),a.slideUp("fast",function(){t(this).addClass("hide"),s.removeClass("open")}),e.change(),!1}),r.prop("selected")&&o.addClass("selected")}),s.click(function(){if(t(".inpselblock").removeClass("open"),t("div.optcontainer").slideUp("fast",function(){t(this).addClass("hide")}),a.hasClass("hide")){var i=t(n).offset(),r=0;a.removeClass("hide"),a.css({left:i.left+"px",top:i.top-1+"px","min-width":e.outerWidth()+15}),a.slideDown("fast",function(){t(document).on("click",function(e){(e.pageX<i.left||e.pageX>i.left+a.width()||e.pageY<i.top||e.pageY>i.top+a.height())&&a.slideUp("fast",function(){t(this).addClass("hide"),s.removeClass("open")})}),s.addClass("open")}),a.siblings().each(function(){var e=parseInt(t(this).css("z-index"));r=Math.max(r,isNaN(e)?0:e)}),a.css({"z-index":r+1})}else a.slideUp("fast",function(){t(this).addClass("hide"),s.removeClass("open")});return!1}),e.addClass("custom")})}}(jQuery),function(t){t.fn.radioReplace=function(){this.each(function(){var e=t(this),i=(t("label[for="+e.attr("id")+"]"),t(this.form));e.attr("name");if(e.hasClass("custom"))return!1;e.wrap('<span class="field radio" />').wrap("<span />");var n=e.parents("span.radio:eq(0)");e.prop("checked")&&n.addClass("checked"),e.change(function(){if(t(this).attr("disabled"))return!1;var e=t(this).attr("name");t('input[name="'+e+'"]',i).each(function(){var e=t(this),i=e.parents("span.radio:eq(0)");e.prop("checked")?i.addClass("checked"):i.removeClass("checked")})})})}}(jQuery),function(t){t.fn.columnize=function(e){var i={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return"string"==typeof(e=t.extend(i,e)).width&&(e.width=parseInt(e.width,10),isNaN(e.width)&&(e.width=i.width)),this.each(function(){function n(t,e){var i=e?".":"";return f.length?i+f+"-"+t:i+t}function r(i,r,s,a){for(;(p||s.height()<a)&&r[0].childNodes.length;){var o=r[0].childNodes[0];if(t(o).find(n("columnbreak",!0)).length)return;if(t(o).hasClass(n("columnbreak")))return;i.append(o)}if(0!==i[0].childNodes.length){var l=i[0].childNodes,c=l[l.length-1];i[0].removeChild(c);var u=t(c);if(3==u[0].nodeType){var d,h=u[0].nodeValue,f=e.width/18;e.accuracy&&(f=e.accuracy);for(var m=null;s.height()<a&&h.length;){var g=h.indexOf(" ",f);d=-1!=g?h.substring(0,h.indexOf(" ",f)):h,m=document.createTextNode(d),i.append(m),h=h.length>f&&-1!=g?h.substring(g):""}if(s.height()>=a&&null!==m&&(i[0].removeChild(m),h=m.nodeValue+h),!h.length)return!1;u[0].nodeValue=h}return r.contents().length?r.prepend(u):r.append(u),3==u[0].nodeType}}function s(t,e,i,a){if(!t.contents(":last").find(n("columnbreak",!0)).length&&!t.contents(":last").hasClass(n("columnbreak"))&&e.contents().length){var o=e.contents(":first");if(1!=o.get(0).nodeType)return;var l=o.clone(!0);o.hasClass(n("columnbreak"))?(t.append(l),o.remove()):p?(t.append(l),o.remove()):1!=l.get(0).nodeType||l.hasClass(n("dontend"))||(t.append(l),l.is("img")&&i.height()<a+20?o.remove():!o.hasClass(n("dontsplit"))&&i.height()<a+20?o.remove():l.is("img")||o.hasClass(n("dontsplit"))?l.remove():(l.empty(),r(l,o,i,a)?o.addClass(n("split")):(o.addClass(n("split")),o.children().length&&s(l,o,i,a)),0===l.get(0).childNodes.length&&l.remove()))}}function a(){if(!c.data("columnized")||1!=c.children().length){if(c.data("columnized",!0),c.data("columnizing",!0),c.empty(),c.append(t("<div class='"+n("first")+" "+n("last")+" "+n("column")+" ' style='width:100%; float: "+e.columnFloat+";'></div>")),$col=c.children().eq(c.children().length-1),$destroyable=d.clone(!0),e.overflow){for(targetHeight=e.overflow.height,r($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(n("dontend"))||s($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&o($col.contents(":last").get(0));){var i=$col.contents(":last");i.remove(),$destroyable.prepend(i)}for(var a="",l=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var u=$destroyable[0].childNodes[0];if(u.attributes)for(var h=0;h<u.attributes.length;h++)0===u.attributes[h].nodeName.indexOf("jQuery")&&u.removeAttribute(u.attributes[h].nodeName);l.innerHTML="",l.appendChild($destroyable[0].childNodes[0]),a+=l.innerHTML}t(e.overflow.id)[0].innerHTML=a}else $col.append($destroyable);c.data("columnizing",!1),e.overflow&&e.overflow.doneFunc&&e.overflow.doneFunc()}}function o(e){return 3==e.nodeType?!!/^\s+$/.test(e.nodeValue)&&(!!e.previousSibling&&o(e.previousSibling)):1==e.nodeType&&(!!t(e).hasClass(n("dontend"))||0!==e.childNodes.length&&o(e.childNodes[e.childNodes.length-1]))}function l(){if(0,h!=c.width()){h=c.width();var i=Math.round(c.width()/e.width),l=e.width,f=e.height;if(e.columns&&(i=e.columns),p&&(i=d.find(n("columnbreak",!0)).length+1,l=!1),i<=1)return a();if(!c.data("columnizing")){c.data("columnized",!0),c.data("columnizing",!0),c.empty(),c.append(t("<div style='width:"+Math.floor(100/i)+"%; float: "+e.columnFloat+";'></div>")),(w=c.children(":last")).append(d.clone()),u=w.height(),c.empty();var m=u/i,g=3,v=!1;e.overflow?(g=1,m=e.overflow.height):f&&l&&(g=1,m=f,v=!0);for(var y=0;y<g&&y<20;y++){var _,b,w,T;c.empty();try{_=d.clone(!0)}catch(j){_=d.clone()}_.css("visibility","hidden");for(var k=0;k<i;k++)b=0===k?n("first"):"",b+=" "+n("column"),b=k==i-1?n("last")+" "+b:b,c.append(t("<div class='"+b+"' style='width:"+Math.floor(100/i)+"%; float: "+e.columnFloat+";'></div>"));for(k=0;k<i-(e.overflow?0:1)||v&&_.contents().length;){for(c.children().length<=k&&c.append(t("<div class='"+b+"' style='width:"+Math.floor(100/i)+"%; float: "+e.columnFloat+";'></div>")),w=c.children().eq(k),v&&w.width(l+"px"),r(w,_,w,m),s(w,_,w,m);w.contents(":last").length&&o(w.contents(":last").get(0));)(T=w.contents(":last")).remove(),_.prepend(T);k++,0===w.contents().length&&_.contents().length?w.append(_.contents(":first")):k!=i-(e.overflow?0:1)||e.overflow||_.find(n("columnbreak",!0)).length&&i++}if(e.overflow&&!v){var S=!1,C=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(S||C){for(var x="",E=document.createElement("DIV");_[0].childNodes.length>0;){var A=_[0].childNodes[0];for(k=0;k<A.attributes.length;k++)0===A.attributes[k].nodeName.indexOf("jQuery")&&A.removeAttribute(A.attributes[k].nodeName);E.innerHTML="",E.appendChild(_[0].childNodes[0]),x+=E.innerHTML}t(e.overflow.id)[0].innerHTML=x}else t(e.overflow.id).empty().append(_.contents().clone(!0))}else if(v)c.children().each(function(t){(w=c.children().eq(t)).width(l+"px"),0===t?w.addClass(n("first")):t==c.children().length-1?w.addClass(n("last")):(w.removeClass(n("first")),w.removeClass(n("last")))}),c.width(c.children().length*l+"px");else{w=c.children().eq(c.children().length-1),_.contents().each(function(){w.append(t(this))});w.height();var P=0,I=1e7,L=0,D=!1,O=0;c.children().each(function(t){return function(e){var i=t.children().eq(e);if(!i.children(":last").find(n("columnbreak",!0)).length){var r=i.height();D=!1,P+=r,r>L&&(L=r,D=!0),r<I&&(I=r),O++}}}(c));var M=P/O;0===P?y=g:e.lastNeverTallest&&D?(30,m+=30,y==g-1&&g++):L-I>30?m=M+30:Math.abs(M-m)>20?m=M:y=g}c.append(t("<br style='clear:both;'>"))}c.find(n("column",!0)).find(":first"+n("removeiffirst",!0)).remove(),c.find(n("column",!0)).find(":last"+n("removeiflast",!0)).remove(),c.data("columnizing",!1),e.overflow&&e.overflow.doneFunc(),e.doneFunc()}}}var c=e.target?t(e.target):t(this),u=t(this).height(),d=t("<div></div>"),h=0,p=e.manualBreaks,f=i.cssClassPrefix;"string"==typeof e.cssClassPrefix&&(f=e.cssClassPrefix);if(d.append(t(this).contents().clone(!0)),!e.ignoreImageLoading&&!e.target&&!c.data("imageLoaded")&&(c.data("imageLoaded",!0),t(this).find("img").length>0)){var m=function(t,i){return function(){t.data("firstImageLoaded")||(t.data("firstImageLoaded","true"),t.empty().append(i.children().clone(!0)),t.columnize(e))}}(t(this),d);return t(this).find("img").one("load",m),void t(this).find("img").one("abort",m)}c.empty(),l(),e.buildOnce||t(window).resize(function(){e.buildOnce||(c.data("timeout")&&clearTimeout(c.data("timeout")),c.data("timeout",setTimeout(l,200)))})})}}(jQuery),
/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,r=n._mouseInit;n._touchStart=function(t){var n=this;!i&&n._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},n._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),r.call(e)}}}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):t.jQuery?t.jQuery:t.Zepto)}(this,function(t,e){t.fn.jPlayer=function(i){var n="jPlayer",r="string"==typeof i,s=Array.prototype.slice.call(arguments,1),a=this;return i=!r&&s.length?t.extend.apply(null,[!0,i].concat(s)):i,r&&"_"===i.charAt(0)?a:(this.each(r?function(){var r=t(this).data(n),o=r&&t.isFunction(r[i])?r[i].apply(r,s):r;return o!==r&&o!==e?(a=o,!1):void 0}:function(){var e=t(this).data(n);e?e.option(i||{}):t(this).data(n,new t.jPlayer(i,this))}),a)},t.jPlayer=function(e,i){if(arguments.length){this.element=t(i),this.options=t.extend(!0,{},this.options,e);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof t.fn.stop&&(t.fn.stop=function(){}),t.jPlayer.emulateMethods="load play pause",t.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",t.jPlayer.emulateOptions="muted volume",t.jPlayer.reservedEvent="ready flashreset resize repeat error warning",t.jPlayer.event={},t.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){t.jPlayer.event[this]="jPlayer_"+this}),t.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],t.jPlayer.pause=function(){t.jPlayer.prototype.destroyRemoved(),t.each(t.jPlayer.prototype.instances,function(t,e){e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})},t.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:t.jPlayer.timeFormat}},time:function(t){t=t&&"number"==typeof t?t:0;var e=new Date(1e3*t),i=e.getUTCHours(),n=this.options.timeFormat.showHour?e.getUTCMinutes():e.getUTCMinutes()+60*i,r=this.options.timeFormat.showMin?e.getUTCSeconds():e.getUTCSeconds()+60*n,s=this.options.timeFormat.padHour&&10>i?"0"+i:i,a=this.options.timeFormat.padMin&&10>n?"0"+n:n,o=this.options.timeFormat.padSec&&10>r?"0"+r:r,l="";return l+=this.options.timeFormat.showHour?s+this.options.timeFormat.sepHour:"",(l+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"")+(this.options.timeFormat.showSec?o+this.options.timeFormat.sepSec:"")}};var n=new i;t.jPlayer.convertTime=function(t){return n.time(t)},t.jPlayer.uaBrowser=function(t){var e=t.toLowerCase(),i=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/,s=/(webkit)[ \/]([\w.]+)/.exec(e)||i.exec(e)||n.exec(e)||e.indexOf("compatible")<0&&r.exec(e)||[];return{browser:s[1]||"",version:s[2]||"0"}},t.jPlayer.uaPlatform=function(t){var e=t.toLowerCase(),i=/(ipad|playbook)/,n=/(android)/,r=/(mobile)/,s=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(e)||[],a=i.exec(e)||!r.exec(e)&&n.exec(e)||[];return s[1]&&(s[1]=s[1].replace(/\s/g,"_")),{platform:s[1]||"",tablet:a[1]||""}},t.jPlayer.browser={},t.jPlayer.platform={};var r=t.jPlayer.uaBrowser(navigator.userAgent);r.browser&&(t.jPlayer.browser[r.browser]=!0,t.jPlayer.browser.version=r.version);var s=t.jPlayer.uaPlatform(navigator.userAgent);s.platform&&(t.jPlayer.platform[s.platform]=!0,t.jPlayer.platform.mobile=!s.tablet,t.jPlayer.platform.tablet=!!s.tablet),t.jPlayer.getDocMode=function(){var e;return t.jPlayer.browser.msie&&(document.documentMode?e=document.documentMode:(e=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(e=7))),e},t.jPlayer.browser.documentMode=t.jPlayer.getDocMode(),t.jPlayer.nativeFeatures={init:function(){var t,e,i,n=document,r=n.createElement("video"),s={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},a=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=t={support:{w3c:!!n[s.w3c[0]],moz:!!n[s.moz[0]],webkit:"function"==typeof n[s.webkit[3]],webkitVideo:"function"==typeof r[s.webkitVideo[2]],ms:"function"==typeof r[s.ms[2]]},used:{}},e=0,i=a.length;i>e;e++){var o=a[e];if(t.support[o]){t.spec=o,t.used[o]=!0;break}}if(t.spec){var l=s[t.spec];t.api={fullscreenEnabled:!0,fullscreenElement:function(t){return(t=t||n)[l[1]]},requestFullscreen:function(t){return t[l[2]]()},exitFullscreen:function(t){return(t=t||n)[l[3]]()}},t.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else t.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},t.event={}}},t.jPlayer.nativeFeatures.init(),t.jPlayer.focus=null,t.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var a=function(e){var i,n=t.jPlayer.focus;n&&(t.each(t.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(t,n){return e.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||t.each(n.options.keyBindings,function(i,r){return r&&t.isFunction(r.fn)&&("number"==typeof r.key&&e.which===r.key||"string"==typeof r.key&&e.key===r.key)?(e.preventDefault(),r.fn(n),!1):void 0}))};t.jPlayer.keys=function(e){var i="keydown.jPlayer";t(document.documentElement).unbind(i),e&&t(document.documentElement).bind(i,a)},t.jPlayer.keys(!0),t.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(e){e.jPlayer.options.loop?t(this).unbind(".jPlayerRepeat").bind(t.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){t(this).jPlayer("play")}):t(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(t){t.status.paused?t.play():t.pause()}},fullScreen:{key:70,fn:function(t){(t.status.video||t.options.audioFullScreen)&&t._setOption("fullScreen",!t.options.fullScreen)}},muted:{key:77,fn:function(t){t._muted(!t.options.muted)}},volumeUp:{key:190,fn:function(t){t.volume(t.options.volume+.1)}},volumeDown:{key:188,fn:function(t){t.volume(t.options.volume-.1)}},loop:{key:76,fn:function(t){t._loop(!t.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=t.extend({},this.status),this.internal=t.extend({},this.internal),this.options.timeFormat=t.extend({},t.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=t.jPlayer.platform.ipad||t.jPlayer.platform.iphone||t.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!t.jPlayer.focus&&(t.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},t.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),t.each(this.options.supplied.toLowerCase().split(","),function(e,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var s=!1;t.each(i.formats,function(t,e){return r===e?(s=!0,!1):void 0}),s||i.formats.push(r)}}),t.each(this.options.solution.toLowerCase().split(","),function(e,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.solution[r]){var s=!1;t.each(i.solutions,function(t,e){return r===e?(s=!0,!1):void 0}),s||i.solutions.push(r)}}),t.each(this.options.auroraFormats.toLowerCase().split(","),function(e,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var s=!1;t.each(i.aurora.formats,function(t,e){return r===e?(s=!0,!1):void 0}),s||i.aurora.formats.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=t.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=t.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e}),this.internal.video=t.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e}),this.internal.flash=t.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=t.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e}),t.each(t.jPlayer.event,function(t,n){i.options[t]!==e&&(i.element.bind(n+".jPlayer",i.options[t]),i.options[t]=e)}),this.require.audio=!1,this.require.video=!1,t.each(this.formats,function(t,e){i.require[i.format[e].media]=!0}),this.options=this.require.video?t.extend(!0,{},this.optionsVideo,this.options):t.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),t.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=t("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},t.each(this.formats,function(e,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=t.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,t.each(this.solutions,function(e,n){if(0===e)i[n].desired=!0;else{var r=!1,s=!1;t.each(i.formats,function(t,e){i[i.solutions[0]].canPlay[e]&&("video"===i.format[e].media?s=!0:r=!0)}),i[n].desired=i.require.audio&&!r||i.require.video&&!s}}),this.html.support={},this.aurora.support={},this.flash.support={},t.each(this.formats,function(t,e){i.html.support[e]=i.html.canPlay[e]&&i.html.desired,i.aurora.support[e]=i.aurora.canPlay[e]&&i.aurora.desired,i.flash.support[e]=i.flash.canPlay[e]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,t.each(this.solutions,function(e,n){t.each(i.formats,function(t,e){return i[n].support[e]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:t.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SOLUTION,hint:t.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,r="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(t.jPlayer.browser.msie&&(Number(t.jPlayer.browser.version)<9||t.jPlayer.browser.documentMode<9)){var s='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',a=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+r+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement(s);for(var o=0;o<a.length;o++)n.appendChild(document.createElement(a[o]))}else{var l=function(t,e,i){var n=document.createElement("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)};(n=document.createElement("object")).setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),l(n,"flashvars",r),l(n,"allowscriptaccess","always"),l(n,"bgcolor",this.options.backgroundColor),l(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=t(n)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=t("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=t("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(t.jPlayer.event.repeat),i._trigger(t.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),t.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),t.each(this.css.jq,function(t,e){e.length&&e.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===t.jPlayer.focus&&(t.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var e=this;t.each(this.instances,function(t,i){e.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete e.instances[t]))})},enable:function(){},disable:function(){},_testCanPlayType:function(t){try{return t.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_testPlaybackRate:function(t){var e,i=.5;t="string"==typeof t?t:"audio",e=document.createElement(t);try{return"playbackRate"in e&&(e.playbackRate=i,e.playbackRate===i)}catch(n){return!1}},_uaBlocklist:function(e){var i=navigator.userAgent.toLowerCase(),n=!1;return t.each(e,function(t,e){return e&&e.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(e,i){var n=this;e.preload=this.options.preload,e.muted=this.options.muted,e.volume=this.options.volume,this.status.playbackRateEnabled&&(e.defaultPlaybackRate=this.options.defaultPlaybackRate,e.playbackRate=this.options.playbackRate),e.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.progress))},!1),e.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(t.jPlayer.event.loadeddata))},!1),e.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.timeupdate))},!1),e.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.durationchange))},!1),e.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(t.jPlayer.event.play))},!1),e.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(t.jPlayer.event.playing))},!1),e.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(t.jPlayer.event.pause))},!1),e.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.waiting))},!1),e.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.seeking))},!1),e.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.seeked))},!1),e.addEventListener("volumechange",function(){i.gate&&(n.options.volume=e.volume,n.options.muted=e.muted,n._updateMute(),n._updateVolume(),n._trigger(t.jPlayer.event.volumechange))},!1),e.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=e.defaultPlaybackRate,n.options.playbackRate=e.playbackRate,n._updatePlaybackRate(),n._trigger(t.jPlayer.event.ratechange))},!1),e.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.suspend))},!1),e.addEventListener("ended",function(){i.gate&&(t.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(e,!0),n._updateInterface(),n._trigger(t.jPlayer.event.ended))},!1),e.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:t.jPlayer.error.URL,context:n.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1),t.each(t.jPlayer.htmlEvent,function(r,s){e.addEventListener(this,function(){i.gate&&n._trigger(t.jPlayer.event[s])},!1)})},_addAuroraEventListeners:function(e,i){var n=this;e.volume=100*this.options.volume,e.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.progress),e.duration>0&&n._trigger(t.jPlayer.event.timeupdate))},!1),e.on("ready",function(){i.gate&&n._trigger(t.jPlayer.event.loadeddata)},!1),e.on("duration",function(){i.gate&&(n._getAuroraStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.durationchange))},!1),e.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(e,!0),n._updateInterface(),n._trigger(t.jPlayer.event.ended))},!1),e.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:t.jPlayer.error.URL,context:n.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(t,e){var i=0,n=0,r=0,s=0;isFinite(t.duration)&&(this.status.duration=t.duration),i=t.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof t.seekable&&t.seekable.length>0?(r=this.status.duration>0?100*t.seekable.end(t.seekable.length-1)/this.status.duration:100,s=this.status.duration>0?100*t.currentTime/t.seekable.end(t.seekable.length-1):0):(r=100,s=n),e&&(i=0,s=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=s,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=t.readyState,this.status.networkState=t.networkState,this.status.playbackRate=t.playbackRate,this.status.ended=t.ended},_getAuroraStatus:function(t,e){var i=0,n=0,r=0,s=0;this.status.duration=t.duration/1e3,i=t.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,t.buffered>0?(r=this.status.duration>0?t.buffered*this.status.duration/this.status.duration:100,s=this.status.duration>0?i/(t.buffered*this.status.duration):0):(r=100,s=n),e&&(i=0,s=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=s,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=t.extend({},this.status,t.jPlayer.prototype.status)},_trigger:function(e,i,n){var r=t.Event(e);r.jPlayer={},r.jPlayer.version=t.extend({},this.version),r.jPlayer.options=t.extend(!0,{},this.options),r.jPlayer.status=t.extend(!0,{},this.status),r.jPlayer.html=t.extend(!0,{},this.html),r.jPlayer.aurora=t.extend(!0,{},this.aurora),r.jPlayer.flash=t.extend(!0,{},this.flash),i&&(r.jPlayer.error=t.extend({},i)),n&&(r.jPlayer.warning=t.extend({},n)),this.element.trigger(r)},jPlayerFlashEvent:function(e,i){if(e===t.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,r=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(r?this.pause(n):this.play(n))}this._trigger(t.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:t.jPlayer.error.VERSION,context:this.version.flash,message:t.jPlayer.errorMsg.VERSION+this.version.flash,hint:t.jPlayer.errorHint.VERSION}),this._trigger(t.jPlayer.event.repeat),this._trigger(e);if(this.flash.gate)switch(e){case t.jPlayer.event.progress:case t.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(e);break;case t.jPlayer.event.pause:case t.jPlayer.event.ended:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.click:this._trigger(e);break;case t.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:t.jPlayer.error.URL,context:i.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL});break;case t.jPlayer.event.seeking:this._seeking(),this._trigger(e);break;case t.jPlayer.event.seeked:this._seeked(),this._trigger(e);break;case t.jPlayer.event.ready:break;default:this._trigger(e)}return!1},_getFlashStatus:function(t){this.status.seekPercent=t.seekPercent,this.status.currentPercentRelative=t.currentPercentRelative,this.status.currentPercentAbsolute=t.currentPercentAbsolute,this.status.currentTime=t.currentTime,this.status.duration=t.duration,this.status.remaining=t.duration-t.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(t){t===e?t=!this.status.paused:this.status.paused=!t,t?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(t?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&(this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var t="",e=this.status.duration,i=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?t=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=(e=this.status.media.duration)-this.status.currentTime),t=this.options.remainingDuration?(i>0?"-":"")+this._convertTime(i):this._convertTime(e)),t!==this.css.jq.duration.text()&&this.css.jq.duration.text(t))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(t){return t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(t){
var e=document.createElement("div");return e.innerHTML='<a href="'+this._escapeHtml(t)+'">x</a>',e.firstChild.href},_absoluteMediaUrls:function(e){var i=this;return t.each(e,function(t,n){n&&i.format[t]&&"data:"!==n.substr(0,5)&&(e[t]=i._qualifyURL(n))}),e},addStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[t])},removeStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[t])},setMedia:function(e){var i=this,n=!1,r=this.status.media.poster!==e.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,e=this._absoluteMediaUrls(e),t.each(this.formats,function(r,s){var a="video"===i.format[s].media;return t.each(i.solutions,function(r,o){if(i[o].support[s]&&i._validString(e[s])){var l="html"===o,c="aurora"===o;return a?(l?(i.html.video.gate=!0,i._html_setVideo(e),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(e),i.html.active=!0,t.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):c?(i.aurora.gate=!0,i._aurora_setAudio(e),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),!n&&void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(e.poster)&&(r?this.htmlElement.poster.src=e.poster:this.internal.poster.jq.show()),"string"==typeof e.title&&(this.css.jq.title.length&&this.css.jq.title.html(e.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",e.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",e.title)),this.status.srcSet=!0,this.status.media=t.extend({},e),this._updateButtons(!1),this._updateInterface(),this._trigger(t.jPlayer.event.setmedia)):this._error({type:t.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SUPPORT,hint:t.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(t.jPlayer.focus=this)},play:function(t){"object"==typeof t&&this.options.useStateClassSkin&&!this.status.paused?this.pause(t):(t="number"==typeof t?t:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(t):this.aurora.active?this._aurora_play(t):this.flash.active&&this._flash_play(t)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(t){t="number"==typeof t?t:NaN,this.status.srcSet?this.html.active?this._html_pause(t):this.aurora.active?this._aurora_pause(t):this.flash.active&&this._flash_pause(t):this._urlNotSetError("pause")},tellOthers:function(e,i){var n=this,r="function"==typeof i,s=Array.prototype.slice.call(arguments);"string"==typeof e&&(r&&s.splice(1,1),t.jPlayer.prototype.destroyRemoved(),t.each(this.instances,function(){n.element!==this&&(!r||i.call(this.data("jPlayer"),n))&&this.jPlayer.apply(this,s)}))},pauseOthers:function(t){this.tellOthers("pause",function(){return this.status.srcSet},t)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(t){t=this._limitValue(t,0,100),this.status.srcSet?this.html.active?this._html_playHead(t):this.aurora.active?this._aurora_playHead(t):this.flash.active&&this._flash_playHead(t):this._urlNotSetError("playHead")},_muted:function(t){this.mutedWorker(t),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},t)},mutedWorker:function(e){this.options.muted=e,this.html.used&&this._html_setProperty("muted",e),this.aurora.used&&this._aurora_mute(e),this.flash.used&&this._flash_mute(e),this.html.video.gate||this.html.audio.gate||(this._updateMute(e),this._updateVolume(this.options.volume),this._trigger(t.jPlayer.event.volumechange))},mute:function(t){"object"==typeof t&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(t=t===e||!!t,this._muted(t))},unmute:function(t){t=t===e||!!t,this._muted(!t)},_updateMute:function(t){t===e&&(t=this.options.muted),t?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):t?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){this.volumeWorker(t),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},t)},volumeWorker:function(e){e=this._limitValue(e,0,1),this.options.volume=e,this.html.used&&this._html_setProperty("volume",e),this.aurora.used&&this._aurora_volume(e),this.flash.used&&this._flash_volume(e),this.html.video.gate||this.html.audio.gate||(this._updateVolume(e),this._trigger(t.jPlayer.event.volumechange))},volumeBar:function(e){if(this.css.jq.volumeBar.length){var i=t(e.currentTarget),n=i.offset(),r=e.pageX-n.left,s=i.width(),a=i.height()-e.pageY+n.top,o=i.height();this.volume(this.options.verticalVolume?a/o:r/s)}this.options.muted&&this._muted(!1)},_updateVolume:function(t){t===e&&(t=this.options.volume),t=this.options.muted?0:t,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*t+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(e){var i=this;this.options.cssSelectorAncestor=e,this._removeUiClass(),this.ancestorJq=e?t(e):[],e&&1!==this.ancestorJq.length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),t.each(this.options.cssSelector,function(t,e){i._cssSelector(t,e)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(e,i){var n=this;if("string"==typeof i)if(t.jPlayer.prototype.options.cssSelector[e]){if(this.css.jq[e]&&this.css.jq[e].length&&this.css.jq[e].unbind(".jPlayer"),this.options.cssSelector[e]=i,this.css.cs[e]=this.options.cssSelectorAncestor+" "+i,this.css.jq[e]=i?t(this.css.cs[e]):[],this.css.jq[e].length&&this[e]){var r=function(i){i.preventDefault(),n[e](i),n.options.autoBlur?t(this).blur():t(this).focus()};this.css.jq[e].bind("click.jPlayer",r)}i&&1!==this.css.jq[e].length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[e],message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[e].length+" found for "+e+" method.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:t.jPlayer.warning.CSS_SELECTOR_METHOD,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:t.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:t.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:t.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:t.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(t){this.options.toggleDuration&&(this.options.captureDuration&&t.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(e){if(this.css.jq.seekBar.length){var i=t(e.currentTarget),n=i.offset(),r=100*(e.pageX-n.left)/i.width();this.playHead(r)}},playbackRate:function(t){this._setOption("playbackRate",t)},playbackRateBar:function(e){if(this.css.jq.playbackRateBar.length){var i,n=t(e.currentTarget),r=n.offset(),s=e.pageX-r.left,a=n.width(),o=n.height()-e.pageY+r.top,l=n.height();i=(this.options.verticalPlaybackRate?o/l:s/a)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(i)}},_updatePlaybackRate:function(){var t=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*t+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(t){var e="object"==typeof t;this._loop(!(e&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(e){this.options.loop!==e&&(this.options.loop=e,this._updateButtons(),this._trigger(t.jPlayer.event.repeat))},option:function(i,n){var r=i;if(0===arguments.length)return t.extend(!0,{},this.options);if("string"==typeof i){var s=i.split(".");if(n===e){for(var a=t.extend(!0,{},this.options),o=0;o<s.length;o++){if(a[s[o]]===e)return this._warning({type:t.jPlayer.warning.OPTION_KEY,context:i,message:t.jPlayer.warningMsg.OPTION_KEY,hint:t.jPlayer.warningHint.OPTION_KEY}),e;a=a[s[o]]}return a}for(var l=r={},c=0;c<s.length;c++)c<s.length-1?(l[s[c]]={},l=l[s[c]]):l[s[c]]=n}return this._setOptions(r),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(e,i){var n=this;switch(e){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[e]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":t.each(i,function(t,e){n._cssSelector(t,e)});break;case"playbackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[e]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[e]!==i){var r=t.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!r||r&&!this.status.waitForPlay)&&(r||(this.options[e]=i),i?this._requestFullscreen():this._exitFullscreen(),r||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[e]!==i&&(this._removeUiClass(),this.options[e]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[e].cssClass===i.cssClass||this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[e].cssClass!==i.cssClass&&this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"autohide":this.options[e]=t.extend({},this.options[e],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[e]=i,this._updateInterface();break;case"toggleDuration":this.options[e]=i;break;case"nativeVideoControls":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[e]=t.extend({},this.options[e],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[e]!==i&&(this.options[e]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[e]=t.extend({},this.options[e],i);break;case"keyEnabled":this.options[e]=i,i||this!==t.jPlayer.focus||(t.jPlayer.focus=null);break;case"keyBindings":this.options[e]=t.extend(!0,{},this.options[e],i);break;case"audioFullScreen":this.options[e]=i;break;case"autoBlur":this.options[e]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(t.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var t=this,e=".jPlayerAutohide",i="mousemove.jPlayer"+e,n=function(e){var i,n,r=!1;"undefined"!=typeof t.internal.mouse?(i=t.internal.mouse.x-e.pageX,n=t.internal.mouse.y-e.pageY,r=Math.floor(i)>0||Math.floor(n)>0):r=!0,t.internal.mouse={x:e.pageX,y:e.pageY},r&&t.css.jq.gui.fadeIn(t.options.autohide.fadeIn,function(){clearTimeout(t.internal.autohideId),t.internal.autohideId=setTimeout(function(){t.css.jq.gui.fadeOut(t.options.autohide.fadeOut)},t.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(e),this.css.jq.gui.unbind(e),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(i,n),this.css.jq.gui.bind(i,n),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(t){"object"==typeof t&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var e=this,i=t.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){e._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var e=t.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(e.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!t.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var e=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(e)},_exitFullscreen:function(){var e,i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(e)},_html_initMedia:function(e){var i=t(this.htmlElement.media).empty();t.each(e.track||[],function(t,e){var n=document.createElement("track");n.setAttribute("kind",e.kind?e.kind:""),n.setAttribute("src",e.src?e.src:""),n.setAttribute("srclang",e.srclang?e.srclang:""),n.setAttribute("label",e.label?e.label:""),e.def&&n.setAttribute("default",e.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(t.jPlayer.event.timeupdate)},_html_setFormat:function(e){var i=this;t.each(this.formats,function(t,n){return i.html.support[n]&&e[n]?(i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(t){this._html_setFormat(t),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(t)},_html_setVideo:function(t){this._html_setFormat(t),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(t.poster)?t.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(t)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(t){var e=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=t;else if(isNaN(t))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t,i.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.play(t)},250))}}this._html_checkWaitForPlay()},_html_pause:function(t){var e=this,i=this.htmlElement.media;if(this.androidFix.play=!1,t>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=t;else if(!isNaN(t))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(t)},250))}t>0&&this._html_checkWaitForPlay()},_html_playHead:function(t){var e=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=t*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=t*i.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(t)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(t,e){this.html.audio.available&&(this.htmlElement.audio[t]=e),this.html.video.available&&(this.htmlElement.video[t]=e)},_aurora_setAudio:function(e){var i=this;t.each(this.formats,function(t,n){return i.aurora.support[n]&&e[n]?(i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(e){this.status.waitForLoad||isNaN(e)||this.aurora.player.seek(e),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(t.jPlayer.event.play)},_aurora_pause:function(e){isNaN(e)||this.aurora.player.seek(1e3*e),this.aurora.player.pause(),e>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(t.jPlayer.event.pause)},_aurora_playHead:function(t){this.aurora.player.duration>0&&this.aurora.player.seek(t*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(t){this.aurora.player.volume=100*t},_aurora_mute:function(t){t?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=t},_flash_setAudio:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(e[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(e[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_setVideo:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(e[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(t){this._flashError(t)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(t){this._flashError(t)}this.status.waitForLoad=!1},_flash_play:function(t){try{this._getMovie().fl_play(t)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(t){try{this._getMovie().fl_pause(t)}catch(e){this._flashError(e)}t>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(t){try{this._getMovie().fl_play_head(t)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(t){try{this._getMovie().fl_volume(t)}catch(e){this._flashError(e)}},_flash_mute:function(t){try{this._getMovie().fl_mute(t)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var t,e=0;if(window.ActiveXObject)try{if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=t.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),e=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(n){}else navigator.plugins&&navigator.mimeTypes.length>0&&((t=navigator.plugins["Shockwave Flash"])&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*e},_checkForFlash:function(t){var e=!1;return this._getFlashPluginVersion()>=t&&(e=!0),e},_validString:function(t){return t&&"string"==typeof t},_limitValue:function(t,e,i){return e>t?e:t>i?i:t},_urlNotSetError:function(e){this._error({type:t.jPlayer.error.URL_NOT_SET,context:e,message:t.jPlayer.errorMsg.URL_NOT_SET,hint:t.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(e){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:t.jPlayer.error[i],context:this.internal.flash.swf,message:t.jPlayer.errorMsg[i]+e.message,hint:t.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(e){this._trigger(t.jPlayer.event.error,e),this.options.errorAlerts&&this._alert("Error!"+(e.message?"\n"+e.message:"")+(e.hint?"\n"+e.hint:"")+"\nContext: "+e.context)},_warning:function(i){this._trigger(t.jPlayer.event.warning,e,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(t){var e="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+t;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(e):alert(e)},_emulateHtmlBridge:function(){var e=this;t.each(t.jPlayer.emulateMethods.split(/\s+/g),function(t,i){e.internal.domNode[i]=function(t){e[i](t)}}),t.each(t.jPlayer.event,function(i,n){var r=!0;t.each(t.jPlayer.reservedEvent.split(/\s+/g),function(t,e){return e===i?(r=!1,!1):void 0}),r&&e.element.bind(n+".jPlayer.jPlayerHtml",function(){e._emulateHtmlUpdate();var t=document.createEvent("Event");t.initEvent(i,!1,!0),e.internal.domNode.dispatchEvent(t)})})},_emulateHtmlUpdate:function(){var e=this;t.each(t.jPlayer.emulateStatus.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.status[i]}),t.each(t.jPlayer.emulateOptions.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.options[i]})},_destroyHtmlBridge:function(){var e=this;this.element.unbind(".jPlayerHtml");var i=t.jPlayer.emulateMethods+" "+t.jPlayer.emulateStatus+" "+t.jPlayer.emulateOptions;t.each(i.split(/\s+/g),function(t,i){delete e.internal.domNode[i]})}},t.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},t.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+t.jPlayer.prototype.version.script+" needs Jplayer.swf version "+t.jPlayer.prototype.version.needFlash+" but found "},t.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},t.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},t.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},t.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),
/*!
 * zeroclipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie, and a JavaScript interface.
 * Copyright 2013 Jon Rohan, James M. Greene, .
 * Released under the MIT license
 * http://zeroclipboard.github.io/ZeroClipboard/
 * v1.2.0-beta.4
 */
function(){"use strict";var t,e=function(){var t=/\-([a-z])/g,e=function(t,e){return e.toUpperCase()};return function(i){return i.replace(t,e)}}(),i=function(t,i){var n,r,s,a,o,l;if(window.getComputedStyle?n=window.getComputedStyle(t,null).getPropertyValue(i):(r=e(i),n=t.currentStyle?t.currentStyle[r]:t.style[r]),"cursor"===i&&(!n||"auto"===n))for(s=t.tagName.toLowerCase(),o=0,l=(a=["a"]).length;o<l;o++)if(s===a[o])return"pointer";return n},n=function(t){var e;m.prototype._singleton&&(t||(t=window.event),this!==window?e=this:t.target?e=t.target:t.srcElement&&(e=t.srcElement),m.prototype._singleton.setCurrent(e))},r=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},s=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},a=function(t,e){if(t.addClass)return t.addClass(e),t;if(e&&"string"==typeof e){var i=(e||"").split(/\s+/);if(1===t.nodeType)if(t.className){for(var n=" "+t.className+" ",r=t.className,s=0,a=i.length;s<a;s++)n.indexOf(" "+i[s]+" ")<0&&(r+=" "+i[s]);t.className=r.replace(/^\s+|\s+$/g,"")}else t.className=e}return t},o=function(t,e){if(t.removeClass)return t.removeClass(e),t;if(e&&"string"==typeof e||e===undefined){var i=(e||"").split(/\s+/);if(1===t.nodeType&&t.className)if(e){for(var n=(" "+t.className+" ").replace(/[\n\t]/g," "),r=0,s=i.length;r<s;r++)n=n.replace(" "+i[r]+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}else t.className=""}return t},l=function(){var t,e,i,n=1;return"function"==typeof document.body.getBoundingClientRect&&(e=(t=document.body.getBoundingClientRect()).right-t.left,i=document.body.offsetWidth,n=Math.round(e/i*100)/100),n},c=function(t){var e={left:0,top:0,width:0,height:0,zIndex:999999999},n=i(t,"z-index");if(n&&"auto"!==n&&(e.zIndex=parseInt(n,10)),t.getBoundingClientRect){var r,s,a,o=t.getBoundingClientRect();"pageXOffset"in window&&"pageYOffset"in window?(r=window.pageXOffset,s=window.pageYOffset):(a=l(),r=Math.round(document.documentElement.scrollLeft/a),s=Math.round(document.documentElement.scrollTop/a));var c=document.documentElement.clientLeft||0,u=document.documentElement.clientTop||0;e.left=o.left+r-c,e.top=o.top+s-u,e.width="width"in o?o.width:o.right-o.left,e.height="height"in o?o.height:o.bottom-o.top}return e},u=function(t){return m.prototype._singleton.options.useNoCache?(t.indexOf("?")>=0?"&nocache=":"?nocache=")+(new Date).getTime():""},d=function(t){var e,i=[];t.trustedDomains&&("string"==typeof t.trustedDomains&&t.trustedDomains?e=[t.trustedDomains]:"length"in t.trustedDomains&&(e=t.trustedDomains),i.push("trustedDomain="+encodeURIComponent(e.join(","))));return"string"==typeof t.amdModuleId&&t.amdModuleId&&i.push("amdModuleId="+encodeURIComponent(t.amdModuleId)),"string"==typeof t.cjsModuleId&&t.cjsModuleId&&i.push("cjsModuleId="+encodeURIComponent(t.cjsModuleId)),i.join("&")},h=function(t,e){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},p=function(t){if("string"==typeof t)throw new TypeError("ZeroClipboard doesn't accept query strings.");return t.length?t:[t]},f=function(t,e,i,n,r){r?window.setTimeout(function(){t.call(e,i,n)},0):t.call(e,i,n)},m=function(t,e){if(t&&(m.prototype._singleton||this).glue(t),m.prototype._singleton)return m.prototype._singleton;for(var i in m.prototype._singleton=this,this.options={},y)this.options[i]=y[i];for(var n in e)this.options[n]=e[n];this.handlers={},m.detectFlashSupport()&&w()},g=[];m.prototype.setCurrent=function(e){t=e,this.reposition();var n=e.getAttribute("title");n&&this.setTitle(n);var r=!0===this.options.forceHandCursor||"pointer"===i(e,"cursor");v.call(this,r)},m.prototype.setText=function(t){t&&""!==t&&(this.options.text=t,this.ready()&&this.flashBridge.setText(t))},m.prototype.setTitle=function(t){t&&""!==t&&this.htmlBridge.setAttribute("title",t)},m.prototype.setSize=function(t,e){this.ready()&&this.flashBridge.setSize(t,e)},m.prototype.setHandCursor=function(t){t="boolean"==typeof t?t:!!t,v.call(this,t),this.options.forceHandCursor=t};var v=function(t){this.ready()&&this.flashBridge.setHandCursor(t)};m.version="1.2.0-beta.4";var y={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};m.setDefaults=function(t){for(var e in t)y[e]=t[e]},m.destroy=function(){m.prototype._singleton.unglue(g);var t=m.prototype._singleton.htmlBridge;t.parentNode.removeChild(t),delete m.prototype._singleton},m.detectFlashSupport=function(){var t=!1;if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(i){}return!t&&navigator.mimeTypes["application/x-shockwave-flash"]&&(t=!0),t};var _=null,b=null,w=function(){var t=m.prototype._singleton,e=document.getElementById("global-zeroclipboard-html-bridge");if(!e){var i={};for(var n in t.options)i[n]=t.options[n];i.amdModuleId=_,i.cjsModuleId=b;var r=d(i),s='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+t.options.moviePath+u(t.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+t.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+r+'"/>         <embed src="'+t.options.moviePath+u(t.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+r+'"           scale="exactfit">         </embed>       </object>';(e=document.createElement("div")).id="global-zeroclipboard-html-bridge",e.setAttribute("class","global-zeroclipboard-container"),e.setAttribute("data-clipboard-ready",!1),e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",e.style.width="15px",e.style.height="15px",e.style.zIndex="9999",e.innerHTML=s,document.body.appendChild(e)}t.htmlBridge=e,t.flashBridge=document["global-zeroclipboard-flash-bridge"]||e.children[0].lastElementChild};m.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),o(t,this.options.activeClass),t=null,this.options.text=null},m.prototype.ready=function(){var t=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===t||!0===t},m.prototype.reposition=function(){if(!t)return!1;var e=c(t);this.htmlBridge.style.top=e.top+"px",this.htmlBridge.style.left=e.left+"px",this.htmlBridge.style.width=e.width+"px",this.htmlBridge.style.height=e.height+"px",this.htmlBridge.style.zIndex=e.zIndex+1,this.setSize(e.width,e.height)},m.dispatch=function(t,e){m.prototype._singleton.receiveEvent(t,e)},m.prototype.on=function(t,e){for(var i=t.toString().split(/\s/g),n=0;n<i.length;n++)t=i[n].toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=e);this.handlers.noflash&&!m.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)},m.prototype.addEventListener=m.prototype.on,m.prototype.off=function(t,e){for(var i=t.toString().split(/\s/g),n=0;n<i.length;n++)for(var r in t=i[n].toLowerCase().replace(/^on/,""),this.handlers)r===t&&this.handlers[r]===e&&delete this.handlers[r]},m.prototype.removeEventListener=m.prototype.off,m.prototype.receiveEvent=function(e,i){e=e.toString().toLowerCase().replace(/^on/,"");var n=t,r=!0;switch(e){case"load":if(i&&parseFloat(i.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10)return void this.receiveEvent("onWrongFlash",{flashVersion:i.flashVersion});this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":a(n,this.options.hoverClass);break;case"mouseout":o(n,this.options.hoverClass),this.resetBridge();break;case"mousedown":a(n,this.options.activeClass);break;case"mouseup":o(n,this.options.activeClass);break;case"datarequested":var s=n.getAttribute("data-clipboard-target"),l=s?document.getElementById(s):null;if(l){var c=l.value||l.textContent||l.innerText;c&&this.setText(c)}else{var u=n.getAttribute("data-clipboard-text");u&&this.setText(u)}r=!1;break;case"complete":this.options.text=null}if(this.handlers[e]){var d=this.handlers[e];"string"==typeof d&&"function"==typeof window[d]&&(d=window[d]),"function"==typeof d&&f(d,n,this,i,r)}},m.prototype.glue=function(t){t=p(t);for(var e=0;e<t.length;e++)-1==h(t[e],g)&&(g.push(t[e]),r(t[e],"mouseover",n))},m.prototype.unglue=function(t){t=p(t);for(var e=0;e<t.length;e++){s(t[e],"mouseover",n);var i=h(t[e],g);-1!=i&&g.splice(i,1)}},"function"==typeof define&&define.amd?define(["require","exports","module"],function(t,e,i){return _=i&&i.id||null,m}):"undefined"!=typeof module&&module?(b=module.id||null,module.exports=m):window.ZeroClipboard=m}(),$.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0431\u0442"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru),
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,o=l.call(arguments,1),c=0,u=0,d=0,h=0;if((e=t.event.fix(a)).type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*d,d=0),c=0===d?u:d,"deltaY"in a&&(c=d=-1*a.deltaY),"deltaX"in a&&(u=a.deltaX,0===d&&(c=-1*u)),0!==d||0!==u){if(1===a.deltaMode){var p=t.data(this,"mousewheel-line-height");c*=p,d*=p,u*=p}else if(2===a.deltaMode){var f=t.data(this,"mousewheel-page-height");c*=f,d*=f,u*=f}return h=Math.max(Math.abs(d),Math.abs(u)),(!s||h<s)&&(s=h,n(a,h)&&(s/=40)),n(a,h)&&(c/=40,u/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/s),u=Math[u>=1?"floor":"ceil"](u/s),d=Math[d>=1?"floor":"ceil"](d/s),e.deltaX=u,e.deltaY=d,e.deltaFactor=s,e.deltaMode=0,o.unshift(e,c,u,d),r&&clearTimeout(r),r=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,o)}}function i(){s=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var r,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=o.length;i;)this.addEventListener(o[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(t(e)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),
/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
function(t){function e(){var t=document.createElement("input"),e="onpaste";return t.setAttribute(e,""),"function"==typeof t[e]?"paste":"input"}var i,n=e()+".mask",r=navigator.userAgent,s=/iphone/i.test(r),a=/android/i.test(r);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(e,r){var o,l,c,u,d;return!e&&this.length>0?t(this[0]).data(t.mask.dataName)():(r=t.extend({placeholder:t.mask.placeholder,completed:null},r),o=t.mask.definitions,l=[],c=d=e.length,u=null,t.each(e.split(""),function(t,e){"?"==e?(d--,c=t):o[e]?(l.push(RegExp(o[e])),null===u&&(u=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function h(t){for(;d>++t&&!l[t];);return t}function p(t){for(;--t>=0&&!l[t];);return t}function f(t,e){var i,n;if(!(0>t)){for(i=t,n=h(e);d>i;i++)if(l[i]){if(!(d>n&&l[i].test(T[n])))break;T[i]=T[n],T[n]=r.placeholder,n=h(n)}_(),w.caret(Math.max(u,t))}}function m(t){var e,i,n,s;for(e=t,i=r.placeholder;d>e;e++)if(l[e]){if(n=h(e),s=T[e],T[e]=i,!(d>n&&l[n].test(s)))break;i=s}}function g(t){var e,i,n,r=t.which;8===r||46===r||s&&127===r?(i=(e=w.caret()).begin,0==(n=e.end)-i&&(i=46!==r?p(i):n=h(i-1),n=46===r?h(n):n),y(i,n),f(i,n-1),t.preventDefault()):27==r&&(w.val(k),w.caret(0,b()),t.preventDefault())}function v(e){var i,n,s,o=e.which,c=w.caret();e.ctrlKey||e.altKey||e.metaKey||32>o||o&&(0!=c.end-c.begin&&(y(c.begin,c.end),f(c.begin,c.end-1)),i=h(c.begin-1),d>i&&(n=String.fromCharCode(o),l[i].test(n)&&(m(i),T[i]=n,_(),s=h(i),a?setTimeout(t.proxy(t.fn.caret,w,s),0):w.caret(s),r.completed&&s>=d&&r.completed.call(w))),e.preventDefault())}function y(t,e){var i;for(i=t;e>i&&d>i;i++)l[i]&&(T[i]=r.placeholder)}function _(){w.val(T.join(""))}function b(t){var e,i,n=w.val(),s=-1;for(e=0,pos=0;d>e;e++)if(l[e]){for(T[e]=r.placeholder;pos++<n.length;)if(i=n.charAt(pos-1),l[e].test(i)){T[e]=i,s=e;break}if(pos>n.length)break}else T[e]===n.charAt(pos)&&e!==c&&(pos++,s=e);return t?_():c>s+1?(w.val(""),y(0,d)):(_(),w.val(w.val().substring(0,s+1))),c?e:u}var w=t(this),T=t.map(e.split(""),function(t){return"?"!=t?o[t]?r.placeholder:t:void 0}),k=w.val();w.data(t.mask.dataName,function(){return t.map(T,function(t,e){return l[e]&&t!=r.placeholder?t:null}).join("")}),w.attr("readonly")||w.one("unmask",function(){w.unbind(".mask").removeData(t.mask.dataName)}).bind("focus.mask",function(){var t;clearTimeout(i),k=w.val(),t=b(),i=setTimeout(function(){_(),t==e.length?w.caret(0,t):w.caret(t)},10)}).bind("blur.mask",function(){b(),w.val()!=k&&w.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(n,function(){setTimeout(function(){var t=b(!0);w.caret(t),r.completed&&t==w.val().length&&r.completed.call(w)},0)}),b()}))}})}(jQuery),
/*! Magnific Popup - v1.0.0 - 2014-12-12
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2014 Dmitry Semenov; */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery||window.Zepto)}(function(t){var e,i,n,r,s,a,o,l="Close",c="BeforeClose",u="AfterClose",d="BeforeAppend",h="MarkupParse",p="Open",f="Change",m="mfp",g="."+m,v="mfp-ready",y="mfp-removing",_="mfp-prevent-close",b=function(){},w=!!window.jQuery,T=t(window),k=function(t,i){e.ev.on(m+t+g,i)},S=function(e,i,n,r){var s=document.createElement("div");return s.className="mfp-"+e,n&&(s.innerHTML=n),r?i&&i.appendChild(s):(s=t(s),i&&s.appendTo(i)),s},C=function(i,n){e.ev.triggerHandler(m+i,n),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(n)?n:[n]))},x=function(i){return i===o&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),o=i),e.currTemplate.closeBtn},E=function(){t.magnificPopup.instance||((e=new b).init(),t.magnificPopup.instance=e)},A=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};b.prototype={constructor:b,init:function(){var i=navigator.appVersion;e.isIE7=-1!==i.indexOf("MSIE 7."),e.isIE8=-1!==i.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=A(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),r=t(document),e.popupsCache={}},open:function(i){var s;if(n||(n=t(document.body)),!1===i.isObj){e.items=i.items.toArray(),e.index=0;var o,l=i.items;for(s=0;l.length>s;s++)if((o=l[s]).parsed&&(o=o.el[0]),o===i.el[0]){e.index=s;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(!e.isOpen){e.types=[],a="",e.ev=i.mainEl&&i.mainEl.length?i.mainEl.eq(0):r,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=S("bg").on("click"+g,function(){e.close()}),e.wrap=S("wrap").attr("tabindex",-1).on("click"+g,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=S("container",e.wrap)),e.contentContainer=S("content"),e.st.preloader&&(e.preloader=S("preloader",e.container,e.st.tLoading));var c=t.magnificPopup.modules;for(s=0;c.length>s;s++){var u=c[s];u=u.charAt(0).toUpperCase()+u.slice(1),e["init"+u].call(e)}C("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(k(h,function(t,e,i,n){i.close_replaceWith=x(n.type)}),a+=" mfp-close-btn-in"):e.wrap.append(x())),e.st.alignTop&&(a+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:T.scrollTop(),position:"absolute"}),(!1===e.st.fixedBgPos||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:r.height(),position:"absolute"}),e.st.enableEscapeKey&&r.on("keyup"+g,function(t){27===t.keyCode&&e.close()}),T.on("resize"+g,function(){e.updateSize()}),e.st.closeOnContentClick||(a+=" mfp-auto-cursor"),a&&e.wrap.addClass(a);var d=e.wH=T.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(d)){var m=e._getScrollbarSize();m&&(f.marginRight=m)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var y=e.st.mainClass;return e.isIE7&&(y+=" mfp-ie7"),y&&e._addClassToMFP(y),e.updateItemHTML(),C("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||n),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(v),e._setFocus()):e.bgOverlay.addClass(v),r.on("focusin"+g,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(d),C(p),i}e.updateItemHTML()},close:function(){e.isOpen&&(C(c),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(y),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){C(l);var i=y+" "+v+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var n={marginRight:""};e.isIE7?t("body, html").css("overflow",""):n.overflow="",t("html").css(n)}r.off("keyup"+g+" focusin"+g),e.ev.off(g),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&!0!==e.currTemplate[e.currItem.type]||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,C(u)},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;e.wrap.css("height",n),e.wH=n}else e.wH=t||T.height();e.fixedContentPos||e.wrap.css("height",e.wH),C("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var n=i.type;if(C("BeforeChange",[e.currItem?e.currItem.type:"",n]),e.currItem=i,!e.currTemplate[n]){var r=!!e.st[n]&&e.st[n].markup;C("FirstMarkupParse",r),e.currTemplate[n]=!r||t(r)}s&&s!==i.type&&e.container.removeClass("mfp-"+s+"-holder");var a=e["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,e.currTemplate[n]);e.appendContent(a,n),i.preloaded=!0,C(f,i),s=i.type,e.container.prepend(e.contentContainer),C("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&!0===e.currTemplate[i]?e.content.find(".mfp-close").length||e.content.append(x()):e.content=t:e.content="",C(d),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var n,r=e.items[i];if(r.tagName?r={el:t(r)}:(n=r.type,r={data:r,src:r.src}),r.el){for(var s=e.types,a=0;s.length>a;a++)if(r.el.hasClass("mfp-"+s[a])){n=s[a];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=n||e.st.type||"inline",r.index=i,r.parsed=!0,e.items[i]=r,C("ElementParse",r),e.items[i]},addGroup:function(t,i){var n=function(n){n.mfpEl=this,e._openClick(n,t,i)};i||(i={});var r="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(r).on(r,n)):(i.isObj=!1,i.delegate?t.off(r).on(r,i.delegate,n):(i.items=t,t.off(r).on(r,n)))},_openClick:function(i,n,r){if((void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick)||2!==i.which&&!i.ctrlKey&&!i.metaKey){var s=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(s)if(t.isFunction(s)){if(!s.call(e))return!0}else if(s>T.width())return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),r.el=t(i.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),e.open(r)}},updateStatus:function(t,n){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),n||"loading"!==t||(n=e.st.tLoading);var r={status:t,text:n};C("UpdateStatus",r),t=r.status,n=r.text,e.preloader.html(n),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(_)){var n=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(n&&r)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(n)return!0}else if(r&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?r.height():document.body.scrollHeight)>(t||T.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){return i.target===e.wrap[0]||t.contains(e.wrap[0],i.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,i,n){var r;n.data&&(i=t.extend(n.data,i)),C(h,[e,i,n]),t.each(i,function(t,i){if(void 0===i||!1===i)return!0;if((r=t.split("_")).length>1){var n=e.find(g+"-"+r[0]);if(n.length>0){var s=r[1];"replaceWith"===s?n[0]!==i[0]&&n.replaceWith(i):"img"===s?n.is("img")?n.attr("src",i):n.replaceWith('<img src="'+i+'" class="'+n.attr("class")+'" />'):n.attr(r[1],i)}}else e.find(g+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(e,i){return E(),(e=e?t.extend(!0,{},e):{}).isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(i){E();var n=t(this);if("string"==typeof i)if("open"===i){var r,s=w?n.data("magnificPopup"):n[0].magnificPopup,a=parseInt(arguments[1],10)||0;s.items?r=s.items[a]:(r=n,s.delegate&&(r=r.find(s.delegate)),r=r.eq(a)),e._openClick({mfpEl:r},n,s)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),w?n.data("magnificPopup",i):n[0].magnificPopup=i,e.addGroup(n,i);return n};var P,I,L,D="inline",O=function(){L&&(I.after(L.addClass(P)).detach(),L=null)};t.magnificPopup.registerModule(D,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(D),k(l+"."+D,function(){O()})},getInline:function(i,n){if(O(),i.src){var r=e.st.inline,s=t(i.src);if(s.length){var a=s[0].parentNode;a&&a.tagName&&(I||(P=r.hiddenClass,I=S(P),P="mfp-"+P),L=s.after(I).detach().removeClass(P)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),s=t("<div>");return i.inlineElement=s,s}return e.updateStatus("ready"),e._parseMarkup(n,{},i),n}}});var M,j="ajax",R=function(){M&&n.removeClass(M)},N=function(){R(),e.req&&e.req.abort()};t.magnificPopup.registerModule(j,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(j),M=e.st.ajax.cursor,k(l+"."+j,N),k("BeforeChange."+j,N)},getAjax:function(i){M&&n.addClass(M),e.updateStatus("loading");var r=t.extend({url:i.src,success:function(n,r,s){var a={data:n,xhr:s};C("ParseAjax",a),e.appendContent(t(a.data),j),i.finished=!0,R(),e._setFocus(),setTimeout(function(){e.wrap.addClass(v)},16),e.updateStatus("ready"),C("AjaxContentAdded")},error:function(){R(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(r),""}}});var F,B=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=e.st.image.titleSrc;if(n){if(t.isFunction(n))return n.call(e,i);if(i.el)return i.el.attr(n)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,i=".image";e.types.push("image"),k(p+i,function(){"image"===e.currItem.type&&t.cursor&&n.addClass(t.cursor)}),k(l+i,function(){t.cursor&&n.removeClass(t.cursor),T.off("resize"+g)}),k("Resize"+i,e.resizeImage),e.isLowIE&&k("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,F&&clearInterval(F),t.isCheckingImgSize=!1,C("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],r=function(s){F&&clearInterval(F),F=setInterval(function(){return n.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(F),void(3===++i?r(10):40===i?r(50):100===i&&r(500)))},s)};r(1)},getImage:function(i,n){var r=0,s=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,C("ImageLoadComplete")):200>++r?setTimeout(s,100):a())},a=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",o.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},o=e.st.image,l=n.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=t(c).on("load.mfploader",s).on("error.mfploader",a),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),(c=i.img[0]).naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(n,{title:B(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(F&&clearInterval(F),i.loadError?(n.addClass("mfp-loading"),e.updateStatus("error",o.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),e.updateStatus("ready")),n):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),e.findImageSize(i)),n)}}});var U,z=function(){return void 0===U&&(U=void 0!==document.createElement("p").style.MozTransform),U};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,n=".zoom";if(i.enabled&&e.supportsTransition){var r,s,a=i.duration,o=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},s="transition";return r["-webkit-"+s]=r["-moz-"+s]=r["-o-"+s]=r[s]=n,e.css(r),e},u=function(){e.content.css("visibility","visible")};k("BuildControls"+n,function(){if(e._allowZoom()){if(clearTimeout(r),e.content.css("visibility","hidden"),!(t=e._getItemToZoom()))return void u();(s=o(t)).css(e._getOffset()),e.wrap.append(s),r=setTimeout(function(){s.css(e._getOffset(!0)),r=setTimeout(function(){u(),setTimeout(function(){s.remove(),t=s=null,C("ZoomAnimationEnded")},16)},a)},16)}}),k(c+n,function(){if(e._allowZoom()){if(clearTimeout(r),e.st.removalDelay=a,!t){if(!(t=e._getItemToZoom()))return;s=o(t)}s.css(e._getOffset(!0)),e.wrap.append(s),e.content.css("visibility","hidden"),setTimeout(function(){s.css(e._getOffset())},16)}}),k(l+n,function(){e._allowZoom()&&(u(),s&&s.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var n,r=(n=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem)).offset(),s=parseInt(n.css("padding-top"),10),a=parseInt(n.css("padding-bottom"),10);r.top-=t(window).scrollTop()-s;var o={width:n.width(),height:(w?n.innerHeight():n[0].offsetHeight)-a-s};return z()?o["-moz-transform"]=o.transform="translate("+r.left+"px,"+r.top+"px)":(o.left=r.left,o.top=r.top),o}}});var V="iframe",H="//about:blank",W=function(t){if(e.currTemplate[V]){var i=e.currTemplate[V].find("iframe");i.length&&(t||(i[0].src=H),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(V,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(V),k("BeforeChange",function(t,e,i){e!==i&&(e===V?W():i===V&&W(!0))}),k(l+"."+V,function(){W()})},getIframe:function(i,n){var r=i.src,s=e.st.iframe;t.each(s.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var a={};return s.srcAction&&(a[s.srcAction]=r),e._parseMarkup(n,a,i),e.updateStatus("ready"),n}}});var q=function(t){var i=e.items.length;return t>i-1?t-i:0>t?i+t:t},$=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,n=".mfp-gallery",s=Boolean(t.fn.mfpFastClick);return e.direction=!0,!(!i||!i.enabled)&&(a+=" mfp-gallery",k(p+n,function(){i.navigateByImgClick&&e.wrap.on("click"+n,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),r.on("keydown"+n,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),k("UpdateStatus"+n,function(t,i){i.text&&(i.text=$(i.text,e.currItem.index,e.items.length))}),k(h+n,function(t,n,r,s){var a=e.items.length;r.counter=a>1?$(i.tCounter,s.index,a):""}),k("BuildControls"+n,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var n=i.arrowMarkup,r=e.arrowLeft=t(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(_),a=e.arrowRight=t(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(_),o=s?"mfpFastClick":"click";r[o](function(){e.prev()}),a[o](function(){e.next()}),e.isIE7&&(S("b",r[0],!1,!0),S("a",r[0],!1,!0),S("b",a[0],!1,!0),S("a",a[0],!1,!0)),e.container.append(r.add(a))}}),k(f+n,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void k(l+n,function(){r.off(n),e.wrap.off("click"+n),e.arrowLeft&&s&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null}))},next:function(){e.direction=!0,e.index=q(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=q(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,n=Math.min(i[0],e.items.length),r=Math.min(i[1],e.items.length);for(t=1;(e.direction?r:n)>=t;t++)e._preloadItem(e.index+t);for(t=1;(e.direction?n:r)>=t;t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=q(i),!e.items[i].preloaded){var n=e.items[i];n.parsed||(n=e.parseEl(i)),C("LazyLoad",n),"image"===n.type&&(n.img=t('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,C("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var G="retina";t.magnificPopup.registerModule(G,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;(i=isNaN(i)?i():i)>1&&(k("ImageHasSize."+G,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),k("ElementParse."+G,function(e,n){n.src=t.replaceSrc(n,i)}))}}}}),function(){var e=1e3,i="ontouchstart"in window,n=function(){T.off("touchmove"+r+" touchend"+r)},r="."+"mfpFastClick";t.fn.mfpFastClick=function(s){return t(this).each(function(){var a,o,l,c,u,d,h,p=t(this);i&&p.on("touchstart"+r,function(t){u=!1,h=1,d=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],l=d.clientX,c=d.clientY,T.on("touchmove"+r,function(t){d=t.originalEvent?t.originalEvent.touches:t.touches,h=d.length,d=d[0],(Math.abs(d.clientX-l)>10||Math.abs(d.clientY-c)>10)&&(u=!0,n())}).on("touchend"+r,function(t){n(),u||h>1||(a=!0,t.preventDefault(),clearTimeout(o),o=setTimeout(function(){a=!1},e),s())})});p.on("click"+r,function(){a||s()})})},t.fn.destroyMfpFastClick=function(){t(this).off("touchstart"+r+" click"+r),i&&T.off("touchmove"+r+" touchend"+r)}}(),E()}),function(t){t.fn.audionota=function(){this.each(function(){var e=t(this),i=t('<div class="audioplayer"></div>').prependTo(e),n=e.find(".title").text(),r={},s="",a=e.attr("id")?e.attr("id"):"a"+(new Date).getTime(),o=e.find(".media a").eq(0),l=localStorage.getItem("mediaQuality")||"low";e.find(".media a").each(function(e){var i=t(this);s+=e>0?","+i.attr("rel"):i.attr("rel"),"high"===l&&i.data("q2")?r[i.attr("rel")]=i.data("q2"):r[i.attr("rel")]=i.attr("href")});e.data("width")&&e.data("width"),!!e.data("autoplay")&&e.data("autoplay"),!!e.data("mute")&&e.data("mute");var c,u=e.data("swf")?e.data("swf"):"/assets";e.data("volume")?(c=e.data("volume"),null!=localStorage.getItem("volume")&&(console.log(localStorage.getItem("volume")),c=localStorage.getItem("volume"))):c=.5;var d='<div id="container_'+a+'" class="nota_audio"><div class="nota_type-single"><div id="notaplayer_'+a+'" class="nota_jplayer"></div><div class="nota_gui"><div class="nota_interface"><div class="nota_title-container"><div class="nota_title">'+n+'</div></div><div class="nota_progress-container"><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a>';o.data("q1")&&o.data("q2")&&(d+='<div class="nota_quality">\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e: <a href="javascript:;" onclick="setQuality(\''+a+"', this, '"+o.data("q1")+"', 'low')\" class=\"nota_quality_item "+("low"===l?"active":"")+'" tabindex="1">\u043e\u0431\u044b\u0447\u043d\u043e\u0435</a> / <a href="javascript:;" onclick="setQuality(\''+a+"', this, '"+o.data("q2")+"', 'high')\" class=\"nota_quality_item "+("high"===l?"active":"")+'" tabindex="1">\u0432\u044b\u0441\u043e\u043a\u043e\u0435</a></div>'),t(d+='<div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div></div></div></div><div class="errorlayer"><div class="errorstatus"></div></div><div class="waitinglayer"><div class="waitingstatus">\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0430\u0443\u0434\u0438\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div>').appendTo(i);var h,p=0,f=0,m=0,g=0,v=0,y=0,_=i.find(".errorlayer"),b=_.find(".errorstatus"),w=i.find(".waitinglayer");"apready"!=i.data("apready")&&t("#notaplayer_"+a).jPlayer({ready:function(){t(this).jPlayer("setMedia",r),i.data("apready","apready")},loadedmetadata:function(){},timeupdate:function(){},error:function(e){var i=t(this);e.jPlayer.status.currentTime!=undefined&&e.jPlayer.status.currentTime>0&&(p=e.jPlayer.status.currentTime,f=e.jPlayer.status.currentPercentRelative,m=e.jPlayer.status.currentPercentAbsolute,g=e.jPlayer.status.currentTime,v=e.jPlayer.status.duration,y=e.jPlayer.status.remaining),"play"==h&&(window.setTimeout(function(){e.jPlayer.status.currentPercentRelative=f,e.jPlayer.status.currentPercentAbsolute=m,e.jPlayer.status.currentTime=g,e.jPlayer.status.duration=v,e.jPlayer.status.remaining=y,_.css("display",""),i.jPlayer("play",p)},1e4),_.css("display","block"),b.html("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e.<br>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f..."))},play:function(){h="play";var e=t(this);p>0&&e.jPlayer("play",p)},pause:function(){h="pause"},stop:function(){h="stop"},waiting:function(){w.css("display","block")},canplay:function(){w.css("display","")},seeking:function(t){p=t.jPlayer.status.currentTime},swfPath:u,errorAlerts:!1,cssSelectorAncestor:"#container_"+a,cssSelector:{play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},volumechange:function(t){var e=t.jPlayer.options.volume;localStorage.setItem("volume",e)},volume:c,supplied:s,wmode:"window",smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery),function(t){t.fn.notaplayer=function(){this.each(function(){function e(e,r){if(!n.data("stat"))return!1;i();var s=300*(r-e);w=window.setTimeout(function(){var i;t(".playlist a",n).each(function(){var n=t(this);n.data("cutstart")==e&&n.data("cutend")==r&&(i=n.data("fragment"))}),t.ajax({url:n.data("stat"),dataType:"text",type:"GET",data:{videoid:n.data("videoid"),fragment:i,start:e,end:r},complete:function(){}})},s)}function i(){window.clearTimeout(w)}var n=t(this),r=t('<div class="videoplayer"></div>').prependTo(n),s={},a="",o=n.attr("id")?n.attr("id"):"v"+(new Date).getTime();n.find(".media a").each(function(e){var i=t(this);a+=e>0?","+i.attr("rel"):i.attr("rel"),s[i.attr("rel")]=i.attr("href")}),s.poster=n.find(".preview img").attr("src");var l,c,u,d,h,p,f,m,g,v,y,_,b,w,T={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return T.Android()||T.BlackBerry()||T.iOS()||T.Windows()}},k=n.data("width")?n.data("width"):590,S=n.data("height")?n.data("height"):396,C=!!n.data("autoplay")&&n.data("autoplay"),x=n.data("volume")?n.data("volume"):.6,E=!!n.data("mute")&&n.data("mute"),A=n.data("swf")?n.data("swf"):"/assets",P=!1,I=!1,L=!1,D=t(window).width();k>640&&(S=Math.floor(S/k*640),k=640),D<k&&(S=Math.floor(S/k*D),k=D),
t('<div id="container_'+o+'" class="nota_video" style="width:'+k+'px;"><div class="nota_type-single"><div id="notaplayer_'+o+'" class="nota_jplayer"></div><div class="nota_video-play"><a href="javascript:;" class="nota_video-play-icon" tabindex="1">\u0432\u043e\u0441\u043f\u0440.</a></div><div class="nota_gui"><div class="nota_interface"><div class="nota_progress-container"><div class="nota_time-cut"></div><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_previous" tabindex="1"><span>\u043f\u0440\u0435\u0434.</span></a><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_next" tabindex="1"><span>\u0441\u043b\u0435\u0434.</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a><div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div><div class="nota_controls_row2"><div class="nota_toggles"><a href="javascript:;" class="nota_full-screen" tabindex="1" title="\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d">\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d</a><a href="javascript:;" class="nota_restore-screen" tabindex="1" title="\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440">\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440</a><a href="javascript:;" class="nota_repeat" tabindex="1" title="\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c">\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c</a><a href="javascript:;" class="nota_repeat-off" tabindex="1" title="\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c">\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c</a><a href="javascript:;" class="nota_shuffle" tabindex="1" title="\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439">\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439</a><a href="javascript:;" class="nota_shuffle-off" tabindex="1" title="\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443">\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443</a></div><div class="nota_speed"><a href="javascript:;" class="nota_speed-up" tabindex="1" title="\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c">\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c</a></div><div class="nota_jump"><a href="javascript:;" class="nota_jump-back" tabindex="1" title="\u0447\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434">-</a><span class="nota_jump-step">10</span><a href="javascript:;" class="nota_jump-forward" tabindex="1" title="\u0447\u0443\u0442\u044c \u0432\u043f\u0435\u0440\u0435\u0434">+</a></div><div class="nota_cut-control"><a href="javascript:;" class="nota_cut-start" tabindex="1" title="\u043e\u0442 \u0441\u0438\u0445">\u043e\u0442 \u0441\u0438\u0445</a><a href="javascript:;" class="nota_cut-cancel" tabindex="1" title="\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"><i></i><span>\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c</span></a><a href="javascript:;" class="nota_cut-end" tabindex="1" title="\u0434\u043e \u0441\u0438\u0445">\u0434\u043e \u0441\u0438\u0445</a></div></div><div class="nota_share-control"><a href="javascript:;" class="nota_share-button" tabindex="1" title="\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"><i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span></a></div></div></div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0435\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div><div class="nota_share-panel"><a href="#" class="nota_close_share">\u0437\u0430\u043a\u0440\u044b\u0442\u044c</a><form action="." method="post"><div class="nota_sp-getlink"><span class="nota_code-field"><label for="getlink_'+o+'">\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0440\u043e\u043b\u0438\u043a</label><input type="text" id="getlink_'+o+'" name="getlink" readonly="readonly" /><button type="button" value="getlink" data-clipboard-target="getlink_'+o+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443</button></span></div><div class="nota_sp-embed"><div class="nota_sp-size"><span class="nota_title">\u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0432\u0438\u0434\u0435\u043e</span><span class="nota_radio nota_checked"><input type="radio" id="vsize_'+o+'_1" name="vsize" value="large" checked="checked" /><label for="vsize_'+o+'_1">(590x396)<i></i>\u0411\u043e\u043b\u044c\u0448\u043e\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+o+'_2" name="vsize" value="medium" /><label for="vsize_'+o+'_2">(420x282)<i></i>\u0421\u0440\u0435\u0434\u043d\u0435\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+o+'_3" name="vsize" value="small" /><label for="vsize_'+o+'_3">(180x120)<i></i>\u041c\u0430\u043b\u043e\u0435</label></span></div><div class="nota_sp-getcode"><span class="nota_code-field"><label for="getcode_'+o+'">\u0412\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u043e\u043b\u0438\u043a \u043d\u0430 \u0432\u0430\u0448 \u0441\u0430\u0439\u0442</label><input type="text" id="getcode_'+o+'" name="getcode" readonly="readonly" /><button type="button" value="getcode" data-clipboard-target="getcode_'+o+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434</button></span></div><div class="nota_sp-cutsettings"><div class="nota_sp-cutset"><span class="nota_radio"><input type="radio" id="vcut_'+o+'_1" name="vcut" value="full" /><label for="vcut_'+o+'_1"><i><i></i></i>\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e</label></span><span class="nota_radio nota_checked"><input type="radio" id="vcut_'+o+'_2" name="vcut" value="cut" checked="checked" /><label for="vcut_'+o+'_2"><i><i></i></i>\u041e\u0442\u0440\u044b\u0432\u043e\u043a</label></span></div><div class="nota_sp-cutstart"><span class="nota_cut-field"><label for="cutstart_'+o+'">\u041d\u0430\u0447\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutstart_'+o+'" name="cutstart" readonly="readonly" /></span></div><div class="nota_sp-cutend"><span class="nota_cut-field"><label for="cutend_'+o+'">\u041a\u043e\u043d\u0435\u0446 \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutend_'+o+'" name="cutend" readonly="readonly" /></span></div><div class="nota_sp-cuttime"><span class="nota_cut-field"><label for="cuttime_'+o+'">\u041f\u043e\u043b\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f</label><input type="text" id="cuttime_'+o+'" name="cuttime" readonly="readonly" /></span></div><div class="nota_sp-cutbut"><div><button type="button" value="preview">\u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440</button></div><div><button type="button" value="reset">\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043b\u0438\u043f</button></div></div></div></div></form></div><div class="nota_loader"></div></div></div>').appendTo(r),t("#notaplayer_"+o).jPlayer({ready:function(){var e=t(this);e.jPlayer("setMedia",s);var r=n.find(".nota_gui");n.find(".prepare").hide(),n.find(".nota_video-play").css({"margin-top":"-"+S+"px",height:S+"px"}),C&&e.jPlayer("play"),v=n.find(".nota_loader"),y=n.find(".nota_video-play"),T.any()&&v.hide(),_=n.find(".nota_time-tooltip"),b=t("span",_);var a=n.find(".nota_progress"),o=a.offset(),g=a.width();a.mouseenter(function(t){_.show(),o=a.offset(),_.css({left:t.pageX-o.left+"px",top:t.pageY-o.top+"px"})}).mouseleave(function(){_.hide()}).mousemove(function(e){var i=e.pageX-o.left;_.css({left:i+"px",top:e.pageY-o.top+"px"}),b.text(t.jPlayer.convertTime(100*i/g*c/100))}).click(function(){});var w=n.find(".nota_share-button"),x=n.find(".nota_share-panel");x.css("opacity",0),w.click(function(e){e.preventDefault(),t(this).blur(),w.hasClass("opened")?x.stop().animate({opacity:0},function(){w.removeClass("opened").html("<i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span>"),x.css("display","none")}):x.stop().css("display","block").animate({opacity:1},function(){w.addClass("opened").html("<i></i><span>\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443</span>")})}),n.find(".nota_close_share").click(function(e){e.preventDefault(),t(this).blur(),w.click()}),n.find(".nota_radio").each(function(){var e=t(this),i=e.parent();e.find(":radio").bind("change",function(){t(this).prop("checked")&&(i.find(".nota_checked").removeClass("nota_checked"),e.addClass("nota_checked"))})}),n.find(".nota_jump-back").click(function(n){n.preventDefault(),t(this).blur(),i(),e.jPlayer("play",l-10)}),n.find(".nota_jump-forward").click(function(n){n.preventDefault(),t(this).blur(),i(),e.jPlayer("play",l+10)}),h=t(':input[name="cutstart"]',n),p=t(':input[name="cutend"]',n),f=t(':input[name="cuttime"]',n);var E=t(':input[name="getcode"]',n);""!=n.data("permalink")?t(':input[name="getlink"]',n).val(n.data("permalink")):n.find(".nota_sp-getlink").remove(),n.data("embed")||n.find(".nota_sp-embed").remove(),t(".nota_sp-cutbut button[value=reset]",n).click(function(){t(':input[name="vcut"]:eq(0),:input[name="vsize"]:eq(0)',n).click(),n.trigger("cutchange"),t(this).blur()}),t(".nota_sp-cutbut button[value=preview]",n).click(function(){n.find(".nota_share-button").click(),e.jPlayer("play",u),t(this).blur()}),t(':input[name="vcut"],:input[name="vsize"]',n).bind("change",function(e){var i=t(e.target);"vcut"==i.attr("name")&&("full"==i.val()?(m.slider({values:[0,100]}),u=0,d=c):(u=l,m.slider("values",0,100*u/c))),n.trigger("cutchange")});var A=t('button[value="getlink"]',n),P=new ZeroClipboard(A,{moviePath:n.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});P.on("noFlash",function(){A.hide()}),P.on("complete",function(){});var I,L=t('button[value="getcode"]',n),D=new ZeroClipboard(L,{moviePath:n.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});D.on("noFlash",function(){L.hide()}),D.on("complete",function(){}),n.bind("cutchange",function(e){if(h.val(t.jPlayer.convertTime(u)),p.val(t.jPlayer.convertTime(d)),f.val(t.jPlayer.convertTime(d-u)),""!=n.data("embed")){var i=n.data("embed"),r=t(':input:checked[name="vcut"]',n).val(),s=t(':input:checked[name="vsize"]',n).val();i=i.indexOf("?")>-1?i+"&":i+"?";var a="full"==r?0:u,o=(e="full"==r?c:d,590),l=396;"medium"==s&&(o=420,l=282),"small"==s&&(o=180,l=120),(u>0||d<c)&&t(':input[name="vcut"][value="cut"]',n).click(),E.val('<object data="'+i+"s="+Math.round(a)+"&e="+Math.round(e)+"&w="+o+"&h="+l+'" width="'+o+'" height="'+l+'"></object>')}}),n.data("permalink")||n.data("embed")||n.find(".nota_share-control").remove(),n.mouseenter(function(){window.clearTimeout(I),r.css("opacity","")}).mouseleave(function(){I=window.setTimeout(function(){w.hasClass("opened")||r.css("opacity","0")},2e3)}),k<500&&n.addClass("sizesmall"),k<300&&n.addClass("sizelite")},loadedmetadata:function(e){var i=t(this),r=n.find(".nota_cut-control");m=n.find(".nota_time-cut"),c=e.jPlayer.status.duration,u=n.data("cutstart")?n.data("cutstart"):0,d=n.data("cutend")?n.data("cutend"):c,m.slider({range:!0,step:.01,values:[100*u/c,100*d/c],slide:function(){_.css({display:"block",left:+m.slider("values",g.data("index"))+"%",top:"-10px"}),b.text(t.jPlayer.convertTime(m.slider("values",g.data("index"))*c/100))},stop:function(t,e){var r=100*l/c;e.values[0]>=r?(m.slider({values:[r,e.values[1]]}),u=l):u=e.values[0]*c/100,e.values[1]<=r?(i.jPlayer("pause",l),m.slider({values:[e.values[0],r]}),d=l):d=e.values[1]*c/100,n.trigger("cutchange"),_.css("display","none")},start:function(){g=m.find(".ui-slider-handle.ui-state-hover, .ui-slider-handle.ui-state-active")},create:function(){m.hide(),r.find(".nota_cut-start").click(function(e){e.preventDefault(),t(this).blur(),u=l,m.slider("values",0,100*u/c),n.trigger("cutchange")}),r.find(".nota_cut-end").click(function(e){e.preventDefault(),t(this).blur(),d=l,m.slider("values",1,100*d/c),n.trigger("cutchange")}),r.find(".nota_cut-cancel").click(function(e){e.preventDefault(),t(this).blur(),u=0,d=c,m.slider({values:[100*u/c,100*d/c]}),n.trigger("cutchange")}),m.find(".ui-slider-handle").each(function(e){t(this).data("index",e)}),n.trigger("cutchange");var e=n.find(".playlist");if(e.length>0){e.find(".fullplay").data("cutstart",0).data("cutend",c),t("a",e).click(function(e){e.preventDefault();var r=t(this);u=r.data("cutstart"),d=r.data("cutend"),m.slider({values:[100*u/c,100*d/c]}),n.trigger("cutchange"),i.jPlayer("play",u),r.blur()}),t(".nota_previous, .nota_next",n).click(function(){var i,n=t(this);if(t(".fragments a",e).each(function(){var e=t(this);e.data("cutstart")<=l&&e.data("cutend")>=l&&(i=e.parent(".fragment"))}),i&&i.length>0){var r=n.hasClass("nota_next")?i.next():i.prev();r.length<1&&(r=n.hasClass("nota_next")?t(".fragment:eq(0)",e):t(".fragment:last",e)),t("a",r).click()}else t(".fragments a:eq(0)",e).click();n.blur()});var s=t(".fragments a:eq(0)",e);u=s.data("cutstart"),d=s.data("cutend"),u>0&&!C&&i.jPlayer("pause",u),m.slider({values:[100*u/c,100*d/c]}),n.trigger("cutchange")}else n.addClass("no_prev").addClass("no_next")}}),y.show(),P=!0},loadeddata:function(){v.hide()},seeked:function(){l>d&&(d=c,m.slider("values",1,100),n.trigger("cutchange")),l<u&&(u=l,m.slider("values",0,100*u/c),n.trigger("cutchange")),P?(v.hide(100,function(){v.css({"background-color":"transparent",opacity:1})}),m.show(),P=!1):(y.hide(),v.hide()),I=!1},seeking:function(){I=!0,T.any()||v.show()},waiting:function(){},timeupdate:function(e){l=e.jPlayer.status.currentTime,!I&&L&&l>=d&&t(this).jPlayer("pause",d)},play:function(){var e=t(this);e.jPlayer("pauseOthers"),(l<=u||l>=d)&&e.jPlayer("play",u),L=!0,y.hide()},playing:function(){v.hide(),y.hide(),L=!0,e(u,d)},pause:function(){L=!1,y.show(),i()},cssSelectorAncestor:"#container_"+o,cssSelector:{videoPlay:".nota_video-play",play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},swfPath:A,preload:"metadata",solution:"html,flash",volume:x,muted:E,supplied:a,size:{width:k+"px",height:S+"px",cssClass:"nota_video-"+k+"p"},smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).videojs=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t,e){Hr(t).forEach(function(i){return e(t[i],i)})}function n(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.assign?zr.apply(void 0,[t].concat(n)):(n.forEach(function(e){e&&i(e,function(e,i){t[i]=e})}),t)}function r(t){return!!t&&"object"==typeof t}function s(t){return r(t)&&"[object Object]"===Vr.call(t)&&t.constructor===Object}function a(t,e){if(!t||!e)return"";if("function"!=typeof Or.getComputedStyle)return"";var i=Or.getComputedStyle(t);return i?i.getPropertyValue(e)||i[e]:""}function o(t){return"string"==typeof t&&Boolean(t.trim())}function l(t){if(0<=t.indexOf(" "))throw new Error("class has illegal whitespace characters")}function c(){return Rr===Or.document}function u(t){return r(t)&&1===t.nodeType}function d(){try{return Or.parent!==Or.self}catch(Dr){return!0}}function h(t){return function(e,i){if(!o(e))return Rr[t](null);o(i)&&(i=Rr.querySelector(i));var n=u(i)?i:Rr;return n[t]&&n[t](e)}}function p(t,e,i,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===i&&(i={});var r=Rr.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var i=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(Br.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+i+"."),r.setAttribute(t,i)):"textContent"===t?f(r,i):r[t]===i&&"tabIndex"!==t||(r[t]=i)}),Object.getOwnPropertyNames(i).forEach(function(t){r.setAttribute(t,i[t])}),n&&O(r,n),r}function f(t,e){return"undefined"==typeof t.textContent?t.innerText=e:t.textContent=e,t}function m(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function g(t,e){return l(e),t.classList?t.classList.contains(e):new RegExp("(^|\\s)"+e+"($|\\s)").test(t.className)}function v(t,e){return t.classList?t.classList.add(e):g(t,e)||(t.className=(t.className+" "+e).trim()),t}function y(t,e){return t.classList?t.classList.remove(e):(l(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function _(t,e,i){var n=g(t,e);if("function"==typeof i&&(i=i(t,e)),"boolean"!=typeof i&&(i=!n),i!==n)return i?v(t,e):y(t,e),t}function b(t,e){Object.getOwnPropertyNames(e).forEach(function(i){var n=e[i];null==n||!1===n?t.removeAttribute(i):t.setAttribute(i,!0===n?"":n)})}function w(t){var e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,r=n.length-1;0<=r;r--){var s=n[r].name,a=n[r].value;"boolean"!=typeof t[s]&&-1===i.indexOf(","+s+",")||(a=null!==a),e[s]=a}return e}function T(t,e){return t.getAttribute(e)}function k(t,e,i){t.setAttribute(e,i)}function S(t,e){t.removeAttribute(e)}function C(){Rr.body.focus(),Rr.onselectstart=function(){return!1}}function x(){Rr.onselectstart=function(){return!0}}function E(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),i.height||(i.height=parseFloat(a(t,"height"))),i.width||(i.width=parseFloat(a(t,"width"))),i}}function A(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,i=t.offsetHeight,n=0,r=0;n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;);return{left:n,top:r,width:e,height:i}}function P(t,e){var i={},n=A(e.target),r=A(t),s=r.width,a=r.height,o=e.offsetY-(r.top-n.top),l=e.offsetX-(r.left-n.left);return e.changedTouches&&(l=e.changedTouches[0].pageX-r.left,o=e.changedTouches[0].pageY+r.top),i.y=1-Math.max(0,Math.min(1,o/a)),i.x=Math.max(0,Math.min(1,l/s)),i}function I(t){return r(t)&&3===t.nodeType}function L(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function D(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),u(t)||I(t)?t:"string"==typeof t&&/\S/.test(t)?Rr.createTextNode(t):void 0}).filter(function(t){return t})}function O(t,e){return D(e).forEach(function(e){return t.appendChild(e)}),t}function M(t,e){return O(L(t),e)}function j(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons}function R(t,e){e&&(Ir=e),Or.setTimeout(Xr,t)}function N(){Gr=!0,Or.removeEventListener("load",N)}function F(t){var e=Rr.createElement("style");return e.className=t,e}function B(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e}function U(){return Kr++}function z(t,e){if(Jr.has(t)){var i=Jr.get(t);0===i.handlers[e].length&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Jr["delete"](t)}}function V(t,e,i,n){i.forEach(function(i){t(e,i,n)})}function H(t){function e(){return!0}function i(){return!1}if(t.fixed_)return t;if(!t||!t.isPropagationStopped){var n=t||Or.event;for(var r in t={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(t[r]=n[r]));if(t.target||(t.target=t.srcElement||Rr),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX){var s=Rr.documentElement,a=Rr.body;t.pageX=t.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}function W(t,e,i){if(Array.isArray(e))return V(W,t,e,i);Jr.has(t)||Jr.set(t,{});var n=Jr.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=U()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,i){if(!n.disabled){e=H(e);var r=n.handlers[e.type];if(r)for(var s=r.slice(0),a=0,o=s.length;a<o&&!e.isImmediatePropagationStopped();a++)try{s[a].call(t,e,i)}catch(e){Br.error(e)}}}),1===n.handlers[e].length)if(t.addEventListener){var r=!1;ts()&&-1<es.indexOf(e)&&(r={passive:!0}),t.addEventListener(e,n.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function q(t,e,i){if(Jr.has(t)){var n=Jr.get(t);if(n.handlers){if(Array.isArray(e))return V(q,t,e,i);var r=function(t,e){n.handlers[e]=[],z(t,e)};if(void 0!==e){var s=n.handlers[e];if(s)if(i){if(i.guid)for(var a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);z(t,e)}else r(t,e)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(t,o)}}}function $(t,e,i){var n=Jr.has(t)?Jr.get(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=H(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles)$.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Jr.has(e.target)||Jr.set(e.target,{});var s=Jr.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function G(t,e,i){function n(){q(t,e,n),i.apply(this,arguments)}if(Array.isArray(e))return V(G,t,e,i);n.guid=i.guid=i.guid||U(),W(t,e,n)}function X(t,e,i){function n(){q(t,e,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||U(),W(t,e,n)}function Y(t,e,i){e.guid||(e.guid=U());var n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n}function K(t,e){var i=Or.performance.now();return function(){var n=Or.performance.now();e<=n-i&&(t.apply(void 0,arguments),i=n)}}function Q(){}function Z(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length}function J(t){if(!t.nodeName&&!ns(t))throw new Error("Invalid target; must be a DOM node or evented object.")}function tt(t){if(!Z(t))throw new Error("Invalid event type; must be a non-empty string or array.")}function et(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")}function it(t,e){var i,n,r,s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return r=s?(i=t.eventBusEl_,3<=e.length&&e.shift(),n=e[0],e[1]):(i=e[0],n=e[1],e[2]),J(i),tt(n),et(r),{isTargetingSelf:s,target:i,type:n,listener:r=Y(t,r)}}function nt(t,e,i,n){J(t),t.nodeName?is[e](t,i,n):t[e](i,n)}function rt(t,e){void 0===e&&(e={});var i=e.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=p("span",{className:"vjs-event-bus"});return n(t,rs),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(t){t()}),t.on("dispose",function(){t.off(),Or.setTimeout(function(){t.eventBusEl_=null},0)}),t}function st(t,e){return n(t,ss),t.state=n({},t.state,e),"function"==typeof t.handleStateChanged&&ns(t)&&t.on("statechanged",t.handleStateChanged),t}function at(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toLowerCase()})}function ot(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toUpperCase()})}function lt(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){e&&i(e,function(e,i){s(e)?(s(t[i])||(t[i]={}),t[i]=lt(t[i],e)):t[i]=e})}),t}function ct(t,e,i,n){return function(t,e,i){if("number"!=typeof e||e<0||i<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+i+").")}(t,n,i.length-1),i[n][e]}function ut(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:ct.bind(null,"start",0,t),end:ct.bind(null,"end",1,t)}}function dt(t,e){return Array.isArray(t)?ut(t):void 0===t||void 0===e?ut():ut([[t,e]])}function ht(t,e){var i,n,r=0;if(!e)return 0;t&&t.length||(t=dt(0,0));for(var s=0;s<t.length;s++)i=t.start(s),e<(n=t.end(s))&&(n=e),r+=n-i;return r/e}function pt(t){if(t instanceof pt)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:r(t)&&("number"==typeof t.code&&(this.code=t.code),n(this,t)),this.message||(this.message=pt.defaultMessages[this.code]||"")}function ft(t){return null!=t&&"function"==typeof t.then}function mt(t){ft(t)&&t.then(null,function(){})}function gt(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,i){return t[i]&&(e[i]=t[i]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}function vt(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].enabled=!1)}function yt(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].selected=!1)}function _t(t){var e=["protocol","hostname","port","pathname","search","hash","host"],i=Rr.createElement("a");i.href=t;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=Rr.createElement("div")).innerHTML='<a href="'+t+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),Rr.body.appendChild(n));for(var s={},a=0;a<e.length;a++)s[e[a]]=i[e[a]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=Or.location.protocol),r&&Rr.body.removeChild(n),s}function bt(t){if(!t.match(/^https?:\/\//)){var e=Rr.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t}function wt(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""}function Tt(t,e){void 0===e&&(e=Or.location);var i=_t(t);return(":"===i.protocol?e.protocol:i.protocol)+i.host!==e.protocol+e.host}function kt(t,e,i){var n=t;return da(e)?(i=e,"string"==typeof t&&(n={uri:t})):n=zr({},e,{uri:t}),n.callback=i,n}function St(t,e,i){return Ct(e=kt(t,e,i))}function Ct(t){function e(t){return clearTimeout(s),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,o(t,m)}function i(){if(!r){var e;clearTimeout(s),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=m,n=null;return 0!==e?(i={body:function(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(l),f)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:u,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(i.headers=pa(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,i,i.body)}}if("undefined"==typeof t.callback)throw new Error("callback argument missing");var n,r,s,a=!1,o=function(e,i,n){a||(a=!0,t.callback(e,i,n))},l=t.xhr||null,c=(l=l||(t.cors||t.useXDR?new St.XDomainRequest:new St.XMLHttpRequest)).url=t.uri||t.url,u=l.method=t.method||"GET",d=t.body||t.data,h=l.headers=t.headers||{},p=!!t.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:l};if("json"in t&&!1!==t.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===t.json?d:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(i,0)},l.onload=i,l.onerror=e,l.onprogress=function(){},l.onabort=function(){r=!0},l.ontimeout=e,l.open(u,c,!p,t.username,t.password),p||(l.withCredentials=!!t.withCredentials),!p&&0<t.timeout&&(s=setTimeout(function(){if(!r){r=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},t.timeout)),l.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&l.setRequestHeader(n,h[n]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(d||null),l}function xt(t,e){var i=new Or.WebVTT.Parser(Or,Or.vttjs,Or.WebVTT.StringDecoder()),n=[];i.oncue=function(t){e.addCue(t)},i.onparsingerror=function(t){n.push(t)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),0<n.length&&(Or.console&&Or.console.groupCollapsed&&Or.console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return Br.error(t)}),Or.console&&Or.console.groupEnd&&Or.console.groupEnd()),i.flush()}function Et(t,e){var i={uri:t},n=Tt(t);n&&(i.cors=n);var r="use-credentials"===e.tech_.crossOrigin();r&&(i.withCredentials=r),fa(i,Y(this,function(t,i,n){if(t)return Br.error(t,i);e.loaded_=!0,"function"!=typeof Or.WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],function(t){if("vttjserror"!==t.type)return xt(n,e);Br.error("vttjs failed to load, stopping trying to process "+e.src)}):xt(n,e)}))}function At(){}function Pt(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function It(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function Lt(){this.values=ka(null)}function Dt(t,e,i,n){var r=n?t.split(n):[t];for(var s in r)if("string"==typeof r[s]){var a=r[s].split(i);2===a.length&&e(a[0],a[1])}}function Ot(t,e,i){function n(){var e=It(t);if(null===e)throw new Pt(Pt.Errors.BadTimeStamp,"Malformed timestamp: "+s);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}var s=t;if(r(),e.startTime=n(),r(),"-->"!==t.substr(0,3))throw new Pt(Pt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+s);t=t.substr(3),r(),
e.endTime=n(),r(),function(t,e){var n=new Lt;Dt(t,function(t,e){switch(t){case"region":for(var r=i.length-1;0<=r;r--)if(i[r].id===e){n.set(t,i[r].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var s=e.split(","),a=s[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===s.length&&n.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=e.split(","),n.percent(t,s[0]),2===s.length&&n.alt("positionAlign",s[1],["start","center","end"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start","center","end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");try{e.line=n.get("line","auto")}catch(t){}e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100);try{e.align=n.get("align","center")}catch(t){e.align=n.get("align","middle")}try{e.position=n.get("position","auto")}catch(t){e.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(t,e)}function Mt(t,e){function i(){if(!e)return null;var t,i=e.match(/^([^<]*)(<[^>]*>?)?/);return t=i[1]?i[1]:i[2],e=e.substr(t.length),t}function n(e,i){var n=Ca[e];if(!n)return null;var r=t.document.createElement(n),s=Ea[e];return s&&i&&(r[s]=i.trim()),r}for(var r,s,a,o,l=t.document.createElement("div"),c=l,u=[];null!==(r=i());)if("<"!==r[0])c.appendChild(t.document.createTextNode((s=r,Sa.innerHTML=s,s=Sa.textContent,Sa.textContent="",s)));else{if("/"===r[1]){u.length&&u[u.length-1]===r.substr(2).replace(">","")&&(u.pop(),c=c.parentNode);continue}var d,h=It(r.substr(1,r.length-2));if(h){d=t.document.createProcessingInstruction("timestamp",h),c.appendChild(d);continue}var p=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=n(p[1],p[3])))continue;if(a=c,Aa[(o=d).localName]&&Aa[o.localName]!==a.localName)continue;if(p[2]){var f=p[2].split(".");f.forEach(function(t){var e=/^bg_/.test(t),i=e?t.slice(3):t;if(xa.hasOwnProperty(i)){var n=e?"background-color":"color",r=xa[i];d.style[n]=r}}),d.className=f.join(" ")}u.push(p[1]),c.appendChild(d),c=d}return l}function jt(t){for(var e=0;e<Pa.length;e++){var i=Pa[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function Rt(){}function Nt(t,e,i){Rt.call(this),this.cue=e,this.cueDiv=Mt(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:function(t){function e(t,e){for(var i=e.childNodes.length-1;0<=i;i--)t.push(e.childNodes[i])}function i(t){if(!t||!t.length)return null;var n=t.pop(),r=n.textContent||n.innerText;if(r){var s=r.match(/^.*(\n|\r)/);return s?s[t.length=0]:r}return"ruby"===n.tagName?i(t):n.childNodes?(e(t,n),i(t)):void 0}var n=[],r="";if(!t||!t.childNodes)return"ltr";for(e(n,t);r=i(n);)for(var s=0;s<r.length;s++)if(jt(r.charCodeAt(s)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Ft(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight}function Bt(t,e,i,n){var r=new Ft(e),s=e.cue,a=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)"showing"===i[r].mode&&n++;return-1*++n}(s),o=[];if(s.snapToLines){var l;switch(s.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var c=r.lineHeight,u=c*Math.round(a),d=i[l]+c,h=o[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),a<0&&(u+=""===s.vertical?i.height:i.width,o=o.reverse()),r.move(h,u)}else{var p=r.lineHeight/i.height*100;switch(s.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}o=["+y","-x","+x","-y"],r=new Ft(e)}var f=function(t,e){for(var r,s=new Ft(t),a=1,o=0;o<e.length;o++){for(;t.overlapsOppositeAxis(i,e[o])||t.within(i)&&t.overlapsAny(n);)t.move(e[o]);if(t.within(i))return t;var l=t.intersectPercentage(i);l<a&&(r=new Ft(t),a=l),t=new Ft(s)}return r||s}(r,o);e.move(f.toCSSCompatValues(i))}function Ut(){}function zt(t){return"string"==typeof t&&!!Da[t.toLowerCase()]&&t.toLowerCase()}function Vt(t,e,i){this.hasBeenReset=!1;var n="",r=!1,s=t,a=e,o=i,l=null,c="",u=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(t){n=""+t}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(t){r=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");a=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(t){o=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(t){l=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(t){var e=function(t){return"string"==typeof t&&!!La[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(t){u=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(t){var e=zt(t);e&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");p=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(t){var e=zt(t);e&&(f=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(t){var e=zt(t);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ht(t){return"number"==typeof t&&0<=t&&t<=100}function Wt(){var t=100,e=3,i=0,n=100,r=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Ht(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(t){if(!Ht(t))throw new Error("RegionAnchorX must be between 0 and 100.");n=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!Ht(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!Ht(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!Ht(t))throw new Error("ViewportAnchorX must be between 0 and 100.");r=t}},scroll:{enumerable:!0,get:function(){return a},set:function(t){var e=function(t){return"string"==typeof t&&!!Ma[t.toLowerCase()]&&t.toLowerCase()}(t);!1===e||(a=e)}}})}function qt(t,e,i){t.setTimeout(function(){return function r(t,e,i,s,a,o){void 0===t&&(t={}),void 0===e&&(e=[]),void 0===a&&(a=[]),void 0===o&&(o=!1);var l=e,c=l[0],u=l.slice(1);if("string"==typeof c)r(t,Na[c],i,s,a,o);else if(c){var d=Xt(s,c);if(!d.setSource)return a.push(d),r(t,u,i,s,a,o);d.setSource(n({},t),function(e,n){if(e)return r(t,u,i,s,a,o);a.push(d),r(n,t.type===n.type?u:Na[n.type],i,s,a,o)})}else u.length?r(t,u,i,s,a,o):o?i(t,a):r(t,Na["*"],i,s,a,!0)}(e,Na[e.type],i,t)},1)}function $t(t,e,i,n){void 0===n&&(n=null);var r="call"+ot(i),s=t.reduce(Gt(r),n),a=s===Ba,o=a?null:e[i](s);return function(t,e,i,n){for(var r=t.length-1;0<=r;r--){var s=t[r];s[e]&&s[e](n,i)}}(t,i,o,a),o}function Gt(t){return function(e,i){return e===Ba?Ba:i[t]?i[t](e):e}}function Xt(t,e){var i=Fa[t.id()],n=null;if(null==i)return n=e(t),Fa[t.id()]=[[e,n]],n;for(var r=0;r<i.length;r++){var s=i[r],a=s[0],o=s[1];a===e&&(n=o)}return null===n&&(n=e(t),i.push([e,n])),n}function Yt(t){void 0===t&&(t="");var e=wt(t);return Ha[e.toLowerCase()]||""}function Kt(t){if(!t.type){var e=Yt(t.src);e&&(t.type=e)}return t}function Qt(t,e){var i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function Zt(t,e,i){try{t.style[e]=i}catch(t){return}}function Jt(t,e){t=t<0?0:t;var i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600),s=Math.floor(e/60%60),a=Math.floor(e/3600);return!isNaN(t)&&t!==1/0||(r=n=i="-"),(r=0<r||0<a?r+":":"")+(n=((r||10<=s)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)}function te(t,e){return void 0===e&&(e=t),eo(t,e)}function ee(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}function ie(t,e){return ee(t/e*100,0,100).toFixed(2)+"%"}function ne(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}function re(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var i=t.$$("source"),n=[],r="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var a=i[s].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(r=n[0]),t.triggerSourceset(r),!0)}function se(t,e){for(var i={},n=0;n<t.length&&!((i=Object.getOwnPropertyDescriptor(t[n],e))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function ae(t){var e=t.el();if(!e.resetSourceWatch_){var i={},n=se([t.el(),Or.HTMLMediaElement.prototype,Or.Element.prototype,hl],"innerHTML"),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i.apply(e,r);return re(t),a}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){e[t]&&(i[t]=e[t],e[t]=r(i[t]))}),Object.defineProperty(e,"innerHTML",lt(n,{set:r(n.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(i).forEach(function(t){e[t]=i[t]}),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)}}function oe(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var i=se([t.el(),Or.HTMLMediaElement.prototype,pl],"src"),n=e.setAttribute,r=e.load;Object.defineProperty(e,"src",lt(i,{set:function(n){var r=i.set.call(e,n);return t.triggerSourceset(e.src),r}})),e.setAttribute=function(i,r){var s=n.call(e,i,r);return/src/i.test(i)&&t.triggerSourceset(e.src),s},e.load=function(){var i=r.call(e);return re(t)||(t.triggerSourceset(""),ae(t)),i},e.currentSrc?t.triggerSourceset(e.currentSrc):re(t)||ae(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=r,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}}}}function le(t,e,i,n){function r(i){return Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0})}void 0===n&&(n=!0);var s={configurable:!0,enumerable:!0,get:function(){var t=i();return r(t),t}};return n&&(s.set=r),Object.defineProperty(t,e,s)}function ce(t){return El.hasOwnProperty(t)}function ue(t){return ce(t)?El[t]:void 0}function de(t,e){t[xl]=t[xl]||{},t[xl][e]=!0}function he(t,e,i){var n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)}function pe(t,e){return e.prototype.name=t,function(){he(this,{name:t,plugin:e,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=Sl(e,[this].concat(n));return this[t]=function(){return s},he(this,s.getEventHash()),s}}function fe(t,e,i){var n=fe.getPlayer(t);if(n)return e&&Br.warn('Player "'+t+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var s="string"==typeof t?Wr("#"+Il(t)):t;if(!u(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");s.ownerDocument.defaultView&&s.ownerDocument.body.contains(s)||Br.warn("The element supplied is not included in the DOM"),e=e||{},fe.hooks("beforesetup").forEach(function(t){var i=t(s,lt(e));r(i)&&!Array.isArray(i)?e=lt(e,i):Br.error("please return an object in beforesetup hooks")});var a=us.getComponent("Player");return n=new a(s,e,i),fe.hooks("setup").forEach(function(t){return t(n)}),n}function me(t){return t&&"object"==typeof t&&"default"in t?t["default"]:t}function ge(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n}function ve(){}function ye(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function _e(t,e,i,n,r,s){for(var a,o=++e,l=tc;;){var c=t.charAt(o);switch(c){case"=":if(l===ec)a=t.slice(e,o),l=nc;else{if(l!==ic)throw new Error("attribute equal must after attrName");l=nc}break;case"'":case'"':if(l===nc||l===ec){if(l===ec&&(s.warning('attribute value must after "="'),a=t.slice(e,o)),e=o+1,!(0<(o=t.indexOf(c,e))))throw new Error("attribute value no end '"+c+"' match");u=t.slice(e,o).replace(/&#?\w+;/g,r),i.add(a,u,e-1),l=sc}else{if(l!=rc)throw new Error('attribute value must after "="');u=t.slice(e,o).replace(/&#?\w+;/g,r),i.add(a,u,e),s.warning('attribute "'+a+'" missed start quot('+c+")!!"),e=o+1,l=sc}break;case"/":switch(l){case tc:i.setTagName(t.slice(e,o));case sc:case ac:case oc:l=oc,i.closed=!0;case rc:case ec:case ic:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),l==tc&&i.setTagName(t.slice(e,o)),o;case">":switch(l){case tc:i.setTagName(t.slice(e,o));case sc:case ac:case oc:break;case rc:case ec:"/"===(u=t.slice(e,o)).slice(-1)&&(i.closed=!0,u=u.slice(0,-1));case ic:l===ic&&(u=a),l==rc?(s.warning('attribute "'+u+'" missed quot(")!!'),i.add(a,u.replace(/&#?\w+;/g,r),e)):("http://www.w3.org/1999/xhtml"===n[""]&&u.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),i.add(u,u,e));break;case nc:throw new Error("attribute value missed!!")}return o;case"\x80":c=" ";default:if(c<=" ")switch(l){case tc:i.setTagName(t.slice(e,o)),l=ac;break;case ec:a=t.slice(e,o),l=ic;break;case rc:var u=t.slice(e,o).replace(/&#?\w+;/g,r);s.warning('attribute "'+u+'" missed quot(")!!'),i.add(a,u,e);case sc:l=ac}else switch(l){case ic:i.tagName,"http://www.w3.org/1999/xhtml"===n[""]&&a.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),i.add(a,a,e),e=o,l=ec;break;case sc:s.warning('attribute space is required"'+a+'"!!');case ac:l=ec,e=o;break;case nc:l=rc,e=o;break;case oc:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function be(t,e,i){for(var n=t.tagName,r=null,s=t.length;s--;){var a=t[s],o=a.qName,l=a.value;if(0<(h=o.indexOf(":")))var c=a.prefix=o.slice(0,h),u=o.slice(h+1),d="xmlns"===c&&u;else c=null,d="xmlns"===(u=o)&&"";a.localName=u,!1!==d&&(null==r&&(r={},ke(i,i={})),i[d]=r[d]=l,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(d,l))}for(s=t.length;s--;)(c=(a=t[s]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=i[c||""]));var h;u=0<(h=n.indexOf(":"))?(c=t.prefix=n.slice(0,h),t.localName=n.slice(h+1)):(c=null,t.localName=n);var p=t.uri=i[c||""];if(e.startElement(p,u,n,t),!t.closed)return t.currentNSMap=i,t.localNSMap=r,!0;if(e.endElement(p,u,n),r)for(c in r)e.endPrefixMapping(c)}function we(t,e,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var s=t.indexOf("</"+i+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(i)||(a=a.replace(/&#?\w+;/g,n)),r.characters(a,0,a.length),s}return e+1}function Te(t,e,i,n){var r=n[i];return null==r&&((r=t.lastIndexOf("</"+i+">"))<e&&(r=t.lastIndexOf("</"+i)),n[i]=r),r<e}function ke(t,e){for(var i in t)e[i]=t[i]}function Se(t,e,i,n){switch(t.charAt(e+2)){case"-":return"-"!==t.charAt(e+3)?-1:e<(r=t.indexOf("-->",e+4))?(i.comment(t,e+4,r-e-4),r+3):(n.error("Unclosed comment"),-1);default:if("CDATA["==t.substr(e+3,6)){var r=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,r-e-9),i.endCDATA(),r+3}var s=function(t,e){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);i=r.exec(t);)if(n.push(i),i[1])return n}(t,e),a=s.length;if(1<a&&/!doctype/i.test(s[0][0])){var o=s[1][0],l=3<a&&/^public$/i.test(s[2][0])&&s[3][0],c=4<a&&s[4][0],u=s[a-1];return i.startDTD(o,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),i.endDTD(),u.index+u[0].length}}return-1}function Ce(t,e,i){var n=t.indexOf("?>",e);if(n){var r=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function xe(){}function Ee(t,e){return t.__proto__=e,t}function Ae(t,e){for(var i in t)e[i]=t[i]}function Pe(t,e){var i=t.prototype;if(Object.create){var n=Object.create(e.prototype);i.__proto__=n}if(!(i instanceof e)){var r=function(){};r.prototype=e.prototype,Ae(i,r=new r),t.prototype=i=r}i.constructor!=t&&(i.constructor=t)}function Ie(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,Sc[t]),this.message=Sc[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ie);return i.code=t,e&&(this.message=this.message+": "+e),i}function Le(){}function De(t,e){this._node=t,this._refresh=e,Oe(this)}function Oe(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var i=t._refresh(t._node);ci(t,"length",i.length),Ae(i,t),t._inc=e}}function Me(){}function je(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function Re(t,e,i,n){if(n?e[je(e,n)]=i:e[e.length++]=i,t){var r=(i.ownerElement=t).ownerDocument;r&&(n&&He(r,t,n),function(t,e,i){r&&r._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(e._nsMap[i.prefix?i.localName:""]=i.value)}(0,t,i))}}function Ne(t,e,i){var n=je(e,i);if(!(0<=n))throw Ie(xc,new Error(t.tagName+"@"+i));for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,t){var s=t.ownerDocument;s&&(He(s,t,i),i.ownerElement=null)}}function Fe(t){if(this._features={},t)for(var e in t)this._features=t[e]}function Be(){}function Ue(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function ze(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(ze(t,e))return!0}while(t=t.nextSibling)}function Ve(){}function He(t,e,i){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete e._nsMap[i.prefix?i.localName:""]}function We(t,e,i){if(t&&t._inc){t._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var r=e.firstChild,s=0;r;)r=(n[s++]=r).nextSibling;n.length=s}}}function qe(t,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:t.firstChild=n,n?n.previousSibling=i:t.lastChild=i,We(t.ownerDocument,t),e}function $e(t,e,i){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===wc){var r=e.firstChild;if(null==r)return e;var s=e.lastChild}else r=s=e;var a=i?i.previousSibling:t.lastChild;for(r.previousSibling=a,s.nextSibling=i,a?a.nextSibling=r:t.firstChild=r,null==i?t.lastChild=s:i.previousSibling=s;r.parentNode=t,r!==s&&(r=r.nextSibling););return We(t.ownerDocument||t,t),e.nodeType==wc&&(e.firstChild=e.lastChild=null),e}function Ge(){this._nsMap={}}function Xe(){}function Ye(){}function Ke(){}function Qe(){}function Ze(){}function Je(){}function ti(){}function ei(){}function ii(){}function ni(){}function ri(){}function si(){}function ai(t,e){var i=[],n=9==this.nodeType?this.documentElement:this,r=n.prefix,s=n.namespaceURI;if(s&&null==r&&null==(r=n.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return li(this,i,t,e,a),i.join("")}function oi(t,e,i){var n=t.prefix||"",r=t.namespaceURI;if(!n&&!r)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var s=i.length;s--;){var a=i[s];if(a.prefix==n)return a.namespace!=r}return!0}function li(t,e,i,n,r){if(n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case dc:r=r||[];var s=t.attributes,a=s.length,o=t.firstChild,l=t.tagName;i=cc===t.namespaceURI||i,e.push("<",l);for(var c=0;c<a;c++)"xmlns"==(u=s.item(c)).prefix?r.push({prefix:u.localName,namespace:u.value}):"xmlns"==u.nodeName&&r.push({prefix:"",namespace:u.value});for(c=0;c<a;c++){var u;if(oi(u=s.item(c),0,r)){var d=u.prefix||"",h=u.namespaceURI,p=d?" xmlns:"+d:" xmlns";e.push(p,'="',h,'"'),r.push({prefix:d,namespace:h})}li(u,e,i,n,r)}if(oi(t,0,r)&&(d=t.prefix||"",h=t.namespaceURI,p=d?" xmlns:"+d:" xmlns",e.push(p,'="',h,'"'),r.push({prefix:d,namespace:h})),o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),i&&/^script$/i.test(l))for(;o;)o.data?e.push(o.data):li(o,e,i,n,r),o=o.nextSibling;else for(;o;)li(o,e,i,n,r),o=o.nextSibling;e.push("</",l,">")}else e.push("/>");return;case _c:case wc:for(o=t.firstChild;o;)li(o,e,i,n,r),o=o.nextSibling;return;case hc:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,Ue),'"');case pc:return e.push(t.data.replace(/[<&]/g,Ue));case fc:return e.push("<![CDATA[",t.data,"]]>");case yc:return e.push("<!--",t.data,"-->");case bc:var f=t.publicId,m=t.systemId;if(e.push("<!DOCTYPE ",t.name),f)e.push(' PUBLIC "',f),m&&"."!=m&&e.push('" "',m),e.push('">');else if(m&&"."!=m)e.push(' SYSTEM "',m,'">');else{var g=t.internalSubset;g&&e.push(" [",g,"]"),e.push(">")}return;case vc:return e.push("<?",t.target," ",t.data,"?>");case mc:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function ci(t,e,i){t[e]=i}function ui(t){return!!t&&"object"==typeof t}function di(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(function(t,e){return"object"!=typeof e||Object.keys(e).forEach(function(i){Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=t[i].concat(e[i]):ui(t[i])&&ui(e[i])?t[i]=di(t[i],e[i]):t[i]=e[i]}),t},{})}function hi(t){return t.reduce(function(t,e){return t.concat(e)},[])}function pi(t){if(!t.length)return[];for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}function fi(t){var e=t.baseUrl,i=void 0===e?"":e,n=t.source,r=void 0===n?"":n,s=t.range,a=void 0===s?"":s,o=t.indexRange,l=void 0===o?"":o,c={uri:r,resolvedUri:zl(i||"",r)};if(a||l){var u=(a||l).split("-"),d=parseInt(u[0],10),h=parseInt(u[1],10);c.byterange={length:h-d+1,offset:d}}return c}function mi(t){var e=t.type,i=void 0===e?"static":e,n=t.duration,r=t.timescale,s=void 0===r?1:r,a=t.sourceDuration,o=Nc[i](t),l=function(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i}(o.start,o.end).map(function(t){return function(e,i){var n=t.duration,r=t.timescale,s=void 0===r?1:r,a=t.periodIndex,o=t.startNumber;return{number:(void 0===o?1:o)+e,duration:n/s,timeline:a,time:i*n}}}(t));if("static"===i){var c=l.length-1;l[c].duration=a-n/s*c}return l}function gi(t){var e=t.baseUrl,i=t.initialization,n=void 0===i?{}:i,r=t.sourceDuration,s=t.indexRange,a=void 0===s?"":s,o=t.duration;if(!e)throw new Error(Mc);var l=fi({baseUrl:e,source:n.sourceURL,range:n.range}),c=fi({baseUrl:e,source:e,indexRange:a});if(c.map=l,o){var u=mi(t);u.length&&(c.duration=u[0].duration,c.timeline=u[0].timeline)}else r&&(c.duration=r,c.timeline=0);return c.number=0,[c]}function vi(t,e,i){for(var n=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,s=t.timeline||0,a=t.sidx.byterange,o=a.offset+a.length,l=e.timescale,c=e.references.filter(function(t){return 1!==t.referenceType}),u=[],d=o+e.firstOffset,h=0;h<c.length;h++){var p=e.references[h],f=p.referencedSize,m=gi({baseUrl:i,timescale:l,timeline:s,periodIndex:s,duration:p.subsegmentDuration,sourceDuration:r,indexRange:d+"-"+(d+f-1)})[0];n&&(m.map=n),u.push(m),d+=f}return t.segments=u,t}function yi(t){return(e=t.reduce(function(t,e){var i,n=e.attributes.id+(e.attributes.lang||"");return t[n]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(i=t[n].segments).push.apply(i,e.segments),e.attributes.contentProtection&&(t[n].attributes.contentProtection=e.attributes.contentProtection)):t[n]=e,t},{}),Object.keys(e).map(function(t){return e[t]})).map(function(t){return t.discontinuityStarts=function(t,e){return t.reduce(function(t,i,n){return i[e]&&t.push(n),t},[])}(t.segments,"discontinuity"),t});var e}function _i(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var i in t){var n=t[i];if(n.sidx){var r=n.sidx.uri+"-"+(o=(a=n.sidx.byterange).offset+a.length-1,a.offset+"-"+o),s=e[r]&&e[r].sidx;n.sidx&&s&&vi(n,s,n.sidx.resolvedUri)}}var a,o;return t}function bi(t){var e,i=t.attributes,n=t.segments,r=t.sidx,s={attributes:(e={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),r&&(s.sidx=r),s}function wi(t,e,i){var n;if(void 0===i&&(i={}),!t.length)return{};var r=t[0].attributes,s=r.sourceDuration,a=r.type,o=void 0===a?"static":a,l=r.suggestedPresentationDelay,c=r.minimumUpdatePeriod,u=yi(t.filter(function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType})).map(bi),d=yi(t.filter(function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType})),h=t.filter(function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType}),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:s,playlists:_i(u,i)};return 0<=c&&(p.minimumUpdatePeriod=1e3*c),e&&(p.locations=e),"dynamic"===o&&(p.suggestedPresentationDelay=l),d.length&&(p.mediaGroups.AUDIO.audio=function(t,e){var i;void 0===e&&(e={});var n=d.reduce(function(t,n){var r=n.attributes.role&&n.attributes.role.value||"",s=n.attributes.lang||"",a="main";if(s){var o=r?" ("+r+")":"";a=n.attributes.lang+o}return t[a]&&t[a].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth||(t[a]={language:s,autoselect:!0,"default":"main"===r,playlists:_i([function(t){var e,i=t.attributes,n=t.segments,r=t.sidx,s={attributes:(e={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),r&&(s.sidx=r),s}(n)],e),uri:""},void 0===i&&"main"===r&&((i=n)["default"]=!0)),t},{});return i||(n[Object.keys(n)[0]]["default"]=!0),n}(0,i)),h.length&&(p.mediaGroups.SUBTITLES.subs=function(t,e){return void 0===e&&(e={}),h.reduce(function(t,i){var n=i.attributes.lang||"text";return t[n]||(t[n]={language:n,"default":!1,autoselect:!1,playlists:_i([function(t){var e,i=t.attributes,n=t.segments;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var r=((e={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,e);return i.codecs&&(r.CODECS=i.codecs),{attributes:r,uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}}(i)],e),uri:""}),t},{})}(0,i)),p}function Ti(t,e){for(var i,n,r,s,a,o,l,c,u,d,h,p,f=t.type,m=void 0===f?"static":f,g=t.minimumUpdatePeriod,v=void 0===g?0:g,y=t.media,_=void 0===y?"":y,b=t.sourceDuration,w=t.timescale,T=void 0===w?1:w,k=t.startNumber,S=void 0===k?1:k,C=t.periodIndex,x=[],E=-1,A=0;A<e.length;A++){var P=e[A],I=P.d,L=P.r||0,D=P.t||0;E<0&&(E=D),D&&E<D&&(E=D);var O=void 0;if(L<0){var M=A+1;O=M===e.length?"dynamic"===m&&0<v&&0<_.indexOf("$Number$")?(n=E,r=I,s=(i=t).NOW,a=i.clientOffset,o=i.availabilityStartTime,c=void 0===(l=i.timescale)?1:l,d=void 0===(u=i.start)?0:u,p=(s+a)/1e3+(void 0===(h=i.minimumUpdatePeriod)?0:h)-(o+d),Math.ceil((p*c-n)/r)):(b*T-E)/I:(e[M].t-E)/I}else O=L+1;for(var j=S+x.length+O,R=S+x.length;R<j;)x.push({number:R,duration:I/T,time:E,timeline:C}),E+=I,R++}return x}function ki(t,e){return t.replace(Fc,(i=e,function(t,e,n,r){if("$$"===t)return"$";if("undefined"==typeof i[e])return t;var s=""+i[e];return"RepresentationID"===e?s:(r=n?parseInt(r,10):1)<=s.length?s:new Array(r-s.length+1).join("0")+s}));var i}function Si(t,e){var i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},n=t.initialization,r=void 0===n?{sourceURL:"",range:""}:n,s=fi({baseUrl:t.baseUrl,source:ki(r.sourceURL,i),range:r.range});return function(t,e){return t.duration||e?t.duration?mi(t):Ti(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}(t,e).map(function(e){i.Number=e.number,i.Time=e.time;var n=ki(t.media||"",i);return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:zl(t.baseUrl||"",n),map:s,number:e.number}})}function Ci(t,e){var i=t.duration,n=t.segmentUrls,r=void 0===n?[]:n;if(!i&&!e||i&&e)throw new Error(jc);var s,a=r.map(function(e){return function(t,e){var i=t.baseUrl,n=t.initialization,r=void 0===n?{}:n,s=fi({baseUrl:i,source:r.sourceURL,range:r.range}),a=fi({baseUrl:i,source:e.media,range:e.mediaRange});return a.map=s,a}(t,e)});return i&&(s=mi(t)),e&&(s=Ti(t,e)),s.map(function(t,e){if(a[e]){var i=a[e];return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i}}).filter(function(t){return t})}function xi(t){var e,i,n=t.attributes,r=t.segmentInfo;r.template?(i=Si,e=di(n,r.template)):r.base?(i=gi,e=di(n,r.base)):r.list&&(i=Ci,e=di(n,r.list));var s={attributes:n};if(!i)return s;var a=i(e,r.timeline);if(e.duration){var o=e,l=o.duration,c=o.timescale,u=void 0===c?1:c;e.duration=l/u}else a.length?e.duration=a.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):e.duration=0;return s.attributes=e,s.segments=a,r.base&&e.indexRange&&(s.sidx=a[0],s.segments=[]),s}function Ei(t,e){return pi(t.childNodes).filter(function(t){return t.tagName===e})}function Ai(t){return t.textContent.trim()}function Pi(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var i=e.slice(1),n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(s||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(l||0)}function Ii(t){return t&&t.attributes?pi(t.attributes).reduce(function(t,e){var i=Bc[e.name]||Bc.DEFAULT;return t[e.name]=i(e.value),t},{}):{}}function Li(t,e){return e.length?hi(t.map(function(t){return e.map(function(e){return zl(t,Ai(e))})})):t}function Di(t){
var e=Ei(t,"SegmentTemplate")[0],i=Ei(t,"SegmentList")[0],n=i&&Ei(i,"SegmentURL").map(function(t){return di({tag:"SegmentURL"},Ii(t))}),r=Ei(t,"SegmentBase")[0],s=i||e,a=s&&Ei(s,"SegmentTimeline")[0],o=i||r||e,l=o&&Ei(o,"Initialization")[0],c=e&&Ii(e);c&&l?c.initialization=l&&Ii(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,timeline:a&&Ei(a,"S").map(function(t){return Ii(t)}),list:i&&di(Ii(i),{segmentUrls:n,initialization:Ii(l)}),base:r&&di(Ii(r),{initialization:Ii(l)})};return Object.keys(u).forEach(function(t){u[t]||delete u[t]}),u}function Oi(t,e,i){return function(n){var r=Ii(n),s=Li(e,Ei(n,"BaseURL")),a={role:Ii(Ei(n,"Role")[0])},o=di(t,r,a),l=function(t){return t.reduce(function(t,e){var i=Ii(e),n=Uc[i.schemeIdUri];if(n){t[n]={attributes:i};var r=Ei(e,"cenc:pssh")[0];if(r){var s=Ai(r),a=s&&ql(s);t[n].pssh=a}}return t},{})}(Ei(n,"ContentProtection"));Object.keys(l).length&&(o=di(o,{contentProtection:l}));var c=Di(n),u=Ei(n,"Representation"),d=di(i,c);return hi(u.map(function(t,e,i){return function(n){var r=Ei(n,"BaseURL"),s=Li(e,r),a=di(t,Ii(n)),o=Di(n);return s.map(function(t){return{segmentInfo:di(i,o),attributes:di(a,{baseUrl:t})}})}}(o,s,d)))}}function Mi(t,e){void 0===e&&(e={});var i=e,n=i.manifestUri,r=void 0===n?"":n,s=i.NOW,a=void 0===s?Date.now():s,o=i.clientOffset,l=void 0===o?0:o,c=Ei(t,"Period");if(!c.length)throw new Error(Lc);var u=Ei(t,"Location"),d=Ii(t),h=Li([r],Ei(t,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=a,d.clientOffset=l,u.length&&(d.locations=u.map(Ai)),{locations:d.locations,representationInfo:hi(c.map(function(t,e){return function(i,n){var r=Li(e,Ei(i,"BaseURL")),s=Ii(i),a=parseInt(s.id,10),o=Fl.isNaN(a)?n:a,l=di(t,{periodIndex:o}),c=Ei(i,"AdaptationSet"),u=Di(i);return hi(c.map(Oi(l,r,u)))}}(d,h)))}}function ji(t){if(""===t)throw new Error(Dc);var e,i,n=new Ic;try{i=(e=n.parseFromString(t,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null}catch(t){}if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error(Oc);return i}function Ri(t,e){void 0===e&&(e={});var i=Mi(ji(t),e);return wi(i.representationInfo.map(xi),i.locations,e.sidxMapping)}function Ni(t){return function(t){var e=Ei(t,"UTCTiming")[0];if(!e)return null;var i=Ii(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Rc)}return i}(ji(t))}function Fi(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),-1<n)},this.trigger=function(e){var i,n,r,s;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(s=[],n=arguments.length,n=1;n<arguments.length;++n)s.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,s)}},this.dispose=function(){t={}}}}function Bi(t,e){var i=1;for(e<t&&(i=-1);4294967296<Math.abs(e-t);)t+=8589934592*i;return t}function Ui(t){var e=31&t[1];return(e<<=8)|t[2]}function zi(t){return!!(64&t[1])}function Vi(t){var e=0;return 1<(48&t[3])>>>4&&(e+=t[4]+1),e}function Hi(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function Wi(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=0<=i?i:0,(16&t[e+5])>>4?i+20:i+10}function qi(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}function $i(t,e,i){for(var n,r,s,a,o=0,l=uu,c=!1;l<=t.byteLength;)if(71!==t[o]||71!==t[l]&&l!==t.byteLength)o++,l++;else{switch(n=t.subarray(o,l),ou.ts.parseType(n,e.pid)){case"pes":r=ou.ts.parsePesType(n,e.table),s=ou.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=ou.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o+=uu,l+=uu}for(o=(l=t.byteLength)-uu,c=!1;0<=o;)if(71!==t[o]||71!==t[l]&&l!==t.byteLength)o--,l--;else{switch(n=t.subarray(o,l),ou.ts.parseType(n,e.pid)){case"pes":r=ou.ts.parsePesType(n,e.table),s=ou.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=ou.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o-=uu,l-=uu}}function Gi(t,e,i){for(var n,r,s,a,o,l,c,u=0,d=uu,h=!1,p={data:[],size:0};d<t.byteLength;)if(71!==t[u]||71!==t[d])u++,d++;else{switch(n=t.subarray(u,d),ou.ts.parseType(n,e.pid)){case"pes":if(r=ou.ts.parsePesType(n,e.table),s=ou.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(s&&!h&&(a=ou.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),h=!0),!i.firstKeyFrame)){if(s&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;if(ou.ts.videoPacketContainsKeyFrame(o)){var f=ou.ts.parsePesTime(o);f&&(i.firstKeyFrame=f,i.firstKeyFrame.type="video")}p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;u+=uu,d+=uu}for(u=(d=t.byteLength)-uu,h=!1;0<=u;)if(71!==t[u]||71!==t[d])u--,d--;else{switch(n=t.subarray(u,d),ou.ts.parseType(n,e.pid)){case"pes":r=ou.ts.parsePesType(n,e.table),s=ou.ts.parsePayloadUnitStartIndicator(n),"video"===r&&s&&(a=ou.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),h=!0)}if(h)break;u-=uu,d-=uu}}function Xi(t){var e={pid:null,table:null},i={};for(var n in function(t,e){for(var i,n=0,r=uu;r<t.byteLength;)if(71!==t[n]||71!==t[r])n++,r++;else{switch(i=t.subarray(n,r),ou.ts.parseType(i,e.pid)){case"pat":e.pid||(e.pid=ou.ts.parsePat(i));break;case"pmt":e.table||(e.table=ou.ts.parsePmt(i))}if(e.pid&&e.table)return;n+=uu,r+=uu}}(t,e),e.table)if(e.table.hasOwnProperty(n))switch(e.table[n]){case Zc:i.video=[],Gi(t,e,i),0===i.video.length&&delete i.video;break;case Jc:i.audio=[],$i(t,e,i),0===i.audio.length&&delete i.audio}return i}function Yi(t,e,i){return t&&i&&i.responseURL&&e!==i.responseURL?i.responseURL:e}function Ki(t,e){return t+"-"+e}function Qi(t){var e=t.manifestString,i=t.customTagParsers,n=void 0===i?[]:i,r=t.customTagMappers,s=void 0===r?[]:r,a=new Xl;return n.forEach(function(t){return a.addParser(t)}),s.forEach(function(t){return a.addTagMapper(t)}),a.push(e),a.end(),a.manifest}function Zi(t,e){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in t.mediaGroups[i])for(var r in t.mediaGroups[i][n]){var s=t.mediaGroups[i][n][r];e(s,i,n,r)}})}function Ji(t){var e=t.playlist,i=t.uri,n=t.id;e.id=n,i&&(e.uri=i),e.attributes=e.attributes||{}}function tn(t,e){t.uri=e;for(var i=0;i<t.playlists.length;i++)if(!t.playlists[i].uri){var n="placeholder-uri-"+i;t.playlists[i].uri=n}Zi(t,function(e,i,n,r){if(e.playlists&&e.playlists.length&&!e.playlists[0].uri){var s="placeholder-uri-"+i+"-"+n+"-"+r,a=Ki(0,s);e.playlists[0].uri=s,e.playlists[0].id=a,t.playlists[a]=e.playlists[0],t.playlists[s]=e.playlists[0]}}),function(t){for(var e=t.playlists.length;e--;){var i=t.playlists[e];Ji({playlist:i,id:Ki(e,i.uri)}),i.resolvedUri=Du(t.uri,i.uri),t.playlists[i.id]=i,(t.playlists[i.uri]=i).attributes.BANDWIDTH||Ou.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(t),function(t){Zi(t,function(e){e.uri&&(e.resolvedUri=Du(t.uri,e.uri))})}(t)}function en(t,e){t.resolvedUri||(t.resolvedUri=Du(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Du(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Du(e,t.map.uri))}function nn(t,e){var i=Mu(t,{}),n=i.playlists[e.id];if(!n)return null;if(n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence)return null;var r=Mu(n,e);n.segments&&(r.segments=function(t,e,i){var n=e.slice();i=i||0;for(var r=Math.min(t.length,e.length+i),s=i;s<r;s++)n[s-i]=Mu(t[s],n[s-i]);return n}(n.segments,e.segments,e.mediaSequence-n.mediaSequence)),r.segments.forEach(function(t){en(t,r.resolvedUri)});for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===e.id&&(i.playlists[s]=r);return i.playlists[e.id]=r,i.playlists[e.uri]=r,i}function rn(t,e){var i=t.segments[t.segments.length-1];return e&&i&&i.duration?1e3*i.duration:500*(t.targetDuration||10)}function sn(t,e){var i,n=[];if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return fe.createTimeRanges(n)}function an(t,e){return sn(t,function(t,i){return t-.1<=e&&e<=i+.1})}function on(t,e){return sn(t,function(t){return e<=t-Ru})}function ln(t){var e=[];if(!t||!t.length)return"";for(var i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")}function cn(t){for(var e=[],i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e}function un(t,e,i){if(void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;var n=function(t,e){var i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if("undefined"!=typeof(r=t.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,"undefined"!=typeof r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(t,e);if(n.precise)return n.result;var r=function(t,e){for(var i,n=0,r=e-t.mediaSequence;r<t.segments.length;r++){if("undefined"!=typeof(i=t.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e);return r.precise?r.result:n.result+i}function dn(t,e,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return Fl.Infinity}return un(t,e,i)}function hn(t,e,i){var n=0;if(i<e){var r=[i,e];e=r[0],i=r[1]}if(e<0){for(var s=e;s<Math.min(0,i);s++)n+=t.targetDuration;e=0}for(var a=e;a<i;a++)n+=t.segments[a].duration;return n}function pn(t,e){if(!t.segments.length)return 0;var i=t.segments.length,n=t.segments[i-1].duration||t.targetDuration,r="number"==typeof e?e:n+2*t.targetDuration;if(0===r)return i;for(var s=0;i--&&!(r<=(s+=t.segments[i].duration)););return Math.max(0,i)}function fn(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return dn(t);if(null===e)return null;e=e||0;var r=i?pn(t,n):t.segments.length;return un(t,t.mediaSequence+r,e)}function mn(t){return t.excludeUntil&&t.excludeUntil>Date.now()}function gn(t){return t.excludeUntil&&t.excludeUntil===1/0}function vn(t){var e=mn(t);return!t.disabled&&!e}function yn(t,e){return e.attributes&&e.attributes[t]}function _n(t,e){if(1===t.playlists.length)return!0;var i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!vn(t)&&(t.attributes.BANDWIDTH||0)<i}).length}function bn(t,e,i,n){var r="arraybuffer"===t.responseType?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&"ETIMEDOUT"===e.code&&(t.timedout=!0),e||t.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),n(e,t)}function wn(){return function t(e,i){e=Uu({timeout:45e3},e);var n=t.beforeRequest||fe.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(e);r&&(e=r)}var s=Bu(e,function(t,e){return bn(s,t,e,i)}),a=s.abort;return s.abort=function(){return s.aborted=!0,a.apply(s,arguments)},s.uri=e.uri,s.requestTime=Date.now(),s}}function Tn(t){var e={};return t.byterange&&(e.Range=function(t){var e=t.offset+t.length-1;return"bytes="+t.offset+"-"+e}(t.byterange)),e}function kn(t,e){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")}function Sn(t){return 32<=t&&t<126?String.fromCharCode(t):"."}function Cn(t){var e={};return Object.keys(t).forEach(function(i){var n=t[i];ArrayBuffer.isView(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n}),e}function xn(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")}function En(t){return t.resolvedUri}function An(t){for(var e=Array.prototype.slice.call(t),i="",n=0;n<e.length/16;n++)i+=e.slice(16*n,16*n+16).map(kn).join("")+" "+e.slice(16*n,16*n+16).map(Sn).join("")+"\n";return i}function Pn(t){var e=t.playlist,i=t.time,n=void 0===i?void 0:i,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var s=function(t,e){if(!e||!e.segments||0===e.segments.length)return null;for(var i,n=0,r=0;r<e.segments.length&&!(t<=(n=(i=e.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(n<t){if(t>n+.25*s.duration)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,e);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var a={mediaSeconds:n},o=function(t,e){if(!e.dateTimeObject)return null;var i=e.videoTimingInfo.transmuxerPrependedSeconds,n=t-(e.videoTimingInfo.transmuxedPresentationStart+i);return new Date(e.dateTimeObject.getTime()+1e3*n)}(n,s.segment);return o&&(a.programDateTime=o.toISOString()),r(null,a)}function In(t){var e=t.programTime,i=t.playlist,n=t.retryCount,r=void 0===n?2:n,s=t.seekTo,a=t.pauseAfterSeek,o=void 0===a||a,l=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var u=function(t,e){var i;try{i=new Date(t)}catch(t){return null}if(!e||!e.segments||0===e.segments.length)return null;var n=e.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<e.segments.length-1&&(n=e.segments[r],!(i<e.segments[r+1].dateTimeObject));r++);var s=e.segments[e.segments.length-1],a=s.dateTimeObject,o=s.videoTimingInfo?function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds}(s.videoTimingInfo):s.duration+.25*s.duration;return new Date(a.getTime()+1e3*o)<i?null:(a<i&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Fu.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(e,i);if(!u)return c({message:e+" was not found in the stream"});var d=u.segment,h=function(t,e){var i,n;try{i=new Date(t),n=new Date(e)}catch(t){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,e);if("estimate"===u.type)return 0===r?c({message:e+" is not buffered yet. Try again"}):(s(u.estimatedStart+h),void l.one("seeked",function(){In({programTime:e,playlist:i,retryCount:r-1,seekTo:s,pauseAfterSeek:o,tech:l,callback:c})}));var p=d.start+h;l.one("seeked",function(){return c(null,l.currentTime())}),o&&l.pause(),s(p)}function Ln(t,e){if(4===t.readyState)return e()}function Dn(t){var e=t.byterange.offset+t.byterange.length-1;return t.uri+"-"+t.byterange.offset+"-"+e}function On(t,e){var i,n,r={};for(var s in t){var a=t[s].sidx;if(a){var o=Dn(a);if(!e[o])break;i=e[o].sidxInfo,n=a,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=e[o])}}return r}function Mn(t){for(var e=new Uint8Array(new ArrayBuffer(t.length)),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer}function jn(t){var e=t.transmuxer,i=t.bytes,n=t.audioAppendStart,r=t.gopsToAlignWith,s=t.isPartial,a=t.remux,o=t.onData,l=t.onTrackInfo,c=t.onAudioTimingInfo,u=t.onVideoTimingInfo,d=t.onVideoSegmentTimingInfo,h=t.onId3,p=t.onCaptions,f=t.onDone,m={isPartial:s,buffer:[]};if(e.onmessage=function(t){wu&&("data"===t.data.action&&function(t,e,i){var n=t.data.segment,r=n.type,s=n.initSegment,a=n.captions,o=n.captionStreams,l=n.metadata,c=n.videoFrameDtsTime,u=n.videoFramePtsTime;e.buffer.push({captions:a,captionStreams:o,metadata:l});var d=t.data.segment.boxes||{data:t.data.segment.data},h={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};void 0!==c&&(h.videoFrameDtsTime=c),void 0!==u&&(h.videoFramePtsTime=u),i(h)}(t,m,o),"trackinfo"===t.data.action&&l(t.data.trackInfo),"gopInfo"===t.data.action&&function(t){m.gopInfo=t.data.gopInfo}(t),"audioTimingInfo"===t.data.action&&c(t.data.audioTimingInfo),"videoTimingInfo"===t.data.action&&u(t.data.videoTimingInfo),"videoSegmentTimingInfo"===t.data.action&&d(t.data.videoSegmentTimingInfo),"id3Frame"===t.data.action&&h([t.data.id3Frame],t.data.id3Frame.dispatchType),"caption"===t.data.action&&p(t.data.caption),"transmuxed"===t.data.type&&(e.onmessage=null,function(t){var e=t.transmuxedData,i=t.callback;e.buffer=[],i(e)}({transmuxedData:m,callback:f}),$u()))},n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&e.postMessage({action:"setRemux",remux:a}),i.byteLength){var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;e.postMessage({action:"push",data:g,byteOffset:v,byteLength:i.byteLength},[g])}e.postMessage({action:s?"partialFlush":"flush"})}function Rn(t,e){t.postMessage({action:e}),$u()}function Nn(t,e){wu?qu.push(Rn.bind(null,e,t)):Rn(e,wu=t)}function Fn(t){wu?qu.push(t):jn(wu=t)}function Bn(t){t.forEach(function(t){t.abort()})}function Un(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Qu,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Zu,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Ku,xhr:e}:null}function zn(t){var e=t.segment,i=t.bytes,n=t.isPartial,r=t.trackInfoFn,s=t.timingInfoFn,a=t.videoSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.dataFn,u=t.doneFn,d=e.map&&e.map.tracks||{},h=Boolean(d.audio&&d.video),p=s.bind(null,e,"audio","start"),f=s.bind(null,e,"audio","end"),m=s.bind(null,e,"video","start"),g=s.bind(null,e,"video","end");if(!n&&!e.lastReachedChar){var v=function(t,e){var i=du(t,e*su);if(!i)return null;var n={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1};return n.hasVideo&&(n.videoStart=i.video[0].ptsTime),n.hasAudio&&(n.audioStart=i.audio[0].ptsTime),n}(i,e.baseStartTime);v&&(r(e,{hasAudio:v.hasAudio,hasVideo:v.hasVideo,isMuxed:h}),r=null,v.hasAudio&&!h&&p(v.audioStart),v.hasVideo&&m(v.videoStart),m=p=null)}Fn({bytes:i,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,isPartial:n,remux:h,onData:function(t){t.type="combined"===t.type?"video":t.type,c(e,t)},onTrackInfo:function(t){r&&(h&&(t.isMuxed=!0),r(e,t))},onAudioTimingInfo:function(t){p&&"undefined"!=typeof t.start&&(p(t.start),p=null),f&&"undefined"!=typeof t.end&&f(t.end)},onVideoTimingInfo:function(t){m&&"undefined"!=typeof t.start&&(m(t.start),m=null),g&&"undefined"!=typeof t.end&&g(t.end)},onVideoSegmentTimingInfo:function(t){a(t)},onId3:function(t,i){o(e,t,i)},onCaptions:function(t){l(e,[t])},onDone:function(t){u&&!n&&(t.type="combined"===t.type?"video":t.type,u(null,e,t))}})}function Vn(t){var e=t.segment,i=t.bytes,n=t.isPartial,r=t.trackInfoFn,s=t.timingInfoFn,a=t.videoSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.dataFn,u=t.doneFn,d=new Uint8Array(i);if(Gc(d)){e.isFmp4=!0;var h=e.map.tracks,p={isFmp4:!0,hasVideo:!!h.video,hasAudio:!!h.audio};h.audio&&h.audio.codec&&"enca"!==h.audio.codec&&(p.audioCodec=h.audio.codec),h.video&&h.video.codec&&"encv"!==h.video.codec&&(p.videoCodec=h.video.codec),h.video&&h.audio&&(p.isMuxed=!0),r(e,p);var f=yu(e.map.timescales,d);p.hasAudio&&!p.isMuxed&&s(e,"audio","start",f),p.hasVideo&&s(e,"video","start",f);var m=function(t){c(e,{data:i,type:p.hasAudio&&!p.isMuxed?"audio":"video"}),t&&t.length&&l(e,t),u(null,e,{})};if(!h.video||!i.byteLength||!e.transmuxer)return void m();var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;return e.transmuxer.addEventListener("message",function t(n){if("mp4Captions"===n.data.action){e.transmuxer.removeEventListener("message",t);var r=n.data.data;e.bytes=i=new Uint8Array(r,r.byteOffset||0,r.byteLength),m(n.data.captions)}}),void e.transmuxer.postMessage({action:"pushMp4Captions",timescales:e.map.timescales,trackIds:[h.video.id],data:g,byteOffset:v,byteLength:i.byteLength},[g])}if(e.transmuxer){if("undefined"==typeof e.container&&(e.container=qc(d)),"ts"!==e.container&&"aac"!==e.container)return r(e,{hasAudio:!1,hasVideo:!1}),void u(null,e,{});zn({segment:e,bytes:i,isPartial:n,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,dataFn:c,doneFn:u})}else u(null,e,{})}function Hn(t){var e=t.activeXhrs,i=t.decryptionWorker,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.id3Fn,o=t.captionsFn,l=t.dataFn,c=t.doneFn,u=0,d=!1;return function(t,h){if(!d){if(t)return d=!0,Bn(e),c(t,h);if((u+=1)===e.length){if(h.endOfAllRequests=Date.now(),h.encryptedBytes)return function(t){var e,i=t.decryptionWorker,n=t.segment,r=t.trackInfoFn,s=t.timingInfoFn,a=t.videoSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.dataFn,u=t.doneFn;i.addEventListener("message",function d(t){if(t.data.source===n.requestId){i.removeEventListener("message",d);var e=t.data.decrypted;n.bytes=new Uint8Array(e.bytes,e.byteOffset,e.byteLength),Vn({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,dataFn:c,doneFn:u})}}),e=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),i.postMessage(Cn({source:n.requestId,encrypted:n.encryptedBytes,key:e,iv:n.key.iv}),[n.encryptedBytes.buffer,e.buffer])}({decryptionWorker:i,segment:h,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,dataFn:l,doneFn:c});Vn({segment:h,bytes:h.bytes,isPartial:!1,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,dataFn:l,doneFn:c})}}}}function Wn(t){var e=t.segment,i=t.progressFn,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.id3Fn,o=t.captionsFn,l=t.dataFn,c=t.handlePartialData;return function(t){var u=t.target;if(!u.aborted){if(c&&!e.key&&u.responseText&&8<=u.responseText.length){var d=Mn(u.responseText.substring(e.lastReachedChar||0));!e.lastReachedChar&&Gc(new Uint8Array(d))||(e.lastReachedChar=u.responseText.length,Vn({segment:e,bytes:d,isPartial:!0,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,dataFn:l}))}return e.stats=fe.mergeOptions(e.stats,function(t){var e=t.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(t)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),i(t,e)}}}function qn(t){var e=t.xhr,i=t.xhrOptions,n=t.decryptionWorker,r=t.segment,s=t.abortFn,a=t.progressFn,o=t.trackInfoFn,l=t.timingInfoFn,c=t.videoSegmentTimingInfoFn,u=t.id3Fn,d=t.captionsFn,h=t.dataFn,p=t.doneFn,f=t.handlePartialData,m=[],g=Hn({activeXhrs:m,decryptionWorker:n,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,dataFn:h,doneFn:p});if(r.key&&!r.key.bytes){var v=e(fe.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(t,e){return function(i,n){var r=n.response,s=Un(i,n);if(s)return e(s,t);if(16!==r.byteLength)return e({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Ku,xhr:n},t);var a=new DataView(r);return t.key.bytes=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),e(null,t)}}(r,g));m.push(v)}if(r.map&&!r.map.bytes){var y=e(fe.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Tn(r.map)}),function(t){var e=t.segment,i=t.finishProcessingFn;return function(t,n){var r=n.response,s=Un(t,n);if(s)return i(s,e);if(0===r.byteLength)return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:Ku,xhr:n},e);e.map.bytes=new Uint8Array(n.response);var a=qc(e.map.bytes);return"mp4"!==a?i({status:n.status,message:"Found unsupported "+(a||"unknown")+" container for initialization segment at URL: "+n.uri,code:Ku,internal:!0,xhr:n},e):(_u(e.map.bytes).forEach(function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||"number"==typeof(e.map.tracks[t.type]=t).id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale)}),i(null,e))}}({segment:r,finishProcessingFn:g}));m.push(y)}var _=fe.mergeOptions(i,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Tn(r)});f&&(_.responseType="text",_.beforeSend=function(t){t.overrideMimeType("text/plain; charset=x-user-defined")});var b=e(_,function(t){var e=t.segment,i=t.finishProcessingFn,n=t.responseType;return function(t,r){var s=r.response,a=Un(t,r);if(a)return i(a,e);var o="arraybuffer"!==n&&r.responseText?Mn(r.responseText.substring(e.lastReachedChar||0)):r.response;return 0===s.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Ku,xhr:r},e):(e.stats=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(o):e.bytes=new Uint8Array(o),i(null,e))}}({segment:r,finishProcessingFn:g,responseType:_.responseType}));b.addEventListener("progress",Wn({segment:r,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,dataFn:h,handlePartialData:f})),m.push(b);var w={};return m.forEach(function(t){t.addEventListener("loadend",function(t){var e=t.loadendState,i=t.abortFn;return function(t){t.target.aborted&&i&&!e.calledAbortFn&&(i(),e.calledAbortFn=!0)}}({loadendState:w,abortFn:s}))}),function(){return Bn(m)}}function $n(t,e){return function(i){var n=this;if(!e)return new rd(t);if(rd&&!i){var r=Gn(e.toString().replace(/^function.+?{/,"").slice(0,-1));return this[td]=new rd(r),function(t,e){if(t&&e){var i=t.terminate;t.objURL=e,t.terminate=function(){t.objURL&&nd.revokeObjectURL(t.objURL),i.call(t)}}}(this[td],r),this[td]}var s={postMessage:function(t){n.onmessage&&setTimeout(function(){n.onmessage({data:t,target:s})})}};e.call(s),this.postMessage=function(t){setTimeout(function(){s.onmessage({data:t,target:n})})},this.isThisThread=!0}}function Gn(t){try{return nd.createObjectURL(new Blob([t],{type:ed}))}catch(Dr){var e=new id;return e.append(t),nd.createObjectURL(e.getBlob(type))}}function Xn(t,e){var i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]}function Yn(t,e){var i=e.attributes||{},n=function(t){var e=t.attributes||{};if(e.CODECS)return Iu(e.CODECS)}(e)||{};if(Xn(t,e)&&!n.audio&&!function(t,e){if(!Xn(t,e))return!0;var i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1}(t,e)){var r=Cu(t,i.AUDIO);r&&(n.audio=r.audio)}var s={};return n.video&&(s.video=Lu(""+n.video.type+n.video.details)),n.audio&&(s.audio=Lu(""+n.audio.type+n.audio.details)),n.text&&(s.text=n.text.type),n.unknown&&(s.unknown=n.unknown),s}function Kn(t){return fe.log.debug?fe.log.debug.bind(fe,"VHS:",t+" >"):function(){}}function Qn(t){if(t&&t.playlist){var e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})}}function Zn(t,e){if(!t)return"";var i=Fl.getComputedStyle(t);return i?i[e]:""}function Jn(t,e){var i=t.slice();t.sort(function(t,n){var r=e(t,n);return 0===r?i.indexOf(t)-i.indexOf(n):r})}function tr(t,e){var i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||Fl.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),i-(n||Fl.Number.MAX_VALUE)}function er(t,e,i,n,r){if(t){var s={bandwidth:e,width:i,height:n,limitRenditionByPlayerDimensions:r},a=t.playlists.map(function(t){var e=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return{bandwidth:t.attributes.BANDWIDTH||Fl.Number.MAX_VALUE,width:e,height:i,playlist:t}});Jn(a,function(t,e){return t.bandwidth-e.bandwidth});var o=(a=a.filter(function(t){return!Fu.isIncompatible(t.playlist)})).filter(function(t){return Fu.isEnabled(t.playlist)});o.length||(o=a.filter(function(t){return!Fu.isDisabled(t.playlist)}));var l=o.filter(function(t){return t.bandwidth*Wu.BANDWIDTH_VARIANCE<e}),c=l[l.length-1],u=l.filter(function(t){return t.bandwidth===c.bandwidth})[0];if(!1===r){var d=u||o[0]||a[0];if(d&&d.playlist){var h="sortedPlaylistReps";return u&&(h="bandwidthBestRep"),o[0]&&(h="enabledPlaylistReps"),ud("choosing "+Qn(d)+" using "+h+" with options",s),d.playlist}return ud("could not choose a playlist with options",s),null}var p=l.filter(function(t){return t.width&&t.height});Jn(p,function(t,e){return t.width-e.width});var f=p.filter(function(t){return t.width===i&&t.height===n});c=f[f.length-1];var m,g,v,y=f.filter(function(t){return t.bandwidth===c.bandwidth})[0];y||(g=(m=p.filter(function(t){return t.width>i||t.height>n})).filter(function(t){return t.width===m[0].width&&t.height===m[0].height}),c=g[g.length-1],v=g.filter(function(t){return t.bandwidth===c.bandwidth})[0]);var _=v||y||u||o[0]||a[0];if(_&&_.playlist){var b="sortedPlaylistReps";return v?b="resolutionPlusOneRep":y?b="resolutionBestRep":u?b="bandwidthBestRep":o[0]&&(b="enabledPlaylistReps"),ud("choosing "+Qn(_)+" using "+b+" with options",s),_.playlist}return ud("could not choose a playlist with options",s),null}}function ir(){var t=this.useDevicePixelRatio&&Fl.devicePixelRatio||1;return er(this.playlists.master,this.systemBandwidth,parseInt(Zn(this.tech_.el(),"width"),10)*t,parseInt(Zn(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)}function nr(t){var e=t.inbandTextTracks,i=t.metadataArray,n=t.timestampOffset,r=t.videoDuration;if(i){var s=Fl.WebKitDataCue||Fl.VTTCue,a=e.metadataTrack_;if(a&&(i.forEach(function(t){var e=t.cueTime+n;!("number"!=typeof e||Fl.isNaN(e)||e<0)&&e<1/0&&t.frames.forEach(function(t){var i=new s(e,e,t.value||t.url||t.data||"");i.frame=t,i.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return fe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return fe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return fe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(i),a.addCue(i)})}),a.cues&&a.cues.length)){for(var o=a.cues,l=[],c=0;c<o.length;c++)o[c]&&l.push(o[c]);var u=l.reduce(function(t,e){var i=t[e.startTime]||[];return i.push(e),t[e.startTime]=i,t},{}),d=Object.keys(u).sort(function(t,e){return Number(t)-Number(e)});d.forEach(function(t,e){var i=u[t],n=Number(d[e+1])||r;i.forEach(function(t){t.endTime=n})})}}}function rr(t,e,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=t&&r.endTime<=e&&i.removeCue(r)}function sr(t){return"number"==typeof t&&isFinite(t)}function ar(t){return t+"TimingInfo"}function or(t){var e=t.segmentTimeline,i=t.currentTimeline,n=t.startOfSegment,r=t.buffered;return t.overrideCheck||e!==i?e<i?n:r.length?r.end(r.length-1):n:null}function lr(t){var e=t.timelineChangeController,i=t.currentTimeline,n=t.segmentTimeline,r=t.loaderType,s=t.audioDisabled;if(i===n)return!1;if("audio"===r){var a=e.lastTimelineChange({type:"main"});return!a||a.to!==n}if("main"===r&&s){var o=e.pendingTimelineChange({type:"audio"})
;return!o||o.to!==n}return!1}function cr(t){var e=t.segmentDuration,i=t.maxDuration;return!!e&&Math.round(e)>i+Ru}function ur(t,e){if("hls"!==e)return null;var i=function(t,e){var i=t&&"number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:0,n=e&&"number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:0;return Math.max(i,n)}(t.audioTimingInfo,t.videoTimingInfo);if(!i)return null;var n=t.playlist.targetDuration,r=cr({segmentDuration:i,maxDuration:2*n}),s=cr({segmentDuration:i,maxDuration:n}),a="Segment with index "+t.mediaIndex+" from playlist "+t.playlist.id+" has a duration of "+i+" when the reported duration is "+t.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||s?{severity:r?"warn":"info",message:a}:null}function dr(){}function hr(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toUpperCase()})}function pr(t,e){var i=e[t+"Buffer"];return i&&i.updating||e.queuePending[t]}function fr(t,e){if(0!==e.queue.length){var i=0,n=e.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==t&&e.ready()&&"closed"!==e.mediaSource.readyState&&!pr(t,e)){if(n.type!==t){if(null===(i=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if("mediaSource"===n.type)return null;if(n.type===t)return i}return null}(t,e.queue)))return;n=e.queue[i]}e.queue.splice(i,1),n.action(t,e),n.doneFn?e.queuePending[t]=n:fr(t,e)}}else e.updating()||"closed"===e.mediaSource.readyState||(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),fr("audio",e),fr("video",e))}}function mr(t,e){var i=e[t+"Buffer"],n=hr(t);i&&(i.removeEventListener("updateend",e["on"+n+"UpdateEnd_"]),i.removeEventListener("error",e["on"+n+"Error_"]),e.codecs[t]=null,e[t+"Buffer"]=null)}function gr(t,e){return t&&e&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,e)}function vr(t){var e=t.type,i=t.sourceUpdater,n=t.action,r=t.doneFn,s=t.name;i.queue.push({type:e,action:n,doneFn:r,name:s}),fr(e,i)}function yr(t,e){return function(){if(e.queuePending[t]){var i=e.queuePending[t].doneFn;e.queuePending[t]=null,i&&i(e[t+"Error_"])}fr(t,e)}}function _r(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))}function br(t,e){for(var i=t.cues,n=0;n<i.length;n++){var r=i[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null}function wr(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)}function Tr(t,e){(e.activePlaylistLoader=t).load()}function kr(t){function e(){i.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})}["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){Dd[e](e,t)});var i=t.mediaTypes,n=t.masterPlaylistLoader,r=t.tech,s=t.vhs;["AUDIO","SUBTITLES"].forEach(function(e){var n,r,s,a;i[e].activeGroup=(s=e,a=t,function(t){var e=a.masterPlaylistLoader,i=a.mediaTypes[s].groups,n=e.media();if(!n)return null;var r=null;return n.attributes[s]&&(r=i[n.attributes[s]]),r=r||i.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}),i[e].activeTrack=Od[e](e,t),i[e].onGroupChanged=(n=e,r=t,function(){var t=r.segmentLoaders,e=t[n],i=t.main,s=r.mediaTypes[n],a=s.activeTrack(),o=s.activeGroup(a),l=s.activePlaylistLoader;wr(e,s),o&&(o.playlistLoader?(e.resyncLoader(),Tr(o.playlistLoader,s)):l&&i.resetEverything())}),i[e].onGroupChanging=function(t,e){return function(){var i=e.segmentLoaders[t];i.abort(),i.pause()}}(e,t),i[e].onTrackChanged=function(t,e){return function(){var i=e.segmentLoaders,n=i[t],r=i.main,s=e.mediaTypes[t],a=s.activeTrack(),o=s.activeGroup(a),l=s.activePlaylistLoader;if(wr(n,s),o){if("AUDIO"===t){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader&&(n.track&&n.track(a),n.resetEverything()),Tr(o.playlistLoader,s)}}}(e,t)});var a=i.AUDIO.activeGroup();if(a){var o=(a.filter(function(t){return t["default"]})[0]||a[0]).id;i.AUDIO.tracks[o].enabled=!0,i.AUDIO.onTrackChanged()}for(var l in n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return i[t].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(t){return i[t].onGroupChanging()})}),r.audioTracks().addEventListener("change",e),r.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),s.on("dispose",function(){r.audioTracks().removeEventListener("change",e),r.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),i.AUDIO.tracks)r.audioTracks().addTrack(i.AUDIO.tracks[l])}function Sr(t,e,i){var n=t.masterPlaylistController_,r=n[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(e.attributes.RESOLUTION){var s=e.attributes.RESOLUTION;this.width=s.width,this.height=s.height}this.bandwidth=e.attributes.BANDWIDTH,this.codecs=Yn(n.master(),e),this.playlist=e,this.id=i,this.enabled=function(t,e,i){return function(n){var r=t.master.playlists[e],s=gn(r),a=vn(r);return void 0===n?a:(n?delete r.disabled:r.disabled=!0,n===a||s||(i(),n?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),n)}}(t.playlists,e.id,r)}function Cr(t){!function e(t,i){function n(){l&&t.currentTime(l)}function r(e){null!=e&&(l=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",n),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())}function s(){return Date.now()-o<1e3*c.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):c.getSource&&"function"==typeof c.getSource?(o=Date.now(),c.getSource.call(t,r)):void fe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function a(){t.off("loadedmetadata",n),t.off("error",s),t.off("dispose",a)}var o=0,l=0,c=fe.mergeOptions(Fd,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}),t.on("error",s),t.on("dispose",a),t.reloadSourceOnError=function(i){a(),e(t,i)}}(this,t)}function xr(t,e){for(var i=e.media(),n=-1,r=0;r<t.length;r++)if(t[r].id===i.id){n=r;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})}function Er(t){var e=t.player,i=t.sourceKeySystems,n=t.audioMedia,r=t.mainPlaylists;if(!e.eme.initializeMediaKeys)return Promise.resolve();var s=function(t,e){return t.reduce(function(t,i){if(!i.contentProtection)return t;var n=e.reduce(function(t,e){var n=i.contentProtection[e];return n&&n.pssh&&(t[e]={pssh:n.pssh}),t},{});return Object.keys(n).length&&t.push(n),t},[])}(n?r.concat([n]):r,Object.keys(i)),a=[],o=[];return s.forEach(function(t){o.push(new Promise(function(t){e.tech_.one("keysessioncreated",t)})),a.push(new Promise(function(i,n){e.eme.initializeMediaKeys({keySystems:t},function(t){t?n(t):i()})}))}),Promise.race([Promise.all(a),Promise.race(o)])}function Ar(t){var e=t.player,i=function(t,e,i){if(!t)return t;var n={video:e&&e.attributes&&e.attributes.CODECS,audio:i&&i.attributes&&i.attributes.CODECS};!n.audio&&n.video&&1<n.video.split(",").length&&n.video.split(",").forEach(function(t){t=t.trim(),Eu(t)?n.audio=t:Au(t)&&(n.video=t)});var r=n.video?'video/mp4;codecs="'+n.video+'"':null,s=n.audio?'audio/mp4;codecs="'+n.audio+'"':null,a={};for(var o in t)a[o]={audioContentType:s,videoContentType:r},e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),"string"==typeof t[o]&&(a[o].url=t[o]);return fe.mergeOptions(t,a)}(t.sourceKeySystems,t.media,t.audioMedia);return!(!i||(e.currentSource().keySystems=i)&&!e.eme&&(fe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}function Pr(){if(!Fl.localStorage)return null;var t=Fl.localStorage.getItem(Ud);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}var Ir,Lr="7.11.1",Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Or="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},Mr={},jr=void 0!==Dr?Dr:"undefined"!=typeof window?window:{},Rr="undefined"!=typeof document?document:jr["__GLOBAL_DOCUMENT_CACHE@4"]||(jr["__GLOBAL_DOCUMENT_CACHE@4"]=Mr),Nr=[],Fr=function(t,e){return function(i,n,r){var s=e.levels[n],a=new RegExp("^("+s+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(t+":"),Nr){Nr.push([].concat(r));var o=Nr.length-1e3;Nr.splice(0,0<o?o:0)}if(Or.console){var l=Or.console[i];l||"debug"!==i||(l=Or.console.info||Or.console.log),l&&s&&a.test(i)&&l[Array.isArray(r)?"apply":"call"](Or.console,r)}}},Br=function Hd(t){function e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i("log",n,e)}var i,n="info";return i=Fr(t,e),e.createLogger=function(e){return Hd(t+": "+e)},e.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},e.level=function(t){if("string"==typeof t){if(!e.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');n=t}return n},(e.history=function(){return Nr?[].concat(Nr):[]}).filter=function(t){return(Nr||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},e.history.clear=function(){Nr&&(Nr.length=0)},e.history.disable=function(){null!==Nr&&(Nr.length=0,Nr=null)},e.history.enable=function(){null===Nr&&(Nr=[])},e.error=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("error",n,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("warn",n,e)},e.debug=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("debug",n,e)},e}("VIDEOJS"),Ur=Br.createLogger,zr=e(function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},e.apply(this,arguments)}t.exports=e}),Vr=Object.prototype.toString,Hr=function(t){return r(t)?Object.keys(t):[]},Wr=h("querySelector"),qr=h("querySelectorAll"),$r=Object.freeze({__proto__:null,isReal:c,isEl:u,isInFrame:d,createEl:p,textContent:f,prependTo:m,hasClass:g,addClass:v,removeClass:y,toggleClass:_,setAttributes:b,getAttributes:w,getAttribute:T,setAttribute:k,removeAttribute:S,blockTextSelection:C,unblockTextSelection:x,getBoundingClientRect:E,findPosition:A,getPointerPosition:P,isTextNode:I,emptyEl:L,normalizeContent:D,appendContent:O,insertContent:M,isSingleLeftClick:j,$:Wr,$$:qr}),Gr=!1,Xr=function(){if(c()&&!1!==Ir.options.autoSetup){var t=Array.prototype.slice.call(Rr.getElementsByTagName("video")),e=Array.prototype.slice.call(Rr.getElementsByTagName("audio")),i=Array.prototype.slice.call(Rr.getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&0<n.length)for(var r=0,s=n.length;r<s;r++){var a=n[r];if(!a||!a.getAttribute){R(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&Ir(a)}else Gr||R(1)}};c()&&("complete"===Rr.readyState?N():Or.addEventListener("load",N));var Yr,Kr=3;Or.WeakMap||(Yr=function(){function t(){this.vdata="vdata"+Math.floor(Or.performance&&Or.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(t,e){var i=t[this.vdata]||U();return t[this.vdata]||(t[this.vdata]=i),this.data[i]=e,this},e.get=function(t){var e=t[this.vdata];if(e)return this.data[e];Br("We have no data for this element",t)},e.has=function(t){return t[this.vdata]in this.data},e["delete"]=function(t){var e=t[this.vdata];e&&(delete this.data[e],delete t[this.vdata])},t}());var Qr,Zr,Jr=Or.WeakMap?new WeakMap:new Yr,ts=function(){if("boolean"!=typeof Qr){Qr=!1;try{var t=Object.defineProperty({},"passive",{get:function(){Qr=!0}});Or.addEventListener("test",null,t),Or.removeEventListener("test",null,t)}catch(t){}}return Qr},es=["touchstart","touchmove"],is=Object.freeze({__proto__:null,fixEvent:H,on:W,off:q,trigger:$,one:G,any:X});Q.prototype.allowedEvents_={},Q.prototype.addEventListener=Q.prototype.on=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},W(this,t,e),this.addEventListener=i},Q.prototype.removeEventListener=Q.prototype.off=function(t,e){q(this,t,e)},Q.prototype.one=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},G(this,t,e),this.addEventListener=i},Q.prototype.any=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},X(this,t,e),this.addEventListener=i},Q.prototype.dispatchEvent=Q.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=H(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),$(this,t)},Q.prototype.queueTrigger=function(t){var e=this;Zr=Zr||new Map;var i=t.type||t,n=Zr.get(this);n||(n=new Map,Zr.set(this,n));var r=n.get(i);n["delete"](i),Or.clearTimeout(r);var s=Or.setTimeout(function(){0===n.size&&(n=null,Zr["delete"](e)),e.trigger(t)},0);n.set(i,s)};var ns=function(t){return t instanceof Q||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},rs={on:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=it(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(nt(a,"on",o,l),!s){var c=function(){return t.off(a,o,l)};c.guid=l.guid;var u=function(){return t.off("dispose",c)};u.guid=l.guid,nt(this,"on","dispose",c),nt(a,"on","dispose",u)}},one:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=it(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)nt(a,"one",o,l);else{var c=function e(){t.off(a,o,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,nt(a,"one",o,c)}},any:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=it(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)nt(a,"any",o,l);else{var c=function e(){t.off(a,o,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,nt(a,"any",o,c)}},off:function(t,e,i){if(!t||Z(t))q(this.eventBusEl_,t,e);else{var n=t,r=e;J(n),tt(r),et(i),i=Y(this,i),this.off("dispose",i),n.nodeName?(q(n,r,i),q(n,"dispose",i)):ns(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(t,e){return $(this.eventBusEl_,t,e)}},ss={state:{},setState:function(t){var e,n=this;return"function"==typeof t&&(t=t()),i(t,function(t,i){n.state[i]!==t&&((e=e||{})[i]={from:n.state[i],to:t}),n.state[i]=t}),e&&ns(this)&&this.trigger({changes:e,type:"statechanged"}),e}},as=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(t){return t in this.map_},e["delete"]=function(t){var e=this.has(t);return delete this.map_[t],e},e.set=function(t,e){return this.map_[t]=e,this},e.forEach=function(t,e){for(var i in this.map_)t.call(e,this.map_[i],i,this)},t}(),os=Or.Map?Or.Map:as,ls=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(t){return t in this.set_},e["delete"]=function(t){var e=this.has(t);return delete this.set_[t],e},e.add=function(t){return this.set_[t]=1,this},e.forEach=function(t,e){for(var i in this.set_)t.call(e,i,i,this)},t}(),cs=Or.Set?Or.Set:ls,us=function(){function t(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=lt({},this.options_),e=this.options_=lt(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+U()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&(rt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),st(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new cs,this.setIntervalIds_=new cs,this.rafIds_=new cs,this.namedRafs_=new os,(this.clearingTimersOnDispose_=!1)!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Jr.has(this.el_)&&Jr["delete"](this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(t){return t&&(this.options_=lt(this.options_,t)),this.options_},e.el=function(){return this.el_},e.createEl=function(t,e,i){return p(t,e,i)},e.localize=function(t,e,i){void 0===i&&(i=t);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[n],a=n&&n.split("-")[0],o=r&&r[a],l=i;return s&&s[t]?l=s[t]:o&&o[t]&&(l=o[t]),e&&(l=l.replace(/\{(\d+)\}/g,function(t,i){var n=e[i-1],r=n;return void 0===n&&(r=t),r})),l},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(t){return this.childIndex_[t]},e.getChild=function(t){if(t)return this.childNameIndex_[t]},e.getDescendant=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e=e.reduce(function(t,e){return t.concat(e)},[]);for(var n=this,r=0;r<e.length;r++)if(!(n=n.getChild(e[r]))||!n.getChild)return;return n},e.addChild=function(e,i,n){var r,s;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof e){s=ot(e);var a=i.componentClass||s;i.name=s;var o=t.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(s=s||r.name&&ot(r.name()))&&(this.childNameIndex_[s]=r,this.childNameIndex_[at(s)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:u(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},e.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(e){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[ot(t.name())]=null,this.childNameIndex_[at(t.name())]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},e.initChildren=function(){var e=this,i=this.options_.children;if(i){var n,r=this.options_,s=t.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!n.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var n,r;return r="string"==typeof t?i[n=t]||e.options_[n]||{}:(n=t.name,t),{name:n,opts:r}}).filter(function(e){var i=t.getComponent(e.opts.componentClass||ot(e.name));return i&&!s.isTech(i)}).forEach(function(t){var i=t.name,n=t.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=e.options_.playerOptions;var s=e.addChild(i,n);s&&(e[i]=s)}})}},e.buildCSSClass=function(){return""},e.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},e.$=function(t,e){return Wr(t,e||this.contentEl())},e.$$=function(t,e){return qr(t,e||this.contentEl())},e.hasClass=function(t){return g(this.el_,t)},e.addClass=function(t){v(this.el_,t)},e.removeClass=function(t){y(this.el_,t)},e.toggleClass=function(t,e){_(this.el_,t,e)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(t){return T(this.el_,t)},e.setAttribute=function(t,e){k(this.el_,t,e)},e.removeAttribute=function(t){S(this.el_,t)},e.width=function(t,e){return this.dimension("width",t,e)},e.height=function(t,e){return this.dimension("height",t,e)},e.dimensions=function(t,e){this.width(t,!0),this.height(e)},e.dimension=function(t,e,i){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[t],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+ot(t)],10)},e.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=a(this.el_,t),0===(e=parseFloat(e))||isNaN(e)){var i="offset"+ot(t);e=this.el_[i]}return e},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(t){this.player_&&(t.stopPropagation(),this.player_.handleKeyDown(t))},e.handleKeyPress=function(t){this.handleKeyDown(t)},e.emitTapEvents=function(){function t(){e=!1}var e,i=0,n=null;this.on("touchstart",function(t){1===t.touches.length&&(n={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},i=Or.performance.now(),e=!0)}),this.on("touchmove",function(t){if(1<t.touches.length)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;10<Math.sqrt(i*i+r*r)&&(e=!1)}}),this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",function(t){!(n=null)===e&&Or.performance.now()-i<200&&(t.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=Y(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var i=function(){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}},e.setTimeout=function(t,e){var i,n=this;return t=Y(this,t),this.clearTimersOnDispose_(),i=Or.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_["delete"](i),t()},e),this.setTimeoutIds_.add(i),i},e.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_["delete"](t),Or.clearTimeout(t)),t},e.setInterval=function(t,e){t=Y(this,t),this.clearTimersOnDispose_();var i=Or.setInterval(t,e);return this.setIntervalIds_.add(i),i},e.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_["delete"](t),Or.clearInterval(t)),t},e.requestAnimationFrame=function(t){var e,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=Y(this,t),e=Or.requestAnimationFrame(function(){i.rafIds_.has(e)&&i.rafIds_["delete"](e),t()}),this.rafIds_.add(e),e):this.setTimeout(t,1e3/60)},e.requestNamedAnimationFrame=function(t,e){var i=this;if(!this.namedRafs_.has(t)){this.clearTimersOnDispose_(),e=Y(this,e);var n=this.requestAnimationFrame(function(){e(),i.namedRafs_.has(t)&&i.namedRafs_["delete"](t)});return this.namedRafs_.set(t,n),t}},e.cancelNamedAnimationFrame=function(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_["delete"](t))},e.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_["delete"](t),Or.cancelAnimationFrame(t)),t):this.clearTimeout(t)},e.clearTimersOnDispose_=function(){var t=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var i=e[0],n=e[1];t[i].forEach(function(e,i){return t[n](i)})}),t.clearingTimersOnDispose_=!1}))},t.registerComponent=function(e,i){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=t.getComponent("Tech"),r=n&&n.isTech(i),s=t===i||t.prototype.isPrototypeOf(i.prototype);if(r||!s)throw new Error('Illegal component, "'+e+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=ot(e),t.components_||(t.components_={});var a=t.getComponent("Player");if("Player"===e&&a&&a.players){var o=a.players,l=Object.keys(o);if(o&&0<l.length&&l.map(function(t){return o[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=i,t.components_[at(e)]=i},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();us.prototype.supportsRaf_="function"==typeof Or.requestAnimationFrame&&"function"==typeof Or.cancelAnimationFrame,us.registerComponent("Component",us);var ds=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};e(function(t){function e(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(i)}t.exports=e}),e(function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e});for(var hs,ps,fs,ms,gs,vs=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e},ys=Or.navigator&&Or.navigator.userAgent||"",_s=/AppleWebKit\/([\d.]+)/i.exec(ys),bs=_s?parseFloat(_s.pop()):null,ws=/iPod/i.test(ys),Ts=(hs=ys.match(/OS (\d+)_/i))&&hs[1]?hs[1]:null,ks=/Android/i.test(ys),Ss=function(){var t=ys.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),Cs=ks&&Ss<5&&bs<537,xs=/Firefox/i.test(ys),Es=/Edg/i.test(ys),As=!Es&&(/Chrome/i.test(ys)||/CriOS/i.test(ys)),Ps=(ps=ys.match(/(Chrome|CriOS)\/(\d+)/))&&ps[2]?parseFloat(ps[2]):null,Is=(!(ms=(fs=/MSIE\s(\d+)\.\d/.exec(ys))&&parseFloat(fs[1]))&&/Trident\/7.0/i.test(ys)&&/rv:11.0/.test(ys)&&(ms=11),ms),Ls=/Safari/i.test(ys)&&!As&&!ks&&!Es,Ds=/Windows/i.test(ys),Os=(Boolean(c()&&("ontouchstart"in Or||Or.navigator.maxTouchPoints||Or.DocumentTouch&&Or.document instanceof Or.DocumentTouch))),Ms=/iPad/i.test(ys)||Ls&&Os&&!/iPhone/i.test(ys),js=/iPhone/i.test(ys)&&!Ms,Rs=js||Ms||ws,Ns=(Ls||Rs)&&!As,Fs=Object.freeze({__proto__:null,IS_IPOD:ws,IOS_VERSION:Ts,IS_ANDROID:ks,ANDROID_VERSION:Ss,IS_NATIVE_ANDROID:Cs,IS_FIREFOX:xs,IS_EDGE:Es,IS_CHROME:As,CHROME_VERSION:Ps,IE_VERSION:Is,IS_SAFARI:Ls,IS_WINDOWS:Ds,TOUCH_ENABLED:Os,IS_IPAD:Ms,IS_IPHONE:js,IS_IOS:Rs,IS_ANY_SAFARI:Ns}),Bs={prefixed:!0},Us=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],zs=Us[0],Vs=0;Vs<Us.length;Vs++)if(Us[Vs][1]in Rr){gs=Us[Vs];break}if(gs){for(var Hs=0;Hs<gs.length;Hs++)Bs[zs[Hs]]=gs[Hs];Bs.prefixed=gs[0]!==zs[0]}pt.prototype.code=0,pt.prototype.message="",pt.prototype.status=null,pt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],pt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ws=0;Ws<pt.errorTypes.length;Ws++)pt[pt.errorTypes[Ws]]=Ws,pt.prototype[pt.errorTypes[Ws]]=Ws;var qs=function(t,e){var i,n=null;try{i=JSON.parse(t,e)}catch(t){n=t}return[n,i]},$s=function(t){var e=t.$$("track"),i=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=gt(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===i.indexOf(t)}).map(gt))},Gs=function(t,e){return t.forEach(function(t){var i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return i.addCue(t)})}),e.textTracks()},Xs=e(function(t,e){function i(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var i,s=String(t);return(i=n[s.toLowerCase()])?i:(i=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}i.isEventKey=function(t,e){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof e){var s;if(s=n[e.toLowerCase()])return s===i;if(s=r[e.toLowerCase()])return s===i}else if("number"==typeof e)return e===i;return!1}};var n=(e=t.exports=i).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a=e.names=e.title={};for(s in n)a[n[s]]=s;for(var o in r)n[o]=r[o]}),Ys=(Xs.code,Xs.codes,Xs.aliases,Xs.names,Xs.title,"vjs-modal-dialog"),Ks=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=p("div",{className:Ys+"-content"},{role:"document"}),n.descEl_=p("p",{className:Ys+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),f(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return Ys+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},
i.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,i=this.getChild("closeButton");if(e&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!e&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(t){var e=this.contentEl(),i=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),M(e,t),this.trigger("modalfill"),n?i.insertBefore(e,n):i.appendChild(e);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),L(this.contentEl()),this.trigger("modalempty")},i.content=function(t){return void 0!==t&&(this.content_=t),this.content_},i.conditionalFocus_=function(){var t=Rr.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,!e.contains(t)&&e!==t||(this.previouslyActiveEl_=t,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(t){if(t.stopPropagation(),Xs.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(Xs.isEventKey(t,"Tab")){for(var e,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){e=r;break}Rr.activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||e!==i.length-1||(i[0].focus(),t.preventDefault())}},i.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof Or.HTMLAnchorElement||t instanceof Or.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof Or.HTMLInputElement||t instanceof Or.HTMLSelectElement||t instanceof Or.HTMLTextAreaElement||t instanceof Or.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof Or.HTMLIFrameElement||t instanceof Or.HTMLObjectElement||t instanceof Or.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},e}(us);Ks.prototype.options_={pauseOnOpen:!0,temporary:!0},us.registerComponent("ModalDialog",Ks);var Qs=function(t){function e(e){var i;void 0===e&&(e=[]),(i=t.call(this)||this).tracks_=[],Object.defineProperty(ds(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<e.length;n++)i.addTrack(e[n]);return i}vs(e,t);var i=e.prototype;return i.addTrack=function(t){var e=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){e.trigger({track:t,type:"labelchange",target:e})},ns(t)&&t.addEventListener("labelchange",t.labelchange_)},i.removeTrack=function(t){for(var e,i=0,n=this.length;i<n;i++)if(this[i]===t){(e=this[i]).off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})},i.getTrackById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},e}(Q);for(var Zs in Qs.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Qs.prototype.allowedEvents_)Qs.prototype["on"+Zs]=null;var Js=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].enabled){vt(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,i}vs(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;e.enabled&&vt(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){i.changing_||(i.changing_=!0,vt(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Qs),ta=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].selected){yt(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,Object.defineProperty(ds(i),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),i}vs(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;e.selected&&yt(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){i.changing_||(i.changing_=!0,yt(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Qs),ea=function(t){function e(){return t.apply(this,arguments)||this}vs(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;t.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Qs),ia=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,i=t.length;e<i;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,i=0,n=this.trackElements_.length;i<n;i++)if(t===this.trackElements_[i].track){e=this.trackElements_[i];break}return e},e.removeTrackElement_=function(t){for(var e=0,i=this.trackElements_.length;e<i;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},t}(),na=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(t){function e(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})}var i=this.length||0,n=0,r=t.length;if(this.cues_=t,this.length_=t.length,i<r)for(n=i;n<r;n++)e.call(this,n)},e.getCueById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},t}(),ra={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},sa={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},aa={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},oa={disabled:"disabled",hidden:"hidden",showing:"showing"},la=function(t){function e(e){function i(t){Object.defineProperty(ds(n),t,{get:function(){return r[t]},set:function(){}})}var n;void 0===e&&(e={}),n=t.call(this)||this;var r={id:e.id||"vjs_track_"+U(),kind:e.kind||"",language:e.language||""},s=e.label||"";for(var a in r)i(a);return Object.defineProperty(ds(n),"label",{get:function(){return s},set:function(t){t!==s&&(s=t,this.trigger("labelchange"))}}),n}return vs(e,t),e}(Q),ca=Object.freeze({__proto__:null,parseUrl:_t,getAbsoluteURL:bt,getFileExtension:wt,isCrossOrigin:Tt}),ua="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},da=function(t){var e=ha.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}
/**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Björklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   */,ha=Object.prototype.toString,pa=function(t){var e={};return t&&t.trim().split("\n").forEach(function(t){var i=t.indexOf(":"),n=t.slice(0,i).trim().toLowerCase(),r=t.slice(i+1).trim();"undefined"==typeof e[n]?e[n]=r:Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]}),e},fa=St,ma=St;St.XMLHttpRequest=ua.XMLHttpRequest||function(){},St.XDomainRequest="withCredentials"in new St.XMLHttpRequest?St.XMLHttpRequest:ua.XDomainRequest,function(t,e){for(var i=0;i<t.length;i++)e(t[i])}(["get","put","post","patch","head","delete"],function(t){St["delete"===t?"del":t]=function(e,i,n){return(i=kt(e,i,n)).method=t.toUpperCase(),Ct(i)}}),fa["default"]=ma;var ga=function(t){function e(e){var i;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=lt(e,{kind:aa[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=oa[n.mode]||"disabled",s=n["default"];"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=t.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var a=new na(i.cues_),o=new na(i.activeCues_),l=!1,c=Y(ds(i),function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&i.tech_.ready(function(){i.tech_.on("timeupdate",c)},!0),Object.defineProperties(ds(i),{"default":{get:function(){return s},set:function(){}},mode:{get:function(){return r},set:function(t){var e=this;oa[t]&&(r=t,this.preload_||"disabled"===r||0!==this.cues.length||Et(this.src,this),"disabled"!==r?this.tech_.ready(function(){e.tech_.on("timeupdate",c)},!0):this.tech_.off("timeupdate",c),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var t=this.tech_.currentTime(),e=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];r.startTime<=t&&r.endTime>=t?e.push(r):r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t&&e.push(r)}if(l=!1,e.length!==this.activeCues_.length)l=!0;else for(var s=0;s<e.length;s++)-1===this.activeCues_.indexOf(e[s])&&(l=!0);return this.activeCues_=e,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||s||"subtitles"!==n.kind&&"captions"!==n.kind)&&Et(i.src,ds(i))):i.loaded_=!0,i}vs(e,t);var i=e.prototype;return i.addCue=function(t){var e=t;if(Or.vttjs&&!(t instanceof Or.vttjs.VTTCue)){for(var i in e=new Or.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)i in e||(e[i]=t[i]);e.id=t.id,e.originalCue_=t}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},i.removeCue=function(t){for(var e=this.cues_.length;e--;){var i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(la);ga.prototype.allowedEvents_={cuechange:"cuechange"};var va=function(t){function e(e){var i;void 0===e&&(e={});var n=lt(e,{kind:sa[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(ds(i),"enabled",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return vs(e,t),e}(la),ya=function(t){function e(e){var i;void 0===e&&(e={});var n=lt(e,{kind:ra[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(ds(i),"selected",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return vs(e,t),e}(la),_a=function(t){function e(e){var i,n;void 0===e&&(e={}),i=t.call(this)||this;var r=new ga(e);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i["default"]=r["default"],Object.defineProperties(ds(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:ds(i)})}),i}return vs(e,t),e}(Q);_a.prototype.allowedEvents_={load:"load"},_a.NONE=0,_a.LOADING=1,_a.LOADED=2,_a.ERROR=3;var ba={audio:{ListClass:Js,TrackClass:va,capitalName:"Audio"},video:{ListClass:ta,TrackClass:ya,capitalName:"Video"},text:{ListClass:ea,TrackClass:ga,capitalName:"Text"}};Object.keys(ba).forEach(function(t){ba[t].getterName=t+"Tracks",ba[t].privateName=t+"Tracks_"});var wa={remoteText:{ListClass:ea,TrackClass:ga,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ia,TrackClass:_a,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ta=zr({},ba,wa);wa.names=Object.keys(wa),ba.names=Object.keys(ba),Ta.names=[].concat(wa.names).concat(ba.names);var ka=Object.create||function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return At.prototype=t,new At};((Pt.prototype=ka(Error.prototype)).constructor=Pt).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Lt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var Sa=Rr.createElement("textarea"),Ca={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},xa={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ea={v:"title",lang:"lang"},Aa={rt:"ruby"},Pa=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Rt.prototype.applyStyles=function(t,e){for(var i in e=e||this.div,t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},Rt.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(Nt.prototype=ka(Rt.prototype)).constructor=Nt,Ft.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Ft.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Ft.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Ft.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Ft.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Ft.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Ft.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Ft.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i}},Ut.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},Ut.convertCueToDOMTree=function(t,e){return t&&e?Mt(t,e):null},Ut.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=t.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var r=[],s=Ft.getSimpleBoxPosition(n),a={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var i,o,l=0;l<e.length;l++)o=e[l],i=new Nt(t,o,a),n.appendChild(i.div),Bt(0,i,s,r),o.displayState=i.div,r.push(Ft.getSimpleBoxPosition(i))}()}else for(var o=0;o<e.length;o++)n.appendChild(e[o].displayState)},(Ut.Parser=function(t,e,i){i||(i=e,e={}),e=e||{},this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof Pt))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){function e(){for(var t=n.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),i}function i(t){t.match(/X-TIMESTAMP-MAP/)?Dt(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":!function(t){var e=new Lt;Dt(t,function(t,i){switch(t){case"MPEGT":e.integer(t+"S",i);break;case"LOCA":e.set(t+"L",It(i))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}(e)}},/=/):Dt(t,function(t,e){switch(t){case"Region":!function(t){var e=new Lt;if(Dt(t,function(t,i){switch(t){case"id":e.set(t,i);break;case"width":e.percent(t,i);break;case"lines":e.integer(t,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var r=new Lt;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;e.set(t+"X",r.get("x")),e.set(t+"Y",r.get("y"));break;case"scroll":e.alt(t,i,["up"])}},/=/,/\s/),e.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=e.get("width",100),i.lines=e.get("lines",3),i.regionAnchorX=e.get("regionanchorX",0),i.regionAnchorY=e.get("regionanchorY",100),i.viewportAnchorX=e.get("viewportanchorX",0),i.viewportAnchorY=e.get("viewportanchorY",100),i.scroll=e.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:e.get("id"),region:i})}}(e)}},/:/)}var n=this;t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var s=(r=e()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Pt(Pt.Errors.BadSignature);n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:r=e(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(t){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("-->")){n.cue.id=r;continue}case"CUE":try{Ot(r,n.cue,n.regionList)}catch(t){n.reportOrThrowError(t),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("-->");if(!r||o&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(t){n.reportOrThrowError(t),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Pt(Pt.Errors.BadSignature)}catch(Dr){t.reportOrThrowError(Dr)}return t.onflush&&t.onflush(),this}};var Ia=Ut,La={"":1,lr:1,rl:1},Da={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Vt.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Oa=Vt,Ma={"":!0,up:!0},ja=e(function(t){var e=t.exports={WebVTT:Ia,VTTCue:Oa,VTTRegion:Wt};Or.vttjs=e,Or.WebVTT=e.WebVTT;var i=e.VTTCue,n=e.VTTRegion,r=Or.VTTCue,s=Or.VTTRegion;e.shim=function(){Or.VTTCue=i,Or.VTTRegion=n},e.restore=function(){Or.VTTCue=r,Or.VTTRegion=s},Or.VTTCue||e.shim()});ja.WebVTT,ja.VTTCue,ja.VTTRegion;var Ra=function(t){function e(e,i){var n;return void 0===e&&(e={}),void 0===i&&(i=function(){}),e.reportTouchActivity=!1,(n=t.call(this,null,e,i)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Ta.names.forEach(function(t){var i=Ta[t];e&&e[i.getterName]&&(n[i.privateName]=e[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==e.preloadTextTracks,n.autoRemoteTextTracks_=new Ta.text.ListClass,n.initTrackListeners(),e.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}vs(e,t);var i=e.prototype;return i.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},i.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Y(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(){this.duration_=this.duration()},i.buffered=function(){return dt(0,0)},i.bufferedPercent=function(){return ht(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(ba.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},i.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach(function(t){for(var i=e[t+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===t&&e.removeRemoteTextTrack(r),i.removeTrack(r)}})},i.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var i=t[e];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(t){return void 0!==t&&(this.error_=new pt(t),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?dt(0,0):dt()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var t=this;ba.names.forEach(function(e){function i(){t.trigger(e+"trackchange")}var n=ba[e],r=t[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),t.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})},i.addWebVttScript_=function(){var t=this;if(!Or.WebVTT)if(Rr.body.contains(this.el())){if(!this.options_["vtt.js"]&&s(ja)&&0<Object.keys(ja).length)return void this.trigger("vttjsloaded");var e=Rr.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),Or.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){function t(t){return s.addTrack(t.track)}function e(t){return s.removeTrack(t.track)}function i(){return r.trigger("texttrackchange")}function n(){i();for(var t=0;t<s.length;t++){var e=s[t];e.removeEventListener("cuechange",i),"showing"===e.mode&&e.addEventListener("cuechange",i)}}var r=this,s=this.textTracks(),a=this.remoteTextTracks();a.on("addtrack",t),a.on("removetrack",e),this.addWebVttScript_(),n(),s.addEventListener("change",n),s.addEventListener("addtrack",n),s.addEventListener("removetrack",n),this.on("dispose",function(){a.off("addtrack",t),a.off("removetrack",e),s.removeEventListener("change",n),s.removeEventListener("addtrack",n),s.removeEventListener("removetrack",n);for(var r=0;r<s.length;r++)s[r].removeEventListener("cuechange",i)})},i.addTextTrack=function(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,i,n,r){void 0===r&&(r={});var s=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;var a=new Ta.text.TrackClass(r);return s.addTrack(a),a}(this,t,e,i)},i.createRemoteTextTrack=function(t){var e=lt(t,{tech:this});return new wa.remoteTextEl.TrackClass(e)},i.addRemoteTextTrack=function(t,e){var i=this;void 0===t&&(t={});var n=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(Br.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==e&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},i.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var t=this.options_.Promise||Or.Promise;if(t)return t.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,i){if(e.techs_||(e.techs_={}),!e.isTech(i))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=ot(t),e.techs_[t]=i,e.techs_[at(t)]=i,"Tech"!==t&&e.defaultTechOrder_.push(t),i},e.getTech=function(t){if(t)return e.techs_&&e.techs_[t]?e.techs_[t]:(t=ot(t),Or&&Or.videojs&&Or.videojs[t]?(Br.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Or.videojs[t]):void 0)},e}(us);Ta.names.forEach(function(t){var e=Ta[t];Ra.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Ra.prototype.featuresVolumeControl=!0,Ra.prototype.featuresMuteControl=!0,Ra.prototype.featuresFullscreenResize=!1,Ra.prototype.featuresPlaybackRate=!1,Ra.prototype.featuresProgressEvents=!1,Ra.prototype.featuresSourceset=!1,Ra.prototype.featuresTimeupdateEvents=!1,Ra.prototype.featuresNativeTextTracks=!1,Ra.withSourceHandlers=function(t){t.registerSourceHandler=function(e,i){var n=t.sourceHandlers;n=n||(t.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,e)},t.canPlayType=function(e){for(var i,n=t.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(e))return i;return""},t.selectSourceHandler=function(e,i){for(var n=t.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(e,i))return n[r];return null},t.canPlaySource=function(e,i){var n=t.selectSourceHandler(e,i);return n?n.canHandleSource(e,i):""},["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var i=t.selectSourceHandler(e,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:Br.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=i.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},us.registerComponent("Tech",Ra),Ra.registerTech("Tech",Ra),Ra.defaultTechOrder_=[];var Na={},Fa={},Ba={},Ua={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},za={setCurrentTime:1,setMuted:1,setVolume:1},Va={play:1,pause:1},Ha={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Wa=function(t){function e(e,i,n){var r,s=lt({createEl:!1},i);if(r=t.call(this,e,s,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)e.src(i.playerOptions.sources);else for(var a=0,o=i.playerOptions.techOrder;a<o.length;a++){var l=ot(o[a]),c=Ra.getTech(l);if(l||(c=us.getComponent(l)),c&&c.isSupported()){e.loadTech_(l);break}}return r}return vs(e,t),e}(us);us.registerComponent("MediaLoader",Wa);var qa=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).emitTapEvents(),n.enable(),n}vs(e,t);var i=e.prototype;return i.createEl=function(e,i,r){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===r&&(r={}),i=n({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===e&&Br.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),r=n({role:"button"},r),this.tabIndex_=i.tabIndex;var s=t.prototype.createEl.call(this,e,i,r);return this.createControlTextEl(s),s},i.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},i.createControlTextEl=function(t){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var i=this.localize(t);this.controlText_=t,f(this.controlTextEl_,i),this.nonIconControl||e.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(e){Xs.isEventKey(e,"Space")||Xs.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(us);us.registerComponent("ClickableComponent",qa);var $a=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update(),e.on("posterchange",Y(ds(n),n.update)),n}vs(e,t);var i=e.prototype;return i.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},i.createEl=function(){return p("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},i.handleClick=function(){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;!this.player_.tech(!0)||(Is||Es)&&t||this.player_.tech(!0).focus(),this.player_.paused()?mt(this.player_.play()):this.player_.pause()}},e}(qa);us.registerComponent("PosterImage",$a);var Ga="#222",Xa={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Ya=function(t){function e(e,i,n){var r;r=t.call(this,e,i,n)||this;var s=Y(ds(r),r.updateDisplay);return e.on("loadstart",Y(ds(r),r.toggleDisplay)),e.on("texttrackchange",s),e.on("loadedmetadata",Y(ds(r),r.preselectTrack)),e.ready(Y(ds(r),function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",s),e.on("playerresize",s),Or.addEventListener("orientationchange",s),e.on("dispose",function(){return Or.removeEventListener("orientationchange",s)});for(var t=this.options_.playerOptions.tracks||[],i=0;i<t.length;i++)this.player_.addRemoteTextTrack(t[i],!0);this.preselectTrack()}})),r}vs(e,t);var i=e.prototype;return i.preselectTrack=function(){for(var t,e,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var o=r[a];s&&s.enabled&&s.language&&s.language===o.language&&o.kind in n?i=o.kind===s.kind?o:i||o:s&&!s.enabled?e=t=i=null:o["default"]&&("descriptions"!==o.kind||t?o.kind in n&&!e&&(e=o):t=o)}i?i.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof Or.WebVTT&&Or.WebVTT.processCues(Or,[],this.el_)},i.updateDisplay=function(){var t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){for(var i=[],n=0;n<t.length;++n){var r=t[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,a=null,o=t.length;o--;){var l=t[o];"showing"===l.mode&&("descriptions"===l.kind?s=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},i.updateDisplayState=function(t){for(var e=this.player_.textTrackSettings.getValues(),i=t.activeCues,n=i.length;n--;){var r=i[n];if(r){var s=r.displayState;if(e.color&&(s.firstChild.style.color=e.color),e.textOpacity&&Zt(s.firstChild,"color",Qt(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(s.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&Zt(s.firstChild,"backgroundColor",Qt(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?Zt(s,"backgroundColor",Qt(e.windowColor,e.windowOpacity)):s.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Ga:"raised"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Ga:"depressed"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Ga:"uniform"===e.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Ga)),e.fontPercent&&1!==e.fontPercent){var a=Or.parseFloat(s.style.fontSize);s.style.fontSize=a*e.fontPercent+"px",s.style.height="auto",s.style.top="auto"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Xa[e.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof Or.WebVTT&&!t.every(function(t){return!t.activeCues})){for(var e=[],i=0;i<t.length;++i)for(var n=t[i],r=0;r<n.activeCues.length;++r)e.push(n.activeCues[r]);Or.WebVTT.processCues(Or,e,this.el_);for(var s=0;s<t.length;++s){for(var a=t[s],o=0;o<a.activeCues.length;++o){var l=a.activeCues[o].displayState;v(l,"vjs-text-track-cue"),v(l,"vjs-text-track-cue-"+(a.language?a.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},e}(us);us.registerComponent("TextTrackDisplay",Ya);var Ka=function(t){function e(){return t.apply(this,arguments)||this}return vs(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),n=p("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},e}(us);us.registerComponent("LoadingSpinner",Ka);var Qa=function(t){function e(){return t.apply(this,arguments)||this}vs(e,t);var i=e.prototype;return i.createEl=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i={}),e=n({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),i=n({type:"button"},i);var r=us.prototype.createEl.call(this,"button",e,i);return this.createControlTextEl(r),r},i.addChild=function(t,e){void 0===e&&(e={});var i=this.constructor.name
;return Br.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),us.prototype.addChild.call(this,t,e)},i.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){Xs.isEventKey(e,"Space")||Xs.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(qa);us.registerComponent("Button",Qa);var Za=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return mt(e),void(!this.player_.tech(!0)||(Is||Es)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var s=function(){return r.focus()};ft(e)?e.then(s,function(){}):this.setTimeout(s,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(e){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,e)},i.handleMouseDown=function(){this.mouseused_=!0},e}(Qa);Za.prototype.controlText_="Play Video",us.registerComponent("BigPlayButton",Za);var Ja=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(e){Xs.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(Qa);us.registerComponent("CloseButton",Ja);var to=function(t){function e(e,i){var n;return void 0===i&&(i={}),n=t.call(this,e,i)||this,i.replay=void 0===i.replay||i.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),i.replay&&n.on(e,"ended",n.handleEnded),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},i.handlePlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Qa);to.prototype.controlText_="Play",us.registerComponent("PlayToggle",to);var eo=Jt,io=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,["timeupdate","ended"],n.updateContent),n.updateTextNode_(),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e=this.buildCSSClass(),i=t.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=p("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},i.updateTextNode_=function(t){var e=this;void 0===t&&(t=0),t=te(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(e.contentEl_){var t=e.textNode_;t&&!e.contentEl_.contains(t)&&(t=null,Br.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),e.textNode_=Rr.createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}}))},i.updateContent=function(){},e}(us);io.prototype.labelText_="Time",io.prototype.controlText_="Time",us.registerComponent("TimeDisplay",io);var no=function(t){function e(){return t.apply(this,arguments)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},e}(io);no.prototype.labelText_="Current Time",no.prototype.controlText_="Current Time",us.registerComponent("CurrentTimeDisplay",no);var ro=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.updateContent),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(){var t=this.player_.duration();this.updateTextNode_(t)},e}(io);ro.prototype.labelText_="Duration",ro.prototype.controlText_="Duration",us.registerComponent("DurationDisplay",ro);var so=function(t){function e(){return t.apply(this,arguments)||this}return vs(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},e}(us);us.registerComponent("TimeDivider",so);var ao=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"durationchange",n.updateContent),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var e=t.prototype.createEl.call(this);return e.insertBefore(p("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},i.updateContent=function(){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},e}(io);ao.prototype.labelText_="Remaining Time",ao.prototype.controlText_="Remaining Time",us.registerComponent("RemainingTimeDisplay",ao);var oo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},i.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},i.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},e}(us);us.registerComponent("LiveDisplay",oo);var lo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=p("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,t.prototype.dispose.call(this)},e}(Qa);lo.prototype.controlText_="Seek to live, currently playing live",us.registerComponent("SeekToLive",lo);var co=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}vs(e,t);var i=e.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(e,i,r){return void 0===i&&(i={}),void 0===r&&(r={}),i.className=i.className+" vjs-slider",i=n({tabIndex:0},i),r=n({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),t.prototype.createEl.call(this,e,i,r)},i.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||As||t.preventDefault(),C(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},i.handleMouseMove=function(){},i.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;x(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},i.update=function(){var t=this;if(this.el_&&this.bar){var e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",function(){var i=t.vertical()?"height":"width";t.bar.el().style[i]=(100*e).toFixed(2)+"%"})),e}},i.getProgress=function(){return Number(ee(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(t){var e=P(this.el_,t);return this.vertical()?e.y:e.x},i.handleKeyDown=function(e){Xs.isEventKey(e,"Left")||Xs.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Xs.isEventKey(e,"Right")||Xs.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,e)},i.handleClick=function(t){t.stopPropagation(),t.preventDefault()},i.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(us);us.registerComponent("Slider",co);var uo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).partEls_=[],n.on(e,"progress",n.update),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=p("span",{className:"vjs-control-text"}),n=p("span",{textContent:this.localize("Loaded")}),r=Rr.createTextNode(": ");return this.percentageEl_=p("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),e},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},i.update=function(){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=t.player_.liveTracker,i=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),s=t.partEls_,a=ie(r,n);t.percent_!==a&&(t.el_.style.width=a,f(t.percentageEl_,a),t.percent_=a);for(var o=0;o<i.length;o++){var l=i.start(o),c=i.end(o),u=s[o];u||(u=t.el_.appendChild(p()),s[o]=u),u.dataset.start===l&&u.dataset.end===c||(u.dataset.start=l,u.dataset.end=c,u.style.left=ie(l,r),u.style.width=ie(c-l,r))}for(var d=s.length;d>i.length;d--)t.el_.removeChild(s[d-1]);s.length=i.length})},e}(us);us.registerComponent("LoadProgressBar",uo);var ho=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=K(Y(ds(n),n.update),30),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(t,e,i){var n=A(this.el_),r=E(this.player_.el()),s=t.width*e;if(r&&n){var a=t.left-r.left+s,o=t.width-s+(r.right-t.right),l=n.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(t){f(this.el_,t)},i.updateTime=function(t,e,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var s,a=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-e*o;s=(l<1?"":"-")+te(l,o)}else s=te(i,a);r.update(t,e,s),n&&n()})},e}(us);us.registerComponent("TimeTooltip",ho);var po=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=K(Y(ds(n),n.update),30),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(t,e){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,n)}},e}(us);po.prototype.options_={children:[]},Rs||ks||po.prototype.options_.children.push("timeTooltip"),us.registerComponent("PlayProgressBar",po);var fo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=K(Y(ds(n),n.update),30),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,e){var i=this,n=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,n,function(){i.el_.style.left=t.width*e+"px"})},e}(us);fo.prototype.options_={children:["timeTooltip"]},us.registerComponent("MouseTimeDisplay",fo);var mo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).setEventHandlers_(),n}vs(e,t);var i=e.prototype;return i.setEventHandlers_=function(){this.update_=Y(this,this.update),this.update=K(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in Rr&&"visibilityState"in Rr&&this.on(Rr,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(t){Rr.hidden?this.disableInterval_(t):(this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},i.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(){var e=this,i=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var t=e.player_.ended()?e.player_.duration():e.getCurrentTime_(),n=e.player_.liveTracker,r=e.player_.duration();n&&n.isLive()&&(r=e.player_.liveTracker.liveCurrentTime()),e.percent_!==i&&(e.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),e.percent_=i),e.currentTime_===t&&e.duration_===r||(e.el_.setAttribute("aria-valuetext",e.localize("progress bar timing: currentTime={1} duration={2}",[te(t,r),te(r,r)],"{1} of {2}")),e.currentTime_=t,e.duration_=r),e.bar&&e.bar.update(E(e.el()),e.getProgress())}),i},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var t,e=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},i.handleMouseDown=function(e){j(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},i.handleMouseMove=function(t){if(j(t)){var e,i=this.calculateDistance(t),n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=i)return void n.seekToLiveEdge();var r=n.seekableStart(),s=n.liveCurrentTime();if(s<=(e=r+i*n.liveWindow())&&(e=s),e<=r&&(e=r+.1),e===1/0)return}else(e=i*this.player_.duration())===this.player_.duration()&&(e-=.1);this.player_.currentTime(e)}},i.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},i.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},i.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?mt(this.player_.play()):this.update_()},i.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(e){if(Xs.isEventKey(e,"Space")||Xs.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Xs.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0);else if(Xs.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Xs(e))){e.preventDefault(),e.stopPropagation();var i=10*(Xs.codes[Xs(e)]-Xs.codes[0])/100;this.player_.currentTime(this.player_.duration()*i)}else Xs.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Xs.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,e)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in Rr&&"visibilityState"in Rr&&this.off(Rr,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(co);mo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Rs||ks||mo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),us.registerComponent("SeekBar",mo);var go=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handleMouseMove=K(Y(ds(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=K(Y(ds(n),n.handleMouseSeek),30),n.enable(),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var i=e.getChild("playProgressBar"),n=e.getChild("mouseTimeDisplay");if(i||n){var r=e.el(),s=A(r),a=P(r,t).x;a=ee(a,0,1),n&&n.update(s,a),i&&i.update(s,e.getProgress())}}},i.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},i.enabled=function(){return this.enabled_},i.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function(t){var e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},i.handleMouseUp=function(t){var e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e}(us);go.prototype.options_={children:["seekBar"]},us.registerComponent("ProgressControl",go);var vo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),n.on(e,["disablepictureinpicturechanged","loadedmetadata"],n.handlePictureInPictureEnabledChange),n.disable(),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Rr.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Qa);vo.prototype.controlText_="Picture-in-Picture",us.registerComponent("PictureInPictureToggle",vo);var yo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"fullscreenchange",n.handleFullscreenChange),!1===Rr[e.fsApi_.fullscreenEnabled]&&n.disable(),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Qa);yo.prototype.controlText_="Fullscreen",us.registerComponent("FullscreenToggle",yo);var _o=function(t){function e(){return t.apply(this,arguments)||this}return vs(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(us);us.registerComponent("VolumeLevel",_o);var bo=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(e){j(e)&&t.prototype.handleMouseDown.call(this,e)},i.handleMouseMove=function(t){j(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},e}(co);bo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},bo.prototype.playerEvent="volumechange",us.registerComponent("VolumeBar",bo);var wo=function(t){function e(e,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,"undefined"!=typeof i.volumeBar&&!s(i.volumeBar)||(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=t.call(this,e,i)||this,function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(ds(n),e),n.throttledHandleMouseMove=K(Y(ds(n),n.handleMouseMove),30),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},i.handleMouseDown=function(){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},i.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(us);wo.prototype.options_={children:["volumeBar"]},us.registerComponent("VolumeControl",wo);var To=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(ds(n),e),n.on(e,["loadstart","volumechange"],n.update),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(){var t=this.player_.volume(),e=this.player_.lastVolume_();if(0===t){var i=e<.1?.1:e;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var t=this.player_.volume(),e=3;Rs&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var i=0;i<4;i++)y(this.el_,"vjs-vol-"+i);v(this.el_,"vjs-vol-"+e)},i.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(Qa);To.prototype.controlText_="Mute",us.registerComponent("MuteToggle",To);var ko=function(t){function e(e,i){var n;return void 0===i&&(i={}),"undefined"!=typeof i.inline?i.inline=i.inline:i.inline=!0,"undefined"!=typeof i.volumeControl&&!s(i.volumeControl)||(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=t.call(this,e,i)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}vs(e,t);var i=e.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},i.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(t){Xs.isEventKey(t,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(){this.addClass("vjs-hover"),W(Rr,"keyup",Y(this,this.handleKeyPress))},i.handleMouseOut=function(){this.removeClass("vjs-hover"),q(Rr,"keyup",Y(this,this.handleKeyPress))},i.handleKeyPress=function(t){Xs.isEventKey(t,"Esc")&&this.handleMouseOut()},e}(us);ko.prototype.options_={children:["muteToggle","volumeControl"]},us.registerComponent("VolumePanel",ko);var So=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=Y(ds(n),n.handleBlur),n.boundHandleTapClick_=Y(ds(n),n.handleTapClick),n}vs(e,t);var i=e.prototype;return i.addEventListenerForItem=function(t){t instanceof us&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(t){t instanceof us&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),t.prototype.removeChild.call(this,e)},i.addItem=function(t){var e=this.addChild(t);e&&this.addEventListenerForItem(e)},i.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=p(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),W(i,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},i.handleBlur=function(t){var e=t.relatedTarget||Rr.activeElement;if(!this.children().some(function(t){return t.el()===e})){var i=this.menuButton_;i&&i.buttonPressed_&&e!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var i=e.filter(function(e){return e.el()===t.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(t){Xs.isEventKey(t,"Left")||Xs.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(Xs.isEventKey(t,"Right")||Xs.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},i.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},i.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},i.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),0<e.length&&(t<0?t=0:t>=e.length&&(t=e.length-1),e[this.focusedChild_=t].el_.focus())},e}(us);us.registerComponent("Menu",So);var Co=function(t){function e(e,i){var n;void 0===i&&(i={}),(n=t.call(this,e,i)||this).menuButton_=new Qa(e,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=Qa.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+r,
n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),W(Rr,"keyup",Y(ds(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}vs(e,t);var i=e.prototype;return i.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var t=new So(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=p("li",{className:"vjs-menu-title",innerHTML:ot(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new us(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},i.createItems=function(){},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Qa.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},i.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},i.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},i.handleClick=function(){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(){this.removeClass("vjs-hover"),q(Rr,"keyup",Y(this,this.handleMenuKeyUp))},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(t){Xs.isEventKey(t,"Esc")||Xs.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),Xs.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(Xs.isEventKey(t,"Up")||Xs.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(t){(Xs.isEventKey(t,"Esc")||Xs.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},i.handleSubmenuKeyDown=function(t){(Xs.isEventKey(t,"Esc")||Xs.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Xs.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Rs&&d())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(us);us.registerComponent("MenuButton",Co);var xo=function(t){function e(e,i){var n,r=i.tracks;if((n=t.call(this,e,i)||this).items.length<=1&&n.hide(),!r)return ds(n);var s=Y(ds(n),n.update);return r.addEventListener("removetrack",s),r.addEventListener("addtrack",s),r.addEventListener("labelchange",s),n.player_.on("ready",s),n.player_.on("dispose",function(){r.removeEventListener("removetrack",s),r.removeEventListener("addtrack",s),r.removeEventListener("labelchange",s)}),n}return vs(e,t),e}(Co);us.registerComponent("TrackButton",xo);var Eo=["Tab","Esc","Up","Down","Right","Left"],Ao=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}vs(e,t);var i=e.prototype;return i.createEl=function(e,i,r){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",n({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),r)},i.handleKeyDown=function(e){Eo.some(function(t){return Xs.isEventKey(e,t)})||t.prototype.handleKeyDown.call(this,e)},i.handleClick=function(){this.selected(!0)},i.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(qa);us.registerComponent("MenuItem",Ao);var Po=function(t){function e(e,i){function n(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s.handleTracksChange.apply(ds(s),e)}function r(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s.handleSelectedLanguageChange.apply(ds(s),e)}var s,a,o=i.track,l=e.textTracks();return i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode,(s=t.call(this,e,i)||this).track=o,s.kinds=(i.kinds||[i.kind||s.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],n),l.addEventListener("change",n),l.addEventListener("selectedlanguagechange",r),s.on("dispose",function(){e.off(["loadstart","texttrackchange"],n),l.removeEventListener("change",n),l.removeEventListener("selectedlanguagechange",r)}),void 0===l.onchange&&s.on(["tap","click"],function(){if("object"!=typeof Or.Event)try{a=new Or.Event("change")}catch(e){}a||(a=Rr.createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(a)}),s.handleTracksChange(),s}vs(e,t);var i=e.prototype;return i.handleClick=function(e){var i=this.track,n=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var s=n[r];-1!==this.kinds.indexOf(s.kind)&&(s===i?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}},i.handleTracksChange=function(){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},i.handleSelectedLanguageChange=function(){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(Ao);us.registerComponent("TextTrackMenuItem",Po);var Io=function(t){function e(e,i){return i.track={player:e,kind:i.kind,kinds:i.kinds,"default":!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,e,i)||this}vs(e,t);var i=e.prototype;return i.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!0,i=0,n=t.length;i<n;i++){var r=t[i];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)},i.handleSelectedLanguageChange=function(){for(var t=this.player().textTracks(),e=!0,i=0,n=t.length;i<n;i++){var r=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Po);us.registerComponent("OffTextTrackMenuItem",Io);var Lo=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.textTracks(),t.call(this,e,i)||this}return vs(e,t),e.prototype.createItems=function(t,e){var i;void 0===t&&(t=[]),void 0===e&&(e=Po),this.label_&&(i=this.label_+" off"),t.push(new Io(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var s=n[r];if(-1<this.kinds_.indexOf(s.kind)){var a=new e(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+s.kind+"-menu-item"),t.push(a)}}return t},e}(xo);us.registerComponent("TextTrackButton",Lo);var Do=function(t){function e(e,i){var n,r=i.track,s=i.cue,a=e.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=s.text,i.selected=s.startTime<=a&&a<s.endTime,(n=t.call(this,e,i)||this).track=r,n.cue=s,r.addEventListener("cuechange",Y(ds(n),n.update)),n}vs(e,t);var i=e.prototype;return i.handleClick=function(){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},e}(Ao);us.registerComponent("ChaptersTrackMenuItem",Do);var Oo=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},i.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},i.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;0<=e;e--){var i=t[e];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ot(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},i.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var i=0,n=e.length;i<n;i++){var r=e[i],s=new Do(this.player_,{track:this.track_,cue:r});t.push(s)}return t},e}(Lo);Oo.prototype.kind_="chapters",Oo.prototype.controlText_="Chapters",us.registerComponent("ChaptersButton",Oo);var Mo=function(t){function e(e,i,n){var r;r=t.call(this,e,i,n)||this;var s=e.textTracks(),a=Y(ds(r),r.handleTracksChange);return s.addEventListener("change",a),r.on("dispose",function(){s.removeEventListener("change",a)}),r}vs(e,t);var i=e.prototype;return i.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!1,i=0,n=t.length;i<n;i++){var r=t[i];if(r.kind!==this.kind_&&"showing"===r.mode){e=!0;break}}e?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Lo);Mo.prototype.kind_="descriptions",Mo.prototype.controlText_="Descriptions",us.registerComponent("DescriptionsButton",Mo);var jo=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Lo);jo.prototype.kind_="subtitles",jo.prototype.controlText_="Subtitles",us.registerComponent("SubtitlesButton",jo);var Ro=function(t){function e(e,i){var n;return i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=t.call(this,e,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return vs(e,t),e.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},e}(Po);us.registerComponent("CaptionSettingsMenuItem",Ro);var No=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ro(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(Lo);No.prototype.kind_="captions",No.prototype.controlText_="Captions",us.registerComponent("CaptionsButton",No);var Fo=function(t){function e(){return t.apply(this,arguments)||this}return vs(e,t),e.prototype.createEl=function(e,i,r){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(s+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),s+="</span>",t.prototype.createEl.call(this,e,n({innerHTML:s},i),r)},e}(Po);us.registerComponent("SubsCapsMenuItem",Fo);var Bo=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(ot(n.label_)),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ro(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e,Fo)},e}(Lo);Bo.prototype.kinds_=["captions","subtitles"],Bo.prototype.controlText_="Subtitles",us.registerComponent("SubsCapsButton",Bo);var Uo=function(t){function e(e,i){function n(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.handleTracksChange.apply(ds(r),e)}var r,s=i.track,a=e.audioTracks();return i.label=s.label||s.language||"Unknown",i.selected=s.enabled,(r=t.call(this,e,i)||this).track=s,r.addClass("vjs-"+s.kind+"-menu-item"),a.addEventListener("change",n),r.on("dispose",function(){a.removeEventListener("change",n)}),r}vs(e,t);var i=e.prototype;return i.createEl=function(e,i,r){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(s+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),s+="</span>",t.prototype.createEl.call(this,e,n({innerHTML:s},i),r)},i.handleClick=function(e){var i=this.player_.audioTracks();t.prototype.handleClick.call(this,e);for(var n=0;n<i.length;n++){var r=i[n];r.enabled=r===this.track}},i.handleTracksChange=function(){this.selected(this.track.enabled)},e}(Ao);us.registerComponent("AudioTrackMenuItem",Uo);var zo=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.audioTracks(),t.call(this,e,i)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),i=0;i<e.length;i++){var n=e[i];t.push(new Uo(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t},e}(xo);zo.prototype.controlText_="Audio Track",us.registerComponent("AudioTrackButton",zo);var Vo=function(t){function e(e,i){var n,r=i.rate,s=parseFloat(r,10);return i.label=r,i.selected=1===s,i.selectable=!0,i.multiSelectable=!1,(n=t.call(this,e,i)||this).label=r,n.rate=s,n.on(e,"ratechange",n.update),n}vs(e,t);var i=e.prototype;return i.handleClick=function(){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(){this.selected(this.player().playbackRate()===this.rate)},e}(Ao);Vo.prototype.contentElType="button",us.registerComponent("PlaybackRateMenuItem",Vo);var Ho=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}vs(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=p("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},i.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var t=new So(this.player()),e=this.playbackRates();if(e)for(var i=e.length-1;0<=i;i--)t.addChild(new Vo(this.player(),{rate:e[i]+"x"}));return t},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(){for(var t=this.player().playbackRate(),e=this.playbackRates(),i=e[0],n=0;n<e.length;n++)if(e[n]>t){i=e[n];break}this.player().playbackRate(i)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},i.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Co);Ho.prototype.controlText_="Playback Rate",us.registerComponent("PlaybackRateMenuButton",Ho);var Wo=function(t){function e(){return t.apply(this,arguments)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(us);us.registerComponent("Spacer",Wo);var qo=function(t){function e(){return t.apply(this,arguments)||this}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(Wo);us.registerComponent("CustomControlSpacer",qo);var $o=function(t){function e(){return t.apply(this,arguments)||this}return vs(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(us);$o.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Rr&&$o.prototype.options_.children.splice($o.prototype.options_.children.length-1,0,"pictureInPictureToggle"),us.registerComponent("ControlBar",$o);var Go=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"error",n.open),n}vs(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},i.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Ks);Go.prototype.options_=zr({},Ks.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),us.registerComponent("ErrorDisplay",Go);var Xo="vjs-text-track-settings",Yo=["#000","Black"],Ko=["#00F","Blue"],Qo=["#0FF","Cyan"],Zo=["#0F0","Green"],Jo=["#F0F","Magenta"],tl=["#F00","Red"],el=["#FFF","White"],il=["#FF0","Yellow"],nl=["1","Opaque"],rl=["0.5","Semi-Transparent"],sl=["0","Transparent"],al={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Yo,el,tl,Zo,Ko,il,Jo,Qo]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[nl,rl,sl]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[el,Yo,tl,Zo,Ko,il,Jo,Qo]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[nl,rl]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[sl,rl,nl]}};al.windowColor.options=al.backgroundColor.options;var ol=function(t){function e(e,n){var r;return n.temporary=!1,(r=t.call(this,e,n)||this).updateDisplay=Y(ds(r),r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=p("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),i(al,function(t){r.on(r.$(t.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}vs(e,t);var n=e.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(t,e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i="label");var r=al[t],s=r.id.replace("%s",this.id_),a=[e,s].join(" ").trim();return["<"+i+' id="'+s+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map(function(t){var e=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+a+" "+e+'">',n.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var t=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var t,e,i,n=this;return e=function(t,e,i){var r=function(t,e){return ne(t.options[t.options.selectedIndex].value,e)}(n.$(e.selector),e.parser);return void 0!==r&&(t[i]=r),t},void 0===(i={})&&(i=0),Hr(t=al).reduce(function(i,n){return e(i,t[n],n)},i)},n.setValues=function(t){var e=this;i(al,function(i,n){!function(t,e,i){if(e)for(var n=0;n<t.options.length;n++)if(ne(t.options[n].value,i)===e){t.selectedIndex=n;break}}(e.$(i.selector),t[n],i.parser)})},n.setDefaults=function(){var t=this;i(al,function(e){var i=e.hasOwnProperty("default")?e["default"]:0;t.$(e.selector).selectedIndex=i})},n.restoreSettings=function(){var t;try{t=JSON.parse(Or.localStorage.getItem(Xo))}catch(t){Br.warn(t)}t&&this.setValues(t)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?Or.localStorage.setItem(Xo,JSON.stringify(t)):Or.localStorage.removeItem(Xo)}catch(t){Br.warn(t)}}},n.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,e=t&&t.subsCapsButton,i=t&&t.captionsButton;e?e.focus():i&&i.focus()},e}(Ks);us.registerComponent("TextTrackSettings",ol);var ll=function(t){function e(e,i){var n,r=i.ResizeObserver||Or.ResizeObserver;null===i.ResizeObserver&&(r=!1);var s=lt({createEl:!r,reportTouchActivity:!1},i);return(n=t.call(this,e,s)||this).ResizeObserver=i.ResizeObserver||Or.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(t,e,i,n){function r(){var r=this,a=arguments,o=function(){o=s=null,i||t.apply(r,a)};!s&&i&&t.apply(r,a),n.clearTimeout(s),s=n.setTimeout(o,e)}var s;return void 0===n&&(n=Or),r.cancel=function(){n.clearTimeout(s),s=null},r}(function(){n.resizeHandler()},100,!1,ds(n)),r?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var t=n.debouncedHandler_,e=n.unloadListener_=function(){q(this,"resize",t),q(this,"unload",e),e=null};W(n.el_.contentWindow,"unload",e),W(n.el_.contentWindow,"resize",t)}},n.one("load",n.loadListener_)),n}vs(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(us);us.registerComponent("ResizeManager",ll);var cl={trackingThreshold:30,liveTolerance:15},ul=function(t){function e(e,i){var n,r=lt(cl,i,{createEl:!1});return(n=t.call(this,e,r)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),Is&&"hidden"in Rr&&"visibilityState"in Rr&&n.on(Rr,"visibilitychange",n.handleVisibilityChange),n}vs(e,t);var i=e.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Rr.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var e=Number(Or.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(e-this.lastTime_)/1e3;this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),r=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},i.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&2<t,this.skipNextSeeked_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.end(i));return e.length?e.sort()[e.length-1]:1/0},i.seekableStart=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.start(i));return e.length?e.sort()[0]:0},i.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?1/0:t-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,
this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Rr,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),t.prototype.dispose.call(this)},e}(us);us.registerComponent("LiveTracker",ul);var dl,hl=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=Rr.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var i=Rr.createDocumentFragment();e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",Or.Element.prototype.appendChild.call(this,i),this.innerHTML}}),pl=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?bt(Or.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return Or.Element.prototype.setAttribute.call(this,"src",t),t}}),fl=function(t){function e(e,i){var n;n=t.call(this,e,i)||this;var r=e.source,s=!1;if(r&&(n.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var a=n.el_.childNodes,o=a.length,l=[];o--;){var c=a[o];"track"===c.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(c),n.remoteTextTracks().addTrack(c.track),n.textTracks().addTrack(c.track),s||n.el_.hasAttribute("crossorigin")||!Tt(c.src)||(s=!0)):l.push(c))}for(var u=0;u<l.length;u++)n.el_.removeChild(l[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&s&&Br.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(Os||js||Cs)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}vs(e,t);var i=e.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){oe(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){i=[];for(var t=0;t<n.length;t++){var e=n[t];"metadata"===e.kind&&i.push({track:e,storedMode:e.mode})}}function e(){for(var t=0;t<i.length;t++){var r=i[t];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",e)}var i,n=this.textTracks();t(),n.addEventListener("change",t),this.on("dispose",function(){return n.removeEventListener("change",t)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",t),n.removeEventListener("change",e),n.addEventListener("change",e)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",t),n.addEventListener("change",t),n.removeEventListener("change",e)})},i.overrideNative_=function(t,e){var i=this;if(e===this["featuresNative"+t+"Tracks"]){var n=t.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(t){i.el()[n+"Tracks"].removeEventListener(t,i[n+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!e,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},i.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},i.proxyNativeTracksForType_=function(t){var e=this,i=ba[t],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var s={change:function(){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===t&&e[wa.remoteText.getterName]().trigger(i)},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},a=function(){for(var t=[],e=0;e<r.length;e++){for(var i=!1,s=0;s<n.length;s++)if(n[s]===r[e]){i=!0;break}i||t.push(r[e])}for(;t.length;)r.removeTrack(t.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(t){var i=s[t];n.addEventListener(t,i),e.on("dispose",function(){return n.removeEventListener(t,i)})}),this.on("loadstart",a),this.on("dispose",function(){return e.off("loadstart",a)})}},i.proxyNativeTracks_=function(){var t=this;ba.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},i.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var i=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(i,t),e.disposeMediaElement(t),t=i}else{t=Rr.createElement("video");var r=lt({},this.options_.tag&&w(this.options_.tag));Os&&!0===this.options_.nativeControlsForTouch||delete r.controls,b(t,n(r,{id:this.options_.techId,"class":"vjs-tech"}))}t.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&k(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var s=["loop","muted","playsinline","autoplay"],a=0;a<s.length;a++){var o=s[a],l=this.options_[o];void 0!==l&&(l?k(t,o,o):S(t,o),t[o]=l)}return t},i.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,i=function(){e=!0};this.on("loadstart",i);var n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),e||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=t.readyState&&r.push("loadeddata"),3<=t.readyState&&r.push("canplay"),4<=t.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},i.setScrubbing=function(t){this.isScrubbing_=t},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&Ns?this.el_.fastSeek(t):this.el_.currentTime=t}catch(t){Br(t,"Video is not ready. (Video.js)")}},i.duration=function(){var t=this;return this.el_.duration===1/0&&ks&&As&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){t.off("webkitbeginfullscreen",i),t.off("webkitendfullscreen",e)})}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=Or.navigator&&Or.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},i.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)mt(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},i.reset=function(){e.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(t){this.el_.controls=!!t},i.addTextTrack=function(e,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,n):t.prototype.addTextTrack.call(this,e,i,n)},i.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var i=Rr.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e["default"]&&(i["default"]=e["default"]),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},i.addRemoteTextTrack=function(e,i){var n=t.prototype.addRemoteTextTrack.call(this,e,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var i=this.$$("track"),n=i.length;n--;)e!==i[n]&&e!==i[n].track||this.el().removeChild(i[n])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),Or.performance&&"function"==typeof Or.performance.now?t.creationTime=Or.performance.now():Or.performance&&Or.performance.timing&&"number"==typeof Or.performance.timing.navigationStart&&(t.creationTime=Or.Date.now()-Or.performance.timing.navigationStart),t},e}(Ra);le(fl,"TEST_VID",function(){if(c()){var t=Rr.createElement("video"),e=Rr.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}}),fl.isSupported=function(){try{fl.TEST_VID.volume=.5}catch(Dr){return!1}return!(!fl.TEST_VID||!fl.TEST_VID.canPlayType)},fl.canPlayType=function(t){return fl.TEST_VID.canPlayType(t)},fl.canPlaySource=function(t){return fl.canPlayType(t.type)},fl.canControlVolume=function(){try{var t=fl.TEST_VID.volume;return fl.TEST_VID.volume=t/2+.1,t!==fl.TEST_VID.volume}catch(t){return!1}},fl.canMuteVolume=function(){try{var t=fl.TEST_VID.muted;return fl.TEST_VID.muted=!t,fl.TEST_VID.muted?k(fl.TEST_VID,"muted","muted"):S(fl.TEST_VID,"muted"),t!==fl.TEST_VID.muted}catch(t){return!1}},fl.canControlPlaybackRate=function(){if(ks&&As&&Ps<58)return!1;try{var t=fl.TEST_VID.playbackRate;return fl.TEST_VID.playbackRate=t/2+.1,t!==fl.TEST_VID.playbackRate}catch(t){return!1}},fl.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(Rr.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(Rr.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(Rr.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(Rr.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},fl.supportsNativeTextTracks=function(){return Ns||Rs&&As},fl.supportsNativeVideoTracks=function(){return!(!fl.TEST_VID||!fl.TEST_VID.videoTracks)},fl.supportsNativeAudioTracks=function(){return!(!fl.TEST_VID||!fl.TEST_VID.audioTracks)},fl.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],i=t[1];le(fl.prototype,e,function(){return fl[i]()},!0)}),fl.prototype.movingMediaElementInDOM=!Rs,fl.prototype.featuresFullscreenResize=!0,fl.prototype.featuresProgressEvents=!0,fl.prototype.featuresTimeupdateEvents=!0,fl.patchCanPlayType=function(){4<=Ss&&!xs&&!As&&(dl=fl.TEST_VID&&fl.TEST_VID.constructor.prototype.canPlayType,fl.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":dl.call(this,t)})},fl.unpatchCanPlayType=function(){var t=fl.TEST_VID.constructor.prototype.canPlayType;return dl&&(fl.TEST_VID.constructor.prototype.canPlayType=dl),t},fl.patchCanPlayType(),fl.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},fl.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),i=e.length;i--;)t.removeChild(e[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){fl.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){fl.prototype["set"+ot(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){fl.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){fl.prototype["set"+ot(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){fl.prototype[t]=function(){return this.el_[t]()}}),Ra.withSourceHandlers(fl),fl.nativeSourceHandler={},fl.nativeSourceHandler.canPlayType=function(t){try{return fl.TEST_VID.canPlayType(t)}catch(t){return""}},fl.nativeSourceHandler.canHandleSource=function(t){if(t.type)return fl.nativeSourceHandler.canPlayType(t.type);if(t.src){var e=wt(t.src);return fl.nativeSourceHandler.canPlayType("video/"+e)}return""},fl.nativeSourceHandler.handleSource=function(t,e){e.setSrc(t.src)},fl.nativeSourceHandler.dispose=function(){},fl.registerSourceHandler(fl.nativeSourceHandler),Ra.registerTech("Html5",fl);var ml=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],gl={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},vl=["tiny","xsmall","small","medium","large","xlarge","huge"],yl={};vl.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;yl[t]="vjs-layout-"+e});var _l={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},bl=function(t){function e(i,r,s){var a;if(i.id=i.id||r.id||"vjs_video_"+U(),(r=n(e.getTagSettings(i),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof i.closest){var o=i.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var l=i;l&&1===l.nodeType;){if(w(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}if((a=t.call(this,null,r,s)||this).boundDocumentFullscreenChange_=Y(ds(a),a.documentFullscreenChange_),a.boundFullWindowOnEscKey_=Y(ds(a),a.fullWindowOnEscKey),a.isFullscreen_=!1,a.log=Ur(a.id_),a.fsApi_=Bs,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=i,a.tagAttributes=i&&w(i),a.language(a.options_.language),r.languages){var c={};Object.getOwnPropertyNames(r.languages).forEach(function(t){c[t.toLowerCase()]=r.languages[t]}),a.languages_=c}else a.languages_=e.prototype.options_.languages;a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],i.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(t){if("function"!=typeof a[t])throw new Error('plugin "'+t+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),rt(ds(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(W(Rr,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on("playerreset",a.updateStyleEl_);var u=lt(a.options_);r.plugins&&Object.keys(r.plugins).forEach(function(t){a[t](r.plugins[t])}),r.debug&&a.debug(!0),a.options_.playerOptions=u,a.middleware_=[],a.initChildren(),a.isAudio("audio"===i.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Os&&a.addClass("vjs-touch-enabled"),Rs||a.addClass("vjs-workinghover"),e.players[a.id_]=ds(a);var d=Lr.split(".")[0];return a.addClass("vjs-v"+d),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("stageclick",a.handleStageClick_),a.on("keydown",a.handleKeyDown),a.on("languagechange",a.handleLanguagechange),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}vs(e,t);var i=e.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),q(Rr,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),q(Rr,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Fa[this.id()]=null,Ta.names.forEach(function(t){var e=Ta[t],n=i[e.getterName]();n&&n.off&&n.off()}),t.prototype.dispose.call(this)},i.createEl=function(){var e,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=i.parentNode:r||(e=this.el_=t.prototype.createEl.call(this,"div"));var s=w(i);if(r){for(e=this.el_=i,i=this.tag=Rr.createElement("video");e.children.length;)i.appendChild(e.firstChild);g(e,"video-js")||v(e,"video-js"),e.appendChild(i),n=this.playerElIngest_=e,Object.keys(e).forEach(function(t){try{i[t]=e[t]}catch(t){}})}if(i.setAttribute("tabindex","-1"),s.tabindex="-1",(Is||As&&Ds)&&(i.setAttribute("role","application"),s.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(t){r&&"class"===t||e.setAttribute(t,s[t]),r&&i.setAttribute(t,s[t])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=e.player=this,this.addClass("vjs-paused"),!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=F("vjs-styles-dimensions");var a=Wr(".vjs-styles-defaults"),o=Wr("head");o.insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=i.getElementsByTagName("a"),c=0;c<l.length;c++){var u=l.item(c);v(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(e,i),m(i,e),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=e},i.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):Br.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},i.width=function(t){return this.dimension("width",t)},i.height=function(t){return this.dimension("height",t)},i.dimension=function(t,e){var i=t+"_";if(void 0===e)return this[i]||0;if(""===e||"auto"===e)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(e);isNaN(n)?Br.error('Improper value "'+e+'" supplied for for '+t):(this[i]=n,this.updateStyleEl_())},i.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,ns(this)&&this.off("playerreset",this.updateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(t,e){ns(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))}(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE){var t,e,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),B(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=s&&(o.width=s),0<=a&&(o.height=a))}},i.loadTech_=function(t,e){var i=this;this.tech_&&this.unloadTech_();var r=ot(t),s=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==r&&this.tag&&(Ra.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+s+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ta.names.forEach(function(t){var e=Ta[t];a[e.getterName]=i[e.privateName]}),n(a,this.options_[r]),n(a,this.options_[s]),n(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var o=Ra.getTech(t);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(Y(this,this.handleTechReady_),!0),Gs(this.textTracksJson_||[],this.tech_),ml.forEach(function(t){i.on(i.tech_,t,i["handleTech"+ot(t)+"_"])}),Object.keys(gl).forEach(function(t){i.on(i.tech_,t,function(e){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+gl[t]+"_"].bind(i),event:e}):i["handleTech"+gl[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||m(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var t=this;Ta.names.forEach(function(e){var i=Ta[e];t[i.privateName]=t[i.getterName]()}),this.textTracksJson_=$s(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(t){return void 0===t&&Br.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},i.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var i,n=function(){function t(){e.muted(i)}var i=e.muted();e.muted(!0),e.playTerminatedQueue_.push(t);var n=e.play();if(ft(n))return n["catch"](t)};if("any"===t&&!0!==this.muted()?ft(i=this.play())&&(i=i["catch"](n)):i="muted"===t&&!0!==this.muted()?n():this.play(),ft(i))return i.then(function(){e.trigger({type:"autoplay-success",autoplay:t})})["catch"](function(){e.trigger({type:"autoplay-failure",autoplay:t})})}},i.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,i="";"string"!=typeof e&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var i=t.cache_.sources.filter(function(t){return t.src===e});if(i.length)return i[0].type;for(var n=t.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===e)return s.type}return Yt(e)}(this,e)),this.cache_.source=lt({},t,{src:e,type:i});for(var n=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),r=[],s=this.$$("source"),a=[],o=0;o<s.length;o++){var l=w(s[o]);r.push(l),l.src&&l.src===e&&a.push(l.src)}a.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},i.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var i=function(t){return e.updateSourceCaches_(t)},n=this.currentSource().src,r=t.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(i=function(){})),i(r),t.src||this.tech_.any(["sourceset","loadstart"],function(t){if("sourceset"!==t.type){var i=e.techGet("currentSrc");e.lastSource_.tech=i,e.updateSourceCaches_(i)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},i.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",function i(){e!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",i))})},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(Br.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(t){j(t)&&this.controls_&&(this.paused()?mt(this.play()):this.pause())},i.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(t){t.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(t){var e=t.target.player;if(!e||e===this){var i=this.el(),n=Rr[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},i.handleTechFullscreenChange_=function(t,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))},i.handleTechFullscreenError_=function(t,e){this.trigger("fullscreenerror",e)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(){this.isInPictureInPicture(!1)},
i.handleTechError_=function(){var t=this.tech_.error();this.error(t)},i.handleTechTextData_=function(t,e){var i=null;1<arguments.length&&(i=e),this.trigger("textdata",i)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},i.techCall_=function(t,e){this.ready(function(){if(t in za)return function(t,e,i,n){return e[i](t.reduce(Gt(i),n))}(this.middleware_,this.tech_,t,e);if(t in Va)return $t(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw Br(t),t}},!0)},i.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Ua)return function(t,e,i){return t.reduceRight(Gt(i),e[i]())}(this.middleware_,this.tech_,t);if(t in Va)return $t(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(i){if(void 0===this.tech_[t])throw Br("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",i),i;if("TypeError"===i.name)throw Br("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i;throw Br(i),i}}},i.play=function(){var t=this,e=this.options_.Promise||Or.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},i.play_=function(t){var e=this;void 0===t&&(t=mt),this.playCallbacks_.push(t);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!Ns&&!Rs||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},i.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(t){t()})},i.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||dt(0,0)},i.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=dt(0,0)),t},i.bufferedPercent=function(){return ht(this.buffered(),this.duration())},i.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),i=t.end(t.length-1);return e<i&&(i=e),i},i.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(0<e&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},i.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},i.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(t){if(void 0===t)return this.isFullscreen_;var e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},i.requestFullscreen=function(t){var e=this.options_.Promise||Or.Promise;if(e){var i=this;return new e(function(e,n){function r(){i.off("fullscreenerror",a),i.off("fullscreenchange",s)}function s(){r(),e()}function a(t,e){r(),n(e)}i.one("fullscreenchange",s),i.one("fullscreenerror",a);var o=i.requestFullscreenHelper_(t);if(o)return o.then(r,r),o})}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(t){var e,i=this;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](e);return n&&n.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var t=this.options_.Promise||Or.Promise;if(t){var e=this;return new t(function(t,i){function n(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){n(),t()}function s(t,e){n(),i(e)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);var a=e.exitFullscreenHelper_();if(a)return a.then(n,n),a})}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var e=Rr[this.fsApi_.exitFullscreen]();return e&&e.then(function(){return t.isFullscreen(!1)}),e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Rr.documentElement.style.overflow,W(Rr,"keydown",this.boundFullWindowOnEscKey_),Rr.documentElement.style.overflow="hidden",v(Rr.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(t){Xs.isEventKey(t,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,q(Rr,"keydown",this.boundFullWindowOnEscKey_),Rr.documentElement.style.overflow=this.docOrigOverflow,y(Rr.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Rr&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Rr)return Rr.exitPictureInPicture()},i.handleKeyDown=function(t){var e=this.options_.userActions;e&&e.hotkeys&&!function(t){var e=t.tagName.toLowerCase();return!!t.isContentEditable||("input"===e?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(e))}(this.el_.ownerDocument.activeElement)&&("function"==typeof e.hotkeys?e.hotkeys.call(this,t):this.handleHotkeys(t))},i.handleHotkeys=function(t){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},i=e.fullscreenKey,n=void 0===i?function(t){return Xs.isEventKey(t,"f")}:i,r=e.muteKey,s=void 0===r?function(t){return Xs.isEventKey(t,"m")}:r,a=e.playPauseKey,o=void 0===a?function(t){return Xs.isEventKey(t,"k")||Xs.isEventKey(t,"Space")}:a;if(n.call(this,t)){t.preventDefault(),t.stopPropagation();var l=us.getComponent("FullscreenToggle");!1!==Rr[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,t)}else s.call(this,t)?(t.preventDefault(),t.stopPropagation(),us.getComponent("MuteToggle").prototype.handleClick.call(this,t)):o.call(this,t)&&(t.preventDefault(),t.stopPropagation(),us.getComponent("PlayToggle").prototype.handleClick.call(this,t))},i.canPlayType=function(t){for(var e,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],s=Ra.getTech(r);if(s=s||us.getComponent(r)){if(s.isSupported()&&(e=s.canPlayType(t)))return e}else Br.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(t){function e(t,e,i){var n;return t.some(function(t){return e.some(function(e){if(n=i(t,e))return!0})}),n}function i(t,e){var i=t[0];if(t[1].canPlaySource(e,r.options_[i.toLowerCase()]))return{source:e,tech:i}}var n,r=this,s=this.options_.techOrder.map(function(t){return[t,Ra.getTech(t)]}).filter(function(t){var e=t[0],i=t[1];return i?i.isSupported():(Br.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?e(t,s,(n=i,function(t,e){return n(e,t)})):e(s,t,i))||!1},i.src=function(t){var e=this;if(void 0===t)return this.cache_.src||"";var i=function n(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){t=n(t),Array.isArray(t)?e=e.concat(t):r(t)&&e.push(t)}),t=e}else t="string"==typeof t&&t.trim()?[Kt({src:t})]:r(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Kt(t)]:[];return t}(t);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),qt(this,i[0],function(t,n){if(e.middleware_=n,e.cache_.sources=i,e.updateSourceCaches_(t),e.src_(t))return 1<i.length?e.src(i.slice(1)):(e.changingSrc_=!1,e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void e.triggerReady());!function(t,e){t.forEach(function(t){return t.setTech&&t.setTech(e)})}(n,e.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},i.src_=function(t){var e=this,i=this.selectSource([t]);return!i||(function(t,e){return ot(t)===ot(e)}(i.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){e.changingSrc_=!1})),!1)},i.load=function(){this.techCall_("load")},i.reset=function(){var t=this,e=this.options_.Promise||Or.Promise;this.paused()||!e?this.doReset_():mt(this.play().then(function(){return t.doReset_()}))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ns(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,e=t.durationDisplay,i=t.remainingTimeDisplay;e&&e.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},i.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=void 0===e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)},i.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},i.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},i.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(t){if(void 0===t)return this.error_||null;if(this.options_.suppressNotSupportedError&&t&&4===t.code){var e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",function(){this.off(["click","touchstart"],e)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new pt(t),this.addClass("vjs-error"),Br.error("(CODE:"+this.error_.code+" "+pt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},i.reportUserActivity=function(){this.userActivity_=!0},i.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){function t(){r(),this.clearInterval(e)}var e,i,n,r=Y(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(t){t.screenX===i&&t.screenY===n||(i=t.screenX,n=t.screenY,r())}),this.on("mouseup",t),this.on("mouseleave",t);var s,a=this.getChild("controlBar");!a||Rs||ks||(a.on("mouseenter",function(){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),a.on("mouseleave",function(){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t<=0||(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},i.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},i.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},i.addTextTrack=function(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)},i.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},i.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e=e||t,this.tech_)return this.tech_.removeRemoteTextTrack(e)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),ns(this)&&this.trigger("languagechange"))},i.languages=function(){return lt(e.prototype.options_.languages,this.languages_)},i.toJSON=function(){var t=lt(this.options_),e=t.tracks;t.tracks=[];for(var i=0;i<e.length;i++){var n=e[i];(n=lt(n)).player=void 0,t.tracks[i]=n}return t},i.createModal=function(t,e){var i=this;(e=e||{}).content=t||"";var n=new Ks(this,e);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),i=0;i<vl.length;i++){var n=vl[i];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass(yl[t]),this.addClass(yl[n]),this.breakpoint_=n;break}}},i.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},i.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=n({},_l,t),this.updateCurrentBreakpoint_()),n(this.breakpoints_)},i.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return yl[this.breakpoint_]||""},i.loadMedia=function(t,e){var i=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=lt(t);var n=this.cache_.media,r=n.artwork,s=n.poster,a=n.src,o=n.textTracks;!r&&s&&(this.cache_.media.artwork=[{src:s,type:Yt(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach(function(t){return i.addRemoteTextTrack(t,!1)}),this.ready(e)}},i.getMedia=function(){if(this.cache_.media)return lt(this.cache_.media);var t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}})};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Yt(e.poster)}]),e},e.getTagSettings=function(t){var e={sources:[],tracks:[]},i=w(t),r=i["data-setup"];if(g(t,"vjs-fill")&&(i.fill=!0),g(t,"vjs-fluid")&&(i.fluid=!0),null!==r){var s=qs(r||"{}"),a=s[0],o=s[1];a&&Br.error(a),n(i,o)}if(n(e,i),t.hasChildNodes())for(var l=t.childNodes,c=0,u=l.length;c<u;c++){var d=l[c],h=d.nodeName.toLowerCase();"source"===h?e.sources.push(w(d)):"track"===h&&e.tracks.push(w(d))}return e},i.flexNotSupported_=function(){var t=Rr.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},i.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},e}(us);Ta.names.forEach(function(t){var e=Ta[t];bl.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),bl.prototype.crossorigin=bl.prototype.crossOrigin,bl.players={};var wl=Or.navigator;bl.prototype.options_={techOrder:Ra.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:wl&&(wl.languages&&wl.languages[0]||wl.userLanguage||wl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){bl.prototype[t]=function(){return this.techGet_(t)}}),ml.forEach(function(t){bl.prototype["handleTech"+ot(t)+"_"]=function(){return this.trigger(t)}}),us.registerComponent("Player",bl);var Tl=e(function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e}),kl=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Dr){return!1}},Sl=e(function(t){function e(){return kl()?t.exports=e=Reflect.construct:t.exports=e=function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Tl(r,i.prototype),r},e.apply(null,arguments)}t.exports=e}),Cl="plugin",xl="activePlugins_",El={},Al=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),rt(this),delete this.trigger,st(this,this.constructor.defaultState),de(e,this.name),this.dispose=Y(this,this.dispose),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},e.trigger=function(t,e){return void 0===e&&(e={}),$(this.eventBusEl_,t,this.getEventHash(e))},e.handleStateChanged=function(){},e.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[xl][t]=!1,this.player=this.state=null,e[t]=pe(t,El[t])},t.isBasic=function(e){var i="string"==typeof e?ue(e):e;return"function"==typeof i&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(e,i){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(ce(e))Br.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(bl.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof i+".");return El[e]=i,e!==Cl&&(t.isBasic(i)?bl.prototype[e]=function(t,e){function i(){he(this,{name:t,plugin:e,instance:null},!0);var i=e.apply(this,arguments);return de(this,t),he(this,{name:t,plugin:e,instance:i}),i}return Object.keys(e).forEach(function(t){i[t]=e[t]}),i}(e,i):bl.prototype[e]=pe(e,i)),i},t.deregisterPlugin=function(t){if(t===Cl)throw new Error("Cannot de-register base plugin.");ce(t)&&(delete El[t],delete bl.prototype[t])},t.getPlugins=function(t){var e;return void 0===t&&(t=Object.keys(El)),t.forEach(function(t){var i=ue(t);i&&((e=e||{})[t]=i)}),e},t.getPluginVersion=function(t){var e=ue(t);return e&&e.VERSION||""},t}();Al.getPlugin=ue,Al.BASE_PLUGIN_NAME=Cl,Al.registerPlugin(Cl,Al),bl.prototype.usingPlugin=function(t){return!!this[xl]&&!0===this[xl][t]},bl.prototype.hasPlugin=function(t){return!!ce(t)};var Pl=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tl(t,e)},Il=function(t){return 0===t.indexOf("#")?t.slice(1):t};if(fe.hooks_={},fe.hooks=function(t,e){return fe.hooks_[t]=fe.hooks_[t]||[],e&&(fe.hooks_[t]=fe.hooks_[t].concat(e)),fe.hooks_[t]},fe.hook=function(t,e){fe.hooks(t,e)},fe.hookOnce=function(t,e){fe.hooks(t,[].concat(e).map(function(e){return function i(){return fe.removeHook(t,i),e.apply(void 0,arguments)}}))},fe.removeHook=function(t,e){var i=fe.hooks(t).indexOf(e);return!(i<=-1||(fe.hooks_[t]=fe.hooks_[t].slice(),fe.hooks_[t].splice(i,1),0))},!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE&&c()){var Ll=Wr(".vjs-styles-defaults");if(!Ll){Ll=F("vjs-styles-defaults");var Dl=Wr("head");Dl&&Dl.insertBefore(Ll,Dl.firstChild),B(Ll,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}R(1,fe),fe.VERSION=Lr,fe.options=bl.prototype.options_,fe.getPlayers=function(){return bl.players},fe.getPlayer=function(t){var e,i=bl.players;if("string"==typeof t){var n=Il(t),r=i[n];if(r)return r;e=Wr("#"+n)}else e=t;if(u(e)){var s=e,a=s.player,o=s.playerId;if(a||i[o])return a||i[o]}},fe.getAllPlayers=function(){return Object.keys(bl.players).map(function(t){return bl.players[t]}).filter(Boolean)},fe.players=bl.players,fe.getComponent=us.getComponent,fe.registerComponent=function(t,e){Ra.isTech(e)&&Br.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),us.registerComponent.call(us,t,e)},fe.getTech=Ra.getTech,fe.registerTech=Ra.registerTech,fe.use=function(t,e){Na[t]=Na[t]||[],Na[t].push(e)},Object.defineProperty(fe,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(fe.middleware,"TERMINATOR",{value:Ba,writeable:!1,enumerable:!0}),fe.browser=Fs,fe.TOUCH_ENABLED=Os,fe.extend=function(t,e){void 0===e&&(e={});var i=function(){t.apply(this,arguments)},n={};for(var r in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(i=e.constructor),n=e):"function"==typeof e&&(i=e),Pl(i,t),t&&(i.super_=t),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},fe.mergeOptions=lt,fe.bind=Y,fe.registerPlugin=Al.registerPlugin,fe.deregisterPlugin=Al.deregisterPlugin,fe.plugin=function(t,e){return Br.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Al.registerPlugin(t,e)},fe.getPlugins=Al.getPlugins,fe.getPlugin=Al.getPlugin,fe.getPluginVersion=Al.getPluginVersion,fe.addLanguage=function(t,e){var i;return t=(""+t).toLowerCase(),fe.options.languages=lt(fe.options.languages,((i={})[t]=e,i)),fe.options.languages[t]},fe.log=Br,fe.createLogger=Ur,fe.createTimeRange=fe.createTimeRanges=dt,fe.formatTime=te,fe.setFormatTime=function(t){eo=t},fe.resetFormatTime=function(){eo=Jt},fe.parseUrl=_t,fe.isCrossOrigin=Tt,fe.EventTarget=Q,fe.on=W,fe.one=G,fe.off=q,fe.trigger=$,fe.xhr=fa,fe.TextTrack=ga,fe.AudioTrack=va,fe.VideoTrack=ya,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){fe[t]=function(){return Br.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),$r[t].apply(null,arguments)}}),fe.computedStyle=a,fe.dom=$r,fe.url=ca,fe.defineLazyProperty=le;var Ol,Ml=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},jl=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e},Rl=void 0!==Dr?Dr:"undefined"!=typeof window?window:{},Nl="undefined"!=typeof document?document:Rl["__GLOBAL_DOCUMENT_CACHE@4"]||(Rl["__GLOBAL_DOCUMENT_CACHE@4"]=Mr),Fl="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},Bl=me(e(function(t){var e,i,n,r,s;e=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=s.normalizePath(d)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(c)},parseURL:function(t){var i=e.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s})),Ul=me(Or),zl=function(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=Bl.buildAbsoluteURL(Ul.location&&Ul.location.href||"",t)),Bl.buildAbsoluteURL(t,e))},Vl=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),-1<i},e.trigger=function(t,e){var i=this.listeners[t];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,e);else for(var s=Array.prototype.slice.call(arguments,1),a=i.length,o=0;o<a;++o)i[o].apply(this,s)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),Hl=e(function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},e.apply(this,arguments)}t.exports=e}),Wl=(Ol=Or)&&"object"==typeof Ol&&"default"in Ol?Ol["default"]:Ol,ql=function(t){for(var e=function(t){return Wl.atob?Wl.atob(t):Buffer.from(t,"base64").toString("binary")}(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},$l=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return jl(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(Vl),Gl=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}jl(e,t);var i=e.prototype;return i.push=function(t){var e,i,n=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(function(e,i){var n=i(t);return n===t?e:e.concat([n])},[t]).forEach(function(t){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void n.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i)
;if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void n.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void n.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var s=ge(e[1]);if(s.URI&&(i.uri=s.URI),s.BYTERANGE){var a=s.BYTERANGE.split("@"),o=a[0],l=a[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),l&&(i.byterange.offset=parseInt(l,10))}}n.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=ge(e[1]),i.attributes.RESOLUTION){var c=i.attributes.RESOLUTION.split("x"),u={};c[0]&&(u.width=parseInt(c[0],10)),c[1]&&(u.height=parseInt(c[1],10)),i.attributes.RESOLUTION=u}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=ge(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))n.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=ge(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=ge(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);n.trigger("data",{type:"tag",data:t.slice(4)})}}}else n.trigger("data",{type:"comment",text:t.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,n=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push(function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:n,segment:s}),!0})},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push(function(t){return e.test(t)?i(t):t})},e}(Vl),Xl=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new $l,e.parseStream=new Gl,e.lineStream.pipe(e.parseStream);var i,n,r=Ml(e),s=[],a={},o={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0;return e.parseStream.on("data",function(t){var e,u;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((a.byterange=e).length=t.length,"offset"in t||(t.offset=c)),"offset"in t&&((a.byterange=e).offset=t.offset),c=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:ql(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},"undefined"!=typeof t.attributes.IV&&(n.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,l=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||o,t.attributes?(a.attributes||(a.attributes={}),Hl(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||o,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(u={"default":/yes/i.test(t.attributes.DEFAULT)})["default"]?u.autoselect=!0:u.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(u.language=t.attributes.LANGUAGE),t.attributes.URI&&(u.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(u.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(u.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(u.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data}})[t.tagType]||function(){}).call(r)},uri:function(){a.uri=t.uri,s.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),n&&(a.key=n),a.timeline=l,i&&(a.map=i),a={}},comment:function(){},custom:function(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),e}jl(e,t);var i=e.prototype;return i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(Vl),Yl=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,n=/^application\/dash\+xml/i;e.simpleTypeFromSourceType=function(t){return i.test(t)?"hls":n.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null}});
/*! @name m3u8-parser @version 4.5.0 @license Apache-2.0 */t(Yl);var Kl=Yl.simpleTypeFromSourceType,Ql=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Zl=new RegExp("[\\-\\.0-9"+Ql.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Jl=new RegExp("^"+Ql.source+Zl.source+"*(?::"+Ql.source+Zl.source+"*)?$"),tc=0,ec=1,ic=2,nc=3,rc=4,sc=5,ac=6,oc=7;ve.prototype={parse:function(t,e,i){var n=this.domBuilder;n.startDocument(),ke(e,e={}),function(t,e,i,n,r){function s(t){var e=t.slice(1,-1);return e in i?i[e]:"#"===e.charAt(0)?function(t){if(65535<t){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(r.error("entity not found:"+t),t)}function a(e){if(f<e){var i=t.substring(f,e).replace(/&#?\w+;/g,s);d&&o(f),n.characters(i,0,e-f),f=e}}function o(e,i){for(;c<=e&&(i=u.exec(t));)l=i.index,c=l+i[0].length,d.lineNumber++;d.columnNumber=e-l+1}for(var l=0,c=0,u=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,h=[{currentNSMap:e}],p={},f=0;;){try{var m=t.indexOf("<",f);if(m<0){if(!t.substr(f).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(t.substr(f));g.appendChild(v),n.currentElement=v}return}switch(f<m&&a(m),t.charAt(m+1)){case"/":var y=t.indexOf(">",m+3),_=t.substring(m+2,y),b=h.pop();y<0?(_=t.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),y=m+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),y=m+1+_.length);var w=b.localNSMap,T=b.tagName==_;if(T||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(n.endElement(b.uri,b.localName,_),w)for(var k in w)n.endPrefixMapping(k);T||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);y++;break;case"?":d&&o(m),y=Ce(t,m,n);break;case"!":d&&o(m),y=Se(t,m,n,r);break;default:d&&o(m);var S=new xe,C=h[h.length-1].currentNSMap,x=(y=_e(t,m,S,C,s,r),S.length);if(!S.closed&&Te(t,y,S.tagName,p)&&(S.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),d&&x){for(var E=ye(d,{}),A=0;A<x;A++){var P=S[A];o(P.offset),P.locator=ye(d,{})}n.locator=E,be(S,n,C)&&h.push(S),n.locator=d}else be(S,n,C)&&h.push(S);"http://www.w3.org/1999/xhtml"!==S.uri||S.closed?y++:y=we(t,y,S.tagName,s,n)}}catch(e){r.error("element parse error: "+e),y=-1}f<y?f=y:a(Math.max(m,f)+1)}}(t,e,i,n,this.errorHandler),n.endDocument()}},xe.prototype={setTagName:function(t){if(!Jl.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,i){if(!Jl.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},Ee({},Ee.prototype)instanceof Ee||(Ee=function(t,e){function i(){}for(e in i.prototype=e,i=new i,t)i[e]=t[e];return i});var lc={XMLReader:ve},cc="http://www.w3.org/1999/xhtml",uc={},dc=uc.ELEMENT_NODE=1,hc=uc.ATTRIBUTE_NODE=2,pc=uc.TEXT_NODE=3,fc=uc.CDATA_SECTION_NODE=4,mc=uc.ENTITY_REFERENCE_NODE=5,gc=uc.ENTITY_NODE=6,vc=uc.PROCESSING_INSTRUCTION_NODE=7,yc=uc.COMMENT_NODE=8,_c=uc.DOCUMENT_NODE=9,bc=uc.DOCUMENT_TYPE_NODE=10,wc=uc.DOCUMENT_FRAGMENT_NODE=11,Tc=uc.NOTATION_NODE=12,kc={},Sc={},Cc=(kc.INDEX_SIZE_ERR=(Sc[1]="Index size error",1),kc.DOMSTRING_SIZE_ERR=(Sc[2]="DOMString size error",2),kc.HIERARCHY_REQUEST_ERR=(Sc[3]="Hierarchy request error",3)),xc=(kc.WRONG_DOCUMENT_ERR=(Sc[4]="Wrong document",4),kc.INVALID_CHARACTER_ERR=(Sc[5]="Invalid character",5),kc.NO_DATA_ALLOWED_ERR=(Sc[6]="No data allowed",6),kc.NO_MODIFICATION_ALLOWED_ERR=(Sc[7]="No modification allowed",7),kc.NOT_FOUND_ERR=(Sc[8]="Not found",8)),Ec=(kc.NOT_SUPPORTED_ERR=(Sc[9]="Not supported",9),kc.INUSE_ATTRIBUTE_ERR=(Sc[10]="Attribute in use",10));kc.INVALID_STATE_ERR=(Sc[11]="Invalid state",11),kc.SYNTAX_ERR=(Sc[12]="Syntax error",12),kc.INVALID_MODIFICATION_ERR=(Sc[13]="Invalid modification",13),kc.NAMESPACE_ERR=(Sc[14]="Invalid namespace",14),kc.INVALID_ACCESS_ERR=(Sc[15]="Invalid access",15),Ie.prototype=Error.prototype,Ae(kc,Ie),Le.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var i=[],n=0;n<this.length;n++)li(this[n],i,t,e);return i.join("")}},De.prototype.item=function(t){return Oe(this),this[t]},Pe(De,Le),Me.prototype={length:0,item:Le.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ie(Ec);var i=this.getNamedItem(t.nodeName);return Re(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new Ie(Ec);return e=this.getNamedItemNS(t.namespaceURI,t.localName),Re(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return Ne(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return Ne(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==t)return n}return null}},Fe.prototype={hasFeature:function(t,e){var i=this._features[t.toLowerCase()];return!(!i||e&&!(e in i))},createDocument:function(t,e,i){var n=new Ve;if(n.implementation=this,n.childNodes=new Le,(n.doctype=i)&&n.appendChild(i),e){var r=n.createElementNS(t,e);n.appendChild(r)}return n},createDocumentType:function(t,e,i){var n=new Je;return n.name=t,n.nodeName=t,n.publicId=e,n.systemId=i,n}},Be.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return $e(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return qe(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function e(t,i,n){var r=new i.constructor;for(var s in i){var a=i[s];"object"!=typeof a&&a!=r[s]&&(r[s]=a)}switch(i.childNodes&&(r.childNodes=new Le),r.ownerDocument=t,r.nodeType){case dc:var o=i.attributes,l=r.attributes=new Me,c=o.length;l._ownerElement=r;for(var u=0;u<c;u++)r.setAttributeNode(e(t,o.item(u),!0));break;case hc:n=!0}if(n)for(var d=i.firstChild;d;)r.appendChild(e(t,d,n)),d=d.nextSibling;return r}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==pc&&t.nodeType==pc?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var n in i)if(i[n]==t)return n;e=e.nodeType==hc?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&t in i)return i[t];e=e.nodeType==hc?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},Ae(uc,Be),Ae(uc,Be.prototype),Ve.prototype={nodeName:"#document",nodeType:_c,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType!=wc)return null==this.documentElement&&t.nodeType==dc&&(this.documentElement=t),$e(this,t,e),t.ownerDocument=this,t;for(var i=t.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),qe(this,t)},importNode:function(t,e){return function i(t,e,n){var r;switch(e.nodeType){case dc:(r=e.cloneNode(!1)).ownerDocument=t;case wc:break;case hc:n=!0}if((r=r||e.cloneNode(!1)).ownerDocument=t,r.parentNode=null,n)for(var s=e.firstChild;s;)r.appendChild(i(t,s,n)),s=s.nextSibling;return r}(this,t,e)},getElementById:function(t){var e=null;return ze(this.documentElement,function(i){if(i.nodeType==dc&&i.getAttribute("id")==t)return e=i,!0}),e},createElement:function(t){var e=new Ge;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new Le,(e.attributes=new Me)._ownerElement=e},createDocumentFragment:function(){var t=new ni;return t.ownerDocument=this,t.childNodes=new Le,t},createTextNode:function(t){var e=new Ke;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Qe;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Ze;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new ri;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new Xe;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new ii;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Ge,n=e.split(":"),r=i.attributes=new Me;return i.childNodes=new Le,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,r._ownerElement=i},createAttributeNS:function(t,e){var i=new Xe,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}},Pe(Ve,Be),Ve.prototype.getElementsByTagName=(Ge.prototype={nodeType:dc,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===wc?this.insertBefore(t,null):function(t,e){var i=e.parentNode;if(i){var n=t.lastChild;i.removeChild(e),n=t.lastChild}return n=t.lastChild,e.parentNode=t,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:t.firstChild=e,t.lastChild=e,We(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new De(this,function(e){var i=[];return ze(e,function(n){n===e||n.nodeType!=dc||"*"!==t&&n.tagName!=t||i.push(n)}),i})},getElementsByTagNameNS:function(t,e){return new De(this,function(i){var n=[];return ze(i,function(r){r===i||r.nodeType!==dc||"*"!==t&&r.namespaceURI!==t||"*"!==e&&r.localName!=e||n.push(r)}),n})}}).getElementsByTagName,Ve.prototype.getElementsByTagNameNS=Ge.prototype.getElementsByTagNameNS,Pe(Ge,Be),Xe.prototype.nodeType=hc,Pe(Xe,Be),Ye.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(){throw new Error(Sc[Cc])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},Pe(Ye,Be),Ke.prototype={nodeName:"#text",nodeType:pc,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},Pe(Ke,Ye),Qe.prototype={nodeName:"#comment",nodeType:yc},Pe(Qe,Ye),Ze.prototype={nodeName:"#cdata-section",nodeType:fc},Pe(Ze,Ye),Je.prototype.nodeType=bc,Pe(Je,Be),ti.prototype.nodeType=Tc,Pe(ti,Be),ei.prototype.nodeType=gc,Pe(ei,Be),ii.prototype.nodeType=mc,Pe(ii,Be),ni.prototype.nodeName="#document-fragment",ni.prototype.nodeType=wc,Pe(ni,Be),ri.prototype.nodeType=vc,Pe(ri,Be),si.prototype.serializeToString=function(t,e,i){return ai.call(t,e,i)},Be.prototype.toString=ai;try{Object.defineProperty&&(Object.defineProperty(De.prototype,"length",{get:function(){return Oe(this),this.$$length}}),Object.defineProperty(Be.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case dc:case wc:var i=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case dc:case wc:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),ci=function(t,e,i){t["$$"+e]=i})}catch(Dr){}var Ac={DOMImplementation:Fe,XMLSerializer:si},Pc=e(function(t,e){function i(t){this.options=t||{locator:{}}}function n(){this.cdata=!1}function r(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function s(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function a(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function o(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}i.prototype.parseFromString=function(t,e){var i=this.options,r=new l,a=i.domBuilder||new n,o=i.errorHandler,c=i.locator,u=i.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&a.setDocumentLocator(c),r.errorHandler=function(t,e,i){function r(e){var n=t[e];!n&&o&&(n=2==t.length?function(i){t(e,i)}:t),a[e]=n&&function(t){n("[xmldom "+e+"]\t"+t+s(i))}||function(){}}if(!t){if(e instanceof n)return e;t=e}var a={},o=t instanceof Function;return i=i||{},r("warning"),r("error"),r("fatalError"),a}(o,a,c),r.domBuilder=i.domBuilder||a,/\/x?html?$/.test(e)&&(d.nbsp=" ",d.copy="\xa9",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,u,d):r.errorHandler.error("invalid doc source"),a.doc},n.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,n){var s=this.doc,a=s.createElementNS(t,i||e),l=n.length;o(this,a),this.currentElement=a,this.locator&&r(this.locator,a);for(var c=0;c<l;c++){t=n.getURI(c);var u=n.getValue(c),d=(i=n.getQName(c),s.createAttributeNS(t,i));this.locator&&r(n.getLocator(c),d),d.value=d.nodeValue=u,a.setAttributeNode(d)}},endElement:function(){var t=this.currentElement;t.tagName,this.currentElement=t.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&r(this.locator,i),o(this,i)},ignorableWhitespace:function(){},characters:function(t){if(t=a.apply(this,arguments)){if(this.cdata)var e=this.doc.createCDATASection(t);else e=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(e):/^\s*$/.test(t)&&this.doc.appendChild(e),this.locator&&r(this.locator,e)}},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t){t=a.apply(this,arguments);var e=this.doc.createComment(t);this.locator&&r(this.locator,e),o(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var s=n.createDocumentType(t,e,i);this.locator&&r(this.locator,s),o(this,s)}},warning:function(){},error:function(){},fatalError:function(t){throw t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){n.prototype[t]=function(){return null}});var l=lc.XMLReader,c=e.DOMImplementation=Ac.DOMImplementation;e.XMLSerializer=Ac.XMLSerializer,e.DOMParser=i}),Ic=(Pc.DOMImplementation,Pc.XMLSerializer,Pc.DOMParser),Lc="INVALID_NUMBER_OF_PERIOD",Dc="DASH_EMPTY_MANIFEST",Oc="DASH_INVALID_XML",Mc="NO_BASE_URL",jc="SEGMENT_TIME_UNSPECIFIED",Rc="UNSUPPORTED_UTC_TIMING_SCHEME",Nc={"static":function(t){var e=t.duration,i=t.timescale,n=void 0===i?1:i,r=t.sourceDuration;return{start:0,end:Math.ceil(r/(e/n))}},dynamic:function(t){var e=t.NOW,i=t.clientOffset,n=t.availabilityStartTime,r=t.timescale,s=void 0===r?1:r,a=t.duration,o=t.start,l=void 0===o?0:o,c=t.minimumUpdatePeriod,u=void 0===c?0:c,d=t.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(e+i)/1e3,f=n+l,m=p+u-f,g=Math.ceil(m*s/a),v=Math.floor((p-f-h)*s/a),y=Math.floor((p-f)*s/a);return{start:Math.max(0,v),end:Math.min(g,y)}}},Fc=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Bc={mediaPresentationDuration:function(t){return Pi(t)},availabilityStartTime:function(t){return function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)}(t)/1e3},minimumUpdatePeriod:function(t){return Pi(t)},suggestedPresentationDelay:function(t){return Pi(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return Pi(t)},start:function(t){return Pi(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?Pi(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Uc={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zc=vi,Vc=Math.pow(2,32),Hc=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=e.getUint32(n),i.firstOffset=e.getUint32(n+4),n+=8):(i.earliestPresentationTime=e.getUint32(n)*Vc+e.getUint32(n+4),i.firstOffset=e.getUint32(n+8)*Vc+e.getUint32(n+12),n+=16),n+=2;var r=e.getUint16(n);for(n+=2;0<r;n+=12,r--)i.references.push({referenceType:(128&t[n])>>>7,referencedSize:2147483647&e.getUint32(n),subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(128&t[n+8]),sapType:(112&t[n+8])>>>4,sapDeltaTime:268435455&e.getUint32(n+8)});return i},Wc=e(function(t,e){function i(t){return t instanceof Uint8Array?t:new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0)}function n(t){if(!t)return"";t=Array.prototype.slice.call(t);var e=String.fromCharCode.apply(null,i(t));try{return decodeURIComponent(escape(e))}catch(t){}return e}function r(t,e){void 0===e&&(e=0);var n=(t=i(t))[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+n:10+n}function s(t,e){return void 0===e&&(e=0),(t=i(t)).length-e<10||"ID3"!==n(t.subarray(e,e+3))?e:s(t,e+=r(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var a={aac:function(t){var e=s(t);return t.length>=e+2&&255==(255&t[e])&&224==(224&t[e+1])&&16==(22&t[e+1])},mp3:function(t){var e=s(t);return t.length>=e+2&&255==(255&t[e])&&224==(224&t[e+1])&&2==(6&t[e+1])},webm:function(t){return 4<=t.length&&26==(255&t[0])&&69==(255&t[1])&&223==(255&t[2])&&163==(255&t[3])},mp4:function(t){return 8<=t.length&&/^(f|s)typ$/.test(n(t.subarray(4,8)))&&!/^ftyp3g$/.test(n(t.subarray(4,10)))},"3gp":function(t){return 10<=t.length&&/^ftyp3g$/.test(n(t.subarray(4,10)))},ts:function(t){if(t.length<189&&1<=t.length)return 71===t[0];for(var e=0;e+188<t.length&&e<188;){if(71===t[e]&&71===t[e+188])return!0;e+=1}return!1},flac:function(t){return 4<=t.length&&/^fLaC$/.test(n(t.subarray(0,4)))},ogg:function(t){return 4<=t.length&&/^OggS$/.test(n(t.subarray(0,4)))}},o=Object.keys(a).filter(function(t){return"ts"!==t}).concat("ts");o.forEach(function(t){var e=a[t];a[t]=function(t){return e(i(t))}}),e.detectContainerForBytes=function(t){t=i(t);for(var e=0;e<o.length;e++){var n=o[e];if(a[n](t))return n}return""},e.getId3Offset=s,e.id3Size=r,e.isLikely=a,e.isLikelyFmp4MediaSegment=function(t){t=i(t);for(var e=0;e<t.length;){var r=(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0;if("moof"===n(t.subarray(e+4,e+8)))return!0;0==r||r+e>t.length?e=t.length:e+=r}return!1}});t(Wc);var qc=Wc.detectContainerForBytes,$c=Wc.getId3Offset,Gc=(Wc.id3Size,Wc.isLikely,Wc.isLikelyFmp4MediaSegment),Xc=e(function(t,e){function i(t){return t instanceof Uint8Array?t:new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0)}Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToString=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var e=String.fromCharCode.apply(null,i(t));try{return decodeURIComponent(escape(e))}catch(t){}return e},e.concatTypedArrays=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce(function(t,e){return t+(e&&(e.byteLength||e.length)||0)},0),s=new Uint8Array(r),a=0;return e.forEach(function(t){t=i(t),s.set(t,a),a+=t.byteLength}),s},e.isTypedArray=function(t){return ArrayBuffer.isView(t)},e.stringToBytes=function(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t?[]:(e||(t=unescape(encodeURIComponent(t))),t.split("").map(function(t){return 255&t.charCodeAt(0)}))},e.toUint8=i});t(Xc),Xc.bytesToString;var Yc=Xc.concatTypedArrays,Kc=(Xc.isTypedArray,Xc.stringToBytes),Qc=Xc.toUint8,Zc=27,Jc=15,tu=21;Fi.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},Fi.prototype.push=function(t){this.trigger("data",t)},Fi.prototype.flush=function(t){this.trigger("done",t)},Fi.prototype.partialFlush=function(t){this.trigger("partialdone",t)},Fi.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},Fi.prototype.reset=function(t){this.trigger("reset",t)},new Fi;var eu={parseType:function(t,e){var i=Ui(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=zi(t),i=4+Vi(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=zi(t),n=4+Vi(t);if(i&&(n+=t[n]+1),1&t[n+5]){var r;r=3+((15&t[n+1])<<8|t[n+2])-4;for(var s=12+((15&t[n+10])<<8|t[n+11]);s<r;){var a=n+s;e[(31&t[a+1])<<8|t[a+2]]=t[a],s+=5+((15&t[a+3])<<8|t[a+4])}return e}},parsePayloadUnitStartIndicator:zi,parsePesType:function(t,e){switch(e[Ui(t)]){case Zc:return"video";case Jc:return"audio";case tu:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!zi(t))return null;var e=4+Vi(t);if(e>=t.byteLength)return null;var i,n=null;return 192&(i=t[e+7])&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},videoPacketContainsKeyFrame:function(t){for(var e=4+Vi(t),i=t.subarray(e),n=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(s=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(s=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(s=!0),s}},iu=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nu={isLikelyAacData:function(t){var e=function i(t,e){return t.length-e<10||t[e]!=="I".charCodeAt(0)||t[e+1]!=="D".charCodeAt(0)||t[e+2]!=="3".charCodeAt(0)?e:i(t,e+=Wi(t,e))}(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},parseId3TagSize:Wi,parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return iu[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,n;e=10,64&t[5]&&(e+=4,e+=qi(t.subarray(10,14)));do{if((i=qi(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){n=t.subarray(e+10,e+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,e,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}(n,0,r)))break;var s=n.subarray(r+1),a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(a*=4)+(3&s[7])}}e+=10,e+=i}while(e<t.byteLength);return null}},ru=9e4,su=(function(t){return 9e4*t},function(t,e){return t*e},function(t){return t/9e4},function(t,e){return t/e},ru),au=Bi,ou={};ou.ts=eu,ou.aac=nu;var lu,cu=ru,uu=188,du=function(t,e){var i;return(i=ou.aac.isLikelyAacData(t)?function(t){for(var e,i=!1,n=0,r=null,s=null,a=0,o=0;3<=t.length-o;){switch(ou.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((a=ou.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===s&&(e=t.subarray(o,o+a),s=ou.aac.parseAacTimestamp(e)),o+=a;break;case"audio":if(t.length-o<7){i=!0;break}if((a=ou.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===r&&(e=t.subarray(o,o+a),r=ou.aac.parseSampleRate(e)),n++,o+=a;break;default:o++}if(i)return null}if(null===r||null===s)return null;var l=cu/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*n*l,pts:s+1024*n*l}]}}(t):Xi(t))&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var i=e;void 0===i&&(i=t.audio[0].dts),t.audio.forEach(function(t){t.dts=au(t.dts,i),t.pts=au(t.pts,i),t.dtsTime=t.dts/cu,t.ptsTime=t.pts/cu})}if(t.video&&t.video.length){var n=e;if(void 0===n&&(n=t.video[0].dts),t.video.forEach(function(t){t.dts=au(t.dts,n),t.pts=au(t.pts,n),t.dtsTime=t.dts/cu,t.ptsTime=t.pts/cu}),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=au(r.dts,n),r.pts=au(r.pts,n),r.dtsTime=r.dts/cu,r.ptsTime=r.dts/cu}}}(i,e),i):null},hu=function(t){return t>>>0},pu=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},fu=hu,mu=function Wd(t,e){var i,n,r,s,a,o=[];if(!e.length)return null;for(i=0;i<t.byteLength;)n=fu(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),r=pu(t.subarray(i+4,i+8)),s=1<n?i+n:t.byteLength,r===e[0]&&(1===e.length?o.push(t.subarray(i+8,s)):(a=Wd(t.subarray(i+8,s),e.slice(1))).length&&(o=o.concat(a))),i=s;return o},gu=hu,vu=function(t){return("00"+t.toString(16)).slice(-2)},yu=function(t,e){var i,n,r;return i=mu(e,["moof","traf"]),n=[].concat.apply([],i.map(function(e){return mu(e,["tfhd"]).map(function(i){var n,r,s;return n=gu(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=t[n]||9e4,(s="number"!=typeof(s=mu(e,["tfdt"]).map(function(t){var e,i;return e=t[0],i=gu(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(i*=Math.pow(2,32),i+=gu(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),i})[0])||isNaN(s)?1/0:s)/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},_u=function(t){var e=mu(t,["moov","trak"]),i=[];return e.forEach(function(t){var e,n,r={},s=mu(t,["tkhd"])[0];s&&(n=(e=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===n?e.getUint32(12):e.getUint32(20));var a=mu(t,["mdia","hdlr"])[0];if(a){var o=pu(a.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=mu(t,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);r.codec=pu(c.subarray(4,8));var u,d=mu(c,[r.codec])[0];d&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(u=d.subarray(78),"avcC"===pu(u.subarray(4,8))&&11<u.length?(r.codec+=".",r.codec+=vu(u[9]),r.codec+=vu(u[10]),r.codec+=vu(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=d.subarray(28),"esds"===pu(u.subarray(4,8))&&20<u.length&&0!==u[19]?(r.codec+="."+vu(u[19]),r.codec+="."+vu(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=mu(t,["mdia","mdhd"])[0];h&&(r.timescale=lu(h)),i.push(r)}),i},bu=(lu=function(t){var e=0===t[0]?12:20;return gu(t[e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])},e(function(t,e){function i(t){return t?t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)}):t}function n(t){return t.map(i)}function r(t){void 0===t&&(t="");var e=t.split(","),i={},n=[];return e.forEach(function(t){var e;t=t.trim(),d.forEach(function(n){var r=u[n].exec(t.toLowerCase());if(r&&!(r.length<=1)){e=n;var s=t.substring(0,r[1].length),a=t.replace(s,"");i[n]={type:s,details:a}}}),e||n.push(t)}),n.length&&(i.unknown=n),i}function s(t){return void 0===t&&(t=""),u.audio.test(t.trim().toLowerCase())}function a(t){return void 0===t&&(t=""),u.text.test(t.trim().toLowerCase())}function o(t){if(t&&"string"==typeof t){var e=t.toLowerCase().split(",").map(function(t){return i(t.trim())}),n="video";1===e.length&&s(e[0])?n="audio":1===e.length&&a(e[0])&&(n="application");var r="mp4";return e.every(function(t){return u.mp4.test(t)})?r="mp4":e.every(function(t){return u.webm.test(t)})?r="webm":e.every(function(t){return u.ogg.test(t)})&&(r="ogg"),n+"/"+r+';codecs="'+t+'"'}}Object.defineProperty(e,"__esModule",{value:!0});var l,c=(l=Or)&&"object"==typeof l&&"default"in l?l["default"]:l,u={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},d=["video","audio","text"],h=["Video","Audio","Text"];e.DEFAULT_AUDIO_CODEC="mp4a.40.2",e.DEFAULT_VIDEO_CODEC="avc1.4d400d",e.browserSupportsCodec=function(t){return void 0===t&&(t=""),c.MediaSource&&c.MediaSource.isTypeSupported&&c.MediaSource.isTypeSupported(o(t))||!1},e.codecsFromDefault=function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var i=t.mediaGroups.AUDIO[e];if(!i)return null;for(var n in i){var s=i[n];if(s["default"]&&s.playlists)return r(s.playlists[0].attributes.CODECS)}return null},e.getMimeForCodec=o,e.isAudioCodec=s,e.isTextCodec=a,e.isVideoCodec=function(t){return void 0===t&&(t=""),u.video.test(t.trim().toLowerCase())},e.mapLegacyAvcCodecs=function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return n([t])[0]})},e.muxerSupportsCodec=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every(function(t){t=t.trim();for(var e=0;e<h.length;e++)if(u["muxer"+h[e]].test(t))return!0;return!1})},e.parseCodecs=r,e.translateLegacyCodec=i,e.translateLegacyCodecs=n}));t(bu);var wu,Tu=bu.DEFAULT_AUDIO_CODEC,ku=bu.DEFAULT_VIDEO_CODEC,Su=bu.browserSupportsCodec,Cu=bu.codecsFromDefault,xu=bu.getMimeForCodec,Eu=bu.isAudioCodec,Au=(bu.isTextCodec,bu.isVideoCodec),Pu=(bu.mapLegacyAvcCodecs,bu.muxerSupportsCodec),Iu=bu.parseCodecs,Lu=bu.translateLegacyCodec,Du=(bu.translateLegacyCodecs,zl),Ou=fe.log,Mu=fe.mergeOptions,ju=function(t){function e(e,i,n){var r;if(void 0===n&&(n={}),r=t.call(this)||this,!e)throw new Error("A non-empty playlist URL or object is required");var s=n,a=s.withCredentials,o=void 0!==a&&a,l=s.handleManifestRedirects,c=void 0!==l&&l;r.src=e,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=c;var u=i.options_;return r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.vhs_.xhr({uri:Du(r.master.uri,r.media().uri),
withCredentials:r.withCredentials},function(t){if(r.request)return t?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}))}),r}jl(e,t);var i=e.prototype;return i.playlistRequestError=function(t,e,i){var n=e.uri,r=e.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+n+".",responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")},i.haveMetadata=function(t){var e=this,i=t.playlistString,n=t.playlistObject,r=t.url,s=t.id;this.request=null,this.state="HAVE_METADATA";var a=n||Qi({manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});a.lastRequest=Date.now(),Ji({playlist:a,uri:r,id:s});var o=nn(this.master,a);this.targetDuration=a.targetDuration,o?(this.master=o,this.media_=this.master.playlists[s]):this.trigger("playlistunchanged"),this.media().endList||(Fl.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Fl.setTimeout(function(){e.trigger("mediaupdatetimeout")},rn(this.media(),!!o))),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),Fl.clearTimeout(this.mediaUpdateTimeout),Fl.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t,e){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(Fl.clearTimeout(this.finalRenditionTimeout),e){var n=t.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=Fl.setTimeout(this.media.bind(this,t,!1),n)}else{var r=this.state,s=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(s&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(s){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(e,n){if(i.request){if(t.lastRequest=Date.now(),t.resolvedUri=Yi(i.handleManifestRedirects,t.resolvedUri,n),e)return i.playlistRequestError(i.request,t,r);i.haveMetadata({playlistString:n.responseText,url:t.uri,id:t.id}),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},i.pause=function(){this.stopRequest(),Fl.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(t){var e=this;Fl.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Fl.setTimeout(function(){return e.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Fl.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(e,i){if(t.request){if(t.request=null,e)return t.error={status:i.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Yi(t.handleManifestRedirects,t.src,i);var n=Qi({manifestString:i.responseText,customTagParsers:t.customTagParsers,customTagMappers:t.customTagMappers});t.setupInitialPlaylist(n)}})},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,tn(this.master,this.srcUri()),t.playlists.forEach(function(t){t.segments&&t.segments.forEach(function(e){en(e,t.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var e=this.srcUri()||Fl.location.href;this.master=function(t,e){var i=Ki(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Fl.location.href,resolvedUri:Fl.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n}(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(fe.EventTarget),Ru=1/30,Nu=fe.createTimeRange,Fu={duration:dn,seekable:function(t,e,i){var n=e||0,r=fn(t,e,!0,i);return null===r?Nu():Nu(n,r)},safeLiveIndex:pn,getMediaInfoForTime:function(t,e,i,n){var r,s=t.segments.length,a=e-n;if(a<0){if(0<i)for(r=i-1;0<=r;r--)if(0<(a+=t.segments[r].duration+Ru))return{mediaIndex:r,startTime:n-hn(t,i,r)};return{mediaIndex:0,startTime:e}}if(i<0){for(r=i;r<0;r++)if((a-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};i=0}for(r=i;r<s;r++)if((a-=t.segments[r].duration+Ru)<0)return{mediaIndex:r,startTime:n+hn(t,i,r)};return{mediaIndex:s-1,startTime:e}},isEnabled:vn,isDisabled:function(t){return t.disabled},isBlacklisted:mn,isIncompatible:gn,playlistEnd:fn,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute:yn,estimateSegmentRequestTime:function(t,e,i,n){return void 0===n&&(n=0),yn("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-8*n)/e:NaN},isLowestEnabledRendition:_n},Bu=fe.xhr,Uu=fe.mergeOptions,zu=Object.freeze({__proto__:null,createTransferableMessage:Cn,initSegmentId:xn,segmentKeyId:En,hexDump:An,tagDump:function(t){return An(t.bytes)},textRanges:function(t){var e,i,n,r="";for(e=0;e<t.length;e++)r+=(n=e,(i=t).start(n)+"-"+i.end(n)+" ");return r}}),Vu=fe.mergeOptions,Hu=function(t){function e(e,i,n,r){var s;void 0===n&&(n={}),(s=t.call(this)||this).masterPlaylistLoader_=r||Ml(s),r||(s.isMaster_=!0);var a=n,o=a.withCredentials,l=void 0!==o&&o,c=a.handleManifestRedirects,u=void 0!==c&&c;if(s.vhs_=i,s.withCredentials=l,s.handleManifestRedirects=u,!e)throw new Error("A non-empty playlist URL or object is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_(s.media().id)}),s.state="HAVE_NOTHING",s.loadedPlaylists_={},s.isMaster_?(s.masterPlaylistLoader_.srcUrl=e,s.masterPlaylistLoader_.sidxMapping_={}):s.childPlaylist_=e,s}jl(e,t);var i=e.prototype;return i.requestErrored_=function(t,e,i){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(t,e,i){var n=this,r=t.sidx&&Dn(t.sidx);if(t.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var s=Yi(this.handleManifestRedirects,t.sidx.resolvedUri),a=this.masterPlaylistLoader_.sidxMapping_;a[r]={sidxInfo:t.sidx};var o=function(s,o){if(!n.requestErrored_(s,o,e)){var l=Hc(Qc(o.response).subarray(8));return a[r].sidx=l,zc(t,l,t.sidx.resolvedUri),i(!0)}};this.request=function(t,e,i){function n(t,e,n,r){return e.abort(),o=!0,i(t,e,n,r)}function r(t,e){if(!o){if(t)return n(t,e,"",a);var i=e.responseText.substring(a&&a.byteLength||0,e.responseText.length);if(a=Yc(a,Kc(i,!0)),s=s||$c(a),a.length<10||s&&a.length<s+2)return Ln(e,function(){return n(t,e,"",a)});var r=qc(a);return"ts"===r&&a.length<188?Ln(e,function(){return n(t,e,"",a)}):!r&&a.length<376?Ln(e,function(){return n(t,e,"",a)}):n(null,e,r,a)}}var s,a=[],o=!1,l=e({uri:t,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",function(e){return e.total,e.loaded,bn(t,null,{statusCode:t.status},r)})}},function(t,e){return bn(l,t,e,r)});return l}(s,this.vhs_.xhr,function(e,i,r,a){if(e)return o(e,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+s,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},i);var l=t.sidx.byterange,c=l.offset,u=l.length;if(a.length>=u+c)return o(e,{response:a.subarray(c,c+u),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:Tn({byterange:t.sidx.byterange})},o)})}else this.mediaRequest_=Fl.setTimeout(function(){return i(!1)},0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Fl.clearTimeout(this.minimumUpdatePeriodTimeout_),Fl.clearTimeout(this.mediaRequest_),Fl.clearTimeout(this.mediaUpdateTimeout),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t){var e=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var n=!this.media_||t.id!==this.media_.id;if(n&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,i,function(){e.haveMetadata({startingState:i,playlist:t})}))},i.haveMetadata=function(t){var e=t.startingState,i=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.stopRequest(),Fl.clearTimeout(this.mediaUpdateTimeout),Fl.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(t){var e=this;Fl.clearTimeout(this.mediaUpdateTimeout),Fl.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Fl.setTimeout(function(){return e.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(){t.haveMaster_(),t.hasPendingRequest()||t.media_||t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Fl.setTimeout(function(){return t.haveMaster_()},0)},i.requestMaster_=function(t){var e=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(i,n){if(!e.requestErrored_(i,n)){var r=n.responseText!==e.masterPlaylistLoader_.masterXml_;return e.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?e.masterLoaded_=Date.parse(n.responseHeaders.date):e.masterLoaded_=Date.now(),e.masterPlaylistLoader_.srcUrl=Yi(e.handleManifestRedirects,e.masterPlaylistLoader_.srcUrl,n),r?(e.handleMaster_(),void e.syncClientServerClock_(function(){return t(n,r)})):t(n,r)}"HAVE_NOTHING"===e.state&&(e.started=!1)})},i.syncClientServerClock_=function(t){var e=this,i=Ni(this.masterPlaylistLoader_.masterXml_);return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Du(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,r){if(e.request){if(n)return e.masterPlaylistLoader_.clientOffset_=e.masterLoaded_-Date.now(),t();var s;s="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):e.masterLoaded_:Date.parse(r.responseText),e.masterPlaylistLoader_.clientOffset_=s-Date.now(),t()}}))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var t=function(t){var e=t.masterXml,i=t.srcUrl,n=Ri(e,{manifestUri:i,clientOffset:t.clientOffset,sidxMapping:t.sidxMapping});return tn(n,i),n}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),e=this.masterPlaylistLoader_.master;e&&(t=function(t,e,i){for(var n=!0,r=Vu(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod}),s=0;s<e.playlists.length;s++){var a=e.playlists[s];if(a.sidx){var o=Dn(a.sidx);i&&i[o]&&zc(a,i[o].sidx,a.sidx.resolvedUri)}var l=nn(r,a);l&&(r=l,n=!1)}return Zi(e,function(t,e,i,s){if(t.playlists&&t.playlists.length){var a=t.playlists[0].id,o=nn(r,t.playlists[0]);o&&((r=o).mediaGroups[e][i][s].playlists[0]=r.playlists[a],n=!1)}}),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:r}(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var i=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return i&&i!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=i),(!e||t&&e.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},i.updateMinimumUpdatePeriodTimeout_=function(){function t(i){e.minimumUpdatePeriodTimeout_=Fl.setTimeout(function(){e.trigger("minimumUpdatePeriod"),t(i)},i)}var e=this;Fl.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.masterPlaylistLoader_.master&&this.masterPlaylistLoader_.master.minimumUpdatePeriod;0<i?t(i):0===i&&(this.media()?t(1e3*this.media().targetDuration):this.one("loadedplaylist",function(){t(1e3*e.media().targetDuration)}))},i.refreshXml_=function(){var t=this;this.requestMaster_(function(e,i){i&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(t,e){var i=On(t.playlists,e);return Zi(t,function(t){if(t.playlists&&t.playlists.length){var n=t.playlists;i=Vu(i,On(n,e))}}),i}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(){t.refreshMedia_(t.media().id)}))})},i.refreshMedia_=function(t){var e=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[t];n?this.media_=i[t]:this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=Fl.setTimeout(function(){e.trigger("mediaupdatetimeout")},rn(this.media(),Boolean(n)))),this.trigger("loadedplaylist")},e}(fe.EventTarget),Wu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},qu=[],$u=function(){wu=null,qu.length&&("function"==typeof(wu=qu.shift())?wu():jn(wu))},Gu=function(t){Nn("reset",t)},Xu=function(){wu=null,qu.length=0},Yu=function(t){Nn("endTimeline",t)},Ku=2,Qu=-101,Zu=-102,Ju="undefined"!=typeof window?window:{},td="undefined"==typeof Symbol?"__target":Symbol(),ed="application/javascript",id=Ju.BlobBuilder||Ju.WebKitBlobBuilder||Ju.MozBlobBuilder||Ju.MSBlobBuilder,nd=Ju.URL||Ju.webkitURL||nd&&nd.msURL,rd=Ju.Worker;if(rd){var sd,ad=Gn("self.onmessage = function () {}"),od=new Uint8Array(1);try{(sd=new rd(ad)).postMessage(od,[od.buffer])}catch(Dr){rd=null}finally{nd.revokeObjectURL(ad),sd&&sd.terminate()}}var ld,cd=new $n("./transmuxer-worker.worker.js",function(){var t=this;
/*! @name @videojs/http-streaming @version 2.4.1 @license Apache-2.0 */!function(){function e(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),-1<n)},this.trigger=function(e){var i,n,r,s;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(s=[],n=arguments.length,n=1;n<arguments.length;++n)s.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,s)}},this.dispose=function(){t={}}}}function i(t,e){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i}function n(t){for(var e=[];t--;)e.push(0);return e}function r(){if(!mt){var t={96000:[It,[227,64],n(154),[56]],88200:[It,[231],n(170),[56]],64000:[It,[248,192],n(240),[56]],48000:[It,[255,192],n(268),[55,148,128],n(54),[112]],44100:[It,[255,192],n(268),[55,163,128],n(84),[112]],32000:[It,[255,192],n(268),[55,234],n(226),[112]],24000:[It,[255,192],n(268),[55,255,128],n(268),[111,112],n(126),[224]],16000:[It,[255,192],n(268),[55,255,128],n(268),[111,255],n(269),[223,108],n(195),[1,192]],12000:[Lt,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,253,128],n(259),[56]],11025:[Lt,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,255,192],n(268),[55,175,128],n(108),[112]],8000:[Lt,n(268),[3,121,16],n(47),[7]]};e=t,mt=Object.keys(e).reduce(function(t,i){return t[i]=new Uint8Array(e[i].reduce(function(t,e){return t.concat(e)},[])),t},{})}var e;return mt}function s(){s.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ee(0,0),new ee(0,1),new ee(1,0),new ee(1,1)],this.cc708Stream_=new Zt,this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))},this),this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done"))}function a(t){return 32<=t&&t<=127||160<=t&&t<=255}function o(t){this.windowNum=t,this.reset()}function l(t){this.serviceNum=t,this.text="",this.currentWindow=new o(-1),this.windows=[]}function c(t){return null===t?"":(t=Jt[t]||t,String.fromCharCode(t))}function u(){for(var t=[],e=15;e--;)t.push("");return t}function d(t,e){var i=1;for(e<t&&(i=-1);4294967296<Math.abs(e-t);)t+=8589934592*i;return t}function h(t){var e,i;h.prototype.init.call(this),this.type_=t||"shared",this.push=function(t){"shared"!==this.type_&&t.type!==this.type_||(void 0===i&&(i=t.dts),t.dts=d(t.dts,i),t.pts=d(t.pts,i),e=t.dts,this.trigger("data",t))},this.flush=function(){i=e,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){e=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}function p(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}function f(t,e,i){return decodeURIComponent(p(t,e,i))}function m(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}function g(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=0<=i?i:0,(16&t[e+5])>>4?i+20:i+10}function v(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function y(t,e,i,n,r,s){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:t}}function _(t,e){var i=[],n=0,r=0,s=0,a=1/0,o=null,l=null;e=e||{},_.prototype.init.call(this),this.push=function(e){qt(t,e),t&&Oe.forEach(function(i){t[i]=e[i]}),i.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){a=t},this.setAudioAppendStart=function(t){s=t},this.processFrames_=function(){var c,u,d,h,p;0!==i.length&&0!==(c=Bt(i,t,r)).length&&(t.baseMediaDecodeTime=Wt(t,e.keepOriginalTimestamps),Ft(t,c,s,a),t.samples=Ut(c),d=bt(zt(c)),i=[],u=wt(n,[t]),n++,t.initSegment=Tt([t]),(h=new Uint8Array(u.byteLength+d.byteLength)).set(u),h.set(d,u.byteLength),Ht(t),null===o&&(l=o=c[0].pts),l+=c.length*(1024*Ue/t.samplerate),p={start:o},this.trigger("timingInfo",p),this.trigger("data",{track:t,boxes:h}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:o,end:l}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Ht(t),l=o=null},this.reset=function(){this.resetTiming_(),i=[],this.trigger("reset")}}function b(t,e){var i,n,r,s=0,a=[],o=[],l=null,c=null,u=!0;e=e||{},b.prototype.init.call(this),this.push=function(e){qt(t,e),"undefined"==typeof t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.config,t.sps=[e.data],Me.forEach(function(e){t[e]=i[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,t.pps=[e.data]),a.push(e)},this.processNals_=function(i){var n;for(a=o.concat(a);a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){var d=kt(a);if(d.length)if(o=d[d.length-1],i&&(d.pop(),d.duration-=o.duration,d.nalCount-=o.length,d.byteLength-=o.byteLength),d.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),u){if(!(r=St(d))[0][0].keyFrame){if(!(r=Ct(r))[0][0].keyFrame)return a=[].concat.apply([],d).concat(o),void(o=[]);(d=[].concat.apply([],r)).duration=r.duration}u=!1}for(null===l&&(l=d[0].pts,c=l),c+=d.duration,this.trigger("timingInfo",{start:l,end:c}),n=0;n<d.length;n++){var h=d[n];t.samples=At(h);var p=bt(Pt(h));Ht(t),qt(t,h),t.baseMediaDecodeTime=Wt(t,e.keepOriginalTimestamps);var f=wt(s,[t]);s++,t.initSegment=Tt([t]);var m=new Uint8Array(f.byteLength+p.byteLength);m.set(f),m.set(p,f.byteLength),this.trigger("data",{track:t,boxes:m,sequence:s,videoFrameDts:h.dts,videoFramePts:h.pts})}a=[]}else a=[]}},this.resetTimingAndConfig_=function(){n=i=void 0,c=l=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),o=[],a=[],u=!0,this.trigger("reset")}}function w(t){return t.prototype=new pt,t.prototype.init.call(t),t}function T(t,e){t.on("data",e.trigger.bind(e,"data")),t.on("done",e.trigger.bind(e,"done")),t.on("partialdone",e.trigger.bind(e,"partialdone")),t.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),t.on("audioTimingInfo",e.trigger.bind(e,"audioTimingInfo")),t.on("videoTimingInfo",e.trigger.bind(e,"videoTimingInfo")),t.on("trackinfo",e.trigger.bind(e,"trackinfo")),t.on("id3Frame",function(i){i.dispatchType=t.metadataStream.dispatchType,i.cueTime=Mt(i.pts),e.trigger("id3Frame",i)}),t.on("caption",function(t){e.trigger("caption",t)})}function k(t){var e=null,i=!0;t=t||{},k.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(n){if(i){var r=He(n);!r||e&&"aac"===e.type?r||e&&"ts"===e.type||T(e=function(t){var e={type:"ts",tracks:{audio:null,video:null},packet:new me.TransportPacketStream,parse:new me.TransportParseStream,elementary:new me.ElementaryStream,timestampRollover:new me.TimestampRolloverStream,adts:new Be.Adts,h264:new Be.h264.H264Stream,captionStream:new me.CaptionStream,metadataStream:new me.MetadataStream};return e.headOfPipeline=e.packet,e.packet.pipe(e.parse).pipe(e.elementary).pipe(e.timestampRollover),e.timestampRollover.pipe(e.h264),e.h264.pipe(e.captionStream),e.timestampRollover.pipe(e.metadataStream),e.timestampRollover.pipe(e.adts),e.elementary.on("data",function(i){if("metadata"===i.type){for(var n=0;n<i.tracks.length;n++)e.tracks[i.tracks[n].type]||(e.tracks[i.tracks[n].type]=i.tracks[n],e.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime);e.tracks.video&&!e.videoSegmentStream&&(e.videoSegmentStream=new Ve(e.tracks.video,t),e.videoSegmentStream.on("timelineStartInfo",function(i){e.tracks.audio&&!t.keepOriginalTimestamps&&e.audioSegmentStream.setEarliestDts(i.dts-t.baseMediaDecodeTime)}),e.videoSegmentStream.on("timingInfo",e.trigger.bind(e,"videoTimingInfo")),e.videoSegmentStream.on("data",function(t){e.trigger("data",{type:"video",data:t})}),e.videoSegmentStream.on("done",e.trigger.bind(e,"done")),e.videoSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.videoSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.h264.pipe(e.videoSegmentStream)),e.tracks.audio&&!e.audioSegmentStream&&(e.audioSegmentStream=new ze(e.tracks.audio,t),e.audioSegmentStream.on("data",function(t){e.trigger("data",{type:"audio",data:t})}),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adts.pipe(e.audioSegmentStream)),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video})}}),e.captionStream.on("data",function(i){var n;n=e.tracks.video&&e.tracks.video.timelineStartInfo.pts||0,i.startTime=Nt(i.startPts,n,t.keepOriginalTimestamps),i.endTime=Nt(i.endPts,n,t.keepOriginalTimestamps),e.trigger("caption",i)}),(e=w(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e}(t),this):T(e=function(t){var e={type:"aac",tracks:{audio:null},metadataStream:new me.MetadataStream,aacStream:new De,audioRollover:new me.TimestampRolloverStream("audio"),timedMetadataRollover:new me.TimestampRolloverStream("timed-metadata"),adtsStream:new we(!0)};return e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioRollover).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataRollover).pipe(e.metadataStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(i){"timed-metadata"!==i.type&&"audio"!==i.type||e.audioSegmentStream||(e.tracks.audio=e.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"},e.audioSegmentStream=new ze(e.tracks.audio,t),e.audioSegmentStream.on("data",function(t){e.trigger("data",{type:"audio",data:t})}),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video}))}),(e=w(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e}(t),this),i=!1}e.headOfPipeline.push(n)},this.flush=function(){e&&(i=!0,e.headOfPipeline.flush())},this.partialFlush=function(){e&&e.headOfPipeline.partialFlush()},this.endTimeline=function(){e&&e.headOfPipeline.endTimeline()},this.reset=function(){e&&e.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(i){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=i),e&&(e.tracks.audio&&(e.tracks.audio.timelineStartInfo.dts=void 0,e.tracks.audio.timelineStartInfo.pts=void 0,Ht(e.tracks.audio),e.audioRollover&&e.audioRollover.discontinuity()),e.tracks.video&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),e.tracks.video.timelineStartInfo.dts=void 0,e.tracks.video.timelineStartInfo.pts=void 0,Ht(e.tracks.video)),e.timestampRollover&&e.timestampRollover.discontinuity())},this.setRemux=function(i){t.remux=i,e&&e.coalesceStream&&e.coalesceStream.setRemux(i)},this.setAudioAppendStart=function(t){e&&e.tracks.audio&&e.audioSegmentStream&&e.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(){}}function S(t,e){for(var i=t,n=0;n<e.length;n++){var r=e[n];if(i<r.size)return r;i-=r.size}return null}function C(t,e){var i=Xe(t,["moof","traf"]),n=Xe(t,["mdat"]),r={},s=[];return n.forEach(function(t,e){var n=i[e];s.push({mdat:t,traf:n})}),s.forEach(function(t){var i,n=t.mdat,s=t.traf,a=Xe(s,["tfhd"]),o=Je(a[0]),l=o.trackId,c=Xe(s,["tfdt"]),u=0<c.length?Ke(c[0]).baseMediaDecodeTime:0,d=Xe(s,["trun"]);e===l&&0<d.length&&(i=function(t,e,i){var n,r,s,a,o=new DataView(t.buffer,t.byteOffset,t.byteLength),l=[];for(r=0;r+4<t.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),u=S(r,e);if(n={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:ti(c),trackId:i},u)n.pts=u.pts,n.dts=u.dts,a=u;else{if(!a)break;n.pts=a.pts,n.dts=a.dts}l.push(n)}return l}(n,function(t,e,i){var n=u,r=i.defaultSampleDuration||0,s=i.defaultSampleSize||0,a=i.trackId,o=[];return t.forEach(function(t){var e=Ze(t).samples;e.forEach(function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=a,t.dts=n,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=n+t.compositionTimeOffset,n+=t.duration}),o=o.concat(e)}),o}(d,0,o),l),r[l]||(r[l]=[]),r[l]=r[l].concat(i))}),r}function x(t){return"AudioSegmentStream"===t?"audio":"VideoSegmentStream"===t?"video":""}e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(t){this.trigger("data",t)},e.prototype.flush=function(t){this.trigger("done",t)},e.prototype.partialFlush=function(t){this.trigger("partialdone",t)},e.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},e.prototype.reset=function(t){this.trigger("reset",t)};var E,A,P,I,L,D,O,M,j,R,N,F,B,U,z,V,H,W,q,$,G,X,Y,K,Q,Z,J,tt,et,it,nt,rt,st,at,ot,lt,ct,ut,dt,ht,pt=e,ft=Math.pow(2,32)-1;!function(){var t;if(X={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in X)X.hasOwnProperty(t)&&(X[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);Y=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Q=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),K=new Uint8Array([0,0,0,1]),Z=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),J=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),tt={video:Z,audio:J},nt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),it=new Uint8Array([0,0,0,0,0,0,0,0]),rt=new Uint8Array([0,0,0,0,0,0,0,0]),st=rt,at=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ot=rt,et=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),E=function(t){var e,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,r=8;e<n.length;e++)i.set(n[e],r),r+=n[e].byteLength;return i},A=function(){return E(X.dinf,E(X.dref,nt))},P=function(t){return E(X.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},z=function(t){return E(X.hdlr,tt[t])},U=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),E(X.mdhd,e)},B=function(t){return E(X.mdia,U(t),z(t.type),D(t))},L=function(t){return E(X.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},D=function(t){return E(X.minf,"video"===t.type?E(X.vmhd,et):E(X.smhd,it),A(),H(t))},O=function(t,e){for(var i=[],n=e.length;n--;)i[n]=q(e[n]);return E.apply(null,[X.moof,L(t)].concat(i))},M=function(t){for(var e=t.length,i=[];e--;)i[e]=N(t[e]);return E.apply(null,[X.moov,R(4294967295)].concat(i).concat(j(t)))},j=function(t){for(var e=t.length,i=[];e--;)i[e]=$(t[e]);return E.apply(null,[X.mvex].concat(i))},R=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return E(X.mvhd,e)},V=function(t){var e,i,n=t.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)e=n[i].flags,r[i+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return E(X.sdtp,r)},H=function(t){return E(X.stbl,W(t),E(X.stts,ot),E(X.stsc,st),E(X.stsz,at),E(X.stco,rt))},W=function(t){return E(X.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?lt(t):ct(t))},lt=function(t){var e,i,n=t.sps||[],r=t.pps||[],s=[],a=[];for(e=0;e<n.length;e++)s.push((65280&n[e].byteLength)>>>8),s.push(255&n[e].byteLength),s=s.concat(Array.prototype.slice.call(n[e]));for(e=0;e<r.length;e++)a.push((65280&r[e].byteLength)>>>8),a.push(255&r[e].byteLength),a=a.concat(Array.prototype.slice.call(r[e]));if(i=[X.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),E(X.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length],s,[r.length],a))),E(X.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var o=t.sarRatio[0],l=t.sarRatio[1];i.push(E(X.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return E.apply(null,i)},ct=function(t){return E(X.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),P(t))},F=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return E(X.tkhd,e)},q=function(t){var e,i,n,r,s,a;return e=E(X.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(1+ft)),a=Math.floor(t.baseMediaDecodeTime%(1+ft)),i=E(X.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===t.type?(n=G(t,92),E(X.traf,e,i,n)):(r=V(t),n=G(t,r.length+92),E(X.traf,e,i,n,r))},N=function(t){return t.duration=t.duration||4294967295,E(X.trak,F(t),B(t))},$=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),E(X.trex,e)},ht=function(t,e){var i=0,n=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,i|n|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},dt=function(t,e){var i,n,r,s,a,o;for(e+=20+16*(s=t.samples||[]).length,r=ht(s,e),(n=new Uint8Array(r.length+16*s.length)).set(r),i=r.length,o=0;o<s.length;o++)a=s[o],n[i++]=(4278190080&a.duration)>>>24,n[i++]=(16711680&a.duration)>>>16,n[i++]=(65280&a.duration)>>>8,n[i++]=255&a.duration,n[i++]=(4278190080&a.size)>>>24,n[i++]=(16711680&a.size)>>>16,n[i++]=(65280&a.size)>>>8,n[i++]=255&a.size,n[i++]=a.flags.isLeading<<2|a.flags.dependsOn,n[i++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,n[i++]=61440&a.flags.degradationPriority,n[i++]=15&a.flags.degradationPriority,n[i++]=(4278190080&a.compositionTimeOffset)>>>24,n[i++]=(16711680&a.compositionTimeOffset)>>>16,n[i++]=(65280&a.compositionTimeOffset)>>>8,n[i++]=255&a.compositionTimeOffset;return E(X.trun,n)},ut=function(t,e){var i,n,r,s,a,o;for(e+=20+8*(s=t.samples||[]).length,r=ht(s,e),(i=new Uint8Array(r.length+8*s.length)).set(r),n=r.length,o=0;o<s.length;o++)a=s[o],i[n++]=(4278190080&a.duration)>>>24,i[n++]=(16711680&a.duration)>>>16,i[n++]=(65280&a.duration)>>>8,i[n++]=255&a.duration,i[n++]=(4278190080&a.size)>>>24,i[n++]=(16711680&a.size)>>>16,i[n++]=(65280&a.size)>>>8,i[n++]=255&a.size;return E(X.trun,i)},G=function(t,e){return"audio"===t.type?ut(t,e):dt(t,e)},I=function(){return E(X.ftyp,Y,K,Y,Q)};var mt,gt,vt,yt,_t,bt=function(t){return E(X.mdat,t)},wt=O,Tt=function(t){var e,i=I(),n=M(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e},kt=function(t){var e,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,e=n.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},St=function(t){var e,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},Ct=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},xt=function(t,e){var n,r,s,a,o=e||0,l=[];for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)o+=(s=i(a[r],o)).size,l.push(s);return l},Et=function(t){var e,i,n,r,s,a,o=0,l=t.byteLength,c=t.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(e=0;e<t.length;e++)for(r=t[e],i=0;i<r.length;i++)for(s=r[i],n=0;n<s.length;n++)a=s[n],d.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u},At=function(t,e){var n,r=[];return n=i(t,e||0),r.push(n),r},Pt=function(t){var e,i,n=0,r=t.byteLength,s=t.length,a=new Uint8Array(r+4*s),o=new DataView(a.buffer);for(e=0;e<t.length;e++)i=t[e],o.setUint32(n,i.data.byteLength),n+=4,a.set(i.data,n),n+=i.data.byteLength;return a},It=[33,16,5,32,164,27],Lt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Dt=9e4,Ot=gt=function(t){return 9e4*t},Mt=(vt=function(t,e){return t*e},yt=function(t){return t/9e4}),jt=(_t=function(t,e){return t/e},function(t,e){return gt(_t(t,e))}),Rt=function(t,e){return vt(yt(t),e)},Nt=function(t,e,i){return yt(i?t:t-e)},Ft=function(t,e,i,n){var s,a,o,l,c,u=0,d=0,h=0;if(e.length&&(s=jt(t.baseMediaDecodeTime,t.samplerate),a=Math.ceil(Dt/(t.samplerate/1024)),i&&n&&(u=s-Math.max(i,n),h=(d=Math.floor(u/a))*a),!(d<1||Dt/2<h))){for(o=(o=r()[t.samplerate])||e[0].data,l=0;l<d;l++)c=e[0],e.splice(0,0,{data:o,dts:c.dts-a,pts:c.pts-a});t.baseMediaDecodeTime-=Math.floor(Rt(h,t.samplerate))}},Bt=function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},Ut=function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n},zt=function(t){var e,i,n=0,r=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],r.set(i.data,n),n+=i.data.byteLength;return r},Vt=Dt,Ht=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},Wt=function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/Vt,i=Math.floor(i)),i},qt=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},$t=function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&4===n){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}i.payload=void 0}e+=r,r=n=0}return i},Gt=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},Xt=function(t,e){var i,n,r,s,a=[];if(!(64&e[0]))return a;for(n=31&e[0],i=0;i<n;i++)s={type:3&e[2+(r=3*i)],pts:t},4&e[2+r]&&(s.ccData=e[3+r]<<8|e[4+r],a.push(s));return a},Yt=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},Kt=4;(s.prototype=new pt).push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=$t(t.escapedRBSP)).payload&&e.payloadType===Kt&&(i=Gt(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Xt(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},s.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},s.prototype.flushStream=function(t){this.captionPackets_.length&&(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)},this),this.captionPackets_.length=0),this.flushCCStreams(t)},s.prototype.flush=function(){return this.flushStream("flush")},s.prototype.partialFlush=function(){return this.flushStream("partialFlush")},s.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},s.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},s.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},s.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},s.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},s.prototype.dispatchCea708Packet=function(t){this.cc708Stream_.push(t)};var Qt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};o.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},o.prototype.getText=function(){return this.rows.join("\n")},o.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},o.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},o.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},o.prototype.addText=function(t){this.rows[this.rowIdx]+=t},o.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}},l.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new o(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},l.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]};var Zt=function ri(){ri.prototype.init.call(this);var t=this;this.current708Packet=null,this.services={},this.push=function(e){3===e.type?t.new708Packet():null===t.current708Packet&&t.new708Packet(),t.add708Bytes(e)}};Zt.prototype=new pt,Zt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Zt.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,n=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Zt.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,n=null,r=0,s=e[r++];for(t.seq=s>>6,t.sizeCode=63&s;r<e.length;r++)n=31&(s=e[r++]),7==(i=s>>5)&&0<n&&(i=s=e[r++]),this.pushServiceBlock(i,r,n),0<n&&(r+=n-1)},Zt.prototype.pushServiceBlock=function(t,e,i){var n,r=e,s=this.current708Packet.data,o=this.services[t];for(o=o||this.initService(t,r);r<e+i&&r<s.length;r++)a(n=s[r])?r=this.handleText(r,o):16===n?r=this.extendedCommands(r,o):128<=n&&n<=135?r=this.setCurrentWindow(r,o):152<=n&&n<=159?r=this.defineWindow(r,o):136===n?r=this.clearWindows(r,o):140===n?r=this.deleteWindows(r,o):137===n?r=this.displayWindows(r,o):138===n?r=this.hideWindows(r,o):139===n?r=this.toggleWindows(r,o):151===n?r=this.setWindowAttributes(r,o):144===n?r=this.setPenAttributes(r,o):145===n?r=this.setPenColor(r,o):146===n?r=this.setPenLocation(r,o):143===n?o=this.reset(r,o):8===n?o.currentWindow.backspace():12===n?o.currentWindow.clearText():13===n?o.currentWindow.pendingNewLine=!0:14===n?o.currentWindow.clearText():141===n&&r++},Zt.prototype.extendedCommands=function(t,e){return a(this.current708Packet.data[++t])&&(t=this.handleText(t,e,!0)),t},Zt.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},Zt.prototype.initService=function(t,e){var i=this;return this.services[t]=new l(t),this.services[t].init(this.getPts(e),function(e){i.flushDisplayed(e,i.services[t])}),this.services[t]},
Zt.prototype.handleText=function(t,e,i){var n=function(t){var e=Qt[t]||t;return 4096&t&&t===e?"":String.fromCharCode(e)}((i?4096:0)|this.current708Packet.data[t]),r=e.currentWindow;return r.pendingNewLine&&!r.isEmpty()&&r.newLine(this.getPts(t)),r.pendingNewLine=!1,r.addText(n),t},Zt.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},Zt.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,n=i[t],r=7&n;e.setCurrentWindow(r);var s=e.currentWindow;return n=i[++t],s.visible=(32&n)>>5,s.rowLock=(16&n)>>4,s.columnLock=(8&n)>>3,s.priority=7&n,n=i[++t],s.relativePositioning=(128&n)>>7,s.anchorVertical=127&n,n=i[++t],s.anchorHorizontal=n,n=i[++t],s.anchorPoint=(240&n)>>4,s.rowCount=15&n,n=i[++t],s.columnCount=63&n,n=i[++t],s.windowStyle=(56&n)>>3,s.penStyle=7&n,s.virtualRowCount=s.rowCount+1,t},Zt.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.winAttr;return n=i[++t],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++t],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++t],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++t],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,t},Zt.prototype.flushDisplayed=function(t,e){for(var i=[],n=0;n<8;n++)e.windows[n].visible&&!e.windows[n].isEmpty()&&i.push(e.windows[n].getText());e.endPts=t,e.text=i.join("\n\n"),this.pushCaption(e),e.startPts=t},Zt.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},Zt.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=1);return t},Zt.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=0);return t},Zt.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible^=1);return t},Zt.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].clearText();return t},Zt.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].reset();return t},Zt.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penAttr;return n=i[++t],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++t],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,t},Zt.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penColor;return n=i[++t],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++t],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++t],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,t},Zt.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,n=i[++t],r.row=15&n,n=i[++t],r.column=63&n,t},Zt.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var Jt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},te=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ee=function si(t,e){si.prototype.init.call(this),this.field_=t||0,this.dataChannel_=e||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,s;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=u();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=u()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))s=c((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=c((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=te.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=c(n),s+=c(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};ee.prototype=new pt,ee.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){try{return t.trim()}catch(t){return""}}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ee.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},ee.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},ee.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},ee.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},ee.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},ee.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},ee.prototype.isNormalChar=function(t){return 32<=t&&t<=127},ee.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=u(),this.displayed_=u()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},ee.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,i)},ee.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},ee.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},ee.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},ee.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},ee.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var ie={CaptionStream:s,Cea608Stream:ee,Cea708Stream:Zt},ne={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};h.prototype=new pt;var re,se=h,ae={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=f(t.data,1,e),t.value=f(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=f(t.data,1,e),t.url=f(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,i;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(i=t.data,unescape(p(i,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(re=function(t){var e,i={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},n=0,r=[],s=0;if(re.prototype.init.call(this),this.dispatchType=ne.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,a,o,l,c;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))i.debug;else if(r.push(t),s+=t.data.byteLength,1===r.length&&(n=m(t.data.subarray(6,10)),n+=10),!(s<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},c=0;c<n;)e.data.set(r[0].data.subarray(0,n-c),c),c+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();a=10,64&e.data[5]&&(a+=4,a+=m(e.data.subarray(10,14)),n-=m(e.data.subarray(16,20)));do{if((o=m(e.data.subarray(a+4,a+8)))<1)return;if((l={id:String.fromCharCode(e.data[a],e.data[a+1],e.data[a+2],e.data[a+3]),data:e.data.subarray(a+10,a+o+10)}).key=l.id,ae[l.id]&&(ae[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var u=l.data,d=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;d*=4,d+=3&u[7],l.timeStamp=d,void 0===e.pts&&void 0===e.dts&&(e.pts=l.timeStamp,e.dts=l.timeStamp),this.trigger("timestamp",l)}e.frames.push(l),a+=10,a+=o}while(a<n);this.trigger("data",e)}}}).prototype=new pt;var oe,le,ce,ue=re,de=se;(oe=function(){var t=new Uint8Array(188),e=0;oe.prototype.init.call(this),this.push=function(i){var n,r=0,s=188;for(e?((n=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),n.set(i,e),e=0):n=i;s<n.byteLength;)71!==n[r]||71!==n[s]?(r++,s++):(this.trigger("data",n.subarray(r,s)),r+=188,s+=188);r<n.byteLength&&(t.set(n.subarray(r),0),e=n.byteLength-r)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new pt,(le=function(){var t,e,i,n;le.prototype.init.call(this),(n=this).packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var r=0;n.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===n.type?e(t.subarray(r),n):i(t.subarray(r),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},i=function(t,e){var i,r;if(1&t[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<i;){var s=t[r],a=(31&t[r+1])<<8|t[r+2];s===ne.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=a:s===ne.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=a:s===ne.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][a]=s),r+=5+((15&t[r+3])<<8|t[r+4])}e.programMapTable=n.programMapTable}},this.push=function(e){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===i.pid)i.type="pat",t(e.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,i]):this.processPes_(e,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=ne.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=ne.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new pt,le.STREAM_TYPES={h264:27,adts:15},(ce=function(){function t(t,e,n){var r,s,a=new Uint8Array(t.size),o={type:e},l=0,c=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)s=t.data[l],a.set(s.data,c),c+=s.data.byteLength;!function(t,e){var i;e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=0!=(4&t[6]),192&(i=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8])}(a,o),r="video"===e||o.packetLength<=t.size,(n||r)&&(t.size=0,t.data.length=0),r&&i.trigger("data",o)}}var e,i=this,n={data:[],size:0},r={data:[],size:0},s={data:[],size:0};ce.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,i;switch(a.streamType){case ne.H264_STREAM_TYPE:e=n,i="video";break;case ne.ADTS_STREAM_TYPE:e=r,i="audio";break;case ne.METADATA_STREAM_TYPE:e=s,i="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&t(e,i,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),i.trigger("data",t)}})[a.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){t(n,"video"),t(r,"audio"),t(s,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new pt;var he={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:oe,TransportParseStream:le,ElementaryStream:ce,TimestampRolloverStream:de,CaptionStream:ie.CaptionStream,Cea608Stream:ie.Cea608Stream,Cea708Stream:ie.Cea708Stream,MetadataStream:ue};for(var pe in ne)ne.hasOwnProperty(pe)&&(he[pe]=ne[pe]);var fe,me=he,ge=Dt,ve=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(fe=function(t){var e,i=0;fe.prototype.init.call(this),this.push=function(n){var r,s,a,o,l,c,u=0;if(t||(i=0),"audio"===n.type)for(e?(o=e,(e=new Uint8Array(o.byteLength+n.data.byteLength)).set(o),e.set(n.data,o.byteLength)):e=n.data;u+5<e.length;)if(255===e[u]&&240==(246&e[u+1])){if(s=2*(1&~e[u+1]),r=(3&e[u+3])<<11|e[u+4]<<3|(224&e[u+5])>>5,c=(l=1024*(1+(3&e[u+6])))*ge/ve[(60&e[u+2])>>>2],a=u+r,e.byteLength<a)return;if(this.trigger("data",{pts:n.pts+i*c,dts:n.dts+i*c,sampleCount:l,audioobjecttype:1+(e[u+2]>>>6&3),channelcount:(1&e[u+2])<<2|(192&e[u+3])>>>6,samplerate:ve[(60&e[u+2])>>>2],samplingfrequencyindex:(60&e[u+2])>>>2,samplesize:16,data:e.subarray(u+7+s,a)}),i++,e.byteLength===a)return void(e=void 0);e=e.subarray(a)}else u++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new pt;var ye,_e,be,we=fe,Te=function(t){var e=t.byteLength,i=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var r=t.byteLength-e,s=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");s.set(t.subarray(r,r+a)),i=new DataView(s.buffer).getUint32(0),n=8*a,e-=a},this.skipBits=function(t){var r;t<n||(t-=n,t-=8*(r=Math.floor(t/8)),e-=r,this.loadWord()),i<<=t,n-=t},this.readBits=function(t){var r=Math.min(n,t),s=i>>>32-r;return 0<(n-=r)?i<<=r:0<e&&this.loadWord(),0<(r=t-r)?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<n;++t)if(0!=(i&2147483648>>>t))return i<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_e=function(){var t,e,i=0;_e.prototype.init.call(this),this.push=function(n){for(var r,s=(e=e?((r=new Uint8Array(e.byteLength+n.data.byteLength)).set(e),r.set(n.data,e.byteLength),r):n.data).byteLength;i<s-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<s;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}for(i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));1!==e[++t]&&t<s;);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&3<e.byteLength&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new pt,be={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ye=function(){var t,e,i,n,r,s,a,o=new _e;ye.prototype.init.call(this),(t=this).push=function(t){"video"===t.type&&(e=t.trackId,i=t.pts,n=t.dts,o.push(t))},o.on("data",function(a){var o={trackId:e,pts:i,dts:n,data:a};switch(31&a[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",o)}),o.on("done",function(){t.trigger("done")}),o.on("partialdone",function(){t.trigger("partialdone")}),o.on("reset",function(){t.trigger("reset")}),o.on("endedtimeline",function(){t.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(t,e){var i,n=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(n+e.readExpGolomb()+256)%256),n=0===r?n:r},r=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},s=function(t){var e,i,n,r,s,o,l,c,u,d,h,p,f,m=0,g=0,v=0,y=0,_=1;if(i=(e=new Te(t)).readUnsignedByte(),r=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),be[i]&&(3===(s=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(h=3!==s?8:12,f=0;f<h;f++)e.readBoolean()&&a(f<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),f=0;f<l;f++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),c=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(d=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(m=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}p&&(_=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(c+1)-2*m-2*g)*_),height:(2-d)*(u+1)*16-2*v-2*y,sarRatio:p}}}).prototype=new pt;var ke,Se={H264Stream:ye,NalByteStream:_e},Ce=function(t){var e=function i(t,e){return t.length-e<10||t[e]!=="I".charCodeAt(0)||t[e+1]!=="D".charCodeAt(0)||t[e+2]!=="3".charCodeAt(0)?e:i(t,e+=g(t,e))}(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},xe=g,Ee=function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i};(ke=function(){var t=new Uint8Array,e=0;ke.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var n,r,s,a,o=0,l=0;for(t.length?(a=t.length,(t=new Uint8Array(i.byteLength+a)).set(t.subarray(0,a)),t.set(i,a)):t=i;3<=t.length-l;)if(t[l]!=="I".charCodeAt(0)||t[l+1]!=="D".charCodeAt(0)||t[l+2]!=="3".charCodeAt(0))if(255!=(255&t[l])||240!=(240&t[l+1]))l++;else{if(t.length-l<7)break;if(l+(o=Ee(t,l))>t.length)break;s={type:"audio",data:t.subarray(l,l+o),pts:e,dts:e},this.trigger("data",s),l+=o}else{if(t.length-l<10)break;if(l+(o=xe(t,l))>t.length)break;r={type:"timed-metadata",data:t.subarray(l,l+o)},this.trigger("data",r),l+=o}n=t.length-l,t=0<n?t.subarray(l):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new pt;var Ae,Pe,Ie,Le,De=ke,Oe=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Me=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],je=Se.H264Stream,Re=Ce,Ne=Dt;(Pe=function(t,e){var i=[],n=0,r=0,s=0,a=1/0;e=e||{},Pe.prototype.init.call(this),this.push=function(e){qt(t,e),t&&Oe.forEach(function(i){t[i]=e[i]}),i.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){a=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var o,l,c,u,d;0!==i.length&&(o=Bt(i,t,r),t.baseMediaDecodeTime=Wt(t,e.keepOriginalTimestamps),Ft(t,o,s,a),t.samples=Ut(o),c=bt(zt(o)),i=[],l=wt(n,[t]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),Ht(t),d=Math.ceil(1024*Ne/t.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*d}),this.trigger("data",{track:t,boxes:u})),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ht(t),i=[],this.trigger("reset")}}).prototype=new pt,(Ae=function(t,e){var i,n,r=0,s=[],a=[];e=e||{},Ae.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){qt(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.config,t.sps=[e.data],Me.forEach(function(e){t[e]=i[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,t.pps=[e.data]),s.push(e)},this.flush=function(){for(var i,n,o,l,c,u,d,h,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=kt(s),(o=St(i))[0][0].keyFrame||((n=this.getGopForFusion_(s[0],t))?(p=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=Ct(o)),a.length){var f;if(!(f=e.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ht(t),o=f}qt(t,o),t.samples=xt(o),c=bt(Et(o)),t.baseMediaDecodeTime=Wt(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",y(t.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),l=wt(r,[t]),u=new Uint8Array(l.byteLength+c.byteLength),r++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:t,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){Ht(t),n=i=void 0},this.getGopForFusion_=function(e){var i,n,r,s,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(s=this.gopCache_[a]).gop,t.pps&&v(t.pps[0],s.pps[0])&&t.sps&&v(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||-1e4<=(i=e.dts-r.dts-r.duration)&&i<=45e3&&(!n||i<o)&&(n=s,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,o,l,c;for(s=t.byteLength,o=t.nalCount,l=t.duration,e=i=0;e<a.length&&i<t.length&&(n=a[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?t:i===t.length?null:((c=t.slice(i)).byteLength=s,c.duration=l,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,o,l;for(e=a.length-1,i=t.length-1,s=null,o=!1;0<=e&&0<=i;){if(n=a[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(l=o?i:s))return t;var c=t.slice(l),u=c.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(t){a=t}}).prototype=new pt,(Le=function(t,e){this.numberOfTracks=0,this.metadataStream=e,"undefined"!=typeof(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Le.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new pt,Le.prototype.flush=function(t){var e,i,n,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Me.forEach(function(t){a.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Oe.forEach(function(t){a.info[t]=this.audioTrack[t]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=Tt(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=Nt(e.startPts,o,this.keepOriginalTimestamps),e.endTime=Nt(e.endPts,o,this.keepOriginalTimestamps),a.captionStreams[e.stream]=!0,a.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=Nt(i.pts,o,this.keepOriginalTimestamps),a.metadata.push(i);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)e=a.captions[r],this.trigger("caption",e);for(r=0;r<a.metadata.length;r++)i=a.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Le.prototype.setRemux=function(t){this.remuxTracks=t},(Ie=function(t){var e,i,n=this,r=!0;Ie.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};(this.transmuxPipeline_=r).type="aac",r.metadataStream=new me.MetadataStream,r.aacStream=new De,r.audioTimestampRolloverStream=new me.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new me.TimestampRolloverStream("timed-metadata"),r.adtsStream=new we,r.coalesceStream=new Le(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(t){r.aacStream.setTimestamp(t.timeStamp)}),r.aacStream.on("data",function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Pe(i,t),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new me.MetadataStream,r.packetStream=new me.TransportPacketStream,r.parseStream=new me.TransportParseStream,r.elementaryStream=new me.ElementaryStream,r.timestampRolloverStream=new me.TimestampRolloverStream,r.adtsStream=new we,r.h264Stream=new je,r.captionStream=new me.CaptionStream,r.coalesceStream=new Le(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),
r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(s){var a;if("metadata"===s.type){for(a=s.tracks.length;a--;)e||"video"!==s.tracks[a].type?i||"audio"!==s.tracks[a].type||((i=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(e=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Ae(e,t),r.videoSegmentStream.on("timelineStartInfo",function(e){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts-n.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(t){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Pe(i,t),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(t){t.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",t)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,Ht(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,Ht(e),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(r){var e=Re(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new pt;var Fe={Transmuxer:Ie,VideoSegmentStream:Ae,AudioSegmentStream:Pe,AUDIO_PROPERTIES:Oe,VIDEO_PROPERTIES:Me,generateVideoSegmentTimingInfo:y},Be={Adts:we,h264:Se},Ue=Dt;_.prototype=new pt;var ze=_;b.prototype=new pt;var Ve=b,He=Ce;k.prototype=new pt;var We=k,qe=function(t){return t>>>0},$e=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},Ge=qe,Xe=function ai(t,e){var i,n,r,s,a,o=[];if(!e.length)return null;for(i=0;i<t.byteLength;)n=Ge(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),r=$e(t.subarray(i+4,i+8)),s=1<n?i+n:t.byteLength,r===e[0]&&(1===e.length?o.push(t.subarray(i+8,s)):(a=ai(t.subarray(i+8,s),e.slice(1))).length&&(o=o.concat(a))),i=s;return o},Ye=qe,Ke=function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:Ye(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=Ye(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),e},Qe=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},Ze=function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],s=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),s&&u&&(e={flags:Qe(t.subarray(d,d+4))},d+=4,a&&(e.duration=n.getUint32(d),d+=4),o&&(e.size=n.getUint32(d),d+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(d):e.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(e),u--);u--;)e={},a&&(e.duration=n.getUint32(d),d+=4),o&&(e.size=n.getUint32(d),d+=4),l&&(e.flags=Qe(t.subarray(d,d+4)),d+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(d):e.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(e);return i},Je=function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],s=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return e=8,r&&(e+=4,n.baseDataOffset=i.getUint32(12),e+=4),s&&(n.sampleDescriptionIndex=i.getUint32(e),e+=4),a&&(n.defaultSampleDuration=i.getUint32(e),e+=4),o&&(n.defaultSampleSize=i.getUint32(e),e+=4),l&&(n.defaultSampleFlags=i.getUint32(e)),c&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n},ti=Yt,ei=ie.CaptionStream,ii=function(){var t,e,i,n,r,s,a=!1;this.isInitialized=function(){return a},this.init=function(e){t=new ei,a=!0,s=!!e&&e.isPartial,t.on("data",function(t){t.startTime=t.startPts/n,t.endTime=t.endPts/n,r.captions.push(t),r.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||i===t[0]&&n===e[i])},this.parse=function(t,s,a){var o;if(!this.isInitialized())return null;if(!s||!a)return null;if(this.isNewInit(s,a))i=s[0],n=a[i];else if(null===i||!n)return e.push(t),null;for(;0<e.length;){var l=e.shift();this.parse(l,s,a)}return null!==(o=function(t,e,i){return null===e?null:{seiNals:C(t,e)[e],timescale:i}}(t,i,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;s?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],n=i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},ni=function(){function e(t,e){this.options=e||{},this.self=t,this.init()}var i=e.prototype;return i.init=function(){var t,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new We(this.options):new Fe.Transmuxer(this.options),this.options.handlePartialData?(t=this.self,(e=this.transmuxer).on("data",function(e){var i={data:e.data.track.initSegment.buffer,byteOffset:e.data.track.initSegment.byteOffset,byteLength:e.data.track.initSegment.byteLength},n={boxes:{data:e.data.boxes.buffer,byteOffset:e.data.boxes.byteOffset,byteLength:e.data.boxes.byteLength},initSegment:i,type:e.type,sequence:e.data.sequence};"undefined"!=typeof e.data.videoFrameDts&&(n.videoFrameDtsTime=Mt(e.data.videoFrameDts)),"undefined"!=typeof e.data.videoFramePts&&(n.videoFramePtsTime=Mt(e.data.videoFramePts)),t.postMessage({action:"data",segment:n},[n.boxes.data,n.initSegment.data])}),e.on("id3Frame",function(e){t.postMessage({action:"id3Frame",id3Frame:e})}),e.on("caption",function(e){t.postMessage({action:"caption",caption:e})}),e.on("done",function(e){t.postMessage({action:"done",type:x(e)})}),e.on("partialdone",function(e){t.postMessage({action:"partialdone",type:x(e)})}),e.on("endedsegment",function(e){t.postMessage({action:"endedSegment",type:x(e)})}),e.on("trackinfo",function(e){t.postMessage({action:"trackinfo",trackInfo:e})}),e.on("audioTimingInfo",function(e){if(null!==e.start){var i={start:Mt(e.start)};e.end&&(i.end=Mt(e.end)),t.postMessage({action:"audioTimingInfo",audioTimingInfo:i})}else t.postMessage({action:"audioTimingInfo",audioTimingInfo:e})}),e.on("videoTimingInfo",function(e){var i={start:Mt(e.start)};e.end&&(i.end=Mt(e.end)),t.postMessage({action:"videoTimingInfo",videoTimingInfo:i})})):function(t,e){e.on("data",function(e){var i=e.initSegment;e.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=e.data;e.data=n.buffer,t.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.on("done",function(){t.postMessage({action:"done"})}),e.on("gopInfo",function(e){t.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){var i={start:{decode:Mt(e.start.dts),presentation:Mt(e.start.pts)},end:{decode:Mt(e.end.dts),presentation:Mt(e.end.pts)},baseMediaDecodeTime:Mt(e.baseMediaDecodeTime)};e.prependedContentDuration&&(i.prependedContentDuration=Mt(e.prependedContentDuration)),t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}),e.on("id3Frame",function(e){t.postMessage({action:"id3Frame",id3Frame:e})}),e.on("caption",function(e){t.postMessage({action:"caption",caption:e})}),e.on("trackinfo",function(e){t.postMessage({action:"trackinfo",trackInfo:e})}),e.on("audioTimingInfo",function(e){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Mt(e.start),end:Mt(e.end)}})}),e.on("videoTimingInfo",function(e){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Mt(e.start),end:Mt(e.end)}})})}(this.self,this.transmuxer)},i.pushMp4Captions=function(t){this.captionParser||(this.captionParser=new ii,this.captionParser.init());var e=new Uint8Array(t.data,t.byteOffset,t.byteLength),i=this.captionParser.parse(e,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],data:e.buffer},[e.buffer])},i.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},i.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},i.push=function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)},i.reset=function(){this.transmuxer.reset()},i.setTimestampOffset=function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ot(e)))},i.setAudioAppendStart=function(t){this.transmuxer.setAudioAppendStart(Math.ceil(Ot(t.appendStart)))},i.setRemux=function(t){this.transmuxer.setRemux(t.remux)},i.flush=function(){this.transmuxer.flush(),t.postMessage({action:"done",type:"transmuxed"})},i.partialFlush=function(){this.transmuxer.partialFlush(),t.postMessage({action:"partialdone",type:"transmuxed"})},i.endTimeline=function(){this.transmuxer.endTimeline(),t.postMessage({action:"endedtimeline",type:"transmuxed"})},i.alignGopsWith=function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())},e}();new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new ni(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new ni(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(t)}()}),ud=Kn("PlaylistSelector"),dd=function(t){function e(e){var i;if(i=t.call(this)||this,!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=e.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.hasPlayed_=e.hasPlayed,i.currentTime_=e.currentTime,i.seekable_=e.seekable,i.seeking_=e.seeking,i.duration_=e.duration,i.mediaSource_=e.mediaSource,i.vhs_=e.vhs,i.loaderType_=e.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=e.segmentMetadataTrack,i.goalBufferLength_=e.goalBufferLength,i.sourceType_=e.sourceType,i.sourceUpdater_=e.sourceUpdater,i.inbandTextTracks_=e.inbandTextTracks,i.state_="INIT",i.handlePartialData_=e.handlePartialData,i.timelineChangeController_=e.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=fe.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=e.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=e.decrypter,i.syncController_=e.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=Kn("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(Ml(i),"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i}jl(e,t);var i=e.prototype;return i.createTransmuxer_=function(){var t=new cd;return t.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),t},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),Xu()),this.resetStats_(),this.checkBufferTimeout_&&Fl.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},i.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},i.error=function(t){return void 0!==t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Gu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return fe.createTimeRanges();if("main"===this.loaderType_){var t=this.startingMediaInfo_,e=t.hasAudio,i=t.hasVideo,n=t.isMuxed;if(i&&e&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=xn(t),n=this.initSegments_[i];return e&&!n&&t.bytes&&(this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t},i.segmentKey=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=En(t),n=this.keyCache_[i];this.cacheEncryptionKeys_&&e&&!n&&t.bytes&&(this.keyCache_[i]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});var r={resolvedUri:(n||t).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(t,e){if(void 0===e&&(e={}),t){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return null===this.mediaIndex&&!this.handlePartialData_||this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var s=t.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),n&&(n.mediaIndex-=s,0<=n.mediaIndex&&(n.segment=t.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,t)}},i.pause=function(){this.checkBufferTimeout_&&(Fl.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Gu(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(t,e,i){if(void 0===i&&(i=function(){}),e===1/0&&(e=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var n=1,r=function(){0==--n&&i()};for(var s in this.audioDisabled_||(n++,this.sourceUpdater_.removeAudio(t,e,r)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(t,e,i,n){for(var r=Math.ceil((e-n)*su),s=Math.ceil((i-n)*su),a=t.slice(),o=t.length;o--&&!(t[o].pts<=s););if(-1===o)return a;for(var l=o+1;l--&&!(t[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a}(this.gopBuffer_,t,e,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(t,e,r)),this.inbandTextTracks_)rr(t,e,this.inbandTextTracks_[s]);rr(t,e,this.segmentMetadataTrack_),r()}},i.monitorBuffer_=function(){this.checkBufferTimeout_&&Fl.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Fl.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Fl.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Fl.setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.buffered_(),e=this.checkBuffer_(t,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(e.timestampOffset=or({segmentTimeline:e.timeline,currentTimeline:this.currentTimeline_,startOfSegment:e.startOfSegment,buffered:t,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof e.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loadSegment_(e))}},i.isEndOfStream_=function(t,e){if(void 0===t&&(t=this.mediaIndex),void 0===e&&(e=this.playlist_),!e||!this.mediaSource_)return!1;var i=t+1===e.segments.length;return e.endList&&"open"===this.mediaSource_.readyState&&i},i.checkBuffer_=function(t,e,i,n,r,s){var a=0;t.length&&(a=t.end(t.length-1));var o=Math.max(0,a-r);if(!e.segments.length)return null;if(o>=this.goalBufferLength_())return null;if(!n&&1<=o)return null;var l,c=null,u=!1;if(null===s)c=this.getSyncSegmentCandidate_(e),u=!0;else if(null!==i){var d=e.segments[i];l=d&&d.end?d.end:a,c=i+1}else if(this.fetchAtBuffer_){var h=Fu.getMediaInfoForTime(e,a,s.segmentIndex,s.time);c=h.mediaIndex,l=h.startTime}else{var p=Fu.getMediaInfoForTime(e,r,s.segmentIndex,s.time);c=p.mediaIndex,l=p.startTime}var f=this.generateSegmentInfo_(e,c,l,u);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:e,currentMediaIndex:i,nextMediaIndex:c,startOfSegment:l,isSyncRequest:u}),f)},i.getSyncSegmentCandidate_=function(t){var e=this;if(-1===this.currentTimeline_)return 0;var i=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)},i.generateSegmentInfo_=function(t,e,i,n){if(e<0||e>=t.segments.length)return null;var r,s,a=t.segments[e],o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();return o.length&&(r=o.end(o.length-1)-this.sourceUpdater_.audioTimestampOffset()),l.length&&(s=function(t,e,i){if(null==e||!t.length)return[];var n,r=Math.ceil((e-i+3)*su);for(n=0;n<t.length&&!(t[n].pts>r);n++);return t.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:e,isSyncRequest:n,startOfSegment:i,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:r,gopsToAlignWith:s}},i.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var e=this.currentTime_(),i=t.bandwidth,n=this.pendingSegment_.duration,r=Fu.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived),s=function(t,e,i){return void 0===i&&(i=1),((t.length?t.end(t.length-1):0)-e)/i}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(!(r<=s)){var a=function(t){var e=t.master,i=t.currentTime,n=t.bandwidth,r=t.duration,s=t.segmentDuration,a=t.timeUntilRebuffer,o=t.currentTimeline,l=t.syncController,c=e.playlists.filter(function(t){return!Fu.isIncompatible(t)}),u=c.filter(Fu.isEnabled);u.length||(u=c.filter(function(t){return!Fu.isDisabled(t)}));var d=u.filter(Fu.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var e=l.getSyncPoint(t,r,o,i)?1:2;return{playlist:t,rebufferingImpact:Fu.estimateSegmentRequestTime(s,n,t)*e-a}}),h=d.filter(function(t){return t.rebufferingImpact<=0});return Jn(h,function(t,e){return tr(e.playlist,t.playlist)}),h.length?h[0]:(Jn(d,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var o=r-s-a.rebufferingImpact,l=.5;s<=Ru&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=a.playlist.attributes.BANDWIDTH*Wu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(){this.mediaRequestsAborted+=1},i.handleProgress_=function(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(t,e){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;var i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var s=i[r];if(s!==n[r])return!1;if(t[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(t,e,i,n){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var r=this.pendingSegment_,s=ar(e);r[s]=r[s]||{},r[s][i]=n,this.logger_("timinginfo: "+e+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(t,e){var i=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(0!==e.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};e.forEach(function(t){r[t.stream]=r[t.stream]||{startTime:1/0,captions:[],endTime:0};var e=r[t.stream];e.startTime=Math.min(e.startTime,t.startTime+n),e.endTime=Math.max(e.endTime,t.endTime+n),e.captions.push(t)}),Object.keys(r).forEach(function(t){var e=r[t],s=e.startTime,a=e.endTime,o=e.captions,l=i.inbandTextTracks_;i.logger_("adding cues from "+s+" -> "+a+" for "+t),function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"}),e.trigger({type:"usage",name:"hls-608"});var n=e.textTracks().getTrackById(i);t[i]=n||e.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(l,i.vhs_.tech_,t),rr(s,a,l[t]),function(t){var e=t.inbandTextTracks,i=t.captionArray,n=t.timestampOffset;if(i){var r=Fl.WebKitDataCue||Fl.VTTCue;i.forEach(function(t){var i=t.stream;e[i].addCue(new r(t.startTime+n,t.endTime+n,t.text))})}}({captionArray:o,inbandTextTracks:l,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(t,e,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(t,e,i){t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)}(this.inbandTextTracks_,i,this.vhs_.tech_),nr({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(t){return t()})},i.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(t){return t()})},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.currentMediaInfo_&&lr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var t=this.pendingSegment_;if(!t||!t.trackInfo)return!1;if(!this.handlePartialData_){var e=this.currentMediaInfo_,i=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&!t.videoTimingInfo)return!1;if(i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo)return!1}return!lr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},i.handleData_=function(t,e){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[ar(e.type)].start;else{var n,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(n=this.handlePartialData_?e.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}this.updateAppendInitSegmentStatus(i,e.type),this.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,e)}}else this.callQueue_.push(this.handleData_.bind(this,t,e))},i.updateAppendInitSegmentStatus=function(t,e){"main"!==this.loaderType_||"number"!=typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)},i.getInitSegmentAndUpdateState_=function(t){var e=t.type,i=t.initSegment,n=t.map,r=t.playlist;if(n){var s=xn(n);if(this.activeInitSegmentId_===s)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!!n,this.activeInitSegmentId_=null,i):null},i.appendToSourceBuffer_=function(t){var e=this,i=t.segmentInfo,n=t.type,r=t.initSegment,s=t.data,a=[s],o=s.byteLength;r&&(a.unshift(r),o+=r.byteLength);var l=function(t){var e,i=0;return t.bytes&&(e=new Uint8Array(t.bytes),t.segments.forEach(function(t){e.set(t,i),i+=t.byteLength})),e}({bytes:o,segments:a});this.sourceUpdater_.appendBuffer({segmentInfo:i,type:n,bytes:l},function(t){t&&(e.error(n+" append of "+l.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),e.trigger("appenderror"))})},i.handleVideoSegmentTimingInfo_=function(t,e){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=e.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=e.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=e.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=e.baseMediaDecodeTime}},i.appendData_=function(t,e){var i=e.type,n=e.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:n})}},i.loadSegment_=function(t){var e=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({
action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var i=e.buffered_();"number"==typeof t.timestampOffset&&(t.timestampOffset=or({segmentTimeline:t.timeline,currentTimeline:e.currentTimeline_,startOfSegment:t.startOfSegment,buffered:i,overrideCheck:!0})),delete t.audioAppendStart;var n=e.sourceUpdater_.audioBuffered();n.length&&(t.audioAppendStart=n.end(n.length-1)-e.sourceUpdater_.audioTimestampOffset()),e.updateTransmuxerAndRequestSegment_(t)})},i.updateTransmuxerAndRequestSegment_=function(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var e=this.createSimplifiedSegmentObj_(t);t.abortRequests=qn({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},i.trimBackBuffer_=function(){var t=function(t,e,i){var n=e-Wu.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));var r=e-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<t&&this.remove(0,t)},i.createSimplifiedSegmentObj_=function(t){var e=t.segment,i={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith},n=t.playlist.segments[t.mediaIndex];if(n&&n.end&&n.timeline===e.timeline&&(i.baseStartTime=n.end+t.timestampOffset),e.key){var r=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);i.key=this.segmentKey(e.key),i.key.iv=r}return e.map&&(i.map=this.initSegmentForMap(e.map)),i},i.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},i.saveBandwidthRelatedStats_=function(t,e){this.pendingSegment_.byteLength=e.bytesReceived,t<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+1/60):(this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(t,e,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,i));else if(this.saveTransferStats_(e.stats),this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===Zu)return;return this.pause(),t.code===Qu?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),n.endOfAllRequests=e.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(t,e,i){if(!e.length)return t;if(i)return e.slice();for(var n=e[0].pts,r=0;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING";var r=this.isEndOfStream_(n.mediaIndex,n.playlist),s=null!==this.mediaIndex,a=n.timeline!==this.currentTimeline_&&0<n.timeline;!n.isFmp4&&(r||s&&a)&&Yu(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(t){var e=this.syncController_.mappingForTimeline(t);null!==e&&(this.timeMapping_=e)},i.updateMediaSecondsLoaded_=function(t){"number"==typeof t.start&&"number"==typeof t.end?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(t){var e=t.currentStart,i=t.playlist,n=t.mediaIndex,r=t.firstVideoFrameTimeForData,s=t.currentVideoTimestampOffset,a=t.useVideoTimingInfo,o=t.videoTimingInfo,l=t.audioTimingInfo;if(void 0!==e)return e;if(!a)return l.start;var c=i.segments[n-1];return 0!==n&&c&&"undefined"!=typeof c.start&&c.end===r+s?o.start:r},i.waitForAppendsToComplete_=function(t){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var e=this.currentMediaInfo_,i=e.hasAudio,n=e.hasVideo,r=e.isMuxed,s="main"===this.loaderType_&&n,a=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!=typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);s&&t.waitingOnAppends++,a&&t.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},i.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(t){var e=function(t,e,i){return"main"===t&&e&&i?i.hasAudio||i.hasVideo?e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,t);return!!e&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var e=!1;t.timestampOffset-=t.timingInfo.start,t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var e="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;e&&(t.timingInfo.end="number"==typeof e.end?e.end:e.start+t.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(t){var e=t.segment,i=e.start,n=e.end,r=t.playlist,s=r.mediaSequence,a=r.id,o=r.segments,l=void 0===o?[]:o,c=t.mediaIndex,u=t.timeline;return["appending ["+c+"] of ["+s+", "+(s+l.length)+"] from playlist ["+a+"]","["+i+" => "+n+"] in timeline ["+u+"]"].join(" ")}(t));var e=ur(t,this.sourceType_);if(e&&("warn"===e.severity?fe.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var i=t.segment;i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.isEndOfStream_(t.mediaIndex,t.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_())}},i.recordThroughput_=function(t){if(t.duration<1/60)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+1/60);else{var e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}},i.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var e=t.segment,i=e.start,n=e.end;if(sr(i)&&sr(n)){rr(i,n,this.segmentMetadataTrack_);var r=Fl.WebKitDataCue||Fl.VTTCue,s={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:n},a=new r(i,n,JSON.stringify(s));a.value=s,this.segmentMetadataTrack_.addCue(a)}}},e}(fe.EventTarget),hd=["video","audio"],pd=function(t,e){return function(i,n){var r=n[i+"Buffer"];gr(n.mediaSource,r)&&(n.logger_("Appending segment "+e.mediaIndex+"'s "+t.length+" bytes to "+i+"Buffer"),r.appendBuffer(t))}},fd=function(t,e){return function(i,n){var r=n[i+"Buffer"];gr(n.mediaSource,r)&&(n.logger_("Removing "+t+" to "+e+" from "+i+"Buffer"),r.remove(t,e))}},md=function(t){return function(e,i){var n=i[e+"Buffer"];gr(i.mediaSource,n)&&(i.logger_("Setting "+e+"timestampOffset to "+t),n.timestampOffset=t)}},gd=function(t){return function(){t()}},vd=function(t){return function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{e.mediaSource.endOfStream(t)}catch(e){fe.log.warn("Failed to call media source endOfStream",e)}}}},yd=function(t){return function(e){e.logger_("Setting mediaSource duration to "+t);try{e.mediaSource.duration=t}catch(e){fe.log.warn("Failed to set media source duration",e)}}},_d=function(){return function(t,e){if("open"===e.mediaSource.readyState){var i=e[t+"Buffer"];if(gr(e.mediaSource,i)){e.logger_("calling abort on "+t+"Buffer");try{i.abort()}catch(e){fe.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},bd=function(t,e){return function(i){var n=hr(t),r=xu(e);i.logger_("Adding "+t+"Buffer with codec "+e+" to mediaSource");var s=i.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),s.addEventListener("error",i["on"+n+"Error_"]),i.codecs[t]=e,i[t+"Buffer"]=s}},wd=function(t){return function(e){var i=e[t+"Buffer"];if(mr(t,e),gr(e.mediaSource,i)){e.logger_("Removing "+t+"Buffer with codec "+e.codecs[t]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(i)}catch(e){fe.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},Td=function(t){return function(e,i){var n=i[e+"Buffer"],r=xu(t);gr(i.mediaSource,n)&&i.codecs[e]!==t&&(i.logger_("changing "+e+"Buffer codec from "+i.codecs[e]+" to "+t),n.changeType(r),i.codecs[e]=t)}},kd=function(t){function e(e){var i;return(i=t.call(this)||this).mediaSource=e,i.sourceopenListener_=function(){return fr("mediaSource",Ml(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Kn("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=yr("video",Ml(i)),i.onAudioUpdateEnd_=yr("audio",Ml(i)),i.onVideoError_=function(t){i.videoError_=t},i.onAudioError_=function(t){i.audioError_=t},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}jl(e,t);var i=e.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(t,e){vr({type:"mediaSource",sourceUpdater:this,action:bd(t,e),name:"addSourceBuffer"})},i.abort=function(t){vr({type:t,sourceUpdater:this,action:_d(t),name:"abort"})},i.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?vr({type:"mediaSource",sourceUpdater:this,action:wd(t),name:"removeSourceBuffer"}):fe.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!fe.browser.IE_VERSION&&!fe.browser.IS_FIREFOX&&Fl.MediaSource&&Fl.MediaSource.prototype&&"function"==typeof Fl.MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return Fl.SourceBuffer&&Fl.SourceBuffer.prototype&&"function"==typeof Fl.SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(t,e){this.canChangeType()?vr({type:t,sourceUpdater:this,action:Td(e),name:"changeType"}):fe.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(t){var e=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(i){var n=t[i];if(!e.hasCreatedSourceBuffers())return e.addSourceBuffer(i,n);e.canChangeType()&&e.changeType(i,n)})},i.appendBuffer=function(t,e){var i=this,n=t.segmentInfo,r=t.type,s=t.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_("delayed audio append of "+s.length+" until video append");if(vr({type:r,sourceUpdater:this,action:pd(s,n||{mediaIndex:-1}),doneFn:e,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var a=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+a.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,a.forEach(function(t){i.appendBuffer.apply(i,t)})}},i.audioBuffered=function(){return gr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:fe.createTimeRange()},i.videoBuffered=function(){return gr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:fe.createTimeRange()},i.buffered=function(){var t=gr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=gr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(t,e){var i=null,n=null,r=0,s=[],a=[];if(!(t&&t.length&&e&&e.length))return fe.createTimeRange();for(var o=t.length;o--;)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(t,e){return t.time-e.time}),o=0;o<s.length;o++)"start"===s[o].type?2==++r&&(i=s[o].time):"end"===s[o].type&&1==--r&&(n=s[o].time),null!==i&&null!==n&&(a.push([i,n]),n=i=null);return fe.createTimeRanges(a)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(t,e){void 0===e&&(e=dr),vr({type:"mediaSource",sourceUpdater:this,action:yd(t),name:"duration",doneFn:e})},i.endOfStream=function(t,e){void 0===t&&(t=null),void 0===e&&(e=dr),"string"!=typeof t&&(t=void 0),vr({type:"mediaSource",sourceUpdater:this,action:vd(t),name:"endOfStream",doneFn:e})},i.removeAudio=function(t,e,i){void 0===i&&(i=dr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?vr({type:"audio",sourceUpdater:this,action:fd(t,e),doneFn:i,name:"remove"}):i()},i.removeVideo=function(t,e,i){void 0===i&&(i=dr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?vr({type:"video",sourceUpdater:this,action:fd(t,e),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!pr("audio",this)&&!pr("video",this))},i.audioTimestampOffset=function(t){return void 0!==t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(vr({type:"audio",sourceUpdater:this,action:md(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},i.videoTimestampOffset=function(t){return void 0!==t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(vr({type:"video",sourceUpdater:this,action:md(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},i.audioQueueCallback=function(t){this.audioBuffer&&vr({type:"audio",sourceUpdater:this,action:gd(t),name:"callback"})},i.videoQueueCallback=function(t){this.videoBuffer&&vr({type:"video",sourceUpdater:this,action:gd(t),name:"callback"})},i.dispose=function(){var t=this;this.trigger("dispose"),hd.forEach(function(e){t.abort(e),t.canRemoveSourceBuffer()?t.removeSourceBuffer(e):t[e+"QueueCallback"](function(){return mr(e,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(fe.EventTarget),Sd=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),Cd=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).handlePartialData_=!1,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=e.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}jl(e,t);var i=e.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return fe.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,i=t[t.length-1].startTime;return fe.createTimeRanges([[e,i]])},i.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=xn(t),n=this.initSegments_[i];if(e&&!n&&t.bytes){var r=Sd.byteLength+t.bytes.byteLength,s=new Uint8Array(r);s.set(t.bytes),s.set(Sd,t.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(t,e){rr(t,e,this.subtitlesTrack_)},i.fillBuffer_=function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}},i.skipEmptySegments_=function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t},i.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(t,e,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===Qu&&this.handleTimeout_(),t.code===Zu?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,e.stats),this.state="APPENDING",this.trigger("appending");var s=r.segment;if(s.map&&(s.map.bytes=e.map.bytes),r.bytes=e.bytes,"function"!=typeof Fl.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a,o=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",a),n.stopForError({message:"Error loading vtt.js"})};return a=function(){n.subtitlesTrack_.tech_.off("vttjserror",o),n.segmentRequestFinished_(t,e,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),void this.subtitlesTrack_.tech_.one("vttjserror",o)}s.requested=!0;try{this.parseVTTCues_(r)}catch(t){return void this.stopForError({message:t.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,r.cues.forEach(function(t){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new Fl.VTTCue(t.startTime,t.endTime,t.text):t)}),function(t){var e=t.cues;if(e)for(var i=0;i<e.length;i++){for(var n=[],r=0,s=0;s<e.length;s++)e[i].startTime===e[s].startTime&&e[i].endTime===e[s].endTime&&e[i].text===e[s].text&&1<++r&&n.push(e[s]);n.length&&n.forEach(function(e){return t.removeCue(e)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(t){var e,i=!1;"function"==typeof Fl.TextDecoder?e=new Fl.TextDecoder("utf8"):(e=Fl.WebVTT.StringDecoder(),i=!0);var n=new Fl.WebVTT.Parser(Fl,Fl.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=function(e){t.timestampmap=e},n.onparsingerror=function(t){fe.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){var r=t.segment.map.bytes;i&&(r=_r(r)),n.parse(r)}var s=t.bytes;i&&(s=_r(s)),n.parse(s),n.flush()},i.updateTimeMapping_=function(t,e,i){var n=t.segment;if(e)if(t.cues.length){var r=t.timestampmap,s=r.MPEGTS/su-r.LOCAL+e.mapping;if(t.cues.forEach(function(t){t.startTime+=s,t.endTime+=s}),!i.syncInfo){var a=t.cues[0].startTime,o=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(a,o-n.duration)}}}else n.empty=!0},e}(dd),xd=[{name:"VOD",run:function(t,e,i){return i===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,e,i,n,r){if(!t.datetimeToDisplayTime)return null;var s=e.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.dateTimeObject){var u=c.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,d=Math.abs(r-u);if(null!==o&&(0===d||o<d))break;o=d,a={time:u,segmentIndex:l}}}return a}},{name:"Segment",run:function(t,e,i,n,r){var s=e.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.timeline===n&&"undefined"!=typeof c.start){var u=Math.abs(r-c.start);if(null!==o&&o<u)break;(!a||null===o||u<=o)&&(o=u,a={time:c.start,segmentIndex:l})}}return a}},{name:"Discontinuity",run:function(t,e,i,n,r){var s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var a=null,o=0;o<e.discontinuityStarts.length;o++){var l=e.discontinuityStarts[o],c=e.discontinuitySequence+o+1,u=t.discontinuities[c];if(u){var d=Math.abs(r-u.time);if(null!==a&&a<d)break;(!s||null===a||d<=a)&&(a=d,s={time:u.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function(t,e){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}],Ed=function(t){function e(){var e;return(e=t.call(this)||this).timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Kn("SyncController"),e}jl(e,t);var i=e.prototype;return i.getSyncPoint=function(t,e,i,n){var r=this.runStrategies_(t,e,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(t,e){if(!t||!t.segments)return null;var i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+hn(t,n.segmentIndex,0))},i.runStrategies_=function(t,e,i,n){for(var r=[],s=0;s<xd.length;s++){var a=xd[s],o=a.run(this,t,e,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(t,e){for(var i=t[0].syncPoint,n=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,s=1;s<t.length;s++){var a=Math.abs(t[s].syncPoint[e.key]-e.value);a<n&&(n=a,i=t[s].syncPoint,r=t[s].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.saveExpiredSegmentInfo=function(t,e){for(var i=e.mediaSequence-t.mediaSequence-1;0<=i;i--){var n=t.segments[i];if(n&&"undefined"!=typeof n.start){e.syncInfo={mediaSequence:t.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMapping=function(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var e=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-e}},i.saveSegmentTimingInfo=function(t){var e=t.segmentInfo,i=t.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(e,e.timingInfo,i)&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:e.segment.start}))},i.timestampOffsetForTimeline=function(t){return"undefined"==typeof this.timelines[t]?null:this.timelines[t].time},i.mappingForTimeline=function(t){return"undefined"==typeof this.timelines[t]?null:this.timelines[t].mapping},i.calculateSegmentTimeMapping_=function(t,e,i){var n=t.segment,r=this.timelines[t.timeline];if(null!==t.timestampOffset)r={time:t.startOfSegment,mapping:t.startOfSegment-e.start},i&&(this.timelines[t.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]")),n.start=t.startOfSegment,n.end=e.end+r.mapping;else{if(!r)return!1;n.start=e.start+r.mapping,n.end=e.end+r.mapping}return!0},i.saveDiscontinuitySyncInfo_=function(t){var e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var n=0;n<e.discontinuityStarts.length;n++){var r=e.discontinuityStarts[n],s=e.discontinuitySequence+n+1,a=r-t.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){var l=void 0;l=a<0?i.start-hn(e,t.mediaIndex,r):i.end+hn(e,t.mediaIndex+1,r),this.discontinuities[s]={time:l,accuracy:o}}}},i.dispose=function(){this.trigger("dispose"),this.off()},e}(fe.EventTarget),Ad=function(t){function e(){var e;return(e=t.call(this)||this).pendingTimelineChanges_={},e.lastTimelineChanges_={},e}jl(e,t);var i=e.prototype;return i.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(t){var e=t.type,i=t.from,n=t.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]},i.lastTimelineChange=function(t){var e=t.type,i=t.from,n=t.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[e]={type:e,from:i,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(fe.EventTarget),Pd=new $n("./decrypter-worker.worker.js",function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}var i,n,r,s,a,o,l,c=this;
/*! @name @videojs/http-streaming @version 2.4.1 @license Apache-2.0 */i=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e},n=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e},r=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),-1<i},e.trigger=function(t,e){var i=this.listeners[t];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,e);else for(var s=Array.prototype.slice.call(arguments,1),a=i.length,o=0;o<a;++o)i[o].apply(this,s)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),s=null,a=function(){function t(t){var e,i,n;s=s||function(){var t,e,i,n,r,s,a,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],c=l[0],u=l[1],d=c[4],h=u[4],p=[],f=[];for(t=0;t<256;t++)f[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!d[e];e^=n||1,i=f[i]||1)for(s=(s=i^i<<1^i<<2^i<<3^i<<4)>>8^255&s^99,o=16843009*p[r=p[n=p[h[d[e]=s]=e]]]^65537*r^257*n^16843008*e,a=257*p[s]^16843008*s,t=0;t<4;t++)c[t][e]=a=a<<24^a>>>8,u[t][s]=o=o<<24^o>>>8;for(t=0;t<5;t++)c[t]=c[t].slice(0),u[t]=u[t].slice(0);return l}(),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],o=t.length,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var c=t.slice(0),u=[];for(this._key=[c,u],e=o;e<4*o+28;e++)n=c[e-1],(e%o==0||8===o&&e%o==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],e%o==0&&(n=n<<8^n>>>24^l<<24,l=l<<1^283*(l>>7))),c[e]=c[e-o]^n;for(i=0;e;i++,e--)n=c[3&i?e:e-4],u[i]=e<=4||i<4?n:a[0][r[n>>>24]]^a[1][r[n>>16&255]]^a[2][r[n>>8&255]]^a[3][r[255&n]]}return t.prototype.decrypt=function(t,e,i,n,r,s){var a,o,l,c,u=this._key[1],d=t^u[0],h=n^u[1],p=i^u[2],f=e^u[3],m=u.length/4-2,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],w=v[3],T=v[4];for(c=0;c<m;c++)a=y[d>>>24]^_[h>>16&255]^b[p>>8&255]^w[255&f]^u[g],o=y[h>>>24]^_[p>>16&255]^b[f>>8&255]^w[255&d]^u[g+1],l=y[p>>>24]^_[f>>16&255]^b[d>>8&255]^w[255&h]^u[g+2],f=y[f>>>24]^_[d>>16&255]^b[h>>8&255]^w[255&p]^u[g+3],g+=4,d=a,h=o,p=l;for(c=0;c<4;c++)r[(3&-c)+s]=T[d>>>24]<<24^T[h>>16&255]<<16^T[p>>8&255]<<8^T[255&f]^u[g++],a=d,d=h,h=p,p=f,f=a},t}(),o=function(t){function e(){var e;return(e=t.call(this,r)||this).jobs=[],e.delay=1,e.timeout_=null,e}n(e,t);var i=e.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(r),l=function(){function t(i,n,r,s){var a=t.STEP,l=new Int32Array(i.buffer),c=new Uint8Array(i.byteLength),u=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+a),n,r,c)),u=a;u<l.length;u+=a)r=new Uint32Array([e(l[u-4]),e(l[u-3]),e(l[u-2]),e(l[u-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+a),n,r,c));this.asyncStream_.push(function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var t;
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */s(null,(t=c).subarray(0,t.byteLength-t[t.byteLength-1]))})}return t.prototype.decryptChunk_=function(t,i,n,r){return function(){var s=function(t,i,n){var r,s,o,l,c,u,d,h,p,f=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),m=new a(Array.prototype.slice.call(i)),g=new Uint8Array(t.byteLength),v=new Int32Array(g.buffer);for(r=n[0],s=n[1],o=n[2],l=n[3],p=0;p<f.length;p+=4)c=e(f[p]),u=e(f[p+1]),d=e(f[p+2]),h=e(f[p+3]),m.decrypt(c,u,d,h,v,p),v[p]=e(v[p]^r),v[p+1]=e(v[p+1]^s),v[p+2]=e(v[p+2]^o),v[p+3]=e(v[p+3]^l),r=c,s=u,o=d,l=h;return g}(t,i,n);r.set(s,t.byteOffset)}},i(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}(),new function(t){t.onmessage=function(e){var i=e.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),s=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new l(n,r,s,function(e,n){t.postMessage(function(t){var e={};return Object.keys(t).forEach(function(i){var n=t[i];ArrayBuffer.isView(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n}),e}({source:i.source,decrypted:n}),[n.buffer])})}}(c)}),Id={AUDIO:function(t,e){return function(){var i=e.segmentLoaders[t],n=e.mediaTypes[t],r=e.blacklistCurrentPlaylist;wr(i,n);var s=n.activeTrack(),a=n.activeGroup(),o=(a.filter(function(t){return t["default"]})[0]||a[0]).id,l=n.tracks[o];if(s!==l){for(var c in fe.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,e){return function(){var i=e.segmentLoaders[t],n=e.mediaTypes[t];fe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),wr(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},Ld={AUDIO:function(t,e,i){if(e){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t];e.on("loadedmetadata",function(){var t=e.media();s.playlist(t,r),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()}),e.on("loadedplaylist",function(){s.playlist(e.media(),r),n.paused()||s.load()}),e.on("error",Id[t](t,i))}},SUBTITLES:function(t,e,i){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t],a=i.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();s.playlist(t,r),s.track(a.activeTrack()),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()}),e.on("loadedplaylist",function(){s.playlist(e.media(),r),n.paused()||s.load()}),e.on("error",Id[t](t,i))}},Dd={AUDIO:function(t,e){function i(i){function s(s){var c=l[t][i][s];!o.filter(function(t){return t.resolvedUri!==c.resolvedUri}).length&&o.length&&delete c.resolvedUri;var u=void 0;if(u="vhs-json"===r&&c.playlists?new ju(c.playlists[0],n,a):c.resolvedUri?new ju(c.resolvedUri,n,a):c.playlists&&"dash"===r?new Hu(c.playlists[0],n,a,p):null,c=fe.mergeOptions({id:s,playlistLoader:u},c),Ld[t](t,c.playlistLoader,e),d[i].push(c),"undefined"==typeof h[s]){var f=new fe.AudioTrack({id:s,kind:function(t){var e=t["default"]?"main":"alternative";return t.characteristics&&0<=t.characteristics.indexOf("public.accessibility.describes-video")&&(e="main-desc"),e}(c),enabled:!1,language:c.language,"default":c["default"],label:s});h[s]=f}}d[i]||(d[i]=[]);var o=c.filter(function(e){return e.attributes[t]===i});for(var u in l[t][i])s(u)}var n=e.vhs,r=e.sourceType,s=e.segmentLoaders[t],a=e.requestOptions,o=e.master,l=o.mediaGroups,c=o.playlists,u=e.mediaTypes[t],d=u.groups,h=u.tracks,p=e.masterPlaylistLoader;for(var f in l[t]&&0!==Object.keys(l[t]).length||(l[t]={main:{"default":{"default":!0}}}),l[t])i(f);s.on("error",Id[t](t,e))},SUBTITLES:function(t,e){var i=e.tech,n=e.vhs,r=e.sourceType,s=e.segmentLoaders[t],a=e.requestOptions,o=e.master.mediaGroups,l=e.mediaTypes[t],c=l.groups,u=l.tracks,d=e.masterPlaylistLoader;for(var h in o[t])for(var p in c[h]||(c[h]=[]),o[t][h])if(!o[t][h][p].forced){var f=o[t][h][p],m=void 0;if("hls"===r)m=new ju(f.resolvedUri,n,a);else if("dash"===r){if(!f.playlists.filter(function(t){return t.excludeUntil!==1/0}).length)return;m=new Hu(f.playlists[0],n,a,d)}else"vhs-json"===r&&(m=new ju(f.playlists?f.playlists[0]:f.resolvedUri,n,a));if(f=fe.mergeOptions({id:p,playlistLoader:m},f),Ld[t](t,f.playlistLoader,e),c[h].push(f),"undefined"==typeof u[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles","default":f["default"]&&f.autoselect,language:f.language,label:p},!1).track;u[p]=g}}s.on("error",Id[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var i=e.tech,n=e.master.mediaGroups,r=e.mediaTypes[t],s=r.groups,a=r.tracks;for(var o in n[t])for(var l in s[o]||(s[o]=[]),n[t][o]){var c=n[t][o][l];if(c.instreamId.match(/CC\d/)&&(s[o].push(fe.mergeOptions({id:l},c)),"undefined"==typeof a[l])){var u=i.addRemoteTextTrack({id:c.instreamId,kind:"captions","default":c["default"]&&c.autoselect,language:c.language,label:l},!1).track;a[l]=u}}}},Od={AUDIO:function(t,e){return function(){var i=e.mediaTypes[t].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(t,e){return function(){var i=e.mediaTypes[t].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},Md=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],jd=function(t){function e(e){var i;i=t.call(this)||this;var n=e.src,r=e.handleManifestRedirects,s=e.withCredentials,a=e.tech,o=e.bandwidth,l=e.externVhs,c=e.useCueTags,u=e.blacklistDuration,d=e.enableLowInitialPlaylist,h=e.sourceType,p=e.cacheEncryptionKeys,f=e.handlePartialData,m=e.experimentalBufferBasedABR;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");ld=l,i.experimentalBufferBasedABR=Boolean(m),i.withCredentials=s,i.tech_=a,i.vhs_=a.vhs,i.sourceType_=h,i.useCueTags_=c,i.blacklistDuration=u,i.enableLowInitialPlaylist=d,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:s,handleManifestRedirects:r,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:dr,activeTrack:dr,onGroupChanged:dr,onTrackChanged:dr}}),t}(),i.mediaSource=new Fl.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Ml(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Ml(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Ml(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=fe.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new Ed(e),i.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Pd,i.sourceUpdater_=new kd(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Ad;var g={vhs:i.vhs_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,handlePartialData:f,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};return i.masterPlaylistLoader_="dash"===i.sourceType_?new Hu(n,i.vhs_,i.requestOptions_):new ju(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new dd(fe.mergeOptions(g,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new dd(fe.mergeOptions(g,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new Cd(fe.mergeOptions(g,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),e),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),Md.forEach(function(t){i[t+"_"]=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]}.bind(Ml(i),t)}),i.logger_=Kn("MPC"),i.triggeredFmp4Usage=!1,i.masterPlaylistLoader_.load(),i}jl(e,t);var i=e.prototype;return i.checkABR_=function(){var t=this.selectPlaylist();this.shouldSwitchToMedia_(t)&&this.masterPlaylistLoader_.media(t)},i.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=Fl.setInterval(function(){return t.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Fl.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media(),i=1.5*e.targetDuration*1e3;_n(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),kr({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media();if(!e){var i;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(i=t.selectInitialPlaylist()),!(i=i||t.selectPlaylist())||!t.shouldSwitchToMedia_(i))return;if(t.initialMedia_=i,t.masterPlaylistLoader_.media(t.initialMedia_),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;e=t.initialMedia_}t.handleUpdatedMediaPlaylist(e)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media(),i=1.5*e.targetDuration*1e3;_n(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=t.masterPlaylistLoader_.media();t.stuckAtPlaylistEnd_(e)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(t,e){var i=t.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var a in i.AUDIO[s])i.AUDIO[s][a].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),ld.Playlist.isAes(e)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&1<Object.keys(i.AUDIO[r[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(t){var e=this.masterPlaylistLoader_.media(),i=this.tech_.buffered();return function(t){var e=t.currentPlaylist,i=t.nextPlaylist,n=t.forwardBuffer,r=t.bufferLowWaterLine,s=t.bufferHighWaterLine,a=t.duration,o=t.experimentalBufferBasedABR,l=t.log;if(!i)return fe.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(e&&e.id||"null")+" -> "+i.id;if(!e||!e.endList)return l(c+" as current playlist "+(e?"is live":"is not set")),!0;if(i.id===e.id)return!1;var u=o?Wu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Wu.MAX_BUFFER_LOW_WATER_LINE;if(a<u)return l(c+" as duration < max low water line ("+a+" < "+u+")"),!0;var d=i.attributes.BANDWIDTH,h=e.attributes.BANDWIDTH;if(d<h&&(!o||n<s)){var p=c+" as next bandwidth < current bandwidth ("+d+" < "+h+")";return o&&(p+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+s+")"),l(p),!0}if((!o||h<d)&&r<=n){var f=c+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+r+")";return o&&(f+=" and next bandwidth > current bandwidth ("+d+" > "+h+")"),l(f),!0}return l("not "+c+" as no switching criteria met"),!1}({currentPlaylist:e,nextPlaylist:t,forwardBuffer:i.length?i.end(i.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){function t(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)}var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=function(t){var e=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){fe.browser.IE_VERSION||fe.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}},i.setupFirstPlay=function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){var i=this.seekable();if(!i.length)return!1;if(fe.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(i.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.duration());if(null===e)return!1;var i=ld.Playlist.playlistEnd(t,e),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var s=r.end(r.length-1);return s-n<=.1&&i-s<=.1},i.blacklistCurrentPlaylist=function(t,e){void 0===t&&(t={});var i=t.playlist||this.masterPlaylistLoader_.media();if(e=e||t.blacklistDuration||this.blacklistDuration,!i)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var n=this.masterPlaylistLoader_.master.playlists,r=n.filter(vn),s=1===r.length&&r[0]===i;if(1===n.length&&e!==1/0)return fe.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var a=!1;n.forEach(function(t){if(t!==i){var e=t.excludeUntil;void 0!==e&&e!==1/0&&(a=!0,delete t.excludeUntil)}}),a&&(fe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i.excludeUntil=Date.now()+1e3*e,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=t.internal?this.logger_:fe.log.warn,c=t.message?" "+t.message:"";l((t.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+c+" Switching to playlist "+o.id+"."),o.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var u=o.targetDuration/2*1e3||5e3,d="number"==typeof o.lastRequest&&Date.now()-o.lastRequest<=u;return this.masterPlaylistLoader_.media(o,s||d)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(t,e){var i=this,n=[],r="all"===t;!r&&"main"!==t||n.push(this.masterPlaylistLoader_);var s=[];!r&&"audio"!==t||s.push("AUDIO"),!r&&"subtitle"!==t||(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(function(t){var e=i.mediaTypes_[t]&&i.mediaTypes_[t].activePlaylistLoader;e&&n.push(e)}),["main","audio","subtitle"].forEach(function(e){var r=i[e+"SegmentLoader_"];!r||t!==e&&"all"!==t||n.push(r)}),n.forEach(function(t){return e.forEach(function(e){"function"==typeof t[e]&&t[e]()})})},i.setCurrentTime=function(t){var e=an(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:ld.Playlist.duration(t):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var e=this.masterPlaylistLoader_.media();if(e){var i=this.syncController_.getExpiredTime(e,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=ld.Playlist.seekable(e,i,n);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(e=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(e,this.duration())))return;if(0===(t=ld.Playlist.seekable(e,i,n)).length)return}var s,a;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=fe.createTimeRanges([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+ln(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var e=this.seekable();if(!e.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1))}else{var i=this.tech_.buffered(),n=ld.Playlist.duration(this.masterPlaylistLoader_.media());0<i.length&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var i=t.mediaTypes_[e].groups;for(var n in i)i[n].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||t&&!this.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=function(){var t=this,e={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};e.video=e.main;var i=Yn(this.master(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=i.video||e.main.videoCodec||ku),e.main.isMuxed&&(n.video+=","+(i.audio||e.main.audioCodec||Tu)),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(n.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||Tu,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),n.audio||n.video){var s,a={};if(["video","audio"].forEach(function(t){if(n.hasOwnProperty(t)&&!function(t,e){return t?Su(e):Pu(e)}(e[t].isFmp4,n[t])){var i=e[t].isFmp4?"browser":"muxer";a[i]=a[i]||[],a[i].push(n[t]),"audio"===t&&(s=i)}}),r&&s&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach(function(e){(e.attributes&&e.attributes.AUDIO)===o&&e!==t.media()&&(e.excludeUntil=1/0)}),this.logger_("excluding audio group "+o+" as "+s+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(e){var i=(Iu(t.sourceUpdater_.codecs[e]||"")[e]||{}).type,r=(Iu(n[e]||"")[e]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&l.push('"'+t.sourceUpdater_.codecs[e]+'" -> "'+n[e]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var c=Object.keys(a).reduce(function(t,e){return t&&(t+=", "),t+(e+' does not support codec(s): "')+a[e].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}}},i.excludeUnsupportedVariants_=function(){var t=this,e=this.master().playlists,i=[];Object.keys(e).forEach(function(n){var r=e[n];if(-1===i.indexOf(r.id)){i.push(r.id);var s=Yn(t.master,r),a=[];!s.audio||Pu(s.audio)||Su(s.audio)||(r.excludeUntil=1/0,a.push("audio codec "+s.audio)),!s.video||Pu(s.video)||Su(s.video)||(r.excludeUntil=1/0,a.push("video codec "+s.video)),s.text&&"stpp.ttml.im1t"===s.text&&(r.excludeUntil=1/0,a.push("text codec "+s.text)),a.length&&t.logger_("excluding "+r.id+" as codecs "+a.join(", ")+" are unsupported")}})},i.excludeIncompatibleVariants_=function(t){var e=this,i=Iu(t),n=Object.keys(i).length;this.master().playlists.forEach(function(t){if(t.excludeUntil!==1/0){var r={},s=2,a=[],o=Yn(e.masterPlaylistLoader_.master,t);if(o.audio||o.video){var l=[o.video,o.audio].filter(Boolean).join(",");r=Iu(l),s=Object.keys(r).length}s!==n&&(a.push('codec count "'+s+'" !== "'+n+'"'),t.excludeUntil=1/0),e.sourceUpdater_.canChangeType()||(r.video&&i.video&&r.video.type.toLowerCase()!==i.video.type.toLowerCase()&&(a.push('video codec "'+r.video.type+'" !== "'+i.video.type+'"'),t.excludeUntil=1/0),r.audio&&i.audio&&r.audio.type.toLowerCase()!==i.audio.type.toLowerCase()&&(t.excludeUntil=1/0,a.push('audio codec "'+r.audio.type+'" !== "'+i.audio.type+'"'))),a.length&&e.logger_("blacklisting "+t.id+": "+a.join(" && "))}})},i.updateAdCues_=function(t){var e=0,i=this.seekable();i.length&&(e=i.start(0)),function(t,e,i){if(void 0===i&&(i=0),t.segments)for(var n,r=i,s=0;s<t.segments.length;s++){var a=t.segments[s];if(n=n||br(e,r+a.duration/2)){if("cueIn"in a){n.endTime=r,n.adEndTime=r,r+=a.duration,n=null;continue}if(r<n.endTime){r+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&((n=new Fl.VTTCue(r,r+a.duration,a.cueOut)).adStartTime=r,n.adEndTime=r+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){var o=a.cueOutCont.split("/").map(parseFloat),l=o[0],c=o[1];(n=new Fl.VTTCue(r,r+a.duration,"")).adStartTime=r-l,n.adEndTime=n.adStartTime+c,e.addCue(n)}r+=a.duration}}(t,this.cueTagsTrack_,e)},i.goalBufferLength=function(){var t=this.tech_.currentTime(),e=Wu.GOAL_BUFFER_LENGTH,i=Wu.GOAL_BUFFER_LENGTH_RATE,n=Math.max(e,Wu.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,n)},i.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),e=Wu.BUFFER_LOW_WATER_LINE,i=Wu.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(e,Wu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,Wu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return Wu.BUFFER_HIGH_WATER_LINE},e}(fe.EventTarget),Rd=["seeking","seeked","pause","playing","error"],Nd=function(){function t(t){function e(){return s.monitorCurrentTime_()}function i(){return s.techWaiting_()}function n(){return s.cancelTimer_()}function r(){return s.fixesBadSeeks_()}var s=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Kn("PlaybackWatcher"),this.logger_("initialize");var a=this.masterPlaylistController_,o=["main","subtitle","audio"],l={};o.forEach(function(t){l[t]={reset:function(){return s.resetSegmentDownloads_(t)},updateend:function(){return s.checkSegmentDownloads_(t)}},a[t+"SegmentLoader_"].on("appendsdone",l[t].updateend),a[t+"SegmentLoader_"].on("playlistupdate",l[t].reset),s.tech_.on(["seeked","seeking"],l[t].reset)}),this.tech_.on("seekablechanged",r),this.tech_.on("waiting",i),this.tech_.on(Rd,n),this.tech_.on("canplay",e),this.dispose=function(){s.logger_("dispose"),s.tech_.off("seekablechanged",r),s.tech_.off("waiting",i),s.tech_.off(Rd,n),s.tech_.off("canplay",e),o.forEach(function(t){a[t+"SegmentLoader_"].off("appendsdone",l[t].updateend),a[t+"SegmentLoader_"].off("playlistupdate",l[t].reset),s.tech_.off(["seeked","seeking"],l[t].reset)}),s.checkCurrentTimeTimeout_&&Fl.clearTimeout(s.checkCurrentTimeTimeout_),s.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Fl.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Fl.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(t){var e=this.masterPlaylistController_[t+"SegmentLoader_"];0<this[t+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+t+" loader"),this[t+"StalledDownloads_"]=0,this[t+"Buffered_"]=e.buffered_()},e.checkSegmentDownloads_=function(t){var e=this.masterPlaylistController_,i=e[t+"SegmentLoader_"],n=i.buffered_(),r=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t)return!0;if(t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1}(this[t+"Buffered_"],n);this[t+"Buffered_"]=n,r?this.resetSegmentDownloads_(t):(this[t+"StalledDownloads_"]++,
this.logger_("found #"+this[t+"StalledDownloads_"]+" "+t+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:cn(n)}),this[t+"StalledDownloads_"]<10||(this.logger_(t+" loader stalled download exclusion"),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:"vhs-"+t+"-download-exclusion"}),"subtitle"!==t&&e.blacklistCurrentPlaylist({message:"Excessive "+t+" segment downloading detected."},1/0)))},e.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+.1>=e.end(e.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var t,e=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(e,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(t=e.end(e.length-1)),this.beforeSeekableWindow_(e,i)){var n=e.start(0);t=n+(n===e.end(0)?0:.1)}if(void 0!==t)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+ln(e)+". Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0;var r=this.tech_.buffered();return!!function(t){var e=t.buffered,i=t.targetDuration,n=t.currentTime;return!(!e.length||e.end(0)-e.start(0)<2*i||n>e.start(0)||!(e.start(0)-n<i))}({buffered:r,targetDuration:this.media().targetDuration,currentTime:i})&&(t=r.start(0)+.1,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+i+"). Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0)},e.waiting_=function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=an(this.tech_.buffered(),t);return e.length&&t+3<=e.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+e.start(0)+" -> "+e.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},e.techWaiting_=function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var i=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var s=on(r,e);if(0<s.length){var a=s.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+s.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1},e.afterSeekableWindow_=function(t,e,i,n){if(void 0===n&&(n=!1),!t.length)return!1;var r=t.end(t.length-1)+.1;return!i.endList&&n&&(r=t.end(t.length-1)+3*i.targetDuration),r<e},e.beforeSeekableWindow_=function(t,e){return!!(t.length&&0<t.start(0)&&e<t.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(t){var e=t.videoBuffered,i=t.audioBuffered,n=t.currentTime;if(e){var r;if(e.length&&i.length){var s=an(e,n-3),a=an(e,n),o=an(i,n);o.length&&!a.length&&s.length&&(r={start:s.end(0),end:o.end(0)})}else on(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},e.skipTheGap_=function(t){var e=this.tech_.buffered(),i=this.tech_.currentTime(),n=on(e,i);this.cancelTimer_(),0!==n.length&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Ru),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(t,e){for(var i=function(t){if(t.length<2)return fe.createTimeRanges();for(var e=[],i=1;i<t.length;i++){var n=t.end(i-1),r=t.start(i);e.push([n,r])}return fe.createTimeRanges(e)}(t),n=0;n<i.length;n++){var r=i.start(n),s=i.end(n);if(e-r<4&&2<e-r)return{start:r,end:s}}return null},t}(),Fd={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Bd={PlaylistLoader:ju,Playlist:Fu,utils:zu,STANDARD_PLAYLIST_SELECTOR:ir,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,e=this.playlists.master.playlists.filter(Fu.isEnabled);return Jn(e,function(t,e){return tr(t,e)}),e.filter(function(e){return!!Yn(t.playlists.master,e).video})[0]||null},lastBandwidthSelector:ir,movingAverageBandwidthSelector:function(t){var e=-1;if(t<0||1<t)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Fl.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth),e=t*this.systemBandwidth+(1-t)*e,er(this.playlists.master,e,parseInt(Zn(this.tech_.el(),"width"),10)*i,parseInt(Zn(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:tr,comparePlaylistResolution:function(t,e){var i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||Fl.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),i===(n=n||Fl.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n},xhr:wn()};Object.keys(Wu).forEach(function(t){Object.defineProperty(Bd,t,{get:function(){return fe.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),Wu[t]},set:function(e){fe.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?fe.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):Wu[t]=e}})});var Ud="videojs-vhs";Bd.canPlaySource=function(){return fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Bd.supportsNativeHls=function(){if(!Nl||!Nl.createElement)return!1;var t=Nl.createElement("video");return!!fe.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),Bd.supportsNativeDash=!!(Nl&&Nl.createElement&&fe.getTech("Html5").isSupported())&&/maybe|probably/i.test(Nl.createElement("video").canPlayType("application/dash+xml")),Bd.supportsTypeNatively=function(t){return"hls"===t?Bd.supportsNativeHls:"dash"===t&&Bd.supportsNativeDash},Bd.isSupported=function(){return fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var zd=function(t){function e(e,i,n){var r;if(r=t.call(this,i,fe.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&fe.log.warn("Using hls options is deprecated. Use vhs instead."),r.logger_=Kn("VhsHandler"),i.options_&&i.options_.playerId){var s=fe(i.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return fe.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Ml(r)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return fe.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Ml(r)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return fe.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ml(r)},configurable:!0}),r.player_=s}if(r.tech_=i,r.source_=e,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(Nl,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var t=Nl.fullscreenElement||Nl.webkitFullscreenElement||Nl.mozFullScreenElement||Nl.msFullscreenElement;t&&t.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),r.on(r.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}jl(e,t);var i=e.prototype;return i.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=Pr();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Wu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Wu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta"].forEach(function(e){"undefined"!=typeof t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(t,e){var i=this;if(t){this.setOptions_(),this.options_.src=function(t){return 0===t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(t.substring(t.indexOf(",")+1)):t}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Bd,this.options_.sourceType=Kl(e),this.options_.seekTo=function(t){i.tech_.setCurrentTime(t)},this.masterPlaylistController_=new jd(this.options_);var n=fe.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Nd(n),this.masterPlaylistController_.on("error",function(){var t=fe.players[i.tech_.options_.playerId],e=i.masterPlaylistController_.error;"object"!=typeof e||e.code?"string"==typeof e&&(e={message:e,code:3}):e.code=3,t.error(e)});var r=this.options_.experimentalBufferBasedABR?Bd.movingAverageBandwidthSelector(.55):Bd.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Bd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t,e=1/(this.bandwidth||1);return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){fe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return cn(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return cn(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(t){if(Fl.localStorage){var e=Pr();e=e?fe.mergeOptions(e,t):t;try{Fl.localStorage.setItem(Ud,JSON.stringify(e))}catch(t){return}}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t){var e=t.playlists;t.representations=function(){return e&&e.master&&e.master.playlists?e.master.playlists.filter(function(t){return!gn(t)}).map(function(e){return new Sr(t,e,e.id)}):[]}}(i)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){i.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Fl.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.setupEme_=function(){var t=this,e=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Ar({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});11!==fe.browser.IE_VERSION&&i?(this.logger_("waiting for EME key session creation"),Er({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(e){t.logger_("error while creating EME key session",e),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var t=this,e=fe.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t,e){e.representations().forEach(function(e){t.addQualityLevel(e)}),xr(t,e.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){xr(t.qualityLevels_,t.playlists)}))},e.version=function(){return{"@videojs/http-streaming":"2.4.1","mux.js":"5.7.0","mpd-parser":"0.15.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return kd.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Fl.URL.revokeObjectURL&&(Fl.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),t.prototype.dispose.call(this)},i.convertToProgramTime=function(t,e){return Pn({playlist:this.masterPlaylistController_.media(),time:t,callback:e})},i.seekToProgramTime=function(t,e,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),In({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})},e}(fe.getComponent("Component")),Vd={name:"videojs-http-streaming",VERSION:"2.4.1",canHandleSource:function(t,e){void 0===e&&(e={});var i=fe.mergeOptions(fe.options,e);return Vd.canPlayType(t.type,i)},handleSource:function(t,e,i){void 0===i&&(i={});var n=fe.mergeOptions(fe.options,i);return e.vhs=new zd(t,e,n),fe.hasOwnProperty("hls")||Object.defineProperty(e,"hls",{get:function(){return fe.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),e.vhs},configurable:!0}),e.vhs.xhr=wn(),e.vhs.src(t.src,t.type),e.vhs},canPlayType:function(t,e){void 0===e&&(e={});var i=fe.mergeOptions(fe.options,e).vhs.overrideNative,n=void 0===i?!fe.browser.IS_ANY_SAFARI:i,r=Kl(t);return!r||Bd.supportsTypeNatively(r)&&!n?"":"maybe"}};return Su("avc1.4d400d,mp4a.40.2")&&fe.getTech("Html5").registerSourceHandler(Vd,0),fe.VhsHandler=zd,Object.defineProperty(fe,"HlsHandler",{get:function(){return fe.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),zd},configurable:!0}),fe.VhsSourceHandler=Vd,Object.defineProperty(fe,"HlsSourceHandler",{get:function(){return fe.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Vd},configurable:!0}),fe.Vhs=Bd,Object.defineProperty(fe,"Hls",{get:function(){return fe.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Bd},configurable:!0}),fe.use||(fe.registerComponent("Hls",Bd),fe.registerComponent("Vhs",Bd)),fe.options.vhs=fe.options.vhs||{},fe.options.hls=fe.options.hls||{},fe.registerPlugin?fe.registerPlugin("reloadSourceOnError",Cr):fe.plugin("reloadSourceOnError",Cr),fe}),function(){var t,e;t=window,(e=t&&t.videojs)&&(e.CDN_VERSION="7.11.1")}(),function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return r(i||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i.IVPAIDAdUnit=function(){function t(){n(this,t)}return r(t,[{key:"handshakeVersion",value:function(){arguments.length<=0||arguments[0]===undefined||arguments[0],arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"initAd",value:function(){arguments.length<=4||arguments[4]===undefined||arguments[4],arguments.length<=5||arguments[5]===undefined||arguments[5],arguments.length<=6||arguments[6]===undefined?undefined:arguments[6]}},{key:"resizeAd",value:function(){arguments.length<=3||arguments[3]===undefined?undefined:arguments[3]}},{key:"startAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"stopAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"pauseAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"resumeAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"expandAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"collapseAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"skipAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"getAdLinear",value:function(){}},{key:"getAdWidth",value:function(){}},{key:"getAdHeight",value:function(){}},{key:"getAdExpanded",value:function(){}},{key:"getAdSkippableState",value:function(){}},{key:"getAdRemainingTime",value:function(){}},{key:"getAdDuration",value:function(){}},{key:"setAdVolume",value:function(){arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"getAdVolume",value:function(){}},{key:"getAdCompanions",value:function(){}},{key:"getAdIcons",value:function(){}}]),t}();Object.defineProperty(s,"EVENTS",{writable:!1,configurable:!1,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},{}],2:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("./IVPAIDAdUnit").IVPAIDAdUnit,c=Object.getOwnPropertyNames(l.prototype).filter(function(t){return-1===["constructor"].indexOf(t)});i.VPAIDAdUnit=function(){function t(e){n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this));return i._destroyed=!1,i._flash=e,i}return s(t,l),o(t,[{key:"_destroy",value:function(){var t=this;this._destroyed=!0,c.forEach(function(e){t._flash.removeCallbackByMethodName(e)}),l.EVENTS.forEach(function(e){t._flash.offEvent(e)}),this._flash=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"on",value:function(t,e){this._flash.on(t,e)}},{key:"off",value:function(t,e){this._flash.off(t,e)}},{key:"handshakeVersion",value:function(){var t=arguments.length<=0||arguments[0]===undefined?"2.0":arguments[0],e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("handshakeVersion",[t],e)}},{key:"initAd",value:function(t,e,i,n){var r=arguments.length<=4||arguments[4]===undefined?{AdParameters:""}:arguments[4],s=arguments.length<=5||arguments[5]===undefined?{flashVars:""}:arguments[5],a=arguments.length<=6||arguments[6]===undefined?undefined:arguments[6];this._flash.setSize(t,e),r=r||{AdParameters:""},s=s||{flashVars:""},this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),i,n,r.AdParameters||"",s.flashVars||""],a)}},{key:"resizeAd",value:function(t,e,i){var n=arguments.length<=3||arguments[3]===undefined?undefined:arguments[3];this._flash.setSize(t,e),this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),i],n)}},{key:"startAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("startAd",[],t)}},{key:"stopAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("stopAd",[],t)}},{key:"pauseAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("pauseAd",[],t)}},{key:"resumeAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("resumeAd",[],t)}},{key:"expandAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("expandAd",[],t)}},{key:"collapseAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("collapseAd",[],t)}},{key:"skipAd",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("skipAd",[],t)}},{key:"getAdLinear",value:function(t){this._flash.callFlashMethod("getAdLinear",[],t)}},{key:"getAdWidth",value:function(t){this._flash.callFlashMethod("getAdWidth",[],t)}},{key:"getAdHeight",value:function(t){this._flash.callFlashMethod("getAdHeight",[],t)}},{key:"getAdExpanded",value:function(t){this._flash.callFlashMethod("getAdExpanded",[],t)}},{key:"getAdSkippableState",value:function(t){this._flash.callFlashMethod("getAdSkippableState",[],t)}},{key:"getAdRemainingTime",value:function(t){this._flash.callFlashMethod("getAdRemainingTime",[],t)}},{key:"getAdDuration",value:function(t){this._flash.callFlashMethod("getAdDuration",[],t)}},{key:"setAdVolume",value:function(t){var e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("setAdVolume",[t],e)}},{key:"getAdVolume",value:function(t){this._flash.callFlashMethod("getAdVolume",[],t)}},{key:"getAdCompanions",value:function(t){this._flash.callFlashMethod("getAdCompanions",[],t)}},{key:"getAdIcons",value:function(t){this._flash.callFlashMethod("getAdIcons",[],t)}}]),t}()},{"./IVPAIDAdUnit":1}],3:[function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){if(this._destroyed)throw new Error("VPAIDFlashToJS is destroyed!")}function r(){this._loadLater&&(this.loadAdUnit(this._loadLater.url,this._loadLater.callback),delete this._loadLater)}function s(t,e){var i=!(arguments.length<=2||arguments[2]===undefined)&&arguments[2];Object.defineProperty(y,t,{writable:i,configurable:!1,value:e})}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("swfobject"),l=t("./jsFlashBridge").JSFlashBridge,c=t("./VPAIDAdUnit").VPAIDAdUnit,u=t("./utils").noop,d=t("./utils").callbackTimeout,h=t("./utils").isPositiveInt,p=t("./utils").createElementWithID,f=t("./utils").unique("vpaid"),m=t("./flashTester.js").createFlashTester,g="10.1.0",v={isSupported:function(){return!0}},y=function(){function t(e,n){function s(t){return setTimeout(function(){n(new Error(t))},0),y}var a=arguments.length<=2||arguments[2]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[2],c=this,m=arguments.length<=3||arguments[3]===undefined?{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"}:arguments[3],v=arguments.length<=4||arguments[4]===undefined?{debug:!1,timeout:1e4}:arguments[4];i(this,t);var y=this;if(this._vpaidParentEl=e,this._flashID=f(),this._destroyed=!1,n=n||u,a.width=h(a.width,800),a.height=h(a.height,400),p(e,this._flashID,!0),m.movie=a.data,m.FlashVars="flashid="+this._flashID+"&handler="+l.VPAID_FLASH_HANDLER+"&debug="+v.debug+"&salign="+m.salign,!t.isSupported())return s("user don't support flash or doesn't have the minimum required version of flash "+g);if(this.el=o.createSWF(a,m,this._flashID),!this.el)return s("swfobject failed to create object in element");var _=d(v.timeout,function(t,e){r.call(c),n(t,e)},function(){n("vpaid flash load timeout "+v.timeout)});this._flash=new l(this.el,a.data,this._flashID,a.width,a.height,_)}return a(t,[{key:"destroy",value:function(){this._destroyAdUnit(),this._flash&&(this._flash.destroy(),this._flash=null),this.el=null,this._destroyed=!0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_destroyAdUnit",value:function(){delete this._loadLater,this._adUnitLoad&&(this._adUnitLoad=null,this._flash.removeCallback(this._adUnitLoad)),this._adUnit&&(this._adUnit._destroy(),this._adUnit=null)}},{key:"loadAdUnit",value:function(t,e){var i=this;n.call(this),this._adUnit&&this._destroyAdUnit(),this._flash.isReady()?(this._adUnitLoad=function(t){t||(i._adUnit=new c(i._flash)),i._adUnitLoad=null,e(t,i._adUnit)},this._flash.callFlashMethod("loadAdUnit",[t],this._adUnitLoad)):this._loadLater={url:t,callback:e}}},{key:"unloadAdUnit",value:function(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];n.call(this),this._destroyAdUnit(),this._flash.callFlashMethod("unloadAdUnit",[],t)}},{key:"getFlashID",value:function(){return n.call(this),this._flash.getFlashID()}},{key:"getFlashURL",value:function(){return n.call(this),this._flash.getFlashURL()}}]),t}();s("isSupported",function(){
return o.hasFlashPlayerVersion(g)&&v.isSupported()},!0),s("runFlashTest",function(t){v=m(document.body,t)}),y.swfobject=o,e.exports=y},{"./VPAIDAdUnit":2,"./flashTester.js":4,"./jsFlashBridge":5,"./utils":8,swfobject:14}],4:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("swfobject"),a="vpaid_video_flash_tester",o="vpaid_video_flash_tester_el",l=t("./jsFlashBridge").JSFlashBridge,c=t("./utils"),u=t("./registry").MultipleValuesRegistry,d=function(){function t(e){var i=this,r=arguments.length<=1||arguments[1]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[1];n(this,t),this.parentEl=c.createElementWithID(e,o),c.hideFlashEl(this.parentEl);var a={};a.movie=r.data,a.FlashVars="flashid="+o+"&handler="+l.VPAID_FLASH_HANDLER,a.allowScriptAccess="always",this.el=s.createSWF(r,a,o),this._handlers=new u,this._isSupported=!1,this.el&&(c.hideFlashEl(this.el),this._flash=new l(this.el,r.data,o,r.width,r.height,function(){var t=!0;i._isSupported=t,i._handlers.get("change").forEach(function(e){setTimeout(function(){e("change",t)},0)})}))}return r(t,[{key:"isSupported",value:function(){return this._isSupported}},{key:"on",value:function(t,e){this._handlers.add(t,e)}}]),t}();i.createFlashTester=function(t,e){return window[a]||(window[a]=new d(t,e)),window[a]}},{"./jsFlashBridge":5,"./registry":7,"./utils":8,swfobject:14}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){var n=this;setTimeout(function(){var r=n._callbacks.get(t);r&&(n._callbacks.remove(t),r(e,i))},0)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("./utils").unique,o=t("./utils").isPositiveInt,l=t("./utils").stringEndsWith,c=t("./registry").SingleValueRegistry,u=t("./registry").MultipleValuesRegistry,d=t("./jsFlashBridgeRegistry"),h="vpaid_video_flash_handler",p="AdError",f=i.JSFlashBridge=function(){function t(e,i,r,s,o,l){n(this,t),this._el=e,this._flashID=r,this._flashURL=i,this._width=s,this._height=o,this._handlers=new u,this._callbacks=new c,this._uniqueMethodIdentifier=a(this._flashID),this._ready=!1,this._handShakeHandler=l,d.addInstance(this._flashID,this)}return s(t,[{key:"on",value:function(t,e){this._handlers.add(t,e)}},{key:"off",value:function(t,e){return this._handlers.remove(t,e)}},{key:"offEvent",value:function(t){return this._handlers.removeByKey(t)}},{key:"offAll",value:function(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function(t){var e=arguments.length<=1||arguments[1]===undefined?[]:arguments[1],i=arguments.length<=2||arguments[2]===undefined?undefined:arguments[2],s="";i&&(s=this._uniqueMethodIdentifier()+"_"+t,this._callbacks.add(s,i));try{this._el[t]([s].concat(e))}catch(n){i?r.call(this,s,n):this._trigger(p,n)}}},{key:"removeCallback",value:function(t){return this._callbacks.removeByValue(t)}},{key:"removeCallbackByMethodName",value:function(t){var e=this;this._callbacks.filterKeys(function(e){return l(e,t)}).forEach(function(t){e._callbacks.remove(t)})}},{key:"removeAllCallbacks",value:function(){return this._callbacks.removeAll()}},{key:"_trigger",value:function(t,e){var i=this;this._handlers.get(t).forEach(function(n){"AdClickThru"===t?n(e):setTimeout(function(){i._handlers.get(t).length>0&&n(e)},0)})}},{key:"_callCallback",value:function(t,e,i,n){this._callbacks.get(e)?r.call(this,e,i,n):i&&""===e&&this.trigger(p,i)}},{key:"_handShake",value:function(t,e){this._ready=!0,this._handShakeHandler&&(this._handShakeHandler(t,e),delete this._handShakeHandler)}},{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"setSize",value:function(t,e){this._width=o(t,this._width),this._height=o(e,this._height),this._el.setAttribute("width",this._width),this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this.setSize(t,this._height)}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this.setSize(this._width,t)}},{key:"getFlashID",value:function(){return this._flashID}},{key:"getFlashURL",value:function(){return this._flashURL}},{key:"isReady",value:function(){return this._ready}},{key:"destroy",value:function(){this.offAll(),this.removeAllCallbacks(),d.removeInstanceByID(this._flashID),this._el.parentElement&&this._el.parentElement.removeChild(this._el)}}]),t}();Object.defineProperty(f,"VPAID_FLASH_HANDLER",{writable:!1,configurable:!1,value:h}),window[h]=function(t,e,i,n,r,s){var a=d.getInstanceByID(t);a&&("handShake"===i?a._handShake(r,s):"event"!==e?a._callCallback(i,n,r,s):a._trigger(i,s))}},{"./jsFlashBridgeRegistry":6,"./registry":7,"./utils":8}],6:[function(t,e){"use strict";var i=new(0,t("./registry").SingleValueRegistry),n={};Object.defineProperty(n,"addInstance",{writable:!1,configurable:!1,value:function(t,e){i.add(t,e)}}),Object.defineProperty(n,"getInstanceByID",{writable:!1,configurable:!1,value:function(t){return i.get(t)}}),Object.defineProperty(n,"removeInstanceByID",{writable:!1,configurable:!1,value:function(t){return i.remove(t)}}),e.exports=n},{"./registry":7}],7:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.MultipleValuesRegistry=function(){function t(){n(this,t),this._registries={}}return r(t,[{key:"add",value:function(t,e){this._registries[t]||(this._registries[t]=[]),-1===this._registries[t].indexOf(e)&&this._registries[t].push(e)}},{key:"get",value:function(t){return this._registries[t]||[]}},{key:"filterKeys",value:function(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function(t){var e=this;return Object.keys(this._registries).filter(function(i){return-1!==e._registries[i].indexOf(t)})}},{key:"remove",value:function(t,e){if(this._registries[t]){var i=this._registries[t].indexOf(e);if(!(i<0))return this._registries[t].splice(i,1)}}},{key:"removeByKey",value:function(t){var e=this._registries[t];return delete this._registries[t],e}},{key:"removeByValue",value:function(t){var e=this;return this.findByValue(t).map(function(i){return e.remove(i,t)})}},{key:"removeAll",value:function(){var t=this._registries;return this._registries={},t}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),t}(),i.SingleValueRegistry=function(){function t(){n(this,t),this._registries={}}return r(t,[{key:"add",value:function(t,e){this._registries[t]=e}},{key:"get",value:function(t){return this._registries[t]}},{key:"filterKeys",value:function(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function(t){var e=this;return Object.keys(this._registries).filter(function(i){return e._registries[i]===t})}},{key:"remove",value:function(t){var e=this._registries[t];return delete this._registries[t],e}},{key:"removeByValue",value:function(t){var e=this;return this.findByValue(t).map(function(t){return e.remove(t)})}},{key:"removeAll",value:function(){var t=this._registries;return this._registries={},t}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),t}()},{}],8:[function(t,e,i){"use strict";function n(t){var e=-1;return function(){return t+"_"+ ++e}}function r(){}function s(t,e,i){var n=setTimeout(function(){e=r,i()},t);return function(){clearTimeout(n),e.apply(this,arguments)}}function a(t,e){var i=!(arguments.length<=2||arguments[2]===undefined)&&arguments[2],n=document.createElement("div");return n.id=e,i&&(t.innerHTML=""),t.appendChild(n),n}function o(t,e){return!isNaN(parseFloat(t))&&isFinite(t)&&t>0?t:e}function l(t,e){return u.call(t,e)}function c(t){t.style.position="absolute",t.style.left="-1px",t.style.top="-1px",t.style.width="1px",t.style.height="1px"}Object.defineProperty(i,"__esModule",{value:!0}),i.unique=n,i.noop=r,i.callbackTimeout=s,i.createElementWithID=a,i.isPositiveInt=o,i.stringEndsWith=l,i.hideFlashEl=c;var u=String.prototype.endsWith?String.prototype.endsWith:function(t,e){var i=this.toString();(e===undefined||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}},{}],9:[function(t,e){"use strict";function i(){}function n(t,e,i){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:i})}var r=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],s=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],a=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],o=["setAdVolume"];i.prototype.handshakeVersion=function(){},i.prototype.initAd=function(){},i.prototype.startAd=function(){},i.prototype.stopAd=function(){},i.prototype.skipAd=function(){},i.prototype.resizeAd=function(){},i.prototype.pauseAd=function(){},i.prototype.resumeAd=function(){},i.prototype.expandAd=function(){},i.prototype.collapseAd=function(){},i.prototype.subscribe=function(){},i.prototype.unsubscribe=function(){},i.prototype.getAdLinear=function(){},i.prototype.getAdWidth=function(){},i.prototype.getAdHeight=function(){},i.prototype.getAdExpanded=function(){},i.prototype.getAdSkippableState=function(){},i.prototype.getAdRemainingTime=function(){},i.prototype.getAdDuration=function(){},i.prototype.getAdVolume=function(){},i.prototype.getAdCompanions=function(){},i.prototype.getAdIcons=function(){},i.prototype.setAdVolume=function(){},n(i,"METHODS",r),n(i,"GETTERS",a),n(i,"SETTERS",o),n(i,"EVENTS",s);var l=r.filter(function(t){return-1===["skipAd"].indexOf(t)});n(i,"checkVPAIDInterface",function(t){return l.every(function(e){return"function"==typeof t[e]})}),e.exports=i},{}],10:[function(t,e){"use strict";function i(t,e,i,r){this._isValid=c(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=i,this._iframe=r,this._subscribers=new l,n.call(this))}function n(){if(p.forEach(function(t){this._creative.subscribe(s.bind(this,t),t)}.bind(this)),this._creative.subscribe(r.bind(this),h),this._videoEl){var t=this._iframe.contentDocument.documentElement,e=this._videoEl;t.addEventListener("click",function(i){i.target===t&&e.click()})}}function r(t,e,i){this._subscribers.triggerSync(h,{url:t,id:e,playerHandles:i})}function s(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function a(t,e,i,n){t?t(i,n):i&&e.trigger(d,i)}var o=t("./IVPAIDAdUnit"),l=t("./subscriber"),c=o.checkVPAIDInterface,u=t("./utils"),d=(o.METHODS,"AdError"),h="AdClickThru",p=o.EVENTS.filter(function(t){return t!=h});i.prototype=Object.create(o.prototype),i.prototype.isValidVPAIDAd=function(){return this._isValid},o.METHODS.forEach(function(t){-1===["subscribe","unsubscribe","initAd"].indexOf(t)&&(i.prototype[t]=function(){var e=o.prototype[t].length,i=Array.prototype.slice.call(arguments),n=e===i.length?i.pop():undefined;setTimeout(function(){var e,r=null;try{e=this._creative[t].apply(this._creative,i)}catch(c){r=c}a(n,this._subscribers,r,e)}.bind(this),0)})}),i.prototype.initAd=function(t,e,i,n,r,s,o){r=r||{},s=u.extend({slot:this._el,videoSlot:this._videoEl},s||{}),setTimeout(function(){var l;try{this._creative.initAd(t,e,i,n,r,s)}catch(d){l=d}a(o,this._subscribers,l)}.bind(this),0)},i.prototype.subscribe=function(t,e,i){this._subscribers.subscribe(e,t,i)},i.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},i.prototype.on=i.prototype.subscribe,i.prototype.off=i.prototype.unsubscribe,o.GETTERS.forEach(function(t){i.prototype[t]=function(e){setTimeout(function(){var i,n=null;try{i=this._creative[t]()}catch(l){n=l}a(e,this._subscribers,n,i)}.bind(this),0)}}),i.prototype.setAdVolume=function(t,e){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(t),i=this._creative.getAdVolume()}catch(l){n=l}n||(n=u.validate(i===t,"failed to apply volume: "+t)),a(e,this._subscribers,n,i)}.bind(this),0)},i.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},e.exports=i},{"./IVPAIDAdUnit":9,"./subscriber":12,"./utils":13}],11:[function(t,e){"use strict";function i(t,e,i,n){i=i||{},this._id=h(),this._destroyed=!1,this._frameContainer=d.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||f,extraOptions:i.extraOptions||{}}}function n(t){var e=this[t];e&&(e.remove(),delete this[t])}function r(){a.call(this),delete this._adUnit}function s(){a.call(this),l.call(this)}function a(){n.call(this,"_frame"),o.call(this)}function o(){this._onLoad&&(window.removeEventListener("message",this._onLoad),d.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function l(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function c(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function u(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var d=t("./utils"),h=d.unique("vpaidIframe"),p=t("./VPAIDAdUnit"),f='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"></script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');</script></body></html>',m="AdStopped";i.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,s.call(this))},i.prototype.isDestroyed=function(){return this._destroyed},i.prototype.loadAdUnit=function(t,e){function i(t){if(t.origin===u()&&JSON.parse(t.data).id===a.getID()){var i,n,s;if(a._frame.contentWindow?(s=a._frame.contentWindow.getVPAIDAd,n=d.validate("function"==typeof s,"the ad didn't return a function to create an ad")):n="the iframe is not anymore in the DOM tree",!n){var l=a._frame.contentWindow.document.querySelector(".ad-element");(i=new p(s(),l,a._videoEl,a._frame)).subscribe(m,r.bind(a)),n=d.validate(i.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return a._adUnit=i,o.call(a),e(n,n?null:i),!0}}function n(){e("timeout",null)}c.call(this),s.call(this);var a=this,l=d.createIframeWithContent(this._frameContainer,this._templateConfig.template,d.extend({iframeURL_JS:t,iframeID:this.getID(),origin:u()},this._templateConfig.extraOptions));this._frame=l,this._onLoad=d.callbackTimeout(this._vpaidOptions.timeout,i.bind(this),n.bind(this)),window.addEventListener("message",this._onLoad)},i.prototype.unloadAdUnit=function(){s.call(this)},i.prototype.getID=function(){return this._id},e.exports=i,window.VPAIDHTML5Client=i},{"./VPAIDAdUnit":10,"./utils":13}],12:[function(t,e){"use strict";function i(){this._subscribers={}}i.prototype.subscribe=function(t,e,i){this.isHandlerAttached(t,e)||this.get(e).push({handler:t,context:i,eventName:e})},i.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})},i.prototype.unsubscribeAll=function(){this._subscribers={}},i.prototype.trigger=function(t,e){var i=this;this.get(t).concat(this.get("*")).forEach(function(t){setTimeout(function(){i.isHandlerAttached(t.handler,t.eventName)&&t.handler.call(t.context,e)},0)})},i.prototype.triggerSync=function(t,e){this.get(t).concat(this.get("*")).forEach(function(t){t.handler.call(t.context,e)})},i.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},i.prototype.isHandlerAttached=function(t,e){return this.get(e).some(function(e){return t===e.handler})},e.exports=i},{}],13:[function(t,e){"use strict";function i(){}function n(t,e){return t?null:new Error(e)}function r(t){var e=p[t];e&&(clearTimeout(e),delete p[t])}function s(t,e,n){var s,a;return a=setTimeout(function(){e=i,delete a[s],n()},t),p[s=function(){e.apply(this,arguments)&&r(s)}]=a,s}function a(t,e,i){var n=document.createElement(e);return i&&(n.id=i),t.appendChild(n),n}function o(t,e,i){var n=l(t,null,i.zIndex);if(u(n,c(e,i)))return n}function l(t,e,i){var n=document.createElement("iframe");return n.src=e||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.margin="0px",n.style.padding="0px",n.style.border="none",i&&(n.style.zIndex=i),n.setAttribute("SCROLLING","NO"),t.innerHTML="",t.appendChild(n),n}function c(t,e){return Object.keys(e).forEach(function(i){var n="object"==typeof n?JSON.stringify(e[i]):e[i];t=t.replace(new RegExp("{{"+i+"}}","g"),n)}),t}function u(t,e){var i=t.contentWindow&&t.contentWindow.document;return!!i&&(i.write(e),!0)}function d(t,e){return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}function h(t){var e=-1;return function(){return t+"_"+ ++e}}var p={};e.exports={noop:i,validate:n,clearCallbackTimeout:r,callbackTimeout:s,createElementInEl:a,createIframeWithContent:o,createIframe:l,simpleTemplate:c,setIframeContent:u,extend:d,unique:h}},{}],14:[function(t,e){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():t.swfobject=i()}(this,function(){function t(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",(t=F.getElementsByTagName("body")[0].appendChild(e)).parentNode.removeChild(t),t=null,e=null}catch(D){return}q=!0;for(var i=z.length,n=0;n<i;n++)z[n]()}}function e(t){q?t():z[z.length]=t}function i(t){if(typeof N.addEventListener!==I)N.addEventListener("load",t,!1);else if(typeof F.addEventListener!==I)F.addEventListener("load",t,!1);else if(typeof N.attachEvent!==I)_(N,"onload",t);else if("function"==typeof N.onload){var e=N.onload;N.onload=function(){e(),t()}}else N.onload=t}function n(){var t=F.getElementsByTagName("body")[0],e=v(L);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",M);var i=t.appendChild(e);if(i){var n=0;!function s(){if(typeof i.GetVariable!==I)try{var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),Y.pv=[y(a[0]),y(a[1]),y(a[2])])}catch(M){Y.pv=[8,0,0]}else if(n<10)return n++,void setTimeout(s,10);t.removeChild(e),i=null,r()}()}else r()}function r(){var t=V.length;if(t>0)for(var e=0;e<t;e++){var i=V[e].id,n=V[e].callbackFn,r={success:!1,id:i};if(Y.pv[0]>0){var c=g(i);if(c)if(!b(V[e].swfVersion)||Y.wk&&Y.wk<312)if(V[e].expressInstall&&a()){var u={};u.data=V[e].expressInstall,u.width=c.getAttribute("width")||"0",u.height=c.getAttribute("height")||"0",c.getAttribute("class")&&(u.styleclass=c.getAttribute("class")),c.getAttribute("align")&&(u.align=c.getAttribute("align"));for(var d={},h=c.getElementsByTagName("param"),p=h.length,f=0;f<p;f++)"movie"!==h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));o(u,d,i,n)}else l(c),n&&n(r);else T(i,!0),n&&(r.success=!0,r.ref=s(i),r.id=i,n(r))}else if(T(i,!0),n){var m=s(i);m&&typeof m.SetVariable!==I&&(r.success=!0,r.ref=m,r.id=m.id),n(r)}}}function s(t){var e=null,i=g(t);return i&&"OBJECT"===i.nodeName.toUpperCase()&&(e=typeof i.SetVariable!==I?i:i.getElementsByTagName(L)[0]||i),e}function a(){return!$&&b("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function o(t,e,i,n){var r=g(i);if(i=m(i),$=!0,x=n||null,E={success:!1,id:i},r){"OBJECT"===r.nodeName.toUpperCase()?(S=c(r),C=null):(S=r,C=i),t.id=j,(typeof t.width===I||!/%$/.test(t.width)&&y(t.width)<310)&&(t.width="310"),(typeof t.height===I||!/%$/.test(t.height)&&y(t.height)<137)&&(t.height="137");var s=Y.ie?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURIComponent(N.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+s+"&MMdoctitle="+encodeURIComponent(F.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!==I?e.flashvars+="&"+a:e.flashvars=a,Y.ie&&4!=r.readyState){var o=v("div");i+="SWFObjectNew",o.setAttribute("id",i),r.parentNode.insertBefore(o,r),r.style.display="none",p(r)}d(t,e,i)}}function l(t){if(Y.ie&&4!=t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(c(t),e),p(t)}else t.parentNode.replaceChild(c(t),t)}function c(t){var e=v("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(L)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;s<r;s++)1==n[s].nodeType&&"PARAM"===n[s].nodeName||8==n[s].nodeType||e.appendChild(n[s].cloneNode(!0))}}return e}function u(t,e){var i=v("div");return i.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",i.firstChild}function d(t,e,i){var n,r=g(i);if(i=m(i),Y.wk&&Y.wk<312)return n;if(r){var s,a,o,l=Y.ie?v("div"):v(L);for(o in typeof t.id===I&&(t.id=i),e)e.hasOwnProperty(o)&&"movie"!==o.toLowerCase()&&h(l,o,e[o]);for(s in Y.ie&&(l=u(t.data,l.innerHTML)),t)t.hasOwnProperty(s)&&("styleclass"===(a=s.toLowerCase())?l.setAttribute("class",t[s]):"classid"!==a&&"data"!==a&&l.setAttribute(s,t[s]));Y.ie?H[H.length]=t.id:(l.setAttribute("type",M),l.setAttribute("data",t.data)),r.parentNode.replaceChild(l,r),n=l}return n}function h(t,e,i){var n=v("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function p(t){var e=g(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(Y.ie?(e.style.display="none",function i(){if(4==e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else setTimeout(i,10)}()):e.parentNode.removeChild(e))}function f(t){return t&&t.nodeType&&1===t.nodeType}function m(t){return f(t)?t.id:t}function g(t){if(f(t))return t;var e=null;try{e=F.getElementById(t)}catch(D){}return e}function v(t){return F.createElement(t)}function y(t){return parseInt(t,10)}function _(t,e,i){t.attachEvent(e,i),W[W.length]=[t,e,i]}function b(t){t+="";var e=Y.pv,i=t.split(".");return i[0]=y(i[0]),i[1]=y(i[1])||0,i[2]=y(i[2])||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function w(t,e,i,n){var r=F.getElementsByTagName("head")[0];if(r){var s="string"==typeof i?i:"screen";if(n&&(A=null,P=null),!A||P!=s){var a=v("style");a.setAttribute("type","text/css"),a.setAttribute("media",s),A=r.appendChild(a),Y.ie&&typeof F.styleSheets!==I&&F.styleSheets.length>0&&(A=F.styleSheets[F.styleSheets.length-1]),P=s}A&&(typeof A.addRule!==I?A.addRule(t,e):typeof F.createTextNode!==I&&A.appendChild(F.createTextNode(t+" {"+e+"}")))}}function T(t,e){if(G){var i=e?"visible":"hidden",n=g(t);q&&n?n.style.visibility=i:"string"==typeof t&&w("#"+t,"visibility:"+i)}}function k(t){return null!==/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!==I?encodeURIComponent(t):t}var S,C,x,E,A,P,I="undefined",L="object",D="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",M="application/x-shockwave-flash",j="SWFObjectExprInst",R="onreadystatechange",N=window,F=document,B=navigator,U=!1,z=[],V=[],H=[],W=[],q=!1,$=!1,G=!0,X=!1,Y=function(){var t=typeof F.getElementById!==I&&typeof F.getElementsByTagName!==I&&typeof F.createElement!==I,e=B.userAgent.toLowerCase(),i=B.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(e),r=i?/mac/.test(i):/mac/.test(e),s=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a="Microsoft Internet Explorer"===B.appName,o=[0,0,0],l=null;if(typeof B.plugins!==I&&typeof B.plugins[D]===L)(l=B.plugins[D].description)&&typeof B.mimeTypes!==I&&B.mimeTypes[M]&&B.mimeTypes[M].enabledPlugin&&(U=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=y(l.replace(/^(.*)\..*$/,"$1")),o[1]=y(l.replace(/^.*\.(.*)\s.*$/,"$1")),o[2]=/[a-zA-Z]/.test(l)?y(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof N.ActiveXObject!==I)try{var c=new ActiveXObject(O);c&&(l=c.GetVariable("$version"))&&(a=!0,o=[y((l=l.split(" ")[1].split(","))[0]),y(l[1]),y(l[2])])}catch(q){}return{w3:t,pv:o,wk:s,ie:a,win:n,mac:r}}();Y.w3&&((typeof F.readyState!==I&&("complete"===F.readyState||"interactive"===F.readyState)||typeof F.readyState===I&&(F.getElementsByTagName("body")[0]||F.body))&&t(),q||(typeof F.addEventListener!==I&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&(F.attachEvent(R,function K(){"complete"===F.readyState&&(F.detachEvent(R,K),t())}),N==top&&function Q(){if(!q){try{F.documentElement.doScroll("left")}catch(I){return void setTimeout(Q,0)}t()}}()),Y.wk&&function Z(){q||(/loaded|complete/.test(F.readyState)?t():setTimeout(Z,0))}()));z[0]=function(){U?n():r()};Y.ie&&window.attachEvent("onunload",function(){for(var t=W.length,e=0;e<t;e++)W[e][0].detachEvent(W[e][1],W[e][2]);for(var i=H.length,n=0;n<i;n++)p(H[n]);for(var r in Y)Y[r]=null;for(var s in Y=null,swfobject)swfobject[s]=null;swfobject=null});return{registerObject:function(t,e,i,n){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=i,r.callbackFn=n,V[V.length]=r,T(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,i,n,r,s,l,c,u,h,p){var f=m(i),g={success:!1,id:f};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&i&&n&&r&&s?(T(f,!1),e(function(){n+="",r+="";var e={};if(h&&typeof h===L)for(var m in h)e[m]=h[m];e.data=t,e.width=n,e.height=r;var v={};if(u&&typeof u===L)for(var y in u)v[y]=u[y];if(c&&typeof c===L)for(var _ in c)if(c.hasOwnProperty(_)){var w=X?encodeURIComponent(_):_,k=X?encodeURIComponent(c[_]):c[_];typeof v.flashvars!==I?v.flashvars+="&"+w+"="+k:v.flashvars=w+"="+k}if(b(s)){var S=d(e,v,i);e.id==f&&T(f,!0),g.success=!0,g.ref=S,g.id=S.id}else{if(l&&a())return e.data=l,void o(e,v,i,p);T(f,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){G=!1},enableUriEncoding:function(t){X=typeof t===I||t},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,i){return Y.w3?d(t,e,i):undefined},showExpressInstall:function(t,e,i,n){Y.w3&&a()&&o(t,e,i,n)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,i,n){Y.w3&&w(t,e,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),!t)return k(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return k(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if($){var t=g(j);t&&S&&(t.parentNode.replaceChild(S,t),C&&(T(C,!0),Y.ie&&(S.style.display="block")),x&&x(E)),$=!1}},version:"2.3"}})},{}],15:[function(t,e){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.initialize(t)}var n=t("./InLine"),r=t("./Wrapper");i.prototype.initialize=function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),t.inLine&&(this.inLine=new n(t.inLine)),t.wrapper&&(this.wrapper=new r(t.wrapper))},e.exports=i},{"./InLine":18,"./Wrapper":28}],16:[function(t,e){"use strict";function i(t){function e(t){var e=[];return r.isDefined(t)&&(t=r.isArray(t)?t:[t]).forEach(function(t){e.push(new n(t))}),e}if(!(this instanceof i))return new i(t);a.info("<Companion> found companion ad"),a.debug("<Companion>  companionJTree:",t),this.creativeType=s.attr(t.staticResource,"creativeType"),this.staticResource=s.keyValue(t.staticResource),a.info("<Companion>  creativeType: "+this.creativeType),a.info("<Companion>  staticResource: "+this.staticResource);var o=null;s.keyValue(t.HTMLResource)?o=s.keyValue(t.HTMLResource):s.keyValue(t.hTMLResource)&&(o=s.keyValue(t.hTMLResource)),null!==o&&a.info("<Companion> found html resource",o),this.htmlResource=o;var l=null;s.keyValue(t.IFrameResource)?l=s.keyValue(t.IFrameResource):s.keyValue(t.iFrameresource)&&(l=s.keyValue(t.iFrameresource)),null!==l&&a.info("<Companion> found iframe resource",l),this.iframeResource=l,this.id=s.attr(t,"id"),this.width=s.attr(t,"width"),this.height=s.attr(t,"height"),this.expandedWidth=s.attr(t,"expandedWidth"),this.expandedHeight=s.attr(t,"expandedHeight"),this.scalable=s.attr(t,"scalable"),this.maintainAspectRatio=s.attr(t,"maintainAspectRatio"),this.minSuggestedDuration=s.attr(t,"minSuggestedDuration"),this.apiFramework=s.attr(t,"apiFramework"),this.companionClickThrough=s.keyValue(t.companionClickThrough),this.trackingEvents=e(t.trackingEvents&&t.trackingEvents.tracking),a.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}var n=t("./TrackingEvent"),r=t("../../utils/utilityFunctions"),s=t("../../utils/xml"),a=t("../../utils/consoleLogger");e.exports=i},{"../../utils/consoleLogger":41,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./TrackingEvent":21}],17:[function(t,e){"use strict";function i(t){if(!(this instanceof i))return new i(t);if(this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.adId=t.attr("adId"),this.apiFramework=t.attr("apiFramework"),t.linear&&(this.linear=new n(t.linear)),t.companionAds){var e=[],a=t.companionAds&&t.companionAds.companion;s.isDefined(a)&&(a=s.isArray(a)?a:[a]).forEach(function(t){e.push(new r(t))}),this.companionAds=e}}var n=t("./Linear"),r=t("./Companion"),s=t("../../utils/utilityFunctions");i.prototype.isSupported=function(){return!this.linear||this.linear.isSupported()},i.parseCreatives=function(t){var e=[];return s.isDefined(t)&&s.isDefined(t.creative)&&(s.isArray(t.creative)?t.creative:[t.creative]).forEach(function(t){e.push(new i(t))}),e},e.exports=i},{"../../utils/utilityFunctions":47,"./Companion":16,"./Linear":19}],18:[function(t,e){"use strict";function i(t){function e(t){return t?s.transformArray(s.isArray(t)?t:[t],function(t){return s.isNotEmptyString(t.keyValue)?{uri:t.keyValue,type:t.attr("type")}:undefined}):[]}if(!(this instanceof i))return new i(t);this.adTitle=a.keyValue(t.adTitle),this.adSystem=a.keyValue(t.adSystem),this.impressions=n.parseImpressions(t.impression),this.creatives=r.parseCreatives(t.creatives),this.description=a.keyValue(t.description),this.advertiser=a.keyValue(t.advertiser),this.surveys=e(t.survey),this.error=a.keyValue(t.error),this.pricing=a.keyValue(t.pricing),this.extensions=t.extensions}var n=t("./vastUtil"),r=t("./Creative"),s=t("../../utils/utilityFunctions"),a=t("../../utils/xml");i.prototype.isSupported=function(){var t,e;if(0===this.creatives.length)return!1;for(t=0,e=this.creatives.length;t<e;t+=1)if(!this.creatives[t].isSupported())return!1;return!0},e.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],19:[function(t,e){"use strict";function i(t){function e(t,e){var i=[];return a.isDefined(t)&&(t=a.isArray(t)?t:[t]).forEach(function(t){i.push(new n(t,e))}),i}function c(t){var e=[];return a.isDefined(t)&&(t=a.isArray(t)?t:[t]).forEach(function(t){e.push(new r(t))}),e}if(!(this instanceof i))return new i(t);this.duration=o.duration(l.keyValue(t.duration)),this.mediaFiles=c(t.mediaFiles&&t.mediaFiles.mediaFile),this.trackingEvents=e(t.trackingEvents&&t.trackingEvents.tracking,this.duration),this.skipoffset=o.offset(window.vastClientConfig&&window.vastClientConfig.adSkipOffset||l.attr(t,"skipoffset"),this.duration),t.videoClicks&&(this.videoClicks=new s(t.videoClicks)),t.adParameters&&(this.adParameters=l.keyValue(t.adParameters),l.attr(t.adParameters,"xmlEncoded")&&(this.adParameters=l.decode(this.adParameters)))}var n=t("./TrackingEvent"),r=t("./MediaFile"),s=t("./VideoClicks"),a=t("../../utils/utilityFunctions"),o=t("./parsers"),l=t("../../utils/xml");i.prototype.isSupported=function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1)if(this.mediaFiles[t].isSupported())return!0;return!1},e.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./MediaFile":20,"./TrackingEvent":21,"./VideoClicks":27,"./parsers":29}],20:[function(t,e){"use strict";function i(t){
if(!(this instanceof i))return new i(t);this.src=n.keyValue(t);for(var e=0;e<s.length;e++){var r=s[e];this[r]=t.attr(r)}}var n=t("../../utils/xml"),r=t("./vastUtil"),s=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];i.prototype.isSupported=function(){return r.isVPAID(this)?!!r.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||r.isFlashSupported()},e.exports=i},{"../../utils/xml":48,"./vastUtil":30}],21:[function(t,e){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);this.name=t.attr("event"),this.uri=r.keyValue(t),"progress"===this.name&&(this.offset=n.offset(t.attr("offset"),e))}var n=t("./parsers"),r=t("../../utils/xml");e.exports=i},{"../../utils/xml":48,"./parsers":29}],22:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);var e={WRAPPER_LIMIT:5};t=t||{},this.settings=u.extend({},t,e),this.errorURLMacros=[]}var r=t("./Ad"),s=t("./VASTError"),a=t("./VASTResponse"),o=t("./vastUtil"),l=t("../../utils/async"),c=t("../../utils/http").http,u=t("../../utils/utilityFunctions"),d=t("../../utils/xml"),h=t("../../utils/consoleLogger");n.prototype.getVASTResponse=function(t,e){function i(t,e){try{e(null,r._buildVASTResponse(t))}catch(s){e(s)}}function n(t,e){return t?u.isFunction(e)?void 0:new s("on VASTClient.getVASTResponse, missing callback function"):new s("on VASTClient.getVASTResponse, missing ad tag URL")}var r=this,a=n(t,e);if(a){if(u.isFunction(e))return e(a);throw a}l.waterfall([this._getVASTAd.bind(this,t),i],e)},n.prototype._getVASTAd=function(t,e){function i(t,e){var i=m._requestVASTXml.bind(m,t);l.waterfall([i,n],e)}function n(t,e){var i;try{i=d.toJXONTree(t),h.debug("built JXONTree from VAST response:",i),u.isArray(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],e(a(i),i)}catch(r){e(new s("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function a(t){var e=d.attr(t,"version");return t.ad?e&&3!=e&&2!=e?new s('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+e+'"',102):null:new s("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}function o(t,e,i){if(e.length>=m.WRAPPER_LIMIT)return i(new s("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+m.WRAPPER_LIMIT+")",302),e);l.waterfall([function(e){u.isString(t)?f(t,e):e(null,t)},c],function(t,n){return n&&e.push(n),t?i(t,e):n.wrapper?o(n.wrapper.VASTAdTagURI,e,i):i(null,e)})}function c(t,e){try{var n=new r(t);e(p(n),n)}catch(i){e(new s("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function p(t){var e=t.wrapper,i=t.inLine,n="on VASTClient.getVASTAd.validateAd, ";return i&&e?new s(n+"InLine and Wrapper both found on the same Ad",101):i||e?i&&!i.isSupported()?new s(n+"could not find MediaFile that is supported by this video player",403):e&&!e.VASTAdTagURI?new s(n+"missing 'VASTAdTagURI' in wrapper",101):null:new s(n+"nor wrapper nor inline elements found on the Ad",101)}function f(t,e){m._requestVASTXml(t,function(t,n){if(t)return e(t);try{var r=d.toJXONTree(n);e(a(r),r.ad)}catch(i){e(new s("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}var m=this;i(t,function(t,i){function n(t,i){t?(m._trackError(t,i),r.length>0?o(r.shift(),[],n):e(t,i)):e(null,i)}var r=i&&u.isArray(i.ads)?i.ads:null;if(t)return m._trackError(t,r),e(t,r);o(r.shift(),[],n)})},n.prototype._requestVASTXml=function(t,e){function n(t,i,n){if(t){var r=u.isDefined(n)?"on VASTClient.requestVastXML, HTTP request error with status '"+n+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return e(new s(r,301),null)}e(null,i)}try{u.isFunction(t)?t(n):(h.info("requesting adTagUrl: "+t),c.get(t,n,{withCredentials:!0}))}catch(i){e(i)}},n.prototype._buildVASTResponse=function(t){function e(t,e){e.forEach(function(e){t.addAd(e)})}function i(t){var e=t.trackingEvents.progress;if(!t.hasLinear())throw new s("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200);if(t.duration===undefined)throw new s("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101);e&&e.forEach(function(t){if(!u.isNumber(t.offset))throw new s("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)})}var n=new a;return e(n,t),i(n),n},n.prototype._trackError=function(t,e){function i(t){t.wrapper&&t.wrapper.error&&n.push(t.wrapper.error),t.inLine&&t.inLine.error&&n.push(t.inLine.error)}if(u.isArray(e)&&0!==e.length){var n=[];e.forEach(i),o.track(n,{ERRORCODE:t.code||900})}},e.exports=n},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/http":43,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],23:[function(t,e){"use strict";function i(t,e){this.message="VAST Error: "+(t||""),e&&(this.code=e)}i.prototype=new Error,i.prototype.name="VAST Error",e.exports=i},{}],24:[function(t,e){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.player=t}var n=t("./VASTResponse"),r=t("./VASTError"),s=t("./VASTTracker"),a=t("./vastUtil"),o=t("../../utils/async"),l=t("../../utils/dom"),c=t("../../utils/playerUtils"),u=t("../../utils/utilityFunctions"),d=t("../../utils/consoleLogger");i.prototype.playAd=function(t,e){var i=this;return e=e||u.noop,t instanceof n?(o.waterfall([function(e){e(null,t)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(t,n){t&&n&&i._trackError(t,n),e(t,n)}),this._adUnit={_src:null,type:"VAST",pauseAd:function(){i.player.pause(!0)},resumeAd:function(){i.player.play(!0)},isPaused:function(){return i.player.paused(!0)},getSrc:function(){return this._src}},this._adUnit):e(new r("On VASTIntegrator, missing required VASTResponse"))},i.prototype._selectAdSource=function(t,e){var i,n=l.getDimension(this.player.el()).width;if(t.mediaFiles.sort(function(t,e){return Math.abs(n-t.width)-Math.abs(n-e.width)}),i=this.player.selectSource(t.mediaFiles).source)return d.info("selected source: ",i),this._adUnit&&(this._adUnit._src=i),e(null,i,t);e(new r("Could not find Ad mediafile supported by this player",403),t)},i.prototype._createVASTTracker=function(t,e,i){try{i(null,t,new s(t.src,e),e)}catch(n){i(n,e)}},i.prototype._setupEvents=function(t,e,i,n){function r(){h.off("fullscreenchange",s),h.off("vast.adStart",l),h.off("pause",a),h.off("timeupdate",o),h.off("volumechange",u)}function s(){h.isFullscreen()?e.trackFullscreen():e.trackExitFullscreen()}function a(){Math.abs(h.duration()-h.currentTime())<2||(e.trackPause(),c.once(h,["play","vast.adEnd","vast.adsCancel"],function(t){"play"===t.type&&e.trackResume()}))}function o(){var t=1e3*h.currentTime();e.trackProgress(t)}function l(){e.trackImpressions(),e.trackCreativeView()}function u(){var t=h.muted();t?e.trackMute():d&&e.trackUnmute(),d=t}var d,h=this.player;return h.on("fullscreenchange",s),h.on("vast.adStart",l),h.on("pause",a),h.on("timeupdate",o),h.on("volumechange",u),c.once(h,["vast.adEnd","vast.adsCancel"],r),c.once(h,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(t){"vast.adEnd"===t.type&&e.trackComplete()}),n(null,t,i)},i.prototype._addSkipButton=function(t,e,i,n){function r(t,e){function i(){t.off("timeupdate",r),l.remove(n)}var n=s(t),r=a.bind(d,n,e,t);t.el().appendChild(n),t.on("timeupdate",r),c.once(t,["vast.adEnd","vast.adsCancel"],i)}function s(t){var i=window.document.createElement("div");return l.addClass(i,"vast-skip-button"),i.onclick=function(n){if(l.hasClass(i,"enabled")&&(e.trackSkip(),t.trigger("vast.adSkip")),window.Event.prototype.stopPropagation===undefined)return!1;n.stopPropagation()},i}function a(t,e,i){var n=Math.ceil(e-i.currentTime());n>0?t.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c "+u.toFixedDigits(n,2)+"...":l.hasClass(t,"enabled")||(l.addClass(t,"enabled"),t.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c")}var o,d=this;u.isNumber(i.skipoffset)&&(o=i.skipoffset/1e3,r(this.player,o)),n(null,t,e,i)},i.prototype._addClickThrough=function(t,e,i,n){function r(t,e,i){var n=window.document.createElement("a"),r=i.clickThrough;return l.addClass(n,"vast-blocker"),n.href=o(r,t),u.isString(r)&&(n.target="_blank"),n.onclick=function(i){if(t.paused())return t.play(),window.Event.prototype.stopPropagation!==undefined&&i.stopPropagation(),!1;t.pause(),e.trackClick()},n}function s(t,e,i){t.href=o(e.clickThrough,i)}function o(e,i){var n={ASSETURI:t.src,CONTENTPLAYHEAD:a.formatProgress(1e3*i.currentTime())};return e?a.parseURLMacro(e,n):"#"}function d(){h.off("timeupdate",f),l.remove(p)}var h=this.player,p=r(h,e,i),f=s.bind(this,p,i,h);return h.el().insertBefore(p,h.controlBar.el()),h.on("timeupdate",f),c.once(h,["vast.adEnd","vast.adsCancel"],d),n(null,t,e,i)},i.prototype._playSelectedAd=function(t,e,i){function n(){c.once(s,["playing","vast.adsCancel"],function(t){function n(t){"ended"===t.type&&s.duration()-s.currentTime()>3||(s.off("ended",n),s.off("vast.adsCancel",n),s.off("vast.adSkip",n),"ended"!==t.type&&"vast.adSkip"!==t.type||i(null,e))}"vast.adsCancel"!==t.type&&(d.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart..."),s.trigger("vast.adStart"),s.on("ended",n),s.on("vast.adsCancel",n),s.on("vast.adSkip",n))}),d.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()..."),s.play()}var s=this.player;s.preload("auto"),s.src(t),d.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad..."),c.once(s,["durationchange","error","vast.adsCancel"],function(t){"durationchange"===t.type?(d.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()"),n()):"error"===t.type&&i(new r("on VASTIntegrator, Player is unable to play the Ad",400),e)})},i.prototype._trackError=function(t,e){a.track(e.errorURLMacros,{ERRORCODE:t.code||900})},e.exports=i},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./VASTTracker":26,"./vastUtil":30}],25:[function(t,e){"use strict";function i(){if(!(this instanceof i))return new i;this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.clickThrough=undefined,this.adTitle="",this.duration=undefined,this.skipoffset=undefined}function n(t,e){e.forEach(function(e){t.push(e)})}var r=t("./Ad"),s=t("./VideoClicks"),a=t("./Linear"),o=t("./InLine"),l=t("./Wrapper"),c=t("../../utils/utilityFunctions"),u=t("../../utils/xml");window.InLine__A=o,i.prototype.addAd=function(t){var e,i;t instanceof r&&(e=t.inLine,i=t.wrapper,this.ads.push(t),e&&this._addInLine(e),i&&this._addWrapper(i))},i.prototype._addErrorTrackUrl=function(t){var e=t instanceof u.JXONTree?u.keyValue(t):t;e&&this.errorURLMacros.push(e)},i.prototype._addImpressions=function(t){c.isArray(t)&&n(this.impressions,t)},i.prototype._addClickThrough=function(t){c.isNotEmptyString(t)&&(this.clickThrough=t)},i.prototype._addClickTrackings=function(t){c.isArray(t)&&n(this.clickTrackings,t)},i.prototype._addCustomClicks=function(t){c.isArray(t)&&n(this.customClicks,t)},i.prototype._addTrackingEvents=function(t){var e=this.trackingEvents;t&&(t=c.isArray(t)?t:[t]).forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)})},i.prototype._addTitle=function(t){c.isNotEmptyString(t)&&(this.adTitle=t)},i.prototype._addDuration=function(t){c.isNumber(t)&&(this.duration=t)},i.prototype._addVideoClicks=function(t){t instanceof s&&(this._addClickThrough(t.clickThrough),this._addClickTrackings(t.clickTrackings),this._addCustomClicks(t.customClicks))},i.prototype._addMediaFiles=function(t){c.isArray(t)&&n(this.mediaFiles,t)},i.prototype._addSkipoffset=function(t){t&&(this.skipoffset=t)},i.prototype._addAdParameters=function(t){t&&(this.adParameters=t)},i.prototype._addLinear=function(t){t instanceof a&&(this._addDuration(t.duration),this._addTrackingEvents(t.trackingEvents),this._addVideoClicks(t.videoClicks),this._addMediaFiles(t.mediaFiles),this._addSkipoffset(t.skipoffset),this._addAdParameters(t.adParameters),this._linearAdded=!0)},i.prototype._addInLine=function(t){var e=this;t instanceof o&&(this._addTitle(t.adTitle),this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),t.creatives.forEach(function(t){t.linear&&e._addLinear(t.linear)}))},i.prototype._addWrapper=function(t){var e=this;t instanceof l&&(this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),t.creatives.forEach(function(t){var i=t.linear;i&&(e._addVideoClicks(i.videoClicks),e.clickThrough=undefined,e._addTrackingEvents(i.trackingEvents))}))},i.prototype.hasLinear=function(){return this._linearAdded},e.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./InLine":18,"./Linear":19,"./VideoClicks":27,"./Wrapper":28}],26:[function(t,e){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);this.sanityCheck(t,e),this.initialize(t,e)}var n=t("./VASTError"),r=t("./VASTResponse"),s=t("./vastUtil"),a=t("../../utils/utilityFunctions");i.prototype.initialize=function(t,e){this.response=e,this.assetURI=t,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*e.duration)/100},midpoint:{tracked:!1,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*e.duration)/100}}},i.prototype.sanityCheck=function(t,e){if(!a.isString(t)||a.isEmptyString(t))throw new n("on VASTTracker constructor, missing required the URI of the ad asset being played");if(!(e instanceof r))throw new n("on VASTTracker constructor, missing required VAST response")},i.prototype.trackURLs=function(t,e){a.isArray(t)&&t.length>0&&(e=a.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:s.formatProgress(this.progress)},e||{}),s.track(t,e))},i.prototype.trackEvent=function(t,e){function i(t){var e;return t&&(e=[],t.forEach(function(t){e.push(t.uri)})),e}this.trackURLs(i(this.response.trackingEvents[t])),e&&(this.response.trackingEvents[t]=undefined)},i.prototype.trackProgress=function(t){function e(e,i){var n=3e3;return e>t&&Math.abs(i-e)>n}function i(t,e,i){h[t]&&i&&c.push({name:t,trackOnce:!!e})}function n(t){function e(t,e){var s=n[t];r(s,e)&&(s.tracked=!0,i(t,u,!0))}var n=l.quartiles,s=l.quartiles.firstQuartile,a=l.quartiles.midpoint,o=l.quartiles.thirdQuartile;s.tracked?a.tracked?o.tracked||e("thirdQuartile",t):e("midpoint",t):e("firstQuartile",t)}function r(t,e){var i=t.time;return e>=i&&e<=i+5e3}function s(t){if(a.isArray(h.progress)){var e=[];h.progress.forEach(function(i){i.offset<=t?l.trackURLs([i.uri]):e.push(i)}),h.progress=e}}function o(){c.forEach(function(t){l.trackEvent(t.name,t.trackOnce)})}var l=this,c=[],u=!0,d=!1,h=this.response.trackingEvents;a.isNumber(t)&&(i("start",u,t>0),i("rewind",d,e(this.progress,t)),n(t),s(t),o(),this.progress=t)},["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){i.prototype["track"+a.capitalize(t)]=function(){this.trackEvent(t)}}),["start","skip","close","closeLinear"].forEach(function(t){i.prototype["track"+a.capitalize(t)]=function(){this.trackEvent(t,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){i.prototype["track"+a.capitalize(t)]=function(){this.quartiles[t].tracked=!0,this.trackEvent(t,!0)}}),i.prototype.trackComplete=function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)},i.prototype.trackErrorWithCode=function(t){a.isNumber(t)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})},i.prototype.trackImpressions=function(){this.trackURLs(this.response.impressions)},i.prototype.trackCreativeView=function(){this.trackEvent("creativeView")},i.prototype.trackClick=function(){this.trackURLs(this.response.clickTrackings)},e.exports=i},{"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],27:[function(t,e){"use strict";function i(t){function e(t){var e=[];return t&&(t=n.isArray(t)?t:[t]).forEach(function(t){e.push(r.keyValue(t))}),e}if(!(this instanceof i))return new i(t);this.clickThrough=r.keyValue(t.clickThrough),this.clickTrackings=e(t.clickTracking),this.customClicks=e(t.customClick)}var n=t("../../utils/utilityFunctions"),r=t("../../utils/xml");e.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48}],28:[function(t,e){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.adSystem=a.keyValue(t.adSystem),this.impressions=n.parseImpressions(t.impression),this.VASTAdTagURI=a.keyValue(t.vASTAdTagURI),this.creatives=r.parseCreatives(t.creatives),this.error=a.keyValue(t.error),this.extensions=t.extensions,this.followAdditionalWrappers=!s.isDefined(a.attr(t,"followAdditionalWrappers"))||a.attr(t,"followAdditionalWrappers"),this.allowMultipleAds=a.attr(t,"allowMultipleAds"),this.fallbackOnNoAd=a.attr(t,"fallbackOnNoAd")}var n=t("./vastUtil"),r=t("./Creative"),s=t("../../utils/utilityFunctions"),a=t("../../utils/xml");e.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],29:[function(t,e){"use strict";var i=t("../../utils/utilityFunctions"),n=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,r={duration:function(t){function e(t){return 60*parseInt(t,10)*60*1e3}function r(t){return 60*parseInt(t,10)*1e3}function s(t){return 1e3*parseInt(t,10)}var a,o;return i.isString(t)&&(a=t.match(n))&&(o=e(a[1])+r(a[2])+s(a[3])+parseInt(a[5]||0)),isNaN(o)?null:o},offset:function(t,e){function i(t){return/^\d+(\.\d+)?%$/g.test(t)}function n(t,e){return e?s(e,parseFloat(t.replace("%",""))):null}function s(t,e){return t*e/100}return i(t)?n(t,e):r.duration(t)}};e.exports=r},{"../../utils/utilityFunctions":47}],30:[function(t,e){"use strict";var i=t("../../utils/utilityFunctions"),n=t("../vpaid/VPAIDHTML5Tech"),r=t("../vpaid/VPAIDFlashTech"),s=t("VPAIDFLASHClient/js/VPAIDFLASHClient"),a={track:function(t,e){var i=a.parseURLMacros(t,e),n=[];return i.forEach(function(t){var e=new Image;e.src=t,n.push(e)}),n},parseURLMacros:function(t,e){var i=[];return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),t.forEach(function(t){i.push(a._parseURLMacro(t,e))}),i},parseURLMacro:function(t,e){return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),a._parseURLMacro(t,e)},_parseURLMacro:function(t,e){return e=e||{},i.forEach(e,function(e,i){t=t.replace(new RegExp("\\["+i+"\\]","gm"),e)}),t},parseDuration:function(t){function e(t){return 60*parseInt(t,10)*60*1e3}function n(t){return 60*parseInt(t,10)*1e3}function r(t){return 1e3*parseInt(t,10)}var s,a,o=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return i.isString(t)&&(s=t.match(o))&&(a=e(s[1])+n(s[2])+r(s[3])+parseInt(s[5]||0)),isNaN(a)?null:a},parseImpressions:function(t){return t?(t=i.isArray(t)?t:[t],i.transformArray(t,function(t){return i.isNotEmptyString(t.keyValue)?t.keyValue:undefined})):[]},formatProgress:function(t){var e,n,r,s;return e=t/36e5,e=Math.floor(e),n=t/6e4%60,n=Math.floor(n),r=t/1e3%60,r=Math.floor(r),s=t%1e3,i.toFixedDigits(e,2)+":"+i.toFixedDigits(n,2)+":"+i.toFixedDigits(r,2)+"."+i.toFixedDigits(s,3)},parseOffset:function(t,e){function i(t){return/^\d+(\.\d+)?%$/g.test(t)}function n(t,e){return e?r(e,parseFloat(t.replace("%",""))):null}function r(t,e){return t*e/100}return i(t)?n(t,e):a.parseDuration(t)},VPAID_techs:[r,n],isVPAID:function(t){return!!t&&"VPAID"===t.apiFramework},findSupportedVPAIDTech:function(t){var e,i,n;for(e=0,i=this.VPAID_techs.length;e<i;e+=1)if((n=this.VPAID_techs[e]).supports(t))return n;return null},isFlashSupported:function(){return s.isSupported()},runFlashSupportCheck:function(t){s.runFlashTest({data:t})}};e.exports=a},{"../../utils/utilityFunctions":47,"../vpaid/VPAIDFlashTech":32,"../vpaid/VPAIDHTML5Tech":33,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],31:[function(t,e){"use strict";function i(t,e){function s(t,e){if(!t||!i.checkVPAIDInterface(t))throw new n("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface");if(!r.isObject(e))throw new n("on VPAIDAdUnitWrapper, expected options hash  but got '"+e+"'");if(!("responseTimeout"in e&&r.isNumber(e.responseTimeout)))throw new n("on VPAIDAdUnitWrapper, expected responseTimeout in options")}if(!(this instanceof i))return new i(t,e);s(t,e),this.options=r.extend({},e),this._adUnit=t}var n=t("../vast/VASTError"),r=t("../../utils/utilityFunctions");i.checkVPAIDInterface=function(t){function e(t){return r.isFunction(t.subscribe)||r.isFunction(t.addEventListener)||r.isFunction(t.on)}function i(t){return r.isFunction(t.unsubscribe)||r.isFunction(t.removeEventListener)||r.isFunction(t.off)}for(var n=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],s=0,a=n.length;s<a;s++)if(!t||!r.isFunction(t[n[s]]))return!1;return e(t)&&i(t)},i.prototype.adUnitAsyncCall=function(){function t(t,e,i){if(!r.isString(t)||!r.isFunction(i[t]))throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");if(!r.isFunction(e))throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}function e(){return function(){i&&clearTimeout(i),o.apply(this,arguments)}}var i,s=r.arrayLikeObjToArray(arguments),a=s.shift(),o=s.pop();t(a,o,this._adUnit),s.push(e()),this._adUnit[a].apply(this._adUnit,s),i=setTimeout(function(){i=null,o(new n("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+a+"'")),o=r.noop},this.options.responseTimeout)},i.prototype.on=function(t,e){(this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on).call(this._adUnit,t,e)},i.prototype.off=function(t,e){(this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off).call(this._adUnit,t,e)},i.prototype.waitForEvent=function(t,e,i){function s(t,e){if(!r.isString(t))throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");if(!r.isFunction(e))throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}function a(){var t=r.arrayLikeObjToArray(arguments);o&&(clearTimeout(o),o=null),t.unshift(null),e.apply(i,t)}var o;s(t,e),i=i||null,this.on(t,a),o=setTimeout(function(){e(new n("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+t+"'")),o=null,e=r.noop},this.options.responseTimeout)},i.prototype.handshakeVersion=function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)},i.prototype.initAd=function(t,e,i,n,r,s){this.waitForEvent("AdLoaded",s),this._adUnit.initAd(t,e,i,n,r)},i.prototype.resizeAd=function(t,e,i,n){this.adUnitAsyncCall("resizeAd",t,e,i,n)},i.prototype.startAd=function(t){this.waitForEvent("AdStarted",t),this._adUnit.startAd()},i.prototype.stopAd=function(t){this.waitForEvent("AdStopped",t),this._adUnit.stopAd()},i.prototype.pauseAd=function(t){this.waitForEvent("AdPaused",t),this._adUnit.pauseAd()},i.prototype.resumeAd=function(t){this.waitForEvent("AdPlaying",t),this._adUnit.resumeAd()},i.prototype.expandAd=function(t){this.waitForEvent("AdExpandedChange",t),this._adUnit.expandAd()},i.prototype.collapseAd=function(t){this.waitForEvent("AdExpandedChange",t),this._adUnit.collapseAd()},i.prototype.skipAd=function(t){this.waitForEvent("AdSkipped",t),this._adUnit.skipAd()},["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+r.capitalize(t);i.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}}),i.prototype.setAdVolume=function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)},e.exports=i},{"../../utils/utilityFunctions":47,"../vast/VASTError":23}],32:[function(t,e){"use strict";function i(t,e){function n(t){if(!t||!a.isString(t.src))throw new r("on VPAIDFlashTech, invalid MediaFile")}if(!(this instanceof i))return new i(t);n(t),this.name="vpaid-flash",this.mediaFile=t,this.containerEl=null,this.vpaidFlashClient=null,this.settings=e}var n=t("../../utils/mimetypes"),r=t("../vast/VASTError"),s=t("VPAIDFLASHClient/js/VPAIDFLASHClient"),a=t("../../utils/utilityFunctions"),o=t("../../utils/dom"),l=t("../../utils/consoleLogger");i.VPAIDFLASHClient=s,i.supports=function(t){return n.flash.indexOf(t)>-1&&i.VPAIDFLASHClient.isSupported()},i.prototype.loadAdUnit=function(t,e,n){function s(t,e){if(!o.isDomElement(t))throw new r("on VPAIDFlashTech.loadAdUnit, invalid dom container element");if(!a.isFunction(e))throw new r("on VPAIDFlashTech.loadAdUnit, missing valid callback")}var c=this,u=this.settings&&this.settings.vpaidFlashLoaderPath?{data:this.settings.vpaidFlashLoaderPath}:undefined;s(t,n),this.containerEl=t,l.debug("<VPAIDFlashTech.loadAdUnit> loading VPAIDFLASHClient with opts:",u),this.vpaidFlashClient=new i.VPAIDFLASHClient(t,function(t){if(t)return n(t);l.info("<VPAIDFlashTech.loadAdUnit> calling VPAIDFLASHClient.loadAdUnit(); that.mediaFile:",c.mediaFile),c.vpaidFlashClient.loadAdUnit(c.mediaFile.src,n)},u)},i.prototype.unloadAdUnit=function(){if(this.vpaidFlashClient){try{this.vpaidFlashClient.destroy()}catch(t){l.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidFlashClient=null}this.containerEl&&(o.remove(this.containerEl),this.containerEl=null)},e.exports=i},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],33:[function(t,e){"use strict";function i(t){function e(t){if(!t||!a.isString(t.src))throw new r(i.INVALID_MEDIA_FILE)}if(!(this instanceof i))return new i(t);e(t),this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=t}var n=t("../../utils/mimetypes"),r=t("../vast/VASTError"),s=t("VPAIDHTML5Client/js/VPAIDHTML5Client"),a=t("../../utils/utilityFunctions"),o=t("../../utils/dom"),l=t("../../utils/consoleLogger");i.VPAIDHTML5Client=s,i.supports=function(t){return!a.isOldIE()&&n.html5.indexOf(t)>-1},i.prototype.loadAdUnit=function(t,e,n){function s(t,e,n){if(!o.isDomElement(t))throw new r(i.INVALID_DOM_CONTAINER_EL);if(!o.isDomElement(e)||"video"!==e.tagName.toLowerCase())throw new r(i.INVALID_DOM_CONTAINER_EL);if(!a.isFunction(n))throw new r(i.MISSING_CALLBACK)}s(t,e,n),this.containerEl=t,this.videoEl=e,this.vpaidHTMLClient=new i.VPAIDHTML5Client(t,e,{}),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,n)},i.prototype.unloadAdUnit=function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(t){l.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(o.remove(this.containerEl),this.containerEl=null)};var c="on VPAIDHTML5Tech";i.INVALID_MEDIA_FILE=c+", invalid MediaFile",i.INVALID_DOM_CONTAINER_EL=c+", invalid container HtmlElement",i.INVALID_DOM_VIDEO_EL=c+", invalid HTMLVideoElement",i.MISSING_CALLBACK=c+", missing valid callback",e.exports=i},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDHTML5Client/js/VPAIDHTML5Client":11}],34:[function(t,e){"use strict";function i(t,e){function n(){var e=document.createElement("div");return h.addClass(e,"VPAID-container"),t.el().insertBefore(e,t.controlBar.el()),e}if(!(this instanceof i))return new i(t);this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},this.player=t,this.containerEl=n(t),this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"},this.settings=e}function n(t,e,i){var n=t.el().querySelector(".vjs-tech"),s=h.getDimension(n),a=t.isFullscreen()?i.FULLSCREEN:i.NORMAL;e.resizeAd(s.width,s.height,a,r)}function r(t){t&&m.error("ERROR: "+t.message,t)}var s=t("../../utils/mimetypes"),a=t("../vast/VASTError"),o=t("../vast/VASTResponse"),l=t("../vast/VASTTracker"),c=t("../vast/vastUtil"),u=t("./VPAIDAdUnitWrapper"),d=t("../../utils/async"),h=t("../../utils/dom"),p=t("../../utils/playerUtils"),f=t("../../utils/utilityFunctions"),m=t("../../utils/consoleLogger");i.prototype.playAd=function(t,e){function i(t,i,n){t&&n&&s._trackError(n,t.code),l.trigger("vpaid.adEnd"),e(t,n)}function n(){l.trigger("vpaid.adEnd")}function r(){c&&c.unloadAdUnit(),h.removeClass(l.el(),"vjs-vpaid-ad")}if(!(t instanceof o))return e(new a("on VASTIntegrator.playAd, missing required VASTResponse"));var s=this,l=this.player;m.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var c=this._findSupportedTech(t,this.settings);(e=e||f.noop,this._adUnit=null,h.addClass(l.el(),"vjs-vpaid-ad"),l.on("vast.adsCancel",n),l.one("vpaid.adEnd",function(){l.off("vast.adsCancel",n),r()}),c)?(m.info("<VPAIDIntegrator.playAd> found tech: ",c),d.waterfall([function(e){e(null,c,t)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],i),this._adUnit={_paused:!0,type:"VPAID",pauseAd:function(){l.trigger("vpaid.pauseAd"),l.pause(!0)},resumeAd:function(){l.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return c.mediaFile}}):(m.debug("<VPAIDIntegrator.playAd> could not find suitable tech"),i(new a("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403),this._adUnit,t));return this._adUnit},i.prototype._findSupportedTech=function(t,e){if(!(t instanceof o))return null;var i,n,r,a,l=t.mediaFiles.filter(c.isVPAID),u=e&&e.preferredTech,d=[];for(i=0,n=l.length;i<n;i+=1)if(r=l[i],a=c.findSupportedVPAIDTech(r.type)){if(!!u&&(r.type===u||s[u]&&s[u].indexOf(r.type)>-1))return new a(r,e);d.push({mediaFile:r,tech:a})}if(d.length){var h=d[0];return new h.tech(h.mediaFile,e)}return null},i.prototype._createVPAIDAdUnitWrapper=function(t,e,i){return new u(t,{src:e,responseTimeout:i})},i.prototype._loadAdUnit=function(t,e,i){var n=this,r=this.player,s=r.el().querySelector(".vjs-tech"),a=this.settings.responseTimeout||this.options.responseTimeout;t.loadAdUnit(this.containerEl,s,function(s,o){if(s)return i(s,o,e);try{var l=n._createVPAIDAdUnitWrapper(o,t.mediaFile.src,a),c="vjs-"+t.name+"-ad";h.addClass(r.el(),c),r.one("vpaid.adEnd",function(){h.removeClass(r.el(),c)}),i(null,l,e)}catch(p){i(p,o,e)}})},i.prototype._playAdUnit=function(t,e,i){d.waterfall([function(i){i(null,t,e)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],i)},i.prototype._handshake=function(t,e,i){function n(t){var e=r(t);return e>=1&&e<=2}function r(t){var e=t.split(".");return parseInt(e[0],10)}t.handshakeVersion(this.options.VPAID_VERSION,function(r,s){return r?i(r,t,e):s&&n(s)?i(null,t,e):i(new a('on VPAIDIntegrator._handshake, unsupported version "'+s+'"'),t,e)})},i.prototype._initAd=function(t,e,i){var n=this.player.el().querySelector(".vjs-tech"),r=h.getDimension(n);t.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:e.adParameters||""},function(n){i(n,t,e)})},i.prototype._createVASTTracker=function(t,e){return new l(t,e)},i.prototype._setupEvents=function(t,e,i){function r(){p._adUnit&&p._adUnit.isPaused()&&(p._adUnit._paused=!1),d.trigger("play")}function s(){p._adUnit&&(p._adUnit._paused=!0),d.trigger("pause")}function a(){t.pauseAd(f.noop)}function o(){t.resumeAd(f.noop)}var l=t.options.src,u=this._createVASTTracker(l,e),d=this.player,p=this;t.on("AdSkipped",function(){d.trigger("vpaid.AdSkipped"),u.trackSkip()}),t.on("AdImpression",function(){d.trigger("vpaid.AdImpression"),u.trackImpressions()}),t.on("AdStarted",function(){d.trigger("vpaid.AdStarted"),u.trackCreativeView(),r()}),t.on("AdVideoStart",function(){d.trigger("vpaid.AdVideoStart"),u.trackStart(),r()}),t.on("AdPlaying",function(){d.trigger("vpaid.AdPlaying"),u.trackResume(),r()}),t.on("AdPaused",function(){d.trigger("vpaid.AdPaused"),u.trackPause(),s()}),t.on("AdVideoFirstQuartile",function(){d.trigger("vpaid.AdVideoFirstQuartile"),u.trackFirstQuartile()}),t.on("AdVideoMidpoint",function(){d.trigger("vpaid.AdVideoMidpoint"),u.trackMidpoint()}),t.on("AdVideoThirdQuartile",function(){d.trigger("vpaid.AdVideoThirdQuartile"),u.trackThirdQuartile()}),t.on("AdVideoComplete",function(){d.trigger("vpaid.AdVideoComplete"),u.trackComplete()}),t.on("AdClickThru",function(i){function n(e){var i={ASSETURI:t.options.src,CONTENTPLAYHEAD:0};return e?c.parseURLMacro(e,i):null}d.trigger("vpaid.AdClickThru");var r=i.url,s=i.playerHandles,a=f.isNotEmptyString(r)?r:n(e.clickThrough);u.trackClick(),s&&a&&window.open(a,"_blank")}),t.on("AdUserAcceptInvitation",function(){d.trigger("vpaid.AdUserAcceptInvitation"),u.trackAcceptInvitation(),u.trackAcceptInvitationLinear()}),
t.on("AdUserClose",function(){d.trigger("vpaid.AdUserClose"),u.trackClose(),u.trackCloseLinear()}),t.on("AdUserMinimize",function(){d.trigger("vpaid.AdUserMinimize"),u.trackCollapse()}),t.on("AdError",function(){d.trigger("vpaid.AdError"),u.trackErrorWithCode(901)}),t.on("AdVolumeChange",function(){d.trigger("vpaid.AdVolumeChange");var e=d.volume();t.getAdVolume(function(t,i){e!==i&&(0===i&&e>0&&u.trackMute(),i>0&&0===e&&u.trackUnmute(),d.volume(i))})});var m=n.bind(this,d,t,this.VIEW_MODE),g=f.throttle(m,100),v=this.settings.autoResize;v&&(h.addEventListener(window,"resize",g),h.addEventListener(window,"orientationchange",g)),d.on("vast.resize",m),d.on("vpaid.pauseAd",a),d.on("vpaid.resumeAd",o),d.one("vpaid.adEnd",function(){d.off("vast.resize",m),d.off("vpaid.pauseAd",a),d.off("vpaid.resumeAd",o),v&&(h.removeEventListener(window,"resize",g),h.removeEventListener(window,"orientationchange",g))}),i(null,t,e)},i.prototype._addSkipButton=function(t,e,i){function n(){l.trigger("vpaid.AdSkippableStateChange"),t.getAdSkippableState(function(t,e){e?o||r(l):s(l)})}function r(t){o=a(t),t.el().appendChild(o)}function s(){h.remove(o),o=null}function a(){var e=window.document.createElement("div");return h.addClass(e,"vast-skip-button"),h.addClass(e,"enabled"),e.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c",e.onclick=function(e){if(t.skipAd(f.noop),window.Event.prototype.stopPropagation===undefined)return!1;e.stopPropagation()},e}var o,l=this.player;t.on("AdSkippableStateChange",n),p.once(l,["vast.adEnd","vast.adsCancel"],s),i(null,t,e)},i.prototype._linkPlayerControls=function(t,e,i){function s(t,e){function i(){var i=t.muted()?0:t.volume();e.setAdVolume(i,r)}function n(){t.trigger("vpaid.AdVolumeChange");var i=t.volume();e.getAdVolume(function(e,n){e?r(e):i!==n&&t.volume(n)})}t.on("volumechange",i),e.on("AdVolumeChange",n),t.one("vpaid.adEnd",function(){t.off("volumechange",i)})}function a(t,e,i){var r=n.bind(o,t,e,i);t.on("fullscreenchange",r),t.one("vpaid.adEnd",function(){t.off("fullscreenchange",r)})}var o=this;s(this.player,t),a(this.player,t,this.VIEW_MODE),i(null,t,e)},i.prototype._startAd=function(t,e,i){var n=this.player;t.startAd(function(r){r||n.trigger("vast.adStart"),i(r,t,e)})},i.prototype._finishPlaying=function(t,e,i){function n(n){i(n,t,e)}var r=this.player;t.on("AdStopped",function(){r.trigger("vpaid.AdStopped"),n(null)}),t.on("AdError",function(t){var e=t?t.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";n(new a(e))})},i.prototype._trackError=function(t,e){c.track(t.errorURLMacros,{ERRORCODE:e||901})},e.exports=i},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"../vast/VASTResponse":25,"../vast/VASTTracker":26,"../vast/vastUtil":30,"./VPAIDAdUnitWrapper":31}],35:[function(t,e){"use strict";var i=t("../../utils/dom"),n=document.createElement("div");n.className="vjs-ads-label vjs-control vjs-label-hidden",n.innerHTML="Advertisement";var r=function(t){return{init:function(e,r){r.el=n,t.call(this,e,r),setTimeout(function(){var t=e.controlBar&&(e.controlBar.getChild("timerControls")||e.controlBar.getChild("currentTimeDisplay"));t&&e.controlBar.el().insertBefore(n,t.el()),i.removeClass(n,"vjs-label-hidden")},0)},el:function(){return n}}};e.exports=r},{"../../utils/dom":42}],36:[function(t){"use strict";var e=videojs.getComponent("Component"),i=t("./ads-label")(e);videojs.registerComponent("AdsLabel",videojs.extend(e,i))},{"./ads-label":35}],37:[function(t,e){"use strict";var i=document.createElement("div"),n=function(t){return{init:function(e,n){n.el=i,i.className="vjs-black-poster",t.call(this,e,n);var r=e.getChild("posterImage");setTimeout(function(){r&&e&&e.el()&&e.el().insertBefore(i,r.el())},0)},el:function(){return i}}};e.exports=n},{}],38:[function(t){"use strict";var e=videojs.getComponent("Component"),i=t("./black-poster")(e);videojs.registerComponent("BlackPoster",videojs.extend(e,i))},{"./black-poster":37}],39:[function(t,e){"use strict";var i=t("../ads/vast/VASTClient"),n=t("../ads/vast/VASTError"),r=t("../ads/vast/vastUtil"),s=t("../ads/vast/VASTIntegrator"),a=t("../ads/vpaid/VPAIDIntegrator"),o=t("../utils/async"),l=t("../utils/dom"),c=t("../utils/playerUtils"),u=t("../utils/utilityFunctions"),d=t("../utils/consoleLogger");e.exports=function(t){function e(){function t(){_.vast&&_.vast.adUnit&&(_.vast.adUnit=null)}function e(){i(),y&&(c.restorePlayerSnapshot(_,y),y=null)}function i(){c.once(_,["playing","vast.reset","vast.firstPlay"],function(t){"playing"===t.type&&(_.trigger("vast.contentStart"),c.once(_,["ended","vast.reset","vast.firstPlay"],function(t){"ended"===t.type&&_.trigger("vast.contentEnd")}))})}function r(t){if(k.adsEnabled)return t(null);t(new n("Ads are not enabled"))}function s(t){a()?(y=c.getPlayerSnapshot(_),_.pause(),h(),_.paused()?t(null):c.once(_,["playing"],function(){_.pause(),t(null)})):t(new n("video content has been playing before preroll ad"))}function a(){return!u.isIPhone()||_.currentTime()<=k.iosPrerollCancelTimeout}function d(t){function e(){i&&(clearTimeout(i),i=null)}var i;w=!1,i=setTimeout(function(){g(new n("timeout while waiting for the video to start playing",402))},k.adCancelTimeout),c.once(_,["vast.adStart","vast.adsCancel"],e),t(null)}function h(){l.addClass(_.el(),"vjs-vast-ad-loading"),c.once(_,["vast.adStart","vast.adsCancel"],f)}function f(){setTimeout(function(){l.removeClass(_.el(),"vjs-vast-ad-loading")},100)}c.removeNativePoster(_),c.once(_,["vast.adsCancel","vast.adEnd"],function(){t(),e()}),o.waterfall([r,s,d,p],function(t,e){t?g(t,e):_.trigger("vast.adEnd")})}function h(){_.trigger("vast.adsCancel"),w=!0}function p(t){o.waterfall([f,m],t)}function f(t){b.getVASTResponse(k.adTagUrl?k.adTagUrl():k.adTagXML,t)}function m(t,e){function i(){l||_.controlBar.getChild("AdsLabel")||_.controlBar.addChild("AdsLabel")}function n(){_.controlBar.removeChild("AdsLabel"),l=!0}function r(){function t(){_.duration()-r>n&&(_.pause(!0),_.play(!0),_.currentTime(r))}function e(){var t=_.currentTime();Math.abs(t-r)>n?((s+=1)>=2&&_.pause(!0),_.currentTime(r)):r=t}function i(){_.off("timeupdate",e),_.off("ended",t)}var n=3,r=0,s=0;_.on("timeupdate",e),_.on("ended",t),c.once(_,["vast.adEnd","vast.adsCancel","vast.adError"],i)}if(!w){var o=v(t)?new a(_,k):new s(_),l=!1;c.once(_,["vast.adStart","vast.adsCancel"],function(t){"vast.adStart"===t.type&&i()}),c.once(_,["vast.adEnd","vast.adsCancel"],n),u.isIDevice()&&r(),_.vast.vastResponse=t,d.debug("calling adIntegrator.playAd() with vastResponse:",t),_.vast.adUnit=o.playAd(t,e)}}function g(t,e){_.trigger({type:"vast.adError",error:t}),h(),d.error("AD ERROR:",t.message,t,e)}function v(t){var e,i,n=t.mediaFiles;for(e=0,i=n.length;e<i;e++)if(r.isVPAID(n[e]))return!0;return!1}var y,_=this,b=new i,w=!1,T={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:!1,adsEnabled:!0,autoResize:!0,vpaidFlashLoaderPath:"/VPAIDFlash.swf",verbosity:0},k=u.extend({},T,t||{});return u.isUndefined(k.adTagUrl)&&u.isDefined(k.url)&&(k.adTagUrl=k.url),u.isString(k.adTagUrl)&&(k.adTagUrl=u.echoFn(k.adTagUrl)),u.isDefined(k.adTagXML)&&!u.isFunction(k.adTagXML)?g(new n("on VideoJS VAST plugin, the passed adTagXML option does not contain a function")):u.isDefined(k.adTagUrl)||u.isFunction(k.adTagXML)?(d.setVerbosity(k.verbosity),r.runFlashSupportCheck(k.vpaidFlashLoaderPath),c.prepareForAds(_),k.playAdAlways&&_.on("vast.contentEnd",function(){setTimeout(function(){_.trigger("vast.reset")},0)}),_.on("vast.firstPlay",e),_.on("vast.reset",function(){y=null,h()}),_.vast={isEnabled:function(){return k.adsEnabled},enable:function(){k.adsEnabled=!0},disable:function(){k.adsEnabled=!1}},_.vast):g(new n("on VideoJS VAST plugin, missing adTagUrl on options object"))}},{"../ads/vast/VASTClient":22,"../ads/vast/VASTError":23,"../ads/vast/VASTIntegrator":24,"../ads/vast/vastUtil":30,"../ads/vpaid/VPAIDIntegrator":34,"../utils/async":40,"../utils/consoleLogger":41,"../utils/dom":42,"../utils/playerUtils":45,"../utils/utilityFunctions":47}],40:[function(t,e){var i=t("./utilityFunctions"),n={setImmediate:function(t){setTimeout(t,0)},iterator:function(t){var e=function(i){var n=function(){return t.length&&t[i].apply(null,arguments),n.next()};return n.next=function(){return i<t.length-1?e(i+1):null},n};return e(0)},waterfall:function(t,e){if(e=e||function(){},!i.isArray(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var s=function(t){return function(i){if(i)e.apply(null,arguments),e=function(){};else{var r=Array.prototype.slice.call(arguments,1),a=t.next();a?r.push(s(a)):r.push(e),n.setImmediate(function(){t.apply(null,r)})}}};s(n.iterator(t))()},when:function(t,e){if(!i.isFunction(e))throw new Error("async.when error: missing callback argument");var n=i.isFunction(t)?t:function(){return!!t};return function(){var t=i.arrayLikeObjToArray(arguments),r=t.pop();return n.apply(null,t)?e.apply(this,arguments):(t.unshift(null),r.apply(null,t))}}};e.exports=n},{"./utilityFunctions":47}],41:[function(t,e){"use strict";function i(t){c=t}function n(t,e){e.length>0&&"string"==typeof e[0]&&(e[0]=u+e[0]),t.apply?t.apply(console,Array.prototype.slice.call(e)):t(Array.prototype.slice.call(e))}function r(){c<4||("undefined"==typeof console.debug?n(console.log,arguments):n(console.debug,arguments))}function s(){c<3||n(console.log,arguments)}function a(){c<2||n(console.info,arguments)}function o(){c<1||n(console.warn,arguments)}function l(){n(console.error,arguments)}var c=0,u="[videojs-vast-vpaid] ",d={setVerbosity:i,debug:r,log:s,info:a,warn:o,error:l};"undefined"!=typeof console&&console.log||(d.debug=function(){},d.log=function(){},d.info=function(){},d.warn=function(){},d.error=function(){}),e.exports=d},{}],42:[function(t,e){"use strict";var i=t("./utilityFunctions"),n={isVisible:function(t){return"hidden"!==window.getComputedStyle(t).visibility},isHidden:function(t){return"none"===window.getComputedStyle(t).display},isShown:function(t){return!n.isHidden(t)},hide:function(t){t.__prev_style_display_=t.style.display,t.style.display="none"},show:function(t){n.isHidden(t)&&(t.style.display=t.__prev_style_display_),t.__prev_style_display_=undefined},hasClass:function(t,e){var n,r,s;if(i.isNotEmptyString(e)){if(t.classList)return t.classList.contains(e);for(e=e||"",r=0,s=(n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[]).length;r<s;r+=1)if(n[r]===e)return!0}return!1},addClass:function(t,e){var n;if(i.isNotEmptyString(e)){if(t.classList)return t.classList.add(e);n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],i.isString(e)&&i.isNotEmptyString(e.replace(/\s+/,""))&&(n.push(e),t.setAttribute("class",n.join(" ")))}},removeClass:function(t,e){var n;if(i.isNotEmptyString(e)){if(t.classList)return t.classList.remove(e);n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];var r,s,a=[];if(i.isString(e)&&i.isNotEmptyString(e.replace(/\s+/,""))){for(r=0,s=n.length;r<s;r+=1)e!==n[r]&&a.push(n[r]);t.setAttribute("class",a.join(" "))}}},addEventListener:function(t,e,r){i.isArray(t)?i.forEach(t,function(t){n.addEventListener(t,e,r)}):i.isArray(e)?i.forEach(e,function(e){n.addEventListener(t,e,r)}):t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent&&t.attachEvent("on"+e,r)},removeEventListener:function(t,e,r){i.isArray(t)?i.forEach(t,function(t){n.removeEventListener(t,e,r)}):i.isArray(e)?i.forEach(e,function(e){n.removeEventListener(t,e,r)}):t.removeEventListener?t.removeEventListener(e,r,!1):t.detachEvent?t.detachEvent("on"+e,r):t["on"+e]=null},dispatchEvent:function(t,e){t.dispatchEvent?t.dispatchEvent(e):t.fireEvent("on"+e.eventType,e)},isDescendant:function(t,e){for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1},getTextContent:function(t){return t.textContent||t.text},prependChild:function(t,e){return e.parentNode&&e.parentNode.removeChild(e),t.insertBefore(e,t.firstChild)},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},isDomElement:function(t){return t instanceof Element},click:function(t,e){n.addEventListener(t,"click",e)},once:function(t,e,i){function r(){i.apply(null,arguments),n.removeEventListener(t,e,r)}n.addEventListener(t,e,r)},getDimension:function(t){var e;return!i.isOldIE()&&t.getBoundingClientRect?{width:(e=t.getBoundingClientRect()).width,height:e.height}:{width:t.offsetWidth,height:t.offsetHeight}}};e.exports=n},{"./utilityFunctions":47}],43:[function(t,e){"use strict";function i(t){this.message="HttpRequest Error: "+(t||"")}function n(t){if(!a.isFunction(t))throw new i("Missing XMLHttpRequest factory method");this.createXhr=t}function r(){var t=new XMLHttpRequest;return"withCredentials"in t||(t=new XDomainRequest),t}var s=t("./urlUtils"),a=t("./utilityFunctions");i.prototype=new Error,i.prototype.name="HttpRequest Error",n.prototype.run=function(t,e,n,r){function o(t,e,n){if(!a.isString(t)||a.isEmptyString(t))throw new i("Invalid url '"+t+"'");if(!a.isFunction(e))throw new i("Invalid handler '"+e+"' for the http request");if(a.isDefined(n)&&!a.isObject(n))throw new i("Invalid options map '"+n+"'")}function l(t,e){a.forEach(e,function(e,i){a.isDefined(e)&&t.setRequestHeader(i,e)})}function c(){n(-1,null,null,"")}var u,d;o(e,n,r);var h=this.createXhr();r=r||{},u=a.isNumber(r.timeout)?r.timeout:0,h.open(t,s.urlParts(e).href,!0),r.headers&&l(h,r.headers),r.withCredentials&&(h.withCredentials=!0),h.onload=function(){var t,e,i;h.getAllResponseHeaders||(h.getAllResponseHeaders=function(){return null}),h.status||(h.status=200),a.isDefined(d)&&(clearTimeout(d),d=undefined),t=h.statusText||"",e="response"in h?h.response:h.responseText,i=1223===h.status?204:h.status,n(i,e,h.getAllResponseHeaders(),t)},h.onerror=c,h.onabort=c,h.send(),u>0&&(d=setTimeout(function(){h&&h.abort()},u))},n.prototype.get=function(t,e,n){function r(t,n,r,a){s(t)?e(null,n,t,r,a):e(new i(a),n,t,r,a)}function s(t){return 200<=t&&t<300}this.run("GET",t,r,n)};var o=new n(r);e.exports={http:o,HttpRequest:n,HttpRequestError:i,createXhr:r}},{"./urlUtils":46,"./utilityFunctions":47}],44:[function(t,e){"use strict";e.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],flash:["application/x-shockwave-flash"]}},{}],45:[function(t,e){"use strict";var i=t("./dom"),n=t("./utilityFunctions"),r={getPlayerSnapshot:function(t){function e(t){var e=t.remoteTextTracks?t.remoteTextTracks():[];e&&n.isArray(e.tracks_)&&(e=e.tracks_),n.isArray(e)||(e=[]);var i=[];return e.forEach(function(t){i.push({track:t,mode:t.mode}),t.mode="disabled"}),i}var i=t.el().querySelector(".vjs-tech"),r={ended:t.ended(),src:t.currentSrc(),currentTime:t.currentTime(),type:t.currentType(),playing:!t.paused(),suppressedTracks:e(t)};return i&&(r.nativePoster=i.poster,r.style=i.getAttribute("style")),r},restorePlayerSnapshot:function(t,e){function i(){var e=setTimeout(function(){t.trigger("canplay")},1e3);t.one("canplay",function(){clearTimeout(e)})}function n(t,e){return t.src()?t.src()!==e.src:t.currentSrc()!==e.src}function s(){e.suppressedTracks.forEach(function(t){t.track.mode=t.mode})}function a(){if(!r.isReadyToResume(t)&&l--)setTimeout(a,50);else try{t.currentTime()!==e.currentTime?(e.playing&&t.one("seeked",function(){t.play()}),t.currentTime(e.currentTime)):e.playing&&t.play()}catch(o){videojs.log.warn("Failed to resume the content after an advertisement",o)}}var o=t.el().querySelector(".vjs-tech"),l=20;e.nativePoster&&(o.poster=e.nativePoster),"style"in e&&o.setAttribute("style",e.style||""),n(t,e)?(t.one("contentloadedmetadata",s),t.one("canplay",a),i(),t.src({src:e.src,type:e.type}),t.load()):(s(),e.playing&&t.play())},isReadyToResume:function(t){return t.readyState()>1||(t.seekable()===undefined||t.seekable().length>0)},prepareForAds:function(t){function e(){var e=t.play;t.play=function(i){function s(){n.isIPhone()||(f=l(),t.muted(!0)),e.apply(c,arguments)}function a(i){r()&&!i?t.vast.adUnit.resumeAd():e.apply(c,arguments)}var c=this;return o()?s():a(i),this};var i=t.pause;t.pause=function(e){return r()&&!e?t.vast.adUnit.pauseAd():i.apply(this,arguments),this};var s=t.paused;t.paused=function(e){return r()&&!e?t.vast.adUnit.isPaused():s.apply(this,arguments)}}function r(){return t.vast&&t.vast.adUnit}function s(){o()&&(g=!1,t.trigger("vast.firstPlay"))}function a(){g=!0,m.show(),c()}function o(){return g}function l(){return{muted:t.muted(),volume:t.volume()}}function c(){f&&(t.currentTime(0),u(f),f=null)}function u(e){n.isObject(e)&&(t.volume(e.volume),t.muted(e.muted))}function d(){i.hasClass(m.el(),"vjs-hidden")||m.hide()}function h(){i.addClass(t.el(),"vjs-ad-playing")}function p(){i.removeClass(t.el(),"vjs-ad-playing")}var f,m=t.addChild("blackPoster"),g=!0;e(),t.on("play",s),t.on("vast.reset",a),t.on("vast.firstPlay",c),t.on("error",d),t.on("vast.adStart",d),t.on("vast.adsCancel",d),t.on("vast.adError",d),t.on("vast.adStart",h),t.on("vast.adEnd",p),t.on("vast.adsCancel",p)},removeNativePoster:function(t){var e=t.el().querySelector(".vjs-tech");e&&e.removeAttribute("poster")},once:function(t,e,i){function n(){i.apply(null,arguments),e.forEach(function(e){t.off(e,n)})}e.forEach(function(e){t.on(e,n)})}};e.exports=r},{"./dom":42,"./utilityFunctions":47}],46:[function(t,e){"use strict";function i(t){var e=t;return o&&(a.setAttribute("href",e),e=a.href),a.setAttribute("href",e),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:s.isNotEmptyString(a.port)?a.port:80,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}function n(t,e){var i,n;return e=s.isFunction(e)?e:function(){return!0},i=(t=t.trim().replace(/^\?/,"")).split("&"),n={},s.forEach(i,function(t){var i,r,s;""!==t&&(r=(i=t.split("="))[0],s=i[1],e(r,s)&&(n[r]=s))}),n}function r(t){var e=[];return s.forEach(t,function(t,i){e.push(i+"="+t)}),e.join("&")}var s=t("./utilityFunctions"),a=document.createElement("a"),o=document.documentMode;e.exports={urlParts:i,queryStringToObj:n,objToQueryString:r}},{"./utilityFunctions":47}],47:[function(t,e){"use strict";function i(){}function n(t){return null===t}function r(t){return t!==undefined}function s(t){return t===undefined}function a(t){return"object"==typeof t}function o(t){return"function"==typeof t}function l(t){return"number"==typeof t}function c(t){return B.isObject(t)&&t.window===t}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t){if(null===t||B.isWindow(t)||B.isFunction(t)||B.isUndefined(t))return!1;var e=t.length;return!(t.nodeType!==j||!e)||(B.isString(t)||B.isArray(t)||0===e||"number"==typeof e&&e>0&&e-1 in t)}function h(t){return"string"==typeof t}function p(t){return B.isString(t)&&0===t.length}function f(t){return B.isString(t)&&0!==t.length}function m(t){return Array.prototype.slice.call(t)}function g(t,e,i){var n,r;if(t)if(o(t))for(n in t)"prototype"===n||"length"===n||"name"===n||t.hasOwnProperty&&!t.hasOwnProperty(n)||e.call(i,t[n],n,t);else if(u(t)){var s="object"!=typeof t;for(n=0,r=t.length;n<r;n++)(s||n in t)&&e.call(i,t[n],n,t)}else if(t.forEach&&t.forEach!==g)t.forEach(e,i,t);else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t);return t}function v(t,e){return e=e||"_",t.replace(R,function(t,i){return(i?e:"")+t.toLowerCase()})}function y(t){return!!B.isString(t)&&N.test(t.trim())}function _(t){var e,i,r;for(i=1;i<arguments.length;i++)for(r in e=arguments[i])e.hasOwnProperty(r)&&(a(t[r])&&!n(t[r])&&a(e[r])?t[r]=_({},t[r],e[r]):t[r]=e[r]);return t}function b(t){return t.charAt(0).toUpperCase()+t.slice(1)}function w(t){return t.charAt(0).toLowerCase()+t.slice(1)}function T(t,e){var i=[];return t.forEach(function(t,n){var r=e(t,n);B.isDefined(r)&&i.push(r)}),i}function k(t,e){var i=t+"";if(e=B.isNumber(e)?e:0,t=B.isNumber(t)?t:parseInt(t,10),B.isNumber(t)&&!isNaN(t)){for(i=t+"";i.length<e;)i="0"+i;return i}return NaN+""}function S(t,e){var i=(new Date).getTime()-(e+1);return function(){var n=(new Date).getTime();n-i>=e&&(i=n,t.apply(this,arguments))}}function C(t,e){var i;return function(){i&&clearTimeout(i),i=setTimeout(function(){t.apply(this,arguments),i=undefined},e)}}function x(t,e,i){for(var n=e(t),r=0;r<n.length;r++){if(i(n[r]))return n[r];var s=x(n[r],e,i);if(s)return s}}function E(t){return function(){return t}}function A(t){return B.isNumber(t)&&(t+=""),!!B.isString(t)&&F.test(t.trim())}function P(){var t=B.getInternetExplorerVersion(navigator);return-1!==t&&t<10}function I(t){var e=-1;if("Microsoft Internet Explorer"==t.appName){var i=t.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i);null!==n&&(e=parseFloat(n[1]))}return e}function L(){return/iP(hone|ad)/.test(B._UA)}function D(){return/iP(hone|ad|od)|Android|Windows Phone/.test(B._UA)}function O(){return/iP(hone|od)/.test(B._UA)}function M(){return/Android/.test(B._UA)}var j=1,R=/[A-Z]/g,N=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,F=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,B={_UA:navigator.userAgent,noop:i,isNull:n,isDefined:r,isUndefined:s,isObject:a,isFunction:o,isNumber:l,isWindow:c,isArray:u,isArrayLike:d,isString:h,isEmptyString:p,isNotEmptyString:f,arrayLikeObjToArray:m,forEach:g,snake_case:v,isValidEmail:y,extend:_,capitalize:b,decapitalize:w,transformArray:T,toFixedDigits:k,throttle:S,debounce:C,treeSearch:x,echoFn:E,isISO8601:A,isOldIE:P,getInternetExplorerVersion:I,isIDevice:L,isMobile:D,isIPhone:O,isAndroid:M};e.exports=B},{}],48:[function(t,e){"use strict";var i=t("./utilityFunctions"),n={strToXMLDoc:function(t){function e(t){var e,r=new DOMParser;try{if(n(e=r.parseFromString(t,"application/xml"))||i.isEmptyString(t))throw new Error}catch(s){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+t+"'")}return e}function n(t){try{var e=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===e?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(e,"parsererror").length>0}catch(n){}}if("undefined"==typeof window.DOMParser){var r=new ActiveXObject("Microsoft.XMLDOM");return r.async=!1,r.loadXML(t),r}return e(t)},parseText:function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):i.isISO8601(t)?new Date(t):t.trim()},JXONTree:function(t){var e=n.parseText;if(t.documentElement)return new n.JXONTree(t.documentElement);if(t.hasChildNodes()){for(var r,s,a,o="",l=0;l<t.childNodes.length;l++)3==((r=t.childNodes.item(l)).nodeType-1|1)?o+=3===r.nodeType?r.nodeValue.trim():r.nodeValue:1!==r.nodeType||r.prefix||(s=i.decapitalize(r.nodeName),a=new n.JXONTree(r),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(a)):this[s]=a);o&&(this.keyValue=e(o))}if("undefined"==typeof t.hasAttributes?t.attributes.length>0:t.hasAttributes())for(var c,u=0;u<t.attributes.length;u++)c=t.attributes.item(u),this["@"+i.decapitalize(c.name)]=e(c.value.trim())}};n.JXONTree.prototype.attr=function(t){return this["@"+i.decapitalize(t)]},n.toJXONTree=function(t){var e=n.strToXMLDoc(t);return new n.JXONTree(e)},n.keyValue=function(t){return t?t.keyValue:undefined},n.attr=function(t,e){return t?t["@"+i.decapitalize(e)]:undefined},n.encode=function(t){return i.isString(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):undefined},n.decode=function(t){return i.isString(t)?t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"):undefined},e.exports=n},{"./utilityFunctions":47}],49:[function(t){"use strict";t("./plugin/components/ads-label_5"),t("./plugin/components/black-poster_5");var e=t("./plugin/videojs.vast.vpaid");videojs.plugin("vastClient",e)},{"./plugin/components/ads-label_5":36,"./plugin/components/black-poster_5":38,"./plugin/videojs.vast.vpaid":39}]},{},[49]);var WND,DOC,BODY,CONT,_columns=4,touchdevice=!1,echoears=!1,main={total:{fb_cnt:null,vk_cnt:null,tw_cnt:null},init:function(){pageuri=window.location},display_block:function(t){$(t).show()}},social={fb_count:function(){main.total.fb_cnt=0},vk_count:function(t){VK={},VK.Share={},VK.Share.count=function(e,i){$("span",t).text(i),main.total.vk_cnt=parseInt(i)},$.getJSON("https://vk.com/share.php?act=count&index=1&url="+pageuri+"&format=json&callback=?")},click_button:function(t){var e=!1;$(t).click(function(){if(!e){var t=$(this).parent("div"),i=parseInt($("span",t).text());isNaN(i)||(i+=1,$("span",t).text(i)),e=!0}return window.open($(this).attr("href"),"displayWindow","width=700,height=400,left=200,top=100,location=no, directories=no,status=no,toolbar=no,menubar=no"),!1})}};$(function(){var t;WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$("html").hasClass("no-touch")||(touchdevice=!0),$(".echoears").length>0&&(echoears=!0),bodyclassName(WND,BODY,CONT),WND.on("resize",function(){window.clearTimeout(t),t=window.setTimeout(function(){bodyclassName(WND,BODY,CONT),BODY.trigger("changecolumns")},150)}),DOC.trigger("pagechange")}),$(document).bind("pagechange",function(){var t,e,i,n;WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$(".iblock, .mainmenu a, .secondmenu a").cleanWS(),$(".supermaincarousel").supermaincarousel(),$(".liveaudioplayer").initLive(),$(".toair").on("click",function(){$.scrollTo($(this).attr("href"),500,{easing:"easeOut"})}),$(".echotop").echotop(),$(".echoleft, .echoright").echoleftright(),$(".icsearch").showSearch(),$(".open_auth").authForm(),$(".authorized").logoutForm(),$(".imgcarousel").mediacarousel(),$(".fragments").columnize({columns:3,lastNeverTallest:!0}),$(".mainpreview").mainpreview(),$(".mainpeoples").mainpeoples(),$(".notaplayer").notaplayer(),$(".audionota").audionota(),$(".multimedia").mmtabs(),$(".bonustabs").bonustabs(),$(".commentList").comFunc(),$(".shareBlock").sharePopup(),$(".custom_check").replaceCheckBox(),$(".custom_radio").radioReplace(),$(".votescharts").votescharts(),$(".piechart").piechart(),$(".carousel").notacarousel(),$("#onair").onaircarousel(),$(".title_info .open").footOpen(),$(".programm_info").descrOpen(),$(".search_result .c_select").selectReplace(),$(".faq").faq(),$("body").on("click",".ajax_comments",function(t){t.preventDefault();var e=$(this),i=$(".answform");return $.ajax({url:e.attr("href"),method:"GET",success:function(t){$(t).insertBefore(i).fadeIn("slow"),e.parent().remove()}}),!1}),$(".abc a").click(function(t){t.preventDefault();var e=$(this),i=$(".broadcast_list, .person_list");return $(".abc a").removeClass("cur"),$.ajax({url:e.attr("href"),method:"GET",success:function(t){i.html(t),e.addClass("cur"),$(".iblock").cleanWS(),i.trigger("update",[])}}),!1}),$("#searchList").letterlist({inp:"#quicksearch",spn:".author .name, .guestst b, .title h2 a"}),t=$(".js-suggest"),e=$("#psearch",t),i=$(".js-suggest-list",t),n=t.data("src"),e.on("keyup",function(){var t=e.val();t.length<3?i.addClass("_hidden"):i.load(n+"?val="+t,function(){i.removeClass("_hidden")})}),$(".calendar").each(function(){$(this).calendar()}),pageUp(),popularblFunc(),touchdevice||DOC.on("mouseenter",".preview",function(){var t=$(this);if(t.hasClass("mouseenter")||t.hasClass("previewclone")||t.parents(".mainpeoples").length>0||t.hasClass("voicepreview"))return!1;$(".mouseenter").removeClass("mouseenter"),$(".previewclone").remove();var e=t.clone(!0);e.addClass("previewclone"),t.hasClass("bdjhot")&&e.addClass("bdjhot"),t.hasClass("bdjnew")&&e.addClass("bdjnew"),t.addClass("mouseenter");var i=t.offset(),n="clone"+(new Date).getTime();e.appendTo("body"),e.css({opacity:0,position:"absolute",top:i.top,left:i.left,margin:0,"z-index":10}).addClass("hover").addClass(n),e.stop().animate({opacity:1},250),e.on("mouseleave",function(i){if($(i.tagret).parents("."+n).length>0)return!1;e.stop().animate({opacity:0},100,function(){t.removeClass("mouseenter"),e.remove()})})}),DOC.on("click",".js-expandtxt",function(){$(this).toggleClass("op")}),DOC.on("click",".js-popup",function(){return $(this).popupList(),!1}),$(".uipopup").uipopup(),$(".connect_bl").tabs(),$(".typical ul:not([class]), .typical ol:not([class])").each(function(){var t=$(this);t.addClass("norm"),$("li",t).wrapInner('<div class="dark"></div>')}),$(".typical table:not([class]) tr:gt(0)").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")}),$(".typicalform").each(function(){var t=$(this);$(":checkbox",t).replaceCheckBox(),$(":radio",t).radioReplace(),$("select",t).selectReplace(),t.find(".birthdate").on("change",function(){t.find(".setbirthdate").val($(this).val())}).mask("99.99.9999"),t.find(".setbirthdate").on("change",function(){t.find(".birthdate").val($(this).val())}).on("focus",function(){$.scrollTo($(this),{offset:{left:0,top:-150}})})}),$(".calend").click(function(){return!1}),$(".calendarmonth").each(function(){$(this).calendarmonth()}),$(".calendaryear").each(function(){$(this).calendaryear()}),$(".calendarweek").each(function(){$(this).calendarweek()}),$("#mainsidebar").each(function(){function t(){e.height("").removeClass("asideheightajust");var t=e.outerHeight(),i=0;cont.each(function(){i+=$(this).outerHeight(!0)}),t>i&&e.height(i).addClass("asideheightajust")}var e=$(this),i=e.parent();cont=i.children("section"),cont.length>0&&t(),WND.on("resize load",t)}),$("body").on("click",".open_auth_link, .open_reg_link",function(t){t.preventDefault();var e=$(this),i=$(".auth_popup");i.find(".open").removeClass("open"),i.children(e.hasClass("open_auth_link")?".reg":".auth").addClass("open"),i.find(e.hasClass("open_auth_link")?".authform, .socialblock":".regform").addClass("open"),$("html, body").animate({scrollTop:0},600,"easeOutQuad",function(){$(".header .open_auth").trigger("click")})}),$(".mainmenu").submenuOpen()}),$(window).load(function(){WND=$(window),BODY=$("body"),CONT=BODY.find(".content"),bodyclassName(WND,BODY,CONT),$(".mainbanner_box").fadeIn()}),$(function(){var t=0;main.init(),social.click_button(".fb_btn"),social.click_button(".vk_btn"),social.click_button(".tw_btn"),social.fb_count(".fb_sharer"),social.vk_count(".vk_sharer"),interval=setInterval(function(){t++,null!==main.total.fb_cnt&&null!==main.total.vk_cnt&&null!==main.total.tw_cnt?(main.display_block(".social_block"),clearInterval(interval)):t>30&&clearInterval(interval)},100)}),jQuery.fn.cleanWS=function(){this.each(function(){for(var t=this,e=t.parentNode,i=t.previousSibling,n=t.nextSibling;i;){var r=i.previousSibling;if(3==i.nodeType&&i.nodeValue)for(var s=i.nodeValue.length-1;s>-1&&(9==(o=i.nodeValue.charCodeAt(s))||10==o||32==o);s--)i.nodeValue=i.nodeValue.slice(0,s);8==i.nodeType&&e.removeChild(i),i=r}for(;n;){var a=n.nextSibling;if(3==n.nodeType&&n.nodeValue)for(;n.nodeValue.length;){var o;if(9!=(o=n.nodeValue.charCodeAt(0))&&10!=o&&32!=o)break;n.nodeValue=n.nodeValue.slice(1)}8==n.nodeType&&e.removeChild(n),n=a}})},function(t){t.fn.notacarousel=function(e){this.each(function(){function i(){var e=l.find(".current");c.wrapAll('<div class="carouselwrapper"><div class="carouselslide"></div></div>');var i=0;if(c.each(function(){i+=t(this).outerWidth(!0)}),l.find(".carouselslide").width(i),s("init"),e.length>0){e.nextAll(".preview").addClass("later");var n=100*(e.index()+1)/u;l.find(".carouselslider").slider({value:n}),r(n,!0)}}function n(){a.slider=l.find(".carouselslider").length>0,l.find(".carouselnav").remove(),s("reinit")}function r(e,i){var n=Math.round(e*u/100),r=Math.ceil(n/_columns),s=l.find(".carouselnav"),a=t("li.slide",s);if(i){var o=l.find(".carouselslide"),d=l.find(".carouselwrapper"),h=0,p=o.width(),f=d.width();if(s.find(".current").removeClass("current"),a.eq(r-1).addClass("current"),n-2>0){for(var m=0;m<n-2;m++){var g=c.eq(m);g.length>0&&(h+=Math.ceil(g.outerWidth(!0)))}p-h<f&&(h=p-f-parseInt(c.last().css("margin-right")))}o.css({"margin-left":-h})}else a.eq(r-1>0?r-1:0).trigger("click",["slide"])}function s(e){
for(var i=t('<ul class="carouselnav"/>').appendTo(l),n=0;n<u;n++)n%_columns==0&&i.append('<li class="slide"><i class="num">'+n+"</i></li>");i.append('<li class="toleft"><i class="wsico">&#x0033;</i></li><li class="toright"><i class="wsico">&#x0034;</i></li>'),t("li.toleft,li.toright",i).on("click",function(){var e=t(this),n=i.find(".current"),r=e.hasClass("toleft")?n.prev(".slide"):n.next(".slide");r.length>0&&r.trigger("click")});var s=0;for(n=0;n<c.length;n++){if(c.eq(n).position().left>=0)break;n%_columns==0&&s++}var o=t("li.slide",i),p=o.length;o.each(function(e){var n=t(this);e==s?n.addClass("current"):n.addClass("gtcurrent"),n.bind("dblclick",function(t){t.preventDefault()}),n.children("i").text(e+1),n.click(function(e,n){e.preventDefault();var r=t(this),s=l.find(".carouselwrapper"),o=l.find(".carouselslide");if(r.hasClass("current")||l.hasClass("inaction"))return!1;"slide"!=n?(d=a.T,h=a.A,l.addClass("inaction")):(d=0,h="linear");for(var f=i.find(".current"),m=r.index(),g=0,v=m*_columns,y=o.width(),_=s.width(),b=0;b<v;b++){var w=c.eq(b);w.length>0&&(g+=Math.ceil(w.outerWidth(!0)))}if(y-g<_&&(g=y-_-parseInt(c.last().css("margin-right"))),o.stop().animate({"margin-left":-g},d,h,function(){f.removeClass("current"),r.addClass("current"),l.removeClass("inaction"),t("li.gtcurrent",i).removeClass("gtcurrent"),t("li.slide:gt("+e+")",i).addClass("gtcurrent");var e=t("li.current",i).index();t("li.toleft,li.toright",i).removeClass("disabled"),0==e&&t("li.toleft",i).addClass("disabled"),e==p-1&&t("li.toright",i).addClass("disabled")}),a.slider){var T=100*v/u;0==m&&(T=0),m==p-1&&(T=100),l.find(".carouselslider").slider({value:T})}});var r=t("li.current",i).index();t("li.toleft,li.toright",i).removeClass("disabled"),0==r&&t("li.toleft",i).addClass("disabled"),r==p-1&&t("li.toright",i).addClass("disabled")});var f=0,m=l.find(".carouselslide"),g=m.width(),v=l.find(".carouselwrapper").width();(parseInt(m.css("margin-left"))<v-g&&(f=g-v-parseInt(c.last().css("margin-right")),m.stop().animate({"margin-left":-f},d/10,h,function(){})),"init"==e&&a.slider)&&t('<div class="carouselslider" />').appendTo(l).slider({step:100/u,slide:function(t,e){r(e.value)},stop:function(t,e){r(e.value)},change:function(){}})}var a,o={T:touchdevice?350:800,A:"easeOutQuad",slider:!1};a="string"!=typeof e?t.extend(o,e):o;var l=t(this),c=l.find(".iblock.preview"),u=c.length,d=a.T,h=a.A;"reinit"==e?n():i(),t("body").bind("changecolumns",function(){n()})})}}(jQuery),function(t){t.fn.mainpeoples=function(e){this.each(function(){function i(){fake_showcase=a.clone(),fake_showcase.find(".freshentry").remove(),fake_showcase.addClass("fake").appendTo(s),r("init")}function n(){r("reinit")}function r(e){var i=4*a.width()/9;a.children(".iblock").each(function(){var n=t(this),r=n.position();n.width();r.left<i?n.removeClass("tol").addClass("tor"):n.removeClass("tor").addClass("tol"),"init"==e&&(n.find(".mainperson").each(function(){var e=t(this),i=e.find(".freshentry"),r=e.children(".photo"),s=i.find(".photo");i.children().wrapAll('<div class="fe_bg"><div class="fe_cont"></div></div>');var o=t(".author, .when, .txt, .meta, .mediamenu",i);e.find(".mediamenu").length>0&&e.addClass("wmarg"),o.css("opacity",0),r.on("mouseenter",function(){r.css("z-index",100),e.css("z-index",99),a.find(".vis").each(function(){var e=t(this);e.children(".photo").css("z-index",""),e.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),e.removeClass("vis").find(".freshentry").stop().animate({width:0},300,"easeOutQuad")});parseInt(s.css("border-top-width"));s.css("top",r.position().top),n.hasClass("tor")?i.css({right:"auto",left:n.position().left-parseInt(s.css("left"))}):i.css({left:"auto",right:a.width()-n.position().left-n.width()-parseInt(s.css("right"))-parseInt(s.css("border-right-width"))});var l=e.hasClass("wmarg")?"41.625em":"36.625em";n.hasClass("type2")&&(l=e.hasClass("wmarg")?"33.125em":"28.125em"),n.hasClass("type3")&&(l=e.hasClass("wmarg")?"28.4375em":"23.4375em"),i.stop().animate({width:l},300,"easeOutQuad",function(){o.animate({opacity:1},500,function(){r.css("z-index","")})}),e.addClass("vis"),t(document).off("mousemove.closefreshentry").on("mouseout.closefreshentry",function(e){t(e.target).parents(".vip_showcase").length<1&&a.find(".vis").each(function(){var e=t(this);e.children(".photo").css("z-index",""),e.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),e.removeClass("vis").find(".freshentry").stop().animate({width:0},100,"easeOutQuad")})})}).on("mouseout",function(){}).on("click dblclick",function(t){t.preventDefault()})}),a.addClass("mp_ready"))})}var s=t(this),a=(s.find(".vip_sign"),s.find(".vip_showcase"));"reinit"==e?n():i(),t("body").bind("changecolumns",function(){n()})})}}(jQuery),function(t){t.fn.mainpreview=function(e){this.each(function(){function i(t){d.css("margin-top","0");for(var e=0,i=0,n=0;n<t.length;n++){var r=t[n][t[n].length-1];e=Math.max(r.sum,e),n>0&&n<t.length-1&&(i=Math.max(r.sum,i))}c.height(e);var s=i-e+20;d.css({"margin-top":s}),l.css({"margin-bottom":0});var a=Math.abs(s);a-60>0&&l.css({"margin-bottom":a-60})}function n(e,i){var n=e.find('img[src!=""]'),r=[];n.each(function(){if(t(this).attr("src")){var e=new Image;e.src=t(this).attr("src"),r.push(e)}});var s=0;e.off("updatestat").on("updatestat",function(){++s>=r.length&&(o("reinit"),i&&i.length>0&&i.remove(),t("a",d).removeClass("onload"))});for(var a=0;a<r.length;a++)t(r[a]).bind("load abort error",function(){e.trigger("updatestat")})}function r(){t("a",d).click(function(e){e.preventDefault();var i=t(this);if(i.hasClass("onload"))return!1;i.addClass("onload");var r=t('<div class="loader" style="margin-left:-15px;"><img src="/i/ajax-loader_.gif" alt="\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"></div>').prependTo(i.parent());t.ajax({url:i.attr("href"),method:"GET",success:function(e){var s=t(window).scrollTop(),a=t(t(e).html());c.height(""),c.append(a),l.find(".iblock").cleanWS(),l.hasClass("recently-mainpreview")?(initAudioPlayer(t(".video-js")),r.remove(),i.removeClass("onload")):(n(c,r),o("reinit")),l.trigger("change"),t(window).scrollTop(s)}})}),o("init")}function s(){o("reinit")}function a(t,e,i){if(!h&&!p){p=!0;for(var n,r,s=0,o=0,l=0,c=0,u=0,d=0;d<t.length;d++){var f=(y=t[d][t[d].length-1]).sum;0==d?(o=f,s=f,l=0,c=0,r=y.obj,n=y.obj):(f<o&&(o=f,l=d,r=y.obj),f>s&&(s=f,c=d,n=y.obj))}var m=t[c][t[c].length-1],g=t[l][t[l].length-1],v=!1;if(m.sum-m.H>g.sum&&"mainsidebar"!=m.obj.attr("id")&&(v=!0),!v&&"mainsidebar"!=g.obj.attr("id")){for(d=0;d<t.length;d++){var y,_=(y=t[d][t[d].length-1]).sum-y.H;0==d?(y.H,u=0):_>o&&(u=d)}var b=t[u][t[u].length-1];b.H<m.sum-g.sum&&b.sum-b.H>g.sum&&(n=(m=b).obj,r=g.obj,c=u,v=!0)}if(v){var w=Math.abs(parseInt(r.css("margin-bottom")));n.css({left:240*(l-c),top:r.offset().top-n.offset().top+r.outerHeight()+w});var T=t[c].splice(t[c].length-1,1),k=t[l][t[l].length-1].sum;T[0].sum=k+T[0].H,t[l]?t[l][t[l].length]=T[0]:t[l]=T}if(!v&&"mainsidebar"!=m.obj.attr("id")&&"mainsidebar"!=g.obj.attr("id")&&"mainnewscolumn"!=m.obj.attr("id")&&"mainnewscolumn"!=g.obj.attr("id")&&m.H>g.H){var S=t[c].splice(t[c].length-1,1),C=t[l].splice(t[l].length-1,1),x=(w=Math.abs(parseInt(C[0].obj.css("margin-bottom"))),parseInt(S[0].obj.css("left"))+240*(l-c)),E=parseInt(S[0].obj.css("top"))+((t[l].length>0?t[l][t[l].length-1].sum:0)-(t[c].length>0?t[c][t[c].length-1].sum:0));S[0].obj.css({left:x,top:E});w=Math.abs(parseInt(S[0].obj.css("margin-bottom"))),x=parseInt(C[0].obj.css("left"))+240*(c-l),E=parseInt(C[0].obj.css("top"))+((t[c].length>0?t[c][t[c].length-1].sum:0)-(t[l].length>0?t[l][t[l].length-1].sum:0));C[0].obj.css({left:x,top:E}),S[0].sum=(t[l].length>0?t[l][t[l].length-1].sum:0)+S[0].H,C[0].sum=(t[c].length>0?t[c][t[c].length-1].sum:0)+C[0].H,t[l]?t[l][t[l].length]=S[0]:t[l]=S,t[c]?t[c][t[c].length]=C[0]:t[c]=C}p=!1,++e<t.length?a(t,e,i):i||(e=0)}}function o(e){var n=l.find(".preview, .infinityitem");if(n.length<5)return!1;"reinit"==e&&n.css({"margin-top":""});var r=0,s=[],o=l.width(),c=Math.ceil(o/240),d=t("#mainsidebar"),p=t("#mainnewscolumn");l.closest("section").hasClass("content")||(s[c-1]=new Array({obj:d,H:d.outerHeight()-u.top+20,sum:d.outerHeight()-u.top+20}),s[c-2]=new Array({obj:p,H:p.outerHeight()-u.top+20,sum:p.outerHeight()-u.top+20})),n.css({position:"static",top:"",left:""}).each(function(){var e=t(this);if(!e.hasClass("preview"))return!1;e.css("position","relative");var i=e.position(),n=e.outerHeight(!0);i.top>r&&(r=i.top);var a=Math.round(i.left/240),o=s[a]&&s[a][s[a].length-1]?s[a][s[a].length-1].sum:0;s[a]?s[a].push({obj:e,id:e.data("maxid"),H:n,sum:o+n}):s[a]=new Array({obj:e,id:e.data("maxid"),H:n,sum:o+n}),e.css({"margin-top":-(i.top-o)})}),h=!1,a(s,0),i(s),t(window).load(function(){i(s)})}var l=t(this),c=l.children(".rel"),u=c.position(),d=l.find(".moregiant");d.css({position:"relative","margin-top":0,clear:"none","margin-bottom":0,width:500,left:"50%","margin-left":-250}),l.addClass("clearfix").css({"margin-bottom":0});var h=!1,p=!1;"reinit"==e?s():r(),n(c,!1),n(t("#mainnewscolumn"),!1),n(t("#mainsidebar"),!1),t(window).bind("load",function(){window.setTimeout(function(){s()},1e3)}),t("body").bind("changecolumns",function(){s()})})}}(jQuery),function(t){t.fn.bonustabs=function(){this.each(function(){var e=t(this),i=e.find(".tabopener"),n=450,r="easeOutQuad";i.on("click",function(i){if(i.preventDefault(),!t(this).hasClass("inaction")){var s=t(this),a=s.attr("href"),o=t(a),l=o.find(".cont");if(s.addClass("inaction"),o.hasClass("opened"))l.css("opacity",0),o.stop().animate({height:0},n,r,function(){t(this).removeClass("opened"),s.removeClass("inaction")});else{l.css("opacity",0),o.height("auto");var c=o.height();o.height(0),e.find(".opened").stop().animate({height:0},n/10,r,function(){t(this).removeClass("opened")}),o.stop().animate({height:c},n,r,function(){o.addClass("opened").height("auto"),s.removeClass("inaction")}),window.setTimeout(function(){l.animate({opacity:1},n/3,function(){})},n/4)}}}),e.find(".form").submit(function(e){var i=t(this);return i.data("valid",!1),i.formValidator(),!!i.data("valid")||(e.preventDefault(),!1)})})}}(jQuery),function(t){t.fn.supermaincarousel=function(e){this.each(function(){function i(){a("init")}function n(){a("reinit")}function r(e,i){e.find(".iblock").each(function(e){var n=t(this),r=o.find(".slidestorage");t(".iblock:eq("+(e+i)+")",r).children(".slide").clone(!0).addClass("opened").appendTo(n),n.find(".opened .info").on("mouseenter",function(){n.addClass("hover"),n.find(".text").stop().slideDown(300)}).on("mouseleave",function(){n.find(".text").stop().slideUp(200,function(){n.removeClass("hover")})})})}function s(e,i){e.html(""),i?(t('<div class="iblock type0" data-type="type0" />').appendTo(e),_columns<5?t('<div class="iblock type4" data-type="type4" />').appendTo(e):t('<div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(e)):_columns<5?t('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type4" data-type="type4" />').appendTo(e):t('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(e)}function a(e){if("init"==e){var i=t('<div class="slidesmask" />').appendTo(o),n=o.children(".iblock"),a=t('<div class="slidestorage" />').appendTo(o);n.appendTo(a),t(".iblock:first",a).hasClass("emergency")?s(i,!0):s(i,!1),r(i,0);var c=t('<div class="slidenav"><a href="#" class="toleft"><span class="wsico">&#x0033;</span></a><a href="#" class="toright"><span class="wsico">&#x0034;</span></a></div>').appendTo(o);c.find(".toright").on("click",function(e){if(e.preventDefault(),!o.hasClass("inaction")){o.addClass("inaction");var i=4==_columns?2:3;t(".iblock",a).slice(0,i).appendTo(a);var n=o.find(".slidesmask"),c=t('<div class="slidesmask" />');n.before(c),t(".iblock:eq(0)",a).hasClass("emergency")?s(c,!0):s(c,!1),r(c,0),c.css({opacity:0,position:"absolute",top:0,left:0,"z-index":10});var u=c.find(".iblock"),d=n.find(".iblock"),h=t(".section, .info",d),p=d.find(".photo"),f=u.find(".photo");newtxt=t(".section, .info",u),f.css("margin-left","100%"),newtxt.css("opacity",0),h.stop().animate({opacity:0},100,function(){c.stop().animate({opacity:1},100,l),u.each(function(e){var i=t(this),r=i.find(".slide"),s=r.find(".photo"),a=t(".section, .info",r),d=s.data(i.data("type"))?s.data(i.data("type")):0;r.removeClass("opened"),window.setTimeout(function(){s.stop().animate({"margin-left":d+"px"},550,l,function(){window.setTimeout(function(){a.stop().animate({opacity:1},300,l,function(){e==u.length-1&&(c.css({position:"","z-index":"",left:"",top:""}),e==u.length-1&&(o.removeClass("inaction"),n.remove()))})},100)}),0==e&&p.each(function(){var e=t(this);e.animate({"margin-left":-e.width()},550,l,function(){})})},150)})})}}),c.find(".toleft").on("click",function(e){if(e.preventDefault(),!o.hasClass("inaction")){o.addClass("inaction");var i=4==_columns?2:3,n=t(".iblock",a).slice(-i);n.length>0&&n.prependTo(a);var c=o.find(".slidesmask"),u=t('<div class="slidesmask" />');c.before(u),t(".iblock:eq(0)",a).hasClass("emergency")?s(u,!0):s(u,!1),r(u,0),u.css({opacity:.5,position:"absolute",top:0,left:0,"z-index":10});var d=u.find(".iblock"),h=c.find(".iblock"),p=t(".section, .info",h),f=h.find(".photo"),m=d.find(".photo");newtxt=t(".section, .info",d),newtxt.css("opacity",0),m.each(function(){var e=t(this);e.css("margin-left",-e.width())}),p.stop().animate({opacity:0},100,function(){u.stop().animate({opacity:1},100,l),d.each(function(e){var i=t(this),n=i.find(".slide"),r=n.find(".photo"),s=t(".section, .info",n),a=r.data(i.data("type"))?r.data(i.data("type")):0;n.removeClass("opened"),window.setTimeout(function(){r.stop().animate({"margin-left":a+"px"},550,l,function(){window.setTimeout(function(){s.stop().animate({opacity:1},300,l,function(){e==d.length-1&&u.css({position:"","z-index":"",left:"",top:""}),e==d.length-1&&(o.removeClass("inaction"),c.remove())})},150)}),0==e&&f.stop().animate({"margin-left":"100%"},550,l,function(){})},150)})})}})}else{i=o.find(".slidesmask"),n=o.children(".iblock"),a=o.find(".slidestorage");t(".iblock:first",a).hasClass("emergency")?s(i,!0):s(i,!1),r(i,0)}}var o=t(this),l="easeInOutQuad";"reinit"==e?n():i(),t("body").bind("changecolumns",function(){n()})})}}(jQuery),function(t){t.fn.onaircarousel=function(e){this.each(function(){function i(){r("init")}function n(){r("reinit")}function r(){var e=(new Date).getTimezoneOffset()/60;t.ajax({url:s.data("url"),type:"get",data:{timezone:e},cache:!1}).done(function(e){return t(e).appendTo(s),s.find(".iblock").cleanWS(),s.find(".carousel").notacarousel({slider:!0}),t("#fulldayswitcher a").on("click",function(e){e.preventDefault();var i=t(this).attr("href"),n=Math.floor((t(i).index()+_columns)/_columns);t(".carouselnav .slide:eq("+(n-1>0?n-1:0)+")",s).trigger("click")}),!1})}var s=t(this);"reinit"==e?n():i()})}}(jQuery),function(t){t.fn.initLive=function(){this.each(function(){t(this).find(".playerbutton").on("click.firstclick",function(e){e.preventDefault();var i=t(this);window.open(i.attr("href"),"echoliveplayer","location=no,locationbar=no,chrome=yes,titlebar=yes,menubar=no,toolbar=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,status=no,width=1000,height=820").focus()})})}}(jQuery),function(t){t.fn.footOpen=function(){this.each(function(){var e=t(this),i=["\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c","\u0441\u043a\u0440\u044b\u0442\u044c"],n=t(".info_partner_block");n.hide(),e.on("click",function(t){return t.preventDefault(),e.hasClass("show")?(e.find("span:last-child").text(i[0]),e.removeClass("show"),e.closest(".footer").height(500).prev().css({"padding-bottom":"550px"}),n.slideUp()):(e.find("span:last-child").text(i[1]),e.addClass("show"),e.closest(".footer").height(850).prev().css({"padding-bottom":"900px"}),n.slideDown()),popularblFunc(),!1})})}}(jQuery),function(t){t.fn.showSearch=function(){this.each(function(){function e(){a.removeClass("show")}function i(){a.addClass("show"),a.find("#searchq").focus(),window.clearTimeout(n),a.one("mouseleave.opened",function(){r=window.setTimeout(function(){e()},3e3)})}var n,r,s=t(this),a=t(this).parent().find("form");a.find("#searchq").on("focus",function(){a.off("mouseleave.opened"),window.clearTimeout(r)}).on("blur",function(){var i=t(this);r=window.setTimeout(function(){""==t.trim(i.val())&&e()},3e3)}),s.on("mouseenter",function(t){t.preventDefault(),window.clearTimeout(n),n=window.setTimeout(function(){i()},500)}).on("mouseleave",function(){window.clearTimeout(n)}).on("click",function(t){t.preventDefault(),window.clearTimeout(n),i()}),a.find(".icmenu").on("click",function(t){return t.preventDefault(),e(),!1})})}}(jQuery),function(t){t.fn.logoutForm=function(){this.each(function(){var e=t(this),i=t(".open_logout"),n=t(".logout-cont");e.on("click",function(){n.toggleClass("show"),i.toggleClass("show")})})}}(jQuery),function(t){passwordSwitcher(),t.fn.authForm=function(){this.each(function(){var e=t(this),i=t(".auth_popup");e.on("click",function(t){return t.preventDefault(),i.addClass("show"),e.addClass("show"),i.find(".reg").hasClass("open")?i.find(".formsholder").css("min-width",""):i.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em"),!1}),i.find(".close").on("click",function(t){return t.preventDefault(),i.removeClass("show"),e.removeClass("show"),!1}),i.find(".open_form").bind("click",function(e){e.preventDefault(),i.find(".form").removeClass("open"),i.find("form"+t(this).attr("href")).addClass("open");var n=t(this).parent();return n.hasClass("reg")&&(n.removeClass("open"),i.find(".auth").addClass("open"),i.find(".socialblock").removeClass("open"),i.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em")),n.hasClass("auth")&&(n.removeClass("open"),i.find(".reg").addClass("open"),i.find(".socialblock").addClass("open"),i.find(".formsholder").css("min-width","")),!1}),i.find(".form").submit(function(e){var i=t(this);return i.formValidator(),!!i.data("valid")||(e.preventDefault(),!1)})})}}(jQuery),function(t){t.fn.sharePopup=function(){this.each(function(){function e(e){if(!e.hasClass("show")){var n=r.clone(!0);e.parent().append(n),n.show().addClass("shareClone"),e.addClass("show"),n.find("a").attr("href",e.data("url")),n.find("a").data("title",e.data("title")),DOC.on("mouseover.share",function(e){var n=t(e.target);!n.hasClass("meta")&&!n.hasClass("shareClone")&&n.parents(".shareClone").length+n.parents(".share").length<1&&i()})}}function i(){t(".shareClone").each(function(){var e=t(this);e.siblings(".share").removeClass("show"),e.remove()}),DOC.off("mouseover.share")}var n,r=t(this);if(!r.hasClass("ready")){var s="http://twitter.com/share?text=%title%&url=%url%",a="http://www.facebook.com/share.php?u=%url%&t=%title%",o="http://connect.mail.ru/share?url=%url%&title=%title&description=%description%",l="https://vk.com/share.php?url=%url%&title=%title%",c="http://www.livejournal.com/update.bml?subject=%title%&event=%description%<br><a>%url%</a>";r.find(".twitter").on("click",function(e){e.preventDefault(),window.open(encodeURI(s.replace(/\%url\%/,t(this).attr("href")).replace(/%title%/,""+t(this).data("title"))))}),r.find(".facebook").on("click",function(e){e.preventDefault(),window.open(encodeURI(a.replace(/\%url\%/,t(this).attr("href")).replace(/%title%/,""+t(this).data("title"))))}),r.find(".mailru").on("click",function(e){e.preventDefault(),window.open(encodeURI(o.replace(/\%url\%/,t(this).attr("href")).replace(/%title%/,""+t(this).data("title"))))}),r.find(".vk").on("click",function(e){e.preventDefault(),window.open(encodeURI(l.replace(/\%url\%/,t(this).attr("href")).replace(/%title%/,""+t(this).data("title"))))}),r.find(".lj").on("click",function(e){e.preventDefault(),window.open(encodeURI(c.replace(/\%url\%/,t(this).attr("href")).replace(/%title%/,""+t(this).data("title"))))}),r.addClass("ready")}DOC.off(".share").on("mouseenter.share click.share",".share",function(r){r.preventDefault();var s=t(this);s.siblings(".shareClone").length>0||(window.clearTimeout(n),i(),"click"!=r.type?n=window.setTimeout(function(){e(s)},1e3):e(s))}).on("mouseleave",".share",function(){window.clearTimeout(n)})})}}(jQuery),function(t){t.fn.comFunc=function(){this.each(function(){var e=t(this),i=(t(".answform",e),t(".commBlock",e));t(".answ",i);i.filter(".commBlock").first().find("form").each(function(){var e=t(this).find(".add-btn"),i=t(this).find("textarea");i.val().length<5&&e.hide(),i.focus(function(){i.height("12.5em"),i.bind("keyup",function(){i.val().length>=5?e.slideDown(300):e.slideUp(300)})}).focusout(function(){i.val().length<5&&(e.slideUp(300),i.height("3.5em"))})}),e.find(".c_select").selectReplace()})}}(jQuery),function(t){t.fn.mmtabs=function(){this.each(function(){var e=t(this),i=e.children(".mediamenu"),n=e.children(".mmcontainer"),r=700,s="easeOutCubic",a=!1;t("a.clicked",i).click(function(e){e.preventDefault();var o=t(this);if(!o.hasClass(".current")&&!a){a=!0,t(".nota_jplayer").jPlayer("pause");var l=o.attr("href"),c=n.find(".current");c.find(".mmplayer").stop().slideUp(r,s,function(){c.removeClass("current")}),t(l).addClass("current").find(".mmplayer").stop().slideDown(r,s,function(){a=!1}),i.find(".current").removeClass("current"),o.addClass("current")}});var o=window.location.hash;o&&o.length>0&&(t("a[href="+o+"]",i).trigger("click"),t(window).scrollTo(".multimedia"))})}}(jQuery),function(t){t.fn.mediacarousel=function(e){this.each(function(){var i,n={T:600,A:"easeOutQuad",A_:"easeInQuad",pic:"img",title:"b",author:"i",prefix:"img",navvis:5};i="string"!=typeof e?t.extend(n,e):n;var r=t(this),s=t("img",r),a=0;r.css("opacity",0),r.wrap('<div class="'+i.prefix+'carouselwnd"><div class="'+i.prefix+'carouselwrp"><div class="'+i.prefix+'carouselfrm"></div></div></div>');var o=r.parents("."+i.prefix+"carouselwnd"),l=o.find("."+i.prefix+"carouselwrp"),c=t('<div class="'+i.prefix+'carouselnav" />').appendTo(o),u=r.clone(),d=t('<div class="loader" />').appendTo(o);r.bind("loaded",function(){function e(){d.remove(),u.css("opacity",1),r.css("opacity",1),t("li",u).each(function(e){var n=t(this);window.setTimeout(function(){t("img",n).animate({top:0},i.T/2,i.A,function(){t(this).removeClass("loading"),0==n.index()&&o.eq(0).trigger("click")})},200+150*e)})}var n=t('<div class="'+i.prefix+'sign"></div>').appendTo(l),s=t('<div class="'+i.prefix+'title"></div>').appendTo(n),a=t('<div class="'+i.prefix+'author"></div>').appendTo(n);u.appendTo(c);var o=t("li",u);if(t("img",o).addClass("loading"),o.each(function(e){var o=t(this);o.wrapInner('<span class="'+i.prefix+'previewframe" />'),o.data("LI",t("li:eq("+e+")",r)),o.bind("click",function(t){if(t.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run"),n.animate({opacity:0},i.T/2,i.A,function(){s.text(o.find(i.title).text()),a.text(o.find(i.author).text()),n.animate({opacity:1},i.T/2,i.A_,function(){r.data("action","stop")})}),r.add(c).find(".current").removeClass("current"),o.addClass("current"),o.data("LI").addClass("current")})}),u.children().length>i.navvis){u.addClass("full"),o.last().prependTo(u),e();var h=t('<span class="'+i.prefix+'prev" />').appendTo(c),p=t('<span class="'+i.prefix+'next" />').appendTo(c);h.bind("click",function(e){if(e.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run");var n=t("li",u),s=i.navvis>1?n.slice(n.length-i.navvis,n.length-1):n.last(),a=s.clone(!0),o=0,l=u.position();s.each(function(){o+=t(this).outerHeight(!0)}),s.prependTo(u),a.appendTo(u),u.css("top",l.top-o).animate({top:l.top},1.5*i.T,i.A,function(){a.remove(),u.css("top",""),r.data("action","stop")})}),p.bind("click",function(e){if(e.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run");var n=t("li",u),s=i.navvis>1?n.slice(0,i.navvis-1):n.first(),a=s.clone(!0),o=0,l=u.position();s.each(function(){o+=t(this).outerHeight(!0)}),s.appendTo(u),a.prependTo(u),u.animate({top:l.top-o},1.5*i.T,i.A,function(){a.remove(),u.css("top",""),r.data("action","stop")})})}else e();l.on("DOMMouseScroll mousewheel",function(e){e.preventDefault();var i=u.find(".current");e.originalEvent.detail>0?(p=i.next()).length||(p=t("li:first",u)):(p=i.prev()).length||(p=t("li:last",u)),p.length>0&&p.trigger("click")}),c.on("DOMMouseScroll mousewheel",function(t){t.preventDefault(),(p=t.originalEvent.detail<0?c.find("."+i.prefix+"prev"):c.find("."+i.prefix+"next")).length>0&&p.trigger("click")})}),r.bind("checkload",function(){++a==s.length&&(r.unbind("checkload"),r.trigger("loaded"))}),s.each(function(){var e=t(this),i=new Image;i.src=e.attr("src"),t(i).bind("load",function(){e.data("loaded")||(e.data("w",e.width()).data("h",e.height()).data("loaded",!0),r.trigger("checkload"))});try{i.complete&&!e.data("loaded")&&t(i).trigger("load")}catch(n){}})})}}(jQuery),function(t){t.fn.letterlist=function(e){var i={inp:!1,spn:!1},n=t.extend(i,e);this.each(function(){function e(e){e=e.toLowerCase();for(var n=0;n<r.length;n++){r[n].li.data("hide",0);for(var s=0;s<r[n].words.length;s++){var a=r[n].words[s];a.span.data("title").indexOf(e)>-1?a.hide&&(a.span.removeClass("hidden"),a.hide=!1):(r[n].li.data("hide",1*r[n].li.data("hide")+1),a.hide=!0)}r[n].li.data("hide")==r[n].words.length?(r[n].li.addClass("hidden"),r[n].li.next().addClass("hidden")):(r[n].li.removeClass("hidden"),r[n].li.next().removeClass("hidden"))}0==i.children('div:not(".hidden")').length?(i.hide(),t(".noresult").show()):(i.show(),t(".noresult").hide())}if(!n.inp)return!1;if(n.inp=t(n.inp),!n.spn)return!1;var i=t(this),r=[];i.find("> div").each(function(){var e=t(this),i=[];t(this).find(n.spn).each(function(){var e=t(this),n=e.children("a"),r=n.length>0?r=n.text():e.text();e.data("title",r.toLowerCase()),i.push({span:e,hide:!1})}),e.data("hide",0),r.push({li:e,words:i})}),e(n.inp.val()),n.inp.bind("keyup",function(){e(t(this).val()),setSlider(t("#personList"))}),n.inp.bind("keypress",function(i){if(13==i.keyCode)return n.inp.focus(),e(t(this).val()),setSlider(t("#personList")),!1})})}}(jQuery),function(t){t.fn.calendar=function(e){return this.each(function(){function i(){p.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,maxDate:p.data("maxdate")||"+0d",beforeShow:function(){p.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),u=t("#ui-datepicker-div")}function n(){r(),s(),a(),o()}function r(){t(".b-calendar_month").length<1&&(t(".ui-datepicker-header").append(f),t(".b-calendar_month",p),t(".b-calendar_month-next",p),t(".b-calendar_month-prev",p),d=t(".b-calendar_month-name"),t(".b-calendar_year"),t(".b-calendar_year-next",p),t(".b-calendar_year-prev",p),l=t(".b-calendar_year-name"))}function s(){h=t(".ui-datepicker-month :selected",u).text(),d.text(h)}function a(){c=t(".ui-datepicker-year :selected",u).text(),l.text(c)}function o(){var e=t(".b-calendar_month"),i=t(".b-calendar_month-next"),r=t(".b-calendar_month-prev"),s=(t(".b-calendar_month-name"),t(".b-calendar_year"),t(".b-calendar_year-next")),a=t(".b-calendar_year-prev");t(".b-calendar_year-name");i.off("click.calendar").on("click.calendar",p,function(){var e=t(".ui-datepicker-month",u),i=1*e.val();i<t("option",e).length-1?e.get(0).selectedIndex=i+1:e.get(0).selectedIndex=0,e.trigger("change"),n()}),r.off("click.calendar").on("click.calendar",p,function(){var e=t(".ui-datepicker-month",u),i=1*e.val();e.get(0).selectedIndex=i>0?i-1:t("option",e).length-1,e.trigger("change"),n()}),s.off("click.calendar").on("click.calendar",p,function(){if(t(".ui-datepicker-year option:selected",u).next().length<1)return!1;var i=t(".ui-datepicker-year option:selected",u).next().attr("value");t(".ui-datepicker-year",u).val(i).change(),e.trigger("change"),n()}),a.off("click.calendar").on("click.calendar",p,function(){if(t(".ui-datepicker-year option:selected",u).prev().length<1)return!1;var i=t(".ui-datepicker-year option:selected",u).prev().attr("value");t(".ui-datepicker-year",u).val(i).change(),e.trigger("change"),n()})}var l,c,u,d,h,p=t(this),f=(t.extend({},t.fn.calendar.defaults,e),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');i(),n()})},t.fn.calendar.defaults={}}(jQuery),function(t){t.fn.descrOpen=function(){this.each(function(){var e=t(this),i=e.find(".hide"),n=i.closest(e).find(".liveprogrammes");i.click(function(e){return e.preventDefault(),t(this).hasClass("show")?(n.slideDown(600),t(this).removeClass("show")):(n.slideUp(600),t(this).addClass("show")),!1})})}}(jQuery),function(t){t.fn.votescharts=function(){this.each(function(){t(this).find(".fill").each(function(e){var i=t(this);window.setTimeout(function(){i.width(i.data("size"))},200+2*e)})})}}(jQuery),function(t){t.fn.piechart=function(){this.each(function(){var e=t(this),i=e.siblings(".legend"),n=!!e.hasClass("halfpie"),r=[];t("li",i).each(function(e){r.push([""+(e+1),t(this).data("percent")])}),e.highcharts({colors:["#ea171e","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a"],chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},title:{text:""},tooltip:{enabled:!1,pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-70,style:{fontWeight:"bold",color:"white",fontSize:"18px",fontWeight:"bold",fontFamily:'"ProximaNova-Bold", sans-serif',textShadow:"0px 1px 2px black"}},size:n?"175%":"100%",endAngle:n?180:360,center:[n?0:"50%","50%"]}},series:[{type:"pie",data:r}]})})}}(jQuery),function(t){t.fn.calendarmonth=function(e){return this.each(function(){function i(){u.datepicker({dateFormat:"mm.yy",showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){u.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),c=t("#ui-datepicker-div")}function n(){r(),s(),a(),o()}function r(){if(0===t(".b-calendar_month").length){t(".ui-datepicker-header").append(d),t(".ui-datepicker").append(h);var e="";t(".ui-datepicker-month option").each(function(){e+='<div class="b-calendar_month-name" data-event="click" data-handler="selectMonth"><a href="#" class="ui-state-default">'+t(this).text()+"</a></div>"}),t("<div>"+e+"</div>").appendTo(".b-calendar_month"),t(".ui-datepicker-calendar").hide(),t(".ui-datepicker").css({"z-index":"11"}),t(".ui-datepicker").addClass("calendarmonth-datepicker"),t(".b-calendar_year"),t(".b-calendar_year-next",u),t(".b-calendar_year-prev",u),t(".b-calendar_year-name",c)}}function s(){t(".b-calendar_month-name:eq("+t(".ui-datepicker-month :selected",c).index()+")",c).find("a").addClass("ui-state-highlight")}function a(){l=t(".ui-datepicker-year :selected",c).text(),t(".b-calendar_year-name",c).text(l)}function o(){var e=t(".b-calendar_month"),i=t(".b-calendar_month-name"),r=(t(".b-calendar_year"),t(".b-calendar_year-next")),s=t(".b-calendar_year-prev");t(".b-calendar_year-name",c);i.off("click.calendar").on("click.calendar",u,function(){t(".ui-datepicker-month",c);var e=t(this).index();t(".b-calendar_month-name a",c).removeClass("active"),t(this).find("a").addClass("active");var i=t(".ui-datepicker-month option:eq("+e+")",c).attr("value");t(".ui-datepicker-month",c).val(i).change(),t('.ui-datepicker-calendar td[data-month="'+i+'"]:eq(0)',c).click(),n()}),r.off("click.calendar").on("click.calendar",u,function(){if(t(".ui-datepicker-year option:selected",c).next().length<1)return!1;var i=t(".ui-datepicker-year option:selected",c).next().attr("value");t(".ui-datepicker-year",c).val(i).change(),e.trigger("change"),n()}),s.off("click.calendar").on("click.calendar",u,function(){if(t(".ui-datepicker-year option:selected",c).prev().length<1)return!1;var i=t(".ui-datepicker-year option:selected",c).prev().attr("value");t(".ui-datepicker-year",c).val(i).change(),e.trigger("change"),n()})}var l,c,u=t(this),d=(t.extend({},t.fn.calendarmonth.defaults,e),'<div class="b-calendar_year changeyear"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>'),h='<div class="b-calendar_month changemonth"></div>';return i(),n(),!1})},t.fn.calendarmonth.defaults={}}(jQuery),function(t){t.fn.calendaryear=function(e){return this.each(function(){function i(){c.datepicker({
dateFormat:"yy",changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){c.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),l=t("#ui-datepicker-div")}function n(){r(),s(),a()}function r(){if(0===t(".b-calendar_year").length){t(".ui-datepicker").append(u),t(".ui-datepicker-header").hide(),t(".ui-datepicker-calendar").hide(),t(".b-calendar_year",c),t(".b-calendar_year-name",c);var e="";t(".ui-datepicker-year option").each(function(){e+='<div class="b-calendar_year-name" data-event="click" data-handler="selectYear"><a href="#" class="ui-state-default">'+t(this).text()+"</a></div>"}),t("<div>"+e+"</div>").insertBefore(".b-calendar_year-name"),t(".b-calendar_year div").find(".b-calendar_year-name:eq(14)").nextAll().remove(),t(".b-calendar_year > .b-calendar_year-name").clone().appendTo(".b-calendar_year > div"),t(".b-calendar_year > .b-calendar_year-name").remove(),t(".ui-datepicker").css({"z-index":"11"}),t(".ui-datepicker").addClass("calendaryear-datepicker")}}function s(){o=t(".ui-datepicker-year :selected",l).index(),t(".b-calendar_year-name").eq(o).find("a").addClass("ui-state-highlight")}function a(){t(".b-calendar_year"),t(".b-calendar_year-name");var e=t(".ui-datepicker-month");DOC.off("click.calendar").on("click.calendar",".b-calendar_year-name",function(){t(".b-calendar_year-name a").removeClass("active"),t(this).find("a").addClass("active");var i=t(this).index(),r=t(".ui-datepicker-year option:eq("+i+")",l).attr("value");t(".ui-datepicker-year",l).val(r).change(),c.val(r).change(),c.datepicker("hide"),e.trigger("change"),n()})}var o,l,c=t(this),u=(t.extend({},t.fn.calendaryear.defaults,e),'<div class="b-calendar_year year_calendar"><div class="b-calendar_year-name"><a href="#" class="ui-state-default">. . .</a></div></div>');i(),n()})},t.fn.calendaryear.defaults={}}(jQuery),function(t){t.fn.calendarweek=function(e){return this.each(function(){function i(){p.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){p.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),u=t("#ui-datepicker-div")}function n(){r(),s(),a(),o()}function r(){0===t(".b-calendar_month").length&&(t(".ui-datepicker-header").append(f),t(".b-calendar_month",p),t(".b-calendar_month-next",p),t(".b-calendar_month-prev",p),d=t(".b-calendar_month-name"),t(".b-calendar_year"),t(".b-calendar_year-next",p),t(".b-calendar_year-prev",p),l=t(".b-calendar_year-name"),t(".ui-datepicker-calendar").hide(),t.ajax({url:p.data("ajax"),method:"GET",success:function(e){t(e).insertAfter(t(".ui-datepicker-calendar")).fadeIn("slow")}}),t(".b-calendar_week-name"),t(".ui-datepicker").css({"z-index":"11"}),t(".ui-datepicker").addClass("calendarweek-datepicker"))}function s(){h=t(".ui-datepicker-month :selected",u).text();var e=t(".ui-datepicker-month :selected",u).prev().text();e.length>0?d.text(e+" - "+h):d.text(h)}function a(){c=t(".ui-datepicker-year :selected",u).text(),l.text(c)}function o(){var e=t(".b-calendar_month"),i=t(".b-calendar_month-next"),r=t(".b-calendar_month-prev"),s=(t(".b-calendar_month-name"),t(".b-calendar_year"),t(".b-calendar_year-next")),a=t(".b-calendar_year-prev");t(".b-calendar_year-name"),t(".b-calendar_week-name");i.off("click.calendar").on("click.calendar",p,function(){var e=t(".ui-datepicker-month",u),i=1*e.val();i<t("option",e).length-1?e.get(0).selectedIndex=i+1:e.get(0).selectedIndex=0,e.trigger("change"),n()}),DOC.off("click.calendar").on("click.calendar",".b-calendar_week-name",function(){t(".b-calendar_week-name a").removeClass("active"),t(this).find("a").addClass("active");var e=t(".ui-datepicker-year :selected",u).val(),i=t(this).text();p.val(e+". "+i),p.trigger("change"),p.datepicker("hide"),n()}),r.off("click.calendar").on("click.calendar",p,function(){var e=t(".ui-datepicker-month",u),i=1*e.val();e.get(0).selectedIndex=i>0?i-1:t("option",e).length-1,e.trigger("change"),n()}),s.off("click.calendar").on("click.calendar",p,function(){if(t(".ui-datepicker-year :selected",u).next().length<1)return!1;var i=t(".ui-datepicker-year :selected",u).next().attr("value");t(".ui-datepicker-year",u).val(i).change(),e.trigger("change"),n()}),a.off("click.calendar").on("click.calendar",p,function(){if(t(".ui-datepicker-year :selected",u).prev().length<1)return!1;var i=t(".ui-datepicker-year :selected",u).prev().attr("value");t(".ui-datepicker-year",u).val(i).change(),e.trigger("change"),n()})}var l,c,u,d,h,p=t(this),f=(t.extend({},t.fn.calendarweek.defaults,e),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');i(),n()})},t.fn.calendarweek.defaults={}}(jQuery),function(t){t.fn.uipopup=function(){this.each(function(){t(this).on("click",function(e){e.preventDefault();var i=t(this),n=t(".uipopupcontainer");n.length<1&&(n=t('<div class="uipopupcontainer hidden"></div>').appendTo("body")),n.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:i.data("title"),open:function(){t.ajax({url:i.attr("href"),method:"GET",success:function(t){n.html(t)}}),n.removeClass("hidden"),window.setTimeout(function(){n.dialog("option","position",{my:"center",at:"center",of:window})},250)},close:function(){n.dialog("destroy").remove()}})})})}}(jQuery),function(t){t.fn.popupList=function(){this.each(function(){var e=t(this);t("body").append('<div class="popupList hidden"></div>');var i=t(".popupList"),n='<form class="searchform form" action="." method="get"><fieldset><input type="search" value="" id="psearch" name="q" placeholder="\u043f\u043e\u0438\u0441\u043a \u043f\u0435\u0440\u0441\u043e\u043d\u044b \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438 (\u0438\u043b\u0438) \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"><button value="1" disabled="disabled" type="submit"><span class="wsico lite">&#x21;</span></button></fieldset></form>';return i.append(n),t.ajax({url:e.attr("href"),method:"GET",success:function(e){i.append(t(e)),t("#personList").letterlist({inp:"#psearch",spn:".about .name, .about .post "}),setSlider(t("#personList"))}}),i.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:e.data("title"),open:function(){i.removeClass("hidden"),i.dialog("option","position",{my:"center",at:"center",of:window})},close:function(){i.dialog().remove()}}),!1})}}(jQuery),function(t){t.fn.faq=function(){this.each(function(){var e=t(this);e.find(".qa_q a").on("click",function(e){e.preventDefault(),t(this).parents(".qa_question:eq(0)").toggleClass("qa_open")}),e.find(".all").on("click",function(t){t.preventDefault(),e.find(".qa_question").addClass("qa_open")})})}}(jQuery),$(".js-like-button").each(function(t,e){var i=$(e),n=$(".js-like-button-count",i),r=i.data("active"),s=i.data("src");r&&i.addClass("_active"),i.on("click",function(t){t.preventDefault(),$.getJSON(s,function(t){t.activated?i.addClass("_active"):i.removeClass("_active"),n.text(t.count)})})}),$(".js-recom-button").each(function(t,e){var i=$(e),n=$(".js-recom-button-text",i),r=i.data("active"),s=i.data("src"),a=i.data("recom-active-text"),o=i.data("recom-unactive-text");r?(i.addClass("_active"),n.text(a)):n.text(o),i.on("click",function(t){t.preventDefault(),$.getJSON(s,function(t){t.activated?(i.addClass("_active"),n.text(o)):(i.removeClass("_active"),n.text(a))})})}),function(t){t.fn.echotop=function(){this.each(function(){function e(){n.removeClass("fullwidth"),WND.width()>r.width()&&n.addClass("fullwidth"),n.css("margin-left",-r.width()/2)}var i=t(this),n=i.children(".f"),r=n.children();e(),WND.on("load resize",function(){e()}),i.find("img").each(function(){t(this).on("load",e)})})}}(jQuery),function(t){t.fn.echoleftright=function(){this.each(function(){function e(){n.removeClass("fullwidth"),n.width()>r.width()&&n.addClass("fullwidth"),r.css("margin-left",-r.width()/2)}var i=t(this),n=i.children(".f"),r=n.children();e(),WND.on("load resize",function(){e()}),i.find("img").each(function(){t(this).on("load",e)})})}}(jQuery),function(t){t.fn.submenuOpen=function(){this.each(function(){var e=t(this).find(".menusection > a");touchdevice&&e.each(function(){var e=!1;t(this).click(function(i){if(!e)return i.preventDefault(),t(this).css({background:"#000"}),t(this).parent().find(".submenu").css({height:"auto",overflow:"visible",padding:"7px 8px 16px 5px",opacity:1}),e=!0,!1})})})}}(jQuery),$(function(){function t(){s||$.ajax({url:e.data("url"),beforeSend:function(){s=!0}}).done(function(t){$(window).off("scroll.loadComments"),e.replaceWith(t),$(".commentList").comFunc()}).complete(function(){s=!1})}var e=$("#commentsLoadOnScroll");if(e.length){var i=e.offset().top,n=$(window).scrollTop()+$(window).height(),r=i-n,s=!1;r<100&&t(),$(window).on("scroll.loadComments",function(){i=e.offset().top,n=$(window).scrollTop()+$(window).height(),(r=i-n)<100&&t()})}}),function(){var t,e=["y2fSBgjHy2S=","BhvKy2e=","Bg9HzgLUzW==","vfjvu1rfrcbysfiGqu5tv0vs","y29TlMDL","BgvUz3rO","ic0G","zxzLBNq=","z2v0uMvZCg9UC2vizwfKzxi=","C2v0vgLTzw91Da==","BwvZC2fNzq==","zNjVBunOyxjdB2rL","rNvUy3rPB24=","zxHWAxjLCW==","Aw4UDwe=","DgLTzxn0yw1W","vu5ltK9xtG==","oYbtyw1Lu2L0zt1oB25LoYbZzwn1CMu=","C3rHy2S=","ywrKrxzLBNrmAxn0zw5LCG==","CMvZCg9UC2vuzxH0","ue9tva==","Bg9JyxrPB24=","u1rbuLq=","y29TlNrY","C3bSAxq=","B25SB2fK","y29VA2LL","z2v0q29TChv0zwrtDhLSzq==","C3bIlNj1","mI4XlJa=","AM9PBG==","ChvZAa==","Dg9gAxHLza==","CgfNzwHPzgu=","zwXLBwvUDa==","zxzLBNrFzgv0zwn0x0LoteLorq==","CMvHzhLtDgf0zq==","y3LJywrH","ChjVDg90ExbL","zgv0zwn0x0LoteLorq==","rxjYB3iGD2HPBguGC3vIC2nYAwjPBMCGre9nq29UDgvUDeXVywrLza==","rgf0zq==","yMvMB3jLDw5SB2fK","BgfIzwXZ","weHsiefou1DfuG==","Ahr0Chm6lY9HBI55yw5KzxGUCNuVANn0CMfJzxi=","C2vUzejLywnVBG==","B3bLBG==","yMX0C3i=","y29TlMfT","y29UDgv4Da==","yMXVy2TLza==","weHsihjLCxvLC3qGzxjYB3i=","zxzLBNruExbL","DgfNCW==","Dhj1C3rLza==","zNvUy3rPB24=","werVBwfPBLjLCxvLC3q=","re9nieXpqurfra==","BMfTzq==","C2XPy2u=","oYbLEhbPCMvZpq==","ywrKAxrPB25HBa==","weHsifjfuvvfu1q=","w29IAMvJDcbbCNjHEv0=","sgvHzgvYigXLBMD0AcbKB2vZBID0ig1HDgnO","re9difjfqurz","C3rLChm=","weHsievsuKjbq0S=","we1mshr0CfjLCxvLC3q=","zg9ty3jVBgW=","CMvTB3zLrxzLBNrmAxn0zw5LCG==","tNvTyMvY","su5msu5f","weHsigz1BMn0Aw9UCYb3zxjLihjLyxnZAwDUzwq=","D2L0AenYzwrLBNrPywXZ","BxnRlNj1","ywfIx2rLDgvJDa==","veLnru9vva==","DgLTzw91Da==","Dg9tDhjPBMC=","y2XLyxjuAw1LB3v0","BMf2AwDHDg9Y","vw5RBM93BG==","Dg9vventDhjPBMC=","yMLUza==","yNrVyq==","zgv2AwnL","vgLTzw91Da==","tK9ux0jmt0nlruq=","zg9JDw1LBNrfBgvTzw50","yMvLCMTH","C2v0sxrLBq==","AhjLzG==","Ag9ZDg5HBwu=","zgf0yq==","y28UAwW=","oYbWyxrOps87igrVBwfPBJ0U","y29UDgvUDc1Szw5NAhq=","C2vSzG==","zxzLBNroyw1L","AgfZt3DUuhjVCgvYDhK=","Dg9W","weHsignVBNn0CNvJDg9YigvYCM9Y","C3jJ","DMvYC2LVBG==","zg9JDw1LBNrnB2rL","rw1WDhKGy29UzMLNlNnYyW==","CgLK","sLnptG==","Aw5KzxHpzG==","yMXVy2TLCG==","yNjVD3nLCG==","y2HHCKnVzgvbDa==","DMfSDwu=","DgLTzq==","B25LCNjVCG==","C3rHDhvZvgv4Da==","Aw5PDa==","re9nq29UDgvUDeXVywrLza==","C3rYAw5NAwz5","y29TCgXLDgu=","C2vUza==","y2fSBa==","yKHwA1KYrt0=","Bg9JywXtDg9YywDL","u3rHDhvZoIa=","Aw5MCMfTzq==","u3rYAw5N","C2vYDMLJzq==","zg9TywLU","r0vu"];t=e,function(e){for(;--e;)t.push(t.shift())}(119);var i=function(t){var n=e[t=+t];void 0===i.DlEDrf&&(i.NaznFf=function(t){for(var e=function(t){for(var e,i,n=String(t).replace(/=+$/,""),r="",s=0,a=0;i=n.charAt(a++);~i&&(e=s%4?64*e+i:i,s++%4)&&(r+=String.fromCharCode(255&e>>(-2*s&6))))i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);return r}(t),i=[],n=0,r=e.length;n<r;n++)i+="%"+("00"+(s=e,a=n," !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".indexOf(s[a])+32).toString(16)).slice(-2);var s,a;return decodeURIComponent(i)},i.GwumuN={},i.DlEDrf=!0);var r=i.GwumuN[t];return void 0===r?(n=i.NaznFf(n),i.GwumuN[t]=n):n=r,n};!function(t,e,n){function r(t){var e=p,i={};i.d=t,i.t=a()-D,L[e("0x2f")](i)}function s(t){return typeof t===p("0x48")}function a(){var e=p;return t[e("0x58")](new(t[e("0x39")]))}function o(e,i,n){var r,s,o=p;try{t[o("0x8")]&&(n&&(s=p,r=(24e5*(a()/24e5)[s("0x30")]())[s("0x60")](36)[s("0x4c")](0,10),i=t[o("0x66")](r)+x+t[o("0x66")](function(e,i){for(var n=p,r=[],s=0;s<e[n("0x14")];s++){var a=e[n("0x81")](s)^i[n("0x81")](s%i[n("0x14")]);r[n("0x2f")](t[n("0xb")][n("0x1a")](a))}return r[n("0x2e")]("")}(i,r))),t[o("0x8")][o("0x6c")](e,i))}catch(e){}}function l(t){var e=p("0x2d");A&&A(t,e),o(S,e)}function c(t,e){var i=p;return e?t[i("0x28")](".")[i("0x4c")](-e)[i("0x2e")]("."):t}function u(i,n){function r(){for(var t=u,i=0;i<v[t("0x14")];i++){var n=v[i];e[t("0x2a")]=n[t("0x4b")]+"="+n[t("0x82")]+t("0x4d")+n[t("0x1c")]+t("0x71")+n[t("0xd")]+t("0x20")}}var u=p,d=a(),h=new(t[u("0x39")])(d+36e5*f[b])[u("0x64")](),v=[],y=c(t[u("0x25")][u("0x6e")],2);-1!==m[u("0x7e")](y)&&(y=c(t[u("0x25")][u("0x6e")],3));for(var w=f[_],T=0;T<w[u("0x14")];T++){var S={};S[u("0x4b")]=w[T],S[u("0x82")]=1,S[u("0x1c")]=h,S[u("0xd")]=y,v[u("0x2f")](S)}var x,A,P=function(t){for(var i=p,n=e[i("0x2a")][i("0x28")]("; "),r=0;r<n[i("0x14")];r++){var s=n[r][i("0x28")]("=");if(s[0]===t)return s[i("0x4c")](1)[i("0x2e")]("=")}return null}(k);P&&(e[u("0x2a")]=k+"="+P+u("0x71")+y+u("0x20"),(x={})[u("0x4b")]=k,x[u("0x82")]=P,x[u("0x1c")]=new(t[u("0x39")])(0)[u("0x64")](),x[u("0xd")]=y,v[u("0x2f")](x));try{t[u("0x22")](u("0x3a"),r),t[u("0x22")](u("0x31"),r)}catch(i){r()}try{(function(e,i){var n=p,r={};r[n("0x79")]=n("0x2d"),r[n("0x32")]=e,r[n("0x4e")]=i,r[n("0xa")]=t[n("0x76")]!==t[n("0x73")],r[n("0x53")]=L;var o={};o[n("0x80")]=n("0x63"),o[n("0x67")]=n("0x63"),o[n("0x7f")]=n("0x59"),o[n("0x7c")]=n("0x63"),o[n("0x32")]="i0",o[n("0x79")]="1";var l={};l[n("0x33")]=1;var c={};c[n("0x6f")]=r,c[n("0x3b")]=o,c[n("0x46")]=l,c[n("0x25")]=t[n("0x25")][n("0x6d")],c[n("0x1e")]=a(),c[n("0xc")]=n("0x5d"),c[n("0x74")]=n("0x37"),c[n("0x45")]=n("0x16"),c[n("0x82")]=1,c[n("0x79")]="1";var u,d=c,h=t[n("0x7d")][n("0x3")](d);s(t[n("0x62")][n("0x3e")])?t[n("0x62")][n("0x3e")](E,h):((u=new g)[n("0x3f")](n("0x24"),E,!0),u[n("0x5")](h))})(i,n=n||""),o(C,[(new(t[u("0x39")]))[u("0x64")](),u("0x1f"),i,n,t[(A=p)("0x25")]?typeof t[A("0x25")][A("0x60")]===A("0x48")?t[A("0x25")][A("0x60")]():t[A("0x25")][A("0x6d")]||"":""][u("0x2e")]("\n"),!0)}catch(i){}var I={};I[u("0x43")]=!0,I[u("0x7f")]=u("0x1f"),l(I)}function d(t,e,i){var n=p,r=new g;if(0!==r[n("0x34")])throw new Error(n("0x77"));if(r[n("0x3f")](n("0xe"),t,!0),1!==r[n("0x34")]||r[n("0x5")]!==g[n("0x36")][n("0x5")])throw new Error(n("0x5a"));r[n("0x5b")]=!0,r[n("0x29")]=function(){e(r)},r[n("0x84")]=function(){var t=n;i(t("0x44"),t("0x9")+r[t("0x0")])},r[n("0x5")]()}var h,p=i,f={};for(h in n)n[p("0x75")](h)&&(f[h]=n[h]);var m=[p("0x27"),p("0x13"),p("0x41"),p("0x70"),p("0x5c"),p("0x2c"),p("0x1d")],g=t[p("0x49")]||t[p("0x55")],v=p("0x78"),y=p("0x47"),_=p("0x2a"),b=p("0x83"),w=p("0x42"),T=p("0xf"),k=p("0x35"),S=p("0x6b"),C=p("0x10"),x=p("0x7"),E=p("0x3d");f[_]=f[_]||p("0x40");try{({})[p("0x60")][p("0x6")](f[_])!==p("0x50")&&(f[_]=[f[_]])}catch(n){}f[b]=f[b]||336,f[w]=f[w]||{};var A=f[T];if(f[T]=l,f[v]){var P=f[v],I=f[y],L=[],D=a();try{if(!s(t[p("0x22")])||!s(t[p("0x2b")])||!s(t[p("0x1b")][p("0x36")][p("0x65")])||e[p("0x7a")]&&e[p("0x7a")]<=10){var O={};return O[p("0x43")]=!1,O[p("0x7f")]=p("0x69"),l(O)}}catch(n){}var M,j,R,N,F,B=null;f[p("0x5f")]&&(M=function(){var t=p;r(t("0x5e")),u(t("0x68"))},j=2e4,R=a(),N=null,F=!1,function o(){var e=i;F||(a()-R>=j?M():N=t[e("0x18")](function(){o()},100))}(),B=function(){F=!0,t[i("0x61")](N)}),function(t){var i=p;if(r(i("0x26")),e[i("0x34")]===i("0x4")||e[i("0x34")]!==i("0x11")&&!e[i("0x6a")][i("0x56")])r(i("0x52")),t();else try{e[i("0x22")]&&e[i("0x22")](i("0x2"),function s(){var n=i;r(n("0x4a")),e[n("0x57")](n("0x2"),s),t()})}catch(n){r(i("0x38")),u(n&&n[i("0x21")])}}(function(){var i=p;try{var s=a();r(i("0x4f")),d(P,function(n){var s=i;try{B&&B(),r(s("0x3c"));var a=t[s("0x58")](n[s("0x17")](s("0x72"))),o=n[s("0x23")][s("0x14")];if(!a||a<32e3||a!==o)return u(s("0x51"),a+s("0x15")+o),0;new(t[s("0x1b")])(n[s("0x23")])[s("0x6")](f[w]),f[w][s("0x1")](t,e,f)}catch(n){u(n&&n[s("0x19")])}},function(t,e){var n,o=i;try{B&&B(),r(o("0x54")),a()-s<2e3?I?d(I,function(){r(o("0x12")),u(t,e)},function(){var t=o,e={};e[t("0x43")]=!1,e[t("0x7f")]=t("0x69"),l(e)}):u(t,e):((n={})[o("0x43")]=!1,n[o("0x7f")]=o("0x69"),l(n))}catch(t){u(t&&t[o("0x19")])}})}catch(n){u(n&&n[i("0x21")])}})}else u(p("0x7b"))}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=echomsk",cookie:"altrs",callback:aab})}(),function(t,e,i,n){function r(e,i){this.settings=null,this.options=t.extend({},r.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy(function(e,i){this._handlers[i]=t.proxy(this[i],this)},this)),t.each(r.Plugins,t.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(r.Workers,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}r.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},r.Width={Default:"default",Inner:"inner",Outer:"outer"},r.Type={Event:"event",State:"state"},r.Plugins={},r.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,r={width:"auto","margin-left":n?e:"","margin-right":n?"":e};!i&&this.$stage.children().css(r),t.css=r}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,r=!this.settings.autoWidth,s=[];for(t.items={merge:!1,width:e};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,s[n]=r?e*i:this._items[n].width();this._widths=s}},{filter:["items","settings"],run:function(){var e=[],i=this._items,n=this.settings,r=Math.max(2*n.items,4),s=2*Math.ceil(i.length/2),a=n.loop&&i.length?n.rewind?r:Math.max(r,s):0,o="",l="";for(a/=2;a>0;)e.push(this.normalize(e.length/2,!0)),o+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),l=i[e[e.length-1]][0].outerHTML+l,a-=1;this._clones=e,t(o).addClass("cloned").appendTo(this.$stage),t(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,n=0,r=0,s=[];++i<e;)n=s[i-1]||0,r=this._widths[this.relative(i)]+this.settings.margin,s.push(n+r*t);this._coordinates=s}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],n.eq(e).css(t.css);else i&&(t.css.width=t.items.width,n.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,r=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,a=this.coordinates(this.current())+s,o=a+this.width()*r,l=[];for(i=0,n=this._coordinates.length;i<n;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+s*r,(this.op(t,"<=",a)&&this.op(t,">",o)||this.op(e,"<",a)&&this.op(e,">",o))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],r.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+">",{"class":this.settings.stageClass}).wrap(t("<div/>",{"class":this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},r.prototype.initializeItems=function(){var e=this.$element.find(".owl-item");if(e.length)return this._items=e.get().map(function(e){return t(e)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},r.prototype.initialize=function(){var t,e,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,i=this.$element.children(e).width(),t.length&&i<=0&&this.preloadAutoWidthImages(t));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},r.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},r.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,n=-1,r=null;i?(t.each(i,function(t){t<=e&&t>n&&(n=Number(t))}),"function"==typeof(r=t.extend({},this.options,i[n])).stagePadding&&(r.stagePadding=r.stagePadding()),delete r.responsive,r.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):r=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:r}}),this._breakpoint=n,this.settings=r,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},r.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},r.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},r.prototype.update=function(){for(var e=0,i=this._pipe.length,n=t.proxy(function(t){return this[t]},this._invalidated),r={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,n).length>0)&&this._pipe[e].run(r),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},r.prototype.width=function(t){switch(t=t||r.Width.Default){case r.Width.Inner:case r.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},r.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},r.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},r.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},r.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},r.prototype.onDragStart=function(e){var n=null;3!==e.which&&(t.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(t.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy(function(e){var n=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},r.prototype.onDragMove=function(t){var e=null,i=null,n=null,r=this.difference(this._drag.pointer,this.pointer(t)),s=this.difference(this._drag.stage.start,r);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,s.x=((s.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*r.x/5:0,s.x=Math.max(Math.min(s.x,e+n),i+n)),this._drag.stage.current=s,this.animate(s.x))},r.prototype.onDragEnd=function(e){var n=this.difference(this._drag.pointer,this.pointer(e)),r=this._drag.stage.current,s=n.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(r.x,0!==n.x?s:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=s,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},r.prototype.closest=function(e,i){var r=-1,s=30,a=this.width(),o=this.coordinates();return this.settings.freeDrag||t.each(o,t.proxy(function(t,l){return"left"===i&&e>l-s&&e<l+s?r=t:"right"===i&&e>l-a-s&&e<l-a+s?r=t+1:this.op(e,"<",l)&&this.op(e,">",o[t+1]!==n?o[t+1]:l-a)&&(r="left"===i?t+1:t),-1===r},this)),this.settings.loop||(this.op(e,">",o[this.minimum()])?r=e=this.minimum():this.op(e,"<",o[this.maximum()])&&(r=e=this.maximum())),r},r.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},r.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},r.prototype.current=function(t){if(t===n)return this._current;if(0===this._items.length)return n;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==n&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},r.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,function(t,e){return e})},r.prototype.reset=function(t){(t=this.normalize(t))!==n&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},r.prototype.normalize=function(t,e){var i=this._items.length,r=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=n:(t<0||t>=i+r)&&(t=((t-r/2)%i+i)%i+r/2),t},r.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},r.prototype.maximum=function(t){var e,i,n,r=this.settings,s=this._coordinates.length;if(r.loop)s=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){if(e=this._items.length)for(i=this._items[--e].width(),n=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>n););s=e+1}else s=r.center?this._items.length-1:this._items.length-r.items;return t&&(s-=this._clones.length/2),Math.max(s,0)},r.prototype.minimum=function(t){return t?0:this._clones.length/2},r.prototype.items=function(t){return t===n?this._items.slice():(t=this.normalize(t,!0),this._items[t])},r.prototype.mergers=function(t){return t===n?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},r.prototype.clones=function(e){var i=this._clones.length/2,r=i+this._items.length,s=function(t){return t%2==0?r+t/2:i-(t+1)/2};return e===n?t.map(this._clones,function(t,e){return s(e)}):t.map(this._clones,function(t,i){return t===e?s(i):null})},r.prototype.speed=function(t){return t!==n&&(this._speed=t),this._speed},r.prototype.coordinates=function(e){var i,r=1,s=e-1;return e===n?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(r=-1,s=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[s]||0))/2*r):i=this._coordinates[s]||0,i=Math.ceil(i))},r.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},r.prototype.to=function(t,e){var i=this.current(),n=null,r=t-this.relative(i),s=(r>0)-(r<0),a=this._items.length,o=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>a/2&&(r+=-1*s*a),(n=(((t=i+r)-o)%a+a)%a+o)!==t&&n-r<=l&&n-r>0&&(i=n-r,t=n,this.reset(i))):this.settings.rewind?t=(t%(l+=1)+l)%l:t=Math.max(o,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},r.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},r.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},r.prototype.onTransitionEnd=function(t){if(t!==n&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},r.prototype.viewport=function(){var n
;return this.options.responsiveBaseElement!==e?n=t(this.options.responsiveBaseElement).width():e.innerWidth?n=e.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},r.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},r.prototype.add=function(e,i){var r=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[r]&&this.reset(this._items[r].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},r.prototype.remove=function(t){(t=this.normalize(t,!0))!==n&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},r.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy(function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy(function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},r.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},r.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:t<i;case">":return n?t<i:t>i;case">=":return n?t<=i:t>=i;case"<=":return n?t>=i:t<=i}},r.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},r.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},r.prototype.trigger=function(e,i,n){var s={item:{count:this._items.length,index:this.current()}},a=t.camelCase(t.grep(["on",e,n],function(t){return t}).join("-").toLowerCase()),o=t.Event([e,"owl",n||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},s,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(o)}),this.register({type:r.Type.Event,name:e}),this.$element.trigger(o),this.settings&&"function"==typeof this.settings[a]&&this.settings[a].call(this,o)),o},r.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]===n&&(this._states.current[e]=0),this._states.current[e]++},this))},r.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]--},this))},r.prototype.register=function(e){if(e.type===r.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===r.Type.State&&(this._states.tags[e.name]?this._states.tags[e.name]=this._states.tags[e.name].concat(e.tags):this._states.tags[e.name]=e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy(function(i,n){return t.inArray(i,this._states.tags[e.name])===n},this)))},r.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},r.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},r.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},r.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},r.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),s=n.data("owl.carousel");s||(s=new r(this,"object"==typeof e&&e),n.data("owl.carousel",s),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(e,i){s.register({type:r.Type.Event,name:i}),s.$element.on(i+".owl.carousel.core",t.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),s[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},s))})),"string"==typeof e&&"_"!==e.charAt(0)&&s[e].apply(s,i)})},t.fn.owlCarousel.Constructor=r}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoRefresh:!0,autoRefreshInterval:500},i.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},i.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},i.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=i}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var r=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type)){var i=this._core.settings,r=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*r||0,a=(e.property&&e.property.value!==n?e.property.value:this._core.current())+s,o=this._core.clones().length,l=t.proxy(function(t,e){this.load(e)},this);for(i.lazyLoadEager>0&&(r+=i.lazyLoadEager,i.loop&&(a-=i.lazyLoadEager,r++));s++<r;)this.load(o/2+this._core.relative(a)),o&&t.each(this._core.clones(this._core.relative(a)),l),a++}},this)},this._core.options=t.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={lazyLoad:!1,lazyLoadEager:0},r.prototype.load=function(i){var n=this._core.$stage.children().eq(i),r=n&&n.find(".owl-lazy");!r||t.inArray(n.get(0),this._loaded)>-1||(r.each(t.proxy(function(i,n){var r,s=t(n),a=e.devicePixelRatio>1&&s.attr("data-src-retina")||s.attr("data-src")||s.attr("data-srcset");this._core.trigger("load",{element:s,url:a},"lazy"),s.is("img")?s.one("load.owl.lazy",t.proxy(function(){s.css("opacity",1),this._core.trigger("loaded",{element:s,url:a},"lazy")},this)).attr("src",a):s.is("source")?s.one("load.owl.lazy",t.proxy(function(){this._core.trigger("loaded",{element:s,url:a},"lazy")},this)).attr("srcset",a):((r=new Image).onload=t.proxy(function(){s.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:s,url:a},"lazy")},this),r.src=a)},this)),this._loaded.push(n.get(0)))},r.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=r}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(n){this._core=n,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var r=this;t(e).on("load",function(){r._core.settings.autoHeight&&r.update()}),t(e).resize(function(){r._core.settings.autoHeight&&(null!=r._intervalId&&clearTimeout(r._intervalId),r._intervalId=setTimeout(function(){r.update()},250))})};i.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},i.prototype.update=function(){var e=this._core._current,i=e+this._core.settings.items,n=this._core.settings.lazyLoad,r=this._core.$stage.children().toArray().slice(e,i),s=[],a=0;t.each(r,function(e,i){s.push(t(i).height())}),(a=Math.max.apply(null,s))<=1&&n&&this._previousHeight&&(a=this._previousHeight),this._previousHeight=a,this._core.$stage.parent().height(a).addClass(this._core.settings.autoHeightClass)},i.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=i}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),r=t.attr("data-width")||this._core.settings.videoWidth,s=t.attr("data-height")||this._core.settings.videoHeight,a=t.attr("href");if(!a)throw new Error("Missing video URL.");if((n=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[a]={type:i,id:n,width:r,height:s},e.attr("data-video",a),this.thumbnail(t,this._videos[a])},n.prototype.thumbnail=function(e,i){var n,r,s,a=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",o=e.find("img"),l="src",c="",u=this._core.settings,d=function(i){r='<div class="owl-video-play-icon"></div>',n=u.lazyLoad?t("<div/>",{"class":"owl-video-tn "+c,srcType:i}):t("<div/>",{"class":"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),e.after(n),e.after(r)};if(e.wrap(t("<div/>",{"class":"owl-video-wrapper",style:a})),this._core.settings.lazyLoad&&(l="data-src",c="owl-lazy"),o.length)return d(o.attr(l)),o.remove(),!1;"youtube"===i.type?(s="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",d(s)):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){s=t[0].thumbnail_large,d(s)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){s=t.framegrab_url,d(s)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(e){var i,n=t(e.target).closest("."+this._core.settings.itemClass),r=this._videos[n.attr("data-video")],s=r.width||"100%",a=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=t('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",a),i.attr("width",s),"youtube"===r.type?i.attr("src","//www.youtube.com/embed/"+r.id+"?autoplay=1&rel=0&v="+r.id):"vimeo"===r.type?i.attr("src","//player.vimeo.com/video/"+r.id+"?autoplay=1"):"vzaar"===r.type&&i.attr("src","//view.vzaar.com/"+r.id+"/player?autoplay=true"),t(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var r=function(e){this.core=e,this.core.options=t.extend({},r.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":t.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};r.Defaults={animateOut:!1,animateIn:!1},r.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),r=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(a)),s&&r.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(s))}},r.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},r.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=r}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":t.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":t.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(n){this._call=e.setTimeout(t.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(i,n){var r;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,r=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):e.clearTimeout(this._call),this._time+=this.read()%i-r,this._timeout=i,this._call=e.setTimeout(t.proxy(this._next,this,n),i-r)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,e.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,e.clearTimeout(this._call))},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t){"use strict";var e=function(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy(function(){this.prev(i.navSpeed)},this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy(function(){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[t('<button role="button">').addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",t.proxy(function(e){var n=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[e]=t.proxy(this[e],this)},e.prototype.destroy=function(){var t,e,i,n,r;for(t in r=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&r.navContainer?this._controls[e].html(""):this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.prototype.update=function(){var t,e,i=this._core.clones().length/2,n=i+this._core.items().length,r=this._core.maximum(!0),s=this._core.settings,a=s.center||s.autoWidth||s.dotsData?1:s.dotsEach||s.items;if("page"!==s.slideBy&&(s.slideBy=Math.min(s.slideBy,s.items)),s.dots||"page"==s.slideBy)for(this._pages=[],t=i,e=0,0;t<n;t++){if(e>=a||0===e){if(this._pages.push({start:Math.min(r,t-i),end:t-i+a-1}),Math.min(r,t-i)===r)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},e.prototype.draw=function(){var e,i=this._core.settings,n=this._core.items().length<=i.items,r=this._core.relative(this._core.current()),s=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!s&&r<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!s&&r>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},e.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy(function(t){return t.start<=e&&t.end>=e},this)).pop()},e.prototype.getPosition=function(e){var i,n,r=this._core.settings;return"page"==r.slideBy?(i=t.inArray(this.current(),this._pages),n=this._pages.length,e?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,e?i+=r.slideBy:i-=r.slideBy),i},e.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},e.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},e.prototype.to=function(e,i,n){var r;!n&&this._pages.length?(r=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%r+r)%r].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";var r=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}},this),"changed.owl.carousel":t.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),r=t.map(this._hashes,function(t,e){return t===n?e:null}).join();if(!r||e.location.hash.slice(1)===r)return;e.location.hash=r}},this)},this._core.options=t.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(){var t=e.location.hash.substring(1),i=this._core.$stage.children(),r=this._hashes[t]&&i.index(this._hashes[t]);r!==n&&r!==this._core.current()&&this._core.to(this._core.relative(r),!1,!0)},this))};r.Defaults={URLhashListener:!1},r.prototype.destroy=function(){var i,n;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=r}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){function r(e,i){var r=!1,s=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+o.join(s+" ")+s).split(" "),function(t,e){if(a[e]!==n)return r=!i||e,!1}),r}function s(t){return r(t,!0)}var a=t("<support>").get(0).style,o="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c={csstransforms:function(){return!!r("transform")},csstransforms3d:function(){return!!r("perspective")},csstransitions:function(){return!!r("transition")},cssanimations:function(){return!!r("animation")}};c.csstransitions()&&(t.support.transition=new String(s("transition")),t.support.transition.end=l.transition.end[t.support.transition]),c.cssanimations()&&(t.support.animation=new String(s("animation")),t.support.animation.end=l.animation.end[t.support.animation]),c.csstransforms()&&(t.support.transform=new String(s("transform")),t.support.transform3d=c.csstransforms3d())}(window.Zepto||window.jQuery,window,document),$(function(){$(".podcasts__group").each(function(){var t=$(this);t.find(".owl-carousel").owlCarousel({loop:!1,margin:10,dots:!1,nav:!0,navText:['<span class="podcasts__group-prev"><i class="wsico">3</i></span>','<span class="podcasts__group-next"><i class="wsico">4</i></span>'],navContainer:t.find(".podcasts__group-nav"),navElement:"span",responsive:{0:{items:1,autoWidth:!1},320:{autoWidth:!0},1000:{autoWidth:!0}}})}),$("#podcastsRubricList").on("click",".podcasts__group-list-item",function(t){t.preventDefault();var e=$(this);$("#podcastsRubricList").find(".podcasts__group-list-item").removeClass("m-active"),e.addClass("m-active"),$(e.attr("href")).addClass("m-active").siblings(".podcasts__group.m-rubric-items").removeClass("m-active")}),!window.is_adaptive&&$(".podcasts__group-list.owl-carousel").not("#podcastsRubricList").find(".podcasts__group-list-item").on("mouseenter",function(){var t=$(this);$("#podcastItemTooltip").remove(),$("body").prepend('<div id="podcastItemTooltip"><div class="podcasts__group-item-description"></div></div>'),$("#podcastItemTooltip").find(".podcasts__group-item-description").html(t.find(".podcasts__group-item-description").html()).show(),$("#podcastItemTooltip").css({position:"absolute",height:t.outerHeight(),width:t.outerWidth(),left:t.offset().left,top:t.offset().top}).show(),$("#podcastItemTooltip").on("mouseleave",function(){$("#podcastItemTooltip").remove()})}).on("mouseleave",function(t){$(t.toElement).hasClass("podcasts__group-item-description")||$("#podcastItemTooltip").remove()})}),$(function(){$(".podcast__episodes-item, .podcast-item__header").find(".download").attr("target","_blank"),$(".podcast__episodes-item, .podcast-item__header").on("click",".download",function(){var t=$(this).data("callback-url");t&&$.get(t)}),$(".podcastplayer").find(".video-js").on("play",function(){var t=$(this).closest(".podcastplayer");t.data("callback-url")&&($.get(t.data("callback-url")),t.data("callback-url",""))})}),$(function(){$("body").on("click",".jsDownloadMedia",function(t){t.preventDefault();var e=$(this),i='<div class="download-modal__wrapper download-modal__close"><div class="download-modal"><div class="download-modal__header">\u0421\u043a\u0430\u0447\u0430\u0442\u044c</div><span class="download-modal__close-icon download-modal__close"></span> <div class="download-modal__body"><div class="download-modal__qty">';e.data("q1")&&(i+='<a target="_blank" href="'+e.data("q1")+'">SD (\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e) <span class="download-modal__qty-size">'+e.data("q1-size")+"</span></a>"),e.data("q2")&&(i+='<a target="_blank" href="'+e.data("q2")+'">HD (\u0412\u044b\u0441\u043e\u043a\u043e\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e) <span class="download-modal__qty-size">'+e.data("q2-size")+"</span></a>"),i+="</div></div></div></div>",$("body").append(i),$("body").on("keydown.downloadModal",function(t){27==t.keyCode&&$(".download-modal__close").trigger("click")})}),$("body").on("click",".download-modal__close",function(){$(".download-modal__wrapper").remove(),$("body").off("keydown.downloadModal")}),$("body").on("click",".download-modal",function(t){t.stopPropagation()})}),$(function(){$(".adv__form").on("submit",function(t){t.preventDefault();var e=$(this);$.ajax({url:e.attr("action"),data:e.serialize(),method:"POST",complete:function(){e[0].reset(),e.find("input[type=submit]").hide(),e.find(".adv__form-success").css("display","flex")}})}),$(".adv__carousel").owlCarousel({loop:!0,items:1,dots:!1,nav:!0,navText:['<span class="adv__carousel-prev"><i class="wsico">3</i></span>','<span class="adv__carousel-next"><i class="wsico">4</i></span>'],navContainer:$(".adv__carousel-nav"),navElement:"span"})});var initAudioPlayer=function(t){var e=$.extend({adsEnabled:!0},window.vastClientConfig||{});t.each(function(t){var i=$(this);if("function"==typeof videojs&&!i.hasClass("vjs-audio")){var n=videojs(this,{plugins:{vastClient:e},liveui:!0,livetracker:!1,controlBar:{fullscreenToggle:!1,pictureInPictureToggle:!1,playToggle:{replay:!1}}});if(n.ready(function(){var e,i=$(".video-js").eq(t);e=i.closest(".podcast__episodes-item").length?i.closest(".podcast__episodes-item"):i.closest(".podcast-item__header").length?i.closest(".podcast-item__header"):i,this.on("play",function(){$(".video-js").each(function(e){t!==e&&this.player.pause()})}),this.on("vast.adStart",function(){this.vast.vastResponse.ads[0].inLine.creatives.map(function(t){
t.companionAds&&t.companionAds.filter(function(t){return 728===t.width}).map(function(t){var i='<div class="vjs-companion-wrapper"><a target="_blank" href="'+t.companionClickThrough+'"><img src="'+t.staticResource+'" /></a></div>';e.after(i)})})}),this.on("vast.contentStart",function(){e.next(".vjs-companion-wrapper").remove()})}),i.data("q1")&&i.data("q2")){var r=n.controlBar.addChild("button");r.el().innerHTML='\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e: <a href="javascript:;" onclick="setQualityAudio(\''+i.attr("id")+"', this, '"+i.data("q1")+'\')">\u043e\u0431\u044b\u0447\u043d\u043e\u0435</a> / <a href="javascript:;" onclick="setQualityAudio(\''+i.attr("id")+"', this, '"+i.data("q2")+'\')" class="active">\u0432\u044b\u0441\u043e\u043a\u043e\u0435</a>',r.addClass("vjs-quality")}if(i.attr("title")){var s=n.controlBar.addChild("button");s.el().innerHTML=i.attr("title"),s.addClass("vjs-title")}}})},setQualityAudio=function(t,e,i){$(e).addClass("active").siblings().removeClass("active");var n=videojs(t);n.src({type:"audio/mp3",src:i}),n.play()};$(function(){initAudioPlayer($(".video-js"))}),$(function(){$(".settings").settingsform(),$(".removeentry").removeentry()}),function(t){t.fn.settingsform=function(){this.each(function(){var e=t(this);t(".fieldspopup").each(function(){var e=t(this),i=t('a[href="#'+e.attr("id")+'"]');e.css("display","none"),i.on("click",function(i){i.preventDefault(),e.find(".success").remove(),e.slideDown(200,function(){t(":input",e).prop("disabled",!1),t(document).off(".fieldspopup").on("click.fieldspopup",function(i){t(i.target).parents("#"+e.attr("id")).length<1&&(e.css("display","none"),e.find(".success").remove(),t(":input",e).prop("disabled",!0),t(document).off(".fieldspopup"))})})}),e.hasClass("changepassword")&&(e.find(".error").css("display","none"),e.find(".button").on("click",function(i){i.preventDefault(),e.find(".error").css("display","none"),e.find(".success").remove();var n=e.find(".inpresetpassword"),r=n.val();r.length<1?e.find(".required").css("display","block"):r.length<6?e.find(".validate").css("display","block"):(e.find(".error").css("display","none"),t.ajax({url:e.data("path"),data:t(":input",e).serialize(),method:"POST",success:function(e){var i=t(e);n.after(i)}}))})),e.hasClass("changeemail")&&(e.find(".error").css("display","none"),e.find(".button").on("click",function(i){i.preventDefault(),e.find(".error").css("display","none"),e.find(".success").remove();var n=e.find(".inpresetemail"),r=n.val();r.length<1?e.find(".required").css("display","block"):/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(r)?(e.find(".error").css("display","none"),t.ajax({url:e.data("path"),data:t(":input",e).serialize(),method:"POST",success:function(e){var i=t(e);n.after(i)}})):e.find(".validate").css("display","block")}))}),e.on("submit",function(){var e=t(this);return e.formValidator(),!!e.data("valid")||(t.scrollTo(e),!1)})})}}(jQuery),function(t){t.fn.removeentry=function(){this.each(function(){var e=t(this),i=e.children("a"),n=e.children(".confirm"),r=e.find(".cancel"),s=e.find(".ok"),a=e.parents(".entry:eq(0)");i.on("click",function(e){e.preventDefault(),n.slideDown(200,function(){t(document).off(".confirm").on("click.confirm",function(e){t(e.target).parents(".confirm").length<1&&(n.css("display","none"),t(document).off(".confirm"))})})}),r.on("click",function(e){e.preventDefault(),n.css("display","none"),t(document).off(".confirm")}),s.on("click",function(e){e.preventDefault(),t.ajax({url:t(this).attr("href"),method:"GET",success:function(){a.addClass("remove").animate({opacity:0},400,function(){a.remove()})}}),n.css("display","none"),t(document).off(".confirm")})})}}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.firebase=e()}(this,function(){"use strict";function t(){}function e(t){if(!(this instanceof e))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(t,this)}function i(t,i){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,e._immediateFn(function(){var e=1===t._state?i.onFulfilled:i.onRejected;if(null!==e){var s;try{s=e(t._value)}catch(t){return void r(i.promise,t)}n(i.promise,s)}else(1===t._state?n:r)(i.promise,t._value)})):t._deferreds.push(i)}function n(t,i){try{if(i===t)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var n=i.then;if(i instanceof e)return t._state=3,t._value=i,void s(t);if("function"==typeof n)return void a((o=n,l=i,function(){o.apply(l,arguments)}),t)}t._state=1,t._value=i,s(t)}catch(i){r(t,i)}var o,l}function r(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&e._immediateFn(function(){t._handled||e._unhandledRejectionFn(t._value)});for(var n=0,r=t._deferreds.length;n<r;n++)i(t,t._deferreds[n]);t._deferreds=null}function a(t,e){var i=!1;try{t(function(t){i||(i=!0,n(e,t))},function(t){i||(i=!0,r(e,t))})}catch(t){if(i)return;i=!0,r(e,t)}}function o(t,e){return t(e={exports:{}},e.exports),e.exports}function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var i in e)e.hasOwnProperty(i)&&(t[i]=l(t[i],e[i]));return t}function c(t,e,i){t[e]=i}function u(t,e){var i=new si(t,e);return i.subscribe.bind(i)}function d(){}function h(t,e){throw ui.create(t,e)}!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function o(t){var e=new FileReader,i=a(e);return e.readAsArrayBuffer(t),i}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(p.arrayBuffer&&p.blob&&m(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!g(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(o)}),this.text=function(){var t,e,i,n=s(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,i=a(e=new FileReader),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t,e){var i,n,s=(e=e||{}).body;if(t instanceof u){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=(n=(i=e.method||this.method||"GET").toUpperCase(),v.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function h(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(p.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},g=ArrayBuffer.isView||function(t){return t&&f.indexOf(Object.prototype.toString.call(t))>-1};r.prototype.append=function(t,n){t=e(t),n=i(n);var r=this.map[t];this.map[t]=r?r+","+n:n},r.prototype["delete"]=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,n){this.map[e(t)]=i(n)},r.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),n(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),n(t)},p.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this,{body:this._bodyInit})},c.call(u.prototype),c.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var y=[301,302,303,307,308];h.redirect=function(t,e){if(-1===y.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=u,t.Response=h,t.fetch=function(t,e){return new Promise(function(i,n){var s=new u(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new r,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;i(new h(s,n))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&p.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var p=setTimeout;e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype.then=function(e,n){var r=new this.constructor(t);return i(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(e,n,r)),r},e.prototype["finally"]=function(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})},e.all=function(t){return new e(function(e,i){function n(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var o=a.then;if("function"==typeof o)return void o.call(a,function(e){n(t,e)},i)}r[t]=a,0==--s&&e(r)}catch(t){i(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var s=r.length,a=0;a<r.length;a++)n(a,r[a])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,i){i(t)})},e.race=function(t){return new e(function(e,i){for(var n=0,r=t.length;n<r;n++)t[n].then(e,i)})},e._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){p(t,0)},e._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();f.Promise||(f.Promise=e);var m=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=o(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),v=(g.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),y=function(t){if(!v(t))throw TypeError(t+" is not an object!");return t},_=function(t){try{return!!t()}catch(t){return!0}},b=!_(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),w=m.document,T=v(w)&&v(w.createElement),k=function(t){return T?w.createElement(t):{}},S=!b&&!_(function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a}),C=function(t,e){if(!v(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!v(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!v(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!v(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,E={f:b?Object.defineProperty:function(t,e,i){if(y(t),e=C(e,!0),y(i),S)try{return x(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=b?function(t,e,i){return E.f(t,e,A(1,i))}:function(t,e,i){return t[e]=i,t},I={}.hasOwnProperty,L=function(t,e){return I.call(t,e)},D=0,O=Math.random(),M=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++D+O).toString(36))},j=o(function(t){var e=M("src"),i=Function.toString,n=(""+i).split("toString");g.inspectSource=function(t){return i.call(t)},(t.exports=function(t,i,r,s){var a="function"==typeof r;a&&(L(r,"name")||P(r,"name",i)),t[i]!==r&&(a&&(L(r,e)||P(r,e,t[i]?""+t[i]:n.join(String(i)))),t===m?t[i]=r:s?t[i]?t[i]=r:P(t,i,r):(delete t[i],P(t,i,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||i.call(this)})}),R=function(t,e,i){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},N=function(t,e,i){var n,r,s,a,o=t&N.F,l=t&N.G,c=t&N.S,u=t&N.P,d=t&N.B,h=l?m:c?m[e]||(m[e]={}):(m[e]||{}).prototype,p=l?g:g[e]||(g[e]={}),f=p.prototype||(p.prototype={});for(n in l&&(i=e),i)s=((r=!o&&h&&void 0!==h[n])?h:i)[n],a=d&&r?R(s,m):u&&"function"==typeof s?R(Function.call,s):s,h&&j(h,n,s,t&N.U),p[n]!=s&&P(p,n,a),u&&f[n]!=s&&(f[n]=s)};m.core=g,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var F=N,B={}.toString,U=function(t){return B.call(t).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==U(t)?t.split(""):Object(t)},V=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},H=function(t){return Object(V(t))},W=Math.ceil,q=Math.floor,$=function(t){return isNaN(t=+t)?0:(t>0?q:W)(t)},G=Math.min,X=function(t){return t>0?G($(t),9007199254740991):0},Y=Array.isArray||function(t){return"Array"==U(t)},K=m["__core-js_shared__"]||(m["__core-js_shared__"]={}),Q=function(t){return K[t]||(K[t]={})},Z=o(function(t){var e=Q("wks"),i=m.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:M)("Symbol."+t))}).store=e}),J=Z("species"),tt=function(t,e){return new(function(t){var e;return Y(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Y(e.prototype)||(e=void 0),v(e)&&null===(e=e[J])&&(e=void 0)),void 0===e?Array:e}(t))(e)},et=function(t,e){var i=1==t,n=2==t,r=3==t,s=4==t,a=6==t,o=5==t||a,l=e||tt;return function(e,c,u){for(var d,h,p=H(e),f=z(p),m=R(c,u,3),g=X(f.length),v=0,y=i?l(e,g):n?l(e,0):void 0;g>v;v++)if((o||v in f)&&(h=m(d=f[v],v,p),t))if(i)y[v]=h;else if(h)switch(t){case 3:return!0;case 5:return d;case 6:return v;case 2:y.push(d)}else if(s)return!1;return a?-1:r||s?s:y}},it=Z("unscopables"),nt=Array.prototype;null==nt[it]&&P(nt,it,{});var rt=function(t){nt[it][t]=!0},st=et(5),at=!0;"find"in[]&&Array(1).find(function(){at=!1}),F(F.P+F.F*at,"Array",{find:function(t){return st(this,t,arguments.length>1?arguments[1]:void 0)}}),rt("find"),g.Array.find;var ot=et(6),lt=!0;"findIndex"in[]&&Array(1).findIndex(function(){lt=!1}),F(F.P+F.F*lt,"Array",{findIndex:function(t){return ot(this,t,arguments.length>1?arguments[1]:void 0)}}),rt("findIndex"),g.Array.findIndex;var ct,ut=function(t){return z(V(t))},dt=Math.max,ht=Math.min,pt=Q("keys"),ft=function(t){return pt[t]||(pt[t]=M(t))},mt=(ct=!1,function(t,e,i){var n,r=ut(t),s=X(r.length),a=function(t,e){return(t=$(t))<0?dt(t+e,0):ht(t,e)}(i,s);if(ct&&e!=e){for(;s>a;)if((n=r[a++])!=n)return!0}else for(;s>a;a++)if((ct||a in r)&&r[a]===e)return ct||a||0;return!ct&&-1}),gt=ft("IE_PROTO"),vt=function(t,e){var i,n=ut(t),r=0,s=[];for(i in n)i!=gt&&L(n,i)&&s.push(i);for(;e.length>r;)L(n,i=e[r++])&&(~mt(s,i)||s.push(i));return s},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_t=Object.keys||function(t){return vt(t,yt)},bt={f:Object.getOwnPropertySymbols},wt={f:{}.propertyIsEnumerable},Tt=Object.assign,kt=!Tt||_(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=Tt({},t)[i]||Object.keys(Tt({},e)).join("")!=n})?function(t){for(var e=H(t),i=arguments.length,n=1,r=bt.f,s=wt.f;i>n;)for(var a,o=z(arguments[n++]),l=r?_t(o).concat(r(o)):_t(o),c=l.length,u=0;c>u;)s.call(o,a=l[u++])&&(e[a]=o[a]);return e}:Tt;F(F.S+F.F,"Object",{assign:kt}),g.Object.assign;var St=Z("match"),Ct=function(t,e,i){if(v(n=e)&&(void 0!==(r=n[St])?r:"RegExp"==U(n)))throw TypeError("String#"+i+" doesn't accept regex!");var n,r;return String(V(t))},xt=Z("match"),Et="".startsWith;F(F.P+F.F*function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[xt]=!1,!"/./"[t](i)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=Ct(this,t,"startsWith"),i=X(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Et?Et.call(e,n,i):e.slice(i,i+n.length)===n}}),g.String.startsWith,F(F.P,"String",{repeat:function(t){var e=String(V(this)),i="",n=$(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i}}),g.String.repeat;var At=o(function(t){var e=M("meta"),i=E.f,n=0,r=Object.isExtensible||function(){return!0},s=!_(function(){return r(Object.preventExtensions({}))}),a=function(t){i(t,e,{value:{i:"O"+ ++n,w:{}}})},o=t.exports={KEY:e,NEED:!1,fastKey:function(t,i){if(!v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!L(t,e)){if(!r(t))return"F";if(!i)return"E";a(t)}return t[e].i},getWeak:function(t,i){if(!L(t,e)){if(!r(t))return!0;if(!i)return!1;a(t)}return t[e].w},onFreeze:function(t){return s&&o.NEED&&r(t)&&!L(t,e)&&a(t),t}}}),Pt=(At.KEY,At.NEED,At.fastKey,At.getWeak,At.onFreeze,E.f),It=Z("toStringTag"),Lt=function(t,e,i){t&&!L(t=i?t:t.prototype,It)&&Pt(t,It,{configurable:!0,value:e})},Dt={f:Z},Ot=E.f,Mt=function(t){var e=g.Symbol||(g.Symbol=m.Symbol||{});"_"==t.charAt(0)||t in e||Ot(e,t,{value:Dt.f(t)})},jt=b?Object.defineProperties:function(t,e){y(t);for(var i,n=_t(e),r=n.length,s=0;r>s;)E.f(t,i=n[s++],e[i]);return t},Rt=m.document,Nt=Rt&&Rt.documentElement,Ft=ft("IE_PROTO"),Bt=function(){},Ut=function(){var t,e=k("iframe"),i=yt.length;for(e.style.display="none",Nt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</script>"),t.close(),Ut=t.F;i--;)delete Ut.prototype[yt[i]];return Ut()},zt=Object.create||function(t,e){var i;return null!==t?(Bt.prototype=y(t),i=new Bt,Bt.prototype=null,i[Ft]=t):i=Ut(),void 0===e?i:jt(i,e)},Vt=yt.concat("length","prototype"),Ht={f:Object.getOwnPropertyNames||function(t){return vt(t,Vt)}},Wt=Ht.f,qt={}.toString,$t="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gt={f:function(t){return $t&&"[object Window]"==qt.call(t)?function(t){try{return Wt(t)}catch(t){return $t.slice()}}(t):Wt(ut(t))}},Xt=Object.getOwnPropertyDescriptor,Yt={f:b?Xt:function(t,e){if(t=ut(t),e=C(e,!0),S)try{return Xt(t,e)}catch(t){}if(L(t,e))return A(!wt.f.call(t,e),t[e])}},Kt=At.KEY,Qt=Yt.f,Zt=E.f,Jt=Gt.f,te=m.Symbol,ee=m.JSON,ie=ee&&ee.stringify,ne=Z("_hidden"),re=Z("toPrimitive"),se={}.propertyIsEnumerable,ae=Q("symbol-registry"),oe=Q("symbols"),le=Q("op-symbols"),ce=Object.prototype,ue="function"==typeof te,de=m.QObject,he=!de||!de.prototype||!de.prototype.findChild,pe=b&&_(function(){return 7!=zt(Zt({},"a",{get:function(){return Zt(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=Qt(ce,e);n&&delete ce[e],Zt(t,e,i),n&&t!==ce&&Zt(ce,e,n)}:Zt,fe=function(t){var e=oe[t]=zt(te.prototype);return e._k=t,e},me=ue&&"symbol"==typeof te.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof te},ge=function(t,e,i){return t===ce&&ge(le,e,i),y(t),e=C(e,!0),y(i),L(oe,e)?(i.enumerable?(L(t,ne)&&t[ne][e]&&(t[ne][e]=!1),i=zt(i,{enumerable:A(0,!1)})):(L(t,ne)||Zt(t,ne,A(1,{})),t[ne][e]=!0),pe(t,e,i)):Zt(t,e,i)},ve=function(t,e){y(t);for(var i,n=function(t){var e=_t(t),i=bt.f;if(i)for(var n,r=i(t),s=wt.f,a=0;r.length>a;)s.call(t,n=r[a++])&&e.push(n);return e}(e=ut(e)),r=0,s=n.length;s>r;)ge(t,i=n[r++],e[i]);return t},ye=function(t){var e=se.call(this,t=C(t,!0));return!(this===ce&&L(oe,t)&&!L(le,t))&&(!(e||!L(this,t)||!L(oe,t)||L(this,ne)&&this[ne][t])||e)},_e=function(t,e){if(t=ut(t),e=C(e,!0),t!==ce||!L(oe,e)||L(le,e)){var i=Qt(t,e);return!i||!L(oe,e)||L(t,ne)&&t[ne][e]||(i.enumerable=!0),i}},be=function(t){for(var e,i=Jt(ut(t)),n=[],r=0;i.length>r;)L(oe,e=i[r++])||e==ne||e==Kt||n.push(e);return n},we=function(t){for(var e,i=t===ce,n=Jt(i?le:ut(t)),r=[],s=0;n.length>s;)!L(oe,e=n[s++])||i&&!L(ce,e)||r.push(oe[e]);return r};ue||(j((te=function(){if(this instanceof te)throw TypeError("Symbol is not a constructor!");var t=M(arguments.length>0?arguments[0]:void 0),e=function(i){this===ce&&e.call(le,i),L(this,ne)&&L(this[ne],t)&&(this[ne][t]=!1),pe(this,t,A(1,i))};return b&&he&&pe(ce,t,{configurable:!0,set:e}),fe(t)}).prototype,"toString",function(){return this._k}),Yt.f=_e,E.f=ge,Ht.f=Gt.f=be,wt.f=ye,bt.f=we,b&&j(ce,"propertyIsEnumerable",ye,!0),Dt.f=function(t){return fe(Z(t))}),F(F.G+F.W+F.F*!ue,{Symbol:te});for(var Te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ke=0;Te.length>ke;)Z(Te[ke++]);for(var Se=_t(Z.store),Ce=0;Se.length>Ce;)Mt(Se[Ce++]);F(F.S+F.F*!ue,"Symbol",{"for":function(t){return L(ae,t+="")?ae[t]:ae[t]=te(t)},keyFor:function(t){if(!me(t))throw TypeError(t+" is not a symbol!");for(var e in ae)if(ae[e]===t)return e},useSetter:function(){he=!0},useSimple:function(){he=!1}}),F(F.S+F.F*!ue,"Object",{create:function(t,e){return void 0===e?zt(t):ve(zt(t),e)},defineProperty:ge,defineProperties:ve,getOwnPropertyDescriptor:_e,getOwnPropertyNames:be,getOwnPropertySymbols:we}),ee&&F(F.S+F.F*(!ue||_(function(){var t=te();return"[null]"!=ie([t])||"{}"!=ie({a:t})||"{}"!=ie(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(v(e)||void 0!==t)&&!me(t))return Y(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!me(e))return e}),n[1]=e,ie.apply(ee,n)}}),te.prototype[re]||P(te.prototype,re,te.prototype.valueOf),Lt(te,"Symbol"),Lt(Math,"Math",!0),Lt(m.JSON,"JSON",!0);var xe=Z("toStringTag"),Ee="Arguments"==U(function(){return arguments}()),Ae={};Ae[Z("toStringTag")]="z",Ae+""!="[object z]"&&j(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xe))?i:Ee?U(e):"Object"==(n=U(e))&&"function"==typeof e.callee?"Arguments":n)+"]";var t,e,i,n},!0),Mt("asyncIterator"),Mt("observable"),g.Symbol;var Pe={},Ie={};P(Ie,Z("iterator"),function(){return this});var Le,De=function(t,e,i){t.prototype=zt(Ie,{next:A(1,i)}),Lt(t,e+" Iterator")},Oe=ft("IE_PROTO"),Me=Object.prototype,je=Object.getPrototypeOf||function(t){return t=H(t),L(t,Oe)?t[Oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Me:null},Re=Z("iterator"),Ne=!([].keys&&"next"in[].keys()),Fe=function(){return this},Be=function(t,e,i,n,r,s,a){De(i,e,n);var o,l,c,u=function(t){if(!Ne&&t in f)return f[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},d=e+" Iterator",h="values"==r,p=!1,f=t.prototype,m=f[Re]||f["@@iterator"]||r&&f[r],g=m||u(r),v=r?h?u("entries"):g:void 0,y="Array"==e&&f.entries||m;if(y&&(c=je(y.call(new t)))!==Object.prototype&&c.next&&(Lt(c,d,!0),"function"!=typeof c[Re]&&P(c,Re,Fe)),h&&m&&"values"!==m.name&&(p=!0,g=function(){return m.call(this)}),(Ne||p||!f[Re])&&P(f,Re,g),Pe[e]=g,Pe[d]=Fe,r)if(o={values:h?g:u("values"),keys:s?g:u("keys"),entries:v},a)for(l in o)l in f||j(f,l,o[l]);else F(F.P+F.F*(Ne||p),e,o);return o},Ue=(Le=!0,function(t,e){var i,n,r=String(V(t)),s=$(e),a=r.length;return s<0||s>=a?Le?"":void 0:(i=r.charCodeAt(s))<55296||i>56319||s+1===a||(n=r.charCodeAt(s+1))<56320||n>57343?Le?r.charAt(s):i:Le?r.slice(s,s+2):n-56320+(i-55296<<10)+65536});Be(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=Ue(e,i),this._i+=t.length,{value:t,done:!1})});var ze=function(t,e){return{value:e,done:!!t}},Ve=Be(Array,"Array",function(t,e){this._t=ut(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,ze(1)):ze(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values");Pe.Arguments=Pe.Array,rt("keys"),rt("values"),rt("entries");for(var He=Z("iterator"),We=Z("toStringTag"),qe=Pe.Array,$e={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ge=_t($e),Xe=0;Xe<Ge.length;Xe++){var Ye,Ke=Ge[Xe],Qe=$e[Ke],Ze=m[Ke],Je=Ze&&Ze.prototype;if(Je&&(Je[He]||P(Je,He,qe),Je[We]||P(Je,We,Ke),Pe[Ke]=qe,Qe))for(Ye in Ve)Je[Ye]||j(Je,Ye,Ve[Ye],!0)}Dt.f("iterator");var ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ei="FirebaseError",ii=Error.captureStackTrace,ni=function(t,e){if(this.code=t,this.message=e,ii)ii(this,ri.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=ei,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};ni.prototype=Object.create(Error.prototype),ni.prototype.constructor=ni,ni.prototype.name=ei;var ri=function(){function t(t,e,i){this.service=t,this.serviceName=e,this.errors=i,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var i,n=this.errors[t],r=this.service+"/"+t;i=void 0===n?"Error":n.replace(this.pattern,function(t,i){var n=e[i];return void 0!==n?n.toString():"<"+i+"?>"}),i=this.serviceName+": "+i+" ("+r+").";var s=new ni(r,i);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(s[a]=e[a]);return s},t}();!function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var i=1;i<e.blockSize;++i)e.pad_[i]=0;return e.reset(),e}(function(t,e){function i(){this.constructor=t}ti(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var i=this.W_;if("string"==typeof t)for(var n=0;n<16;n++)i[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;n<16;n++)i[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;n<80;n++){var r=i[n-3]^i[n-8]^i[n-14]^i[n-16];i[n]=4294967295&(r<<1|r>>>31)}var s,a,o=this.chain_[0],l=this.chain_[1],c=this.chain_[2],u=this.chain_[3],d=this.chain_[4];for(n=0;n<80;n++)n<40?n<20?(s=u^l&(c^u),a=1518500249):(s=l^c^u,a=1859775393):n<60?(s=l&c|u&(l|c),a=2400959708):(s=l^c^u,a=3395469782),r=(o<<5|o>>>27)+s+d+a+i[n]&4294967295,d=u,u=c,c=4294967295&(l<<30|l>>>2),l=o,o=r;this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var i=e-this.blockSize,n=0,r=this.buf_,s=this.inbuf_;n<e;){if(0==s)for(;n<=i;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(r[s]=t.charCodeAt(n),++n,++s==this.blockSize){this.compress_(r),s=0;break}}else for(;n<e;)if(r[s]=t[n],++n,++s==this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t}}(function(){this.blockSize=-1});var si=function(){function t(t,e){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(i)})["catch"](function(t){i.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),
this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,i){var n,r=this;if(void 0===t&&void 0===e&&void 0===i)throw new Error("Missing Observer.");void 0===(n=function(t){if("object"!=typeof t||null===t)return!1;for(var e=0,i=["next","error","complete"];e<i.length;e++){var n=i[e];if(n in t&&"function"==typeof t[n])return!0}return!1}(t)?t:{next:t,error:e,complete:i}).next&&(n.next=d),void 0===n.error&&(n.error=d),void 0===n.complete&&(n.complete=d);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?n.error(r.finalError):n.complete()}catch(t){}}),this.observers.push(n),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var i=this;this.task.then(function(){if(void 0!==i.observers&&void 0!==i.observers[t])try{e(i.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),ai=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},oi="[DEFAULT]",li=[],ci=function(){function t(t,e,i){this.firebase_=i,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=l(void 0,t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){li.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){li=li.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype["delete"]=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(i){Object.keys(t.services_[i]).forEach(function(n){e.push(t.services_[i][n])})}),Promise.all(e.map(function(t){return t.INTERNAL["delete"]()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=oi),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var i=e!==oi?e:void 0,n=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),i);this.services_[t][e]=n}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;l(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(li.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),li=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&h("app-deleted",{name:this.name_})},t}();ci.prototype.name&&ci.prototype.options||ci.prototype["delete"]||console.log("dc");var ui=new ri("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});return function di(){function t(t){return ai(r,t=t||oi)||h("no-app",{name:t}),r[t]}function e(){return Object.keys(r).map(function(t){return r[t]})}function i(t,e){Object.keys(s).forEach(function(i){var r=n(t,i);null!==r&&a[r]&&a[r](e,t)})}function n(t,e){if("serverAuth"===e)return null;var i=e;return t.options,i}var r={},s={},a={},o={__esModule:!0,initializeApp:function(t,e){(void 0===e&&(e={}),"object"!=typeof e||null===e)&&(e={name:e});var n=e;void 0===n.name&&(n.name=oi);var s=n.name;"string"==typeof s&&s||h("bad-app-name",{name:s+""}),ai(r,s)&&h("duplicate-app",{name:s});var a=new ci(t,n,o);return r[s]=a,i(a,"create"),a},app:t,apps:null,Promise:Promise,SDK_VERSION:"5.6.0",INTERNAL:{registerService:function(i,n,r,c,u){s[i]&&h("duplicate-service",{name:i}),s[i]=n,c&&(a[i]=c,e().forEach(function(t){c("create",t)}));var d=function(e){return void 0===e&&(e=t()),"function"!=typeof e[i]&&h("invalid-app-argument",{name:i}),e[i]()};return void 0!==r&&l(d,r),o[i]=d,ci.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,u?t:[])},d},createFirebaseNamespace:di,extendNamespace:function(t){l(o,t)},createSubscribe:u,ErrorFactory:ri,removeApp:function(t){i(r[t],"delete"),delete r[t]},factories:s,useAsService:n,Promise:Promise,deepExtend:l}};return c(o,"default",o),Object.defineProperty(o,"apps",{get:e}),c(t,"App",ci),o}()}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e(t.firebase)}(this,function(t){"use strict";try{(function(){function e(t,e){function i(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function i(t,e,i,n){return new(i||(i=Promise))(function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n["throw"](t))}catch(t){s(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(a,o)}l((n=n.apply(t,e||[])).next())})}function n(t,e){function i(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function r(t,e){var i=new k(t,e);return i.subscribe.bind(i)}function s(){}function a(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var i=new DataView(t),n=new DataView(e),r=0;r<t.byteLength;r++)if(i.getUint8(r)!==n.getUint8(r))return!1;return!0}function o(t){return function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(null,e))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);return n}function c(){var t=indexedDB.open(L);t.onerror=function(){},t.onsuccess=function(){!function(t){if(t.objectStoreNames.contains(D)){var e=t.transaction(D).objectStore(D),i=new I,n=e.openCursor();n.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},n.onsuccess=function(){var e=n.result;if(e){var r=e.value;i.deleteToken(r.fcmSenderId,r.fcmToken,r.fcmPushSet),e["continue"]()}else t.close(),indexedDB.deleteDatabase(L)}}}(t.result)}}function u(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw x.create(S.BAD_TOKEN);if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw x.create(S.BAD_SCOPE);if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw x.create(S.BAD_VAPID_KEY);if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw x.create(S.BAD_SUBSCRIPTION);if(t.auth&&!(t.auth instanceof ArrayBuffer))throw x.create(S.BAD_SUBSCRIPTION);if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw x.create(S.BAD_SUBSCRIPTION);if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw x.create(S.BAD_SENDER_ID);if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw x.create(S.BAD_PUSH_SET)}function d(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function h(t,e){return(i={})[w.TYPE_OF_MSG]=t,i[w.DATA]=e,i;var i}function p(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}t=t&&t.hasOwnProperty("default")?t["default"]:t;var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},m=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},g="FirebaseError",v=Error.captureStackTrace,y=function(t,e){if(this.code=t,this.message=e,v)v(this,_.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=g,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,y.prototype.name=g;var _=function(){function t(t,e,i){this.service=t,this.serviceName=e,this.errors=i,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var i,n=this.errors[t],r=this.service+"/"+t;i=void 0===n?"Error":n.replace(this.pattern,function(t,i){var n=e[i];return void 0!==n?n.toString():"<"+i+"?>"}),i=this.serviceName+": "+i+" ("+r+").";var s=new y(r,i);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(s[a]=e[a]);return s},t}();!function(t){function i(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var i=1;i<e.blockSize;++i)e.pad_[i]=0;return e.reset(),e}e(i,t),i.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},i.prototype.compress_=function(t,e){e||(e=0);var i=this.W_;if("string"==typeof t)for(var n=0;n<16;n++)i[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;n<16;n++)i[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;n<80;n++){var r=i[n-3]^i[n-8]^i[n-14]^i[n-16];i[n]=4294967295&(r<<1|r>>>31)}var s,a,o=this.chain_[0],l=this.chain_[1],c=this.chain_[2],u=this.chain_[3],d=this.chain_[4];for(n=0;n<80;n++)n<40?n<20?(s=u^l&(c^u),a=1518500249):(s=l^c^u,a=1859775393):n<60?(s=l&c|u&(l|c),a=2400959708):(s=l^c^u,a=3395469782),r=(o<<5|o>>>27)+s+d+a+i[n]&4294967295,d=u,u=c,c=4294967295&(l<<30|l>>>2),l=o,o=r;this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},i.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var i=e-this.blockSize,n=0,r=this.buf_,s=this.inbuf_;n<e;){if(0==s)for(;n<=i;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(r[s]=t.charCodeAt(n),++n,++s==this.blockSize){this.compress_(r),s=0;break}}else for(;n<e;)if(r[s]=t[n],++n,++s==this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}},i.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t}}(function(){this.blockSize=-1});var b,w,T,k=function(){function t(t,e){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(i)})["catch"](function(t){i.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,i){var n,r=this;if(void 0===t&&void 0===e&&void 0===i)throw new Error("Missing Observer.");void 0===(n=function(t){if("object"!=typeof t||null===t)return!1;for(var e=0,i=["next","error","complete"];e<i.length;e++){var n=i[e];if(n in t&&"function"==typeof t[n])return!0}return!1}(t)?t:{next:t,error:e,complete:i}).next&&(n.next=s),void 0===n.error&&(n.error=s),void 0===n.complete&&(n.complete=s);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?n.error(r.finalError):n.complete()}catch(t){}}),this.observers.push(n),a},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var i=this;this.task.then(function(){if(void 0!==i.observers&&void 0!==i.observers[t])try{e(i.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),S={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},C=((b={})[S.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",b[S.AVAILABLE_IN_SW]="This method is available in a service worker context.",b[S.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",b[S.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",b[S.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",b[S.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",b[S.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",b[S.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",b[S.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",b[S.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",b[S.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",b[S.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",b[S.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",b[S.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",b[S.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",b[S.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",b[S.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",b[S.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",b[S.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",b[S.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",b[S.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",b[S.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",b[S.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",b[S.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",b[S.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",b[S.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",b[S.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",b[S.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",b[S.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",b[S.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",b[S.BAD_SCOPE]="The service worker scope must be a string with at least one character.",b[S.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",b[S.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",b[S.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",b[S.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",b[S.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",b[S.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",b[S.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",b),x=new _("messaging","Messaging",C),E=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),A="https://fcm.googleapis.com";!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(w||(w={})),function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(T||(T={}));var P,I=function(){function t(){}return t.prototype.getToken=function(t,e,r){return i(this,void 0,void 0,function(){var i,s,l,c,u,d,h,p;return n(this,function(n){switch(n.label){case 0:i=o(e.getKey("p256dh")),s=o(e.getKey("auth")),l="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+i+"&encryption_auth="+s,a(r.buffer,E.buffer)||(c=o(r),l+="&application_pub_key="+c),(u=new Headers).append("Content-Type","application/x-www-form-urlencoded"),d={method:"POST",headers:u,body:l},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/subscribe",d)];case 2:return[4,n.sent().json()];case 3:return h=n.sent(),[3,5];case 4:throw n.sent(),x.create(S.TOKEN_SUBSCRIBE_FAILED);case 5:if(h.error)throw p=h.error.message,x.create(S.TOKEN_SUBSCRIBE_FAILED,{message:p});if(!h.token)throw x.create(S.TOKEN_SUBSCRIBE_NO_TOKEN);if(!h.pushSet)throw x.create(S.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:h.token,pushSet:h.pushSet}]}})})},t.prototype.updateToken=function(t,e,r,s,l){return i(this,void 0,void 0,function(){var i,c,u,d,h,p,f,m;return n(this,function(n){switch(n.label){case 0:i=o(s.getKey("p256dh")),c=o(s.getKey("auth")),u="push_set="+r+"&token="+e+"&authorized_entity="+t+"&endpoint="+s.endpoint+"&encryption_key="+i+"&encryption_auth="+c,a(l.buffer,E.buffer)||(d=o(l),u+="&application_pub_key="+d),(h=new Headers).append("Content-Type","application/x-www-form-urlencoded"),p={method:"POST",headers:h,body:u},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/subscribe",p)];case 2:return[4,n.sent().json()];case 3:return f=n.sent(),[3,5];case 4:throw n.sent(),x.create(S.TOKEN_UPDATE_FAILED);case 5:if(f.error)throw m=f.error.message,x.create(S.TOKEN_UPDATE_FAILED,{message:m});if(!f.token)throw x.create(S.TOKEN_UPDATE_NO_TOKEN);return[2,f.token]}})})},t.prototype.deleteToken=function(t,e,r){return i(this,void 0,void 0,function(){var i,s,a,o,l;return n(this,function(n){switch(n.label){case 0:i="authorized_entity="+t+"&token="+e+"&pushSet="+r,(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),a={method:"POST",headers:s,body:i},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(A+"/fcm/connect/unsubscribe",a)];case 2:return[4,n.sent().json()];case 3:if((o=n.sent()).error)throw l=o.error.message,x.create(S.TOKEN_UNSUBSCRIBE_FAILED,{message:l});return[3,5];case 4:throw n.sent(),x.create(S.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},t}(),L="undefined",D="fcm_token_object_Store",O=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){return this.createTransaction(function(i){return i.index(t).get(e)})},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype["delete"]=function(t){return this.createTransaction(function(e){return e["delete"](t)},"readwrite")},t.prototype.closeDatabase=function(){return i(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return void 0===e&&(e="readonly"),i(this,void 0,void 0,function(){var i,r,s,a;return n(this,function(n){switch(n.label){case 0:return[4,this.getDb()];case 1:return i=n.sent(),r=i.transaction(this.objectStoreName,e),s=r.objectStore(this.objectStoreName),[4,function(t){return new Promise(function(e,i){t.onsuccess=function(){e(t.result)},t.onerror=function(){i(t.error)}})}(t(s))];case 2:return a=n.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(a)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,i){var n=indexedDB.open(t.dbName,t.dbVersion);n.onsuccess=function(){e(n.result)},n.onerror=function(){t.dbPromise=null,i(n.error)},n.onupgradeneeded=function(e){return t.onDbUpgrade(n,e)}})),this.dbPromise},t}(),M=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return e(r,t),r.prototype.onDbUpgrade=function(t,e){var i=t.result;switch(e.oldVersion){case 0:(n=i.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0});case 1:c();case 2:var n,r=(n=t.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var t=r.result;if(t){var e=t.value,i=m({},e);e.createTime||(i.createTime=Date.now()),"string"==typeof e.vapidKey&&(i.vapidKey=l(e.vapidKey)),"string"==typeof e.auth&&(i.auth=l(e.auth).buffer),"string"==typeof e.auth&&(i.p256dh=l(e.p256dh).buffer),t.update(i),t["continue"]()}}}},r.prototype.getTokenDetailsFromToken=function(t){return i(this,void 0,void 0,function(){return n(this,function(){if(!t)throw x.create(S.BAD_TOKEN);return u({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},r.prototype.getTokenDetailsFromSWScope=function(t){return i(this,void 0,void 0,function(){return n(this,function(){if(!t)throw x.create(S.BAD_SCOPE);return u({swScope:t}),[2,this.get(t)]})})},r.prototype.saveTokenDetails=function(t){return i(this,void 0,void 0,function(){return n(this,function(){if(!t.swScope)throw x.create(S.BAD_SCOPE);if(!t.vapidKey)throw x.create(S.BAD_VAPID_KEY);if(!t.endpoint||!t.auth||!t.p256dh)throw x.create(S.BAD_SUBSCRIPTION);if(!t.fcmSenderId)throw x.create(S.BAD_SENDER_ID);if(!t.fcmToken)throw x.create(S.BAD_TOKEN);if(!t.fcmPushSet)throw x.create(S.BAD_PUSH_SET);return u(t),[2,this.put(t)]})})},r.prototype.deleteToken=function(t){return i(this,void 0,void 0,function(){var e;return n(this,function(i){switch(i.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(x.create(S.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=i.sent()))throw x.create(S.DELETE_TOKEN_NOT_FOUND);return[4,this["delete"](e.swScope)];case 2:return i.sent(),[2,e]}})})},r}(O),j=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return e(r,t),r.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},r.prototype.getVapidFromSWScope=function(t){return i(this,void 0,void 0,function(){var e;return n(this,function(i){switch(i.label){case 0:if("string"!=typeof t||0===t.length)throw x.create(S.BAD_SCOPE);return[4,this.get(t)];case 1:return[2,(e=i.sent())?e.vapidKey:void 0]}})})},r.prototype.saveVapidDetails=function(t,e){return i(this,void 0,void 0,function(){var i;return n(this,function(){if("string"!=typeof t||0===t.length)throw x.create(S.BAD_SCOPE);if(null===e||65!==e.length)throw x.create(S.BAD_VAPID_KEY);return i={swScope:t,vapidKey:e},[2,this.put(i)]})})},r.prototype.deleteVapidDetails=function(t){return i(this,void 0,void 0,function(){var e;return n(this,function(i){switch(i.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=i.sent()))throw x.create(S.DELETE_SCOPE_NOT_FOUND);return[4,this["delete"](t)];case 2:return i.sent(),[2,e]}})})},r}(O),R="messagingSenderId",N=function(){function t(t){var e=this;if(!t.options[R]||"string"!=typeof t.options[R])throw x.create(S.BAD_SENDER_ID);this.messagingSenderId=t.options[R],this.tokenDetailsModel=new M,this.vapidDetailsModel=new j,this.iidModel=new I,this.app=t,this.INTERNAL={"delete":function(){return e["delete"]()}}}return t.prototype.getToken=function(){return i(this,void 0,void 0,function(){var t,e,i,r,s;return n(this,function(n){switch(n.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw x.create(S.NOTIFICATIONS_BLOCKED);return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return e=n.sent(),[4,this.getPublicVapidKey_()];case 2:return i=n.sent(),[4,this.getPushSubscription(e,i)];case 3:return r=n.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return(s=n.sent())?[2,this.manageExistingToken(e,r,i,s)]:[2,this.getNewToken(e,r,i)]}})})},t.prototype.manageExistingToken=function(t,e,r,s){return i(this,void 0,void 0,function(){return n(this,function(i){switch(i.label){case 0:return function(t,e,i){if(!i.vapidKey||!a(e.buffer,i.vapidKey.buffer))return!1;var n=t.endpoint===i.endpoint,r=a(t.getKey("auth"),i.auth),s=a(t.getKey("p256dh"),i.p256dh);return n&&r&&s}(e,r,s)?Date.now()<s.createTime+6048e5?[2,s.fcmToken]:[2,this.updateToken(t,e,r,s)]:[4,this.deleteTokenFromDB(s.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,r)]}})})},t.prototype.updateToken=function(t,e,r,s){return i(this,void 0,void 0,function(){var i,a,o;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,s.fcmToken,s.fcmPushSet,e,r)];case 1:return i=n.sent(),a={swScope:t.scope,vapidKey:r,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:s.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(a)];case 2:return n.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,r)];case 3:return n.sent(),[2,i];case 4:return o=n.sent(),[4,this.deleteToken(s.fcmToken)];case 5:throw n.sent(),o;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,r){return i(this,void 0,void 0,function(){var i,s;return n(this,function(n){switch(n.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,r)];case 1:return i=n.sent(),s={swScope:t.scope,vapidKey:r,fcmSenderId:this.messagingSenderId,fcmToken:i.token,fcmPushSet:i.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(s)];case 2:return n.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,r)];case 3:return n.sent(),[2,i.token]}})})},t.prototype.deleteToken=function(t){return i(this,void 0,void 0,function(){var e,i;return n(this,function(n){switch(n.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return n.sent(),[4,this.getSWRegistration_()];case 2:return(e=n.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(i=n.sent())return[2,i.unsubscribe()];n.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return i(this,void 0,void 0,function(){var e;return n(this,function(i){switch(i.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=i.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return i.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(i){return i||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw x.create(S.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(){throw x.create(S.AVAILABLE_IN_WINDOW)},t.prototype.usePublicVapidKey=function(){throw x.create(S.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(){throw x.create(S.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(){throw x.create(S.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(){throw x.create(S.AVAILABLE_IN_SW)},t.prototype["delete"]=function(){return i(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){
return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}(),F=function(t){function r(e){var i=t.call(this,e)||this;return i.bgMessageHandler=null,self.addEventListener("push",function(t){i.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){i.onSubChange(t)}),self.addEventListener("notificationclick",function(t){i.onNotificationClick(t)}),i}return e(r,t),r.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},r.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},r.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},r.prototype.onPush_=function(t){return i(this,void 0,void 0,function(){var e,i,r,s,a,o;return n(this,function(n){switch(n.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return n.sent()?[2,this.sendMessageToWindowClients_(e)]:(i=this.getNotificationData_(e))?(r=i.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return s=n.sent(),a=i.actions,o=Notification.maxActions,a&&o&&a.length>o&&console.warn("This browser only supports "+o+" actions.The remaining actions will not be displayed."),[2,s.showNotification(r,i)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return n.sent(),[2];case 5:return[2]}})})},r.prototype.onSubChange_=function(){return i(this,void 0,void 0,function(){var t,e,i,r;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=n.sent(),[3,3];case 2:throw e=n.sent(),x.create(S.UNABLE_TO_RESUBSCRIBE,{message:e});case 3:return n.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return n.sent(),[3,8];case 5:return i=n.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(r=n.sent()))throw i;return[4,this.deleteToken(r.fcmToken)];case 7:throw n.sent(),i;case 8:return[2]}})})},r.prototype.onNotificationClick_=function(t){return i(this,void 0,void 0,function(){var e,i,r,s;return n(this,function(n){switch(n.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(e=t.notification.data.FCM_MSG).notification&&(i=e.fcmOptions&&e.fcmOptions.link||e.notification.click_action)?[4,this.getWindowClient_(i)]:[2]):[2];case 1:return(r=n.sent())?[3,3]:[4,self.clients.openWindow(i)];case 2:return r=n.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=n.sent(),n.label=5;case 5:return r?(delete e.notification,delete e.fcmOptions,s=h(T.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,s)]):[2]}})})},r.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e,i=m({},t.notification);return i.data=m({},t.notification.data,((e={}).FCM_MSG=t,e)),i}},r.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw x.create(S.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=t},r.prototype.getWindowClient_=function(t){return i(this,void 0,void 0,function(){var e,i,r,s;return n(this,function(n){switch(n.label){case 0:return e=new URL(t,self.location.href).href,[4,d()];case 1:for(i=n.sent(),r=null,s=0;s<i.length;s++)if(new URL(i[s].url,self.location.href).href===e){r=i[s];break}return[2,r]}})})},r.prototype.attemptToMessageClient_=function(t,e){return i(this,void 0,void 0,function(){return n(this,function(){if(!t)throw x.create(S.NO_WINDOW_CLIENT_TO_MSG);return t.postMessage(e),[2]})})},r.prototype.hasVisibleClients_=function(){return i(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState})]}})})},r.prototype.sendMessageToWindowClients_=function(t){return i(this,void 0,void 0,function(){var e,i,r=this;return n(this,function(n){switch(n.label){case 0:return[4,d()];case 1:return e=n.sent(),i=h(T.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,i)}))];case 2:return n.sent(),[2]}})})},r.prototype.getSWRegistration_=function(){return i(this,void 0,void 0,function(){return n(this,function(){return[2,self.registration]})})},r.prototype.getPublicVapidKey_=function(){return i(this,void 0,void 0,function(){var t,e;return n(this,function(i){switch(i.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=i.sent()))throw x.create(S.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(e=i.sent())?[2,E]:[2,e]}})})},r}(N),B=function(t){function s(e){var i=t.call(this,e)||this;return i.registrationToUse=null,i.publicVapidKeyToUse=null,i.manifestCheckPromise=null,i.messageObserver=null,i.tokenRefreshObserver=null,i.onMessageInternal=r(function(t){i.messageObserver=t}),i.onTokenRefreshInternal=r(function(t){i.tokenRefreshObserver=t}),i.setupSWMessageListener_(),i}return e(s,t),s.prototype.getToken=function(){return i(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return i(this,void 0,void 0,function(){var t,e;return n(this,function(i){switch(i.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return[4,i.sent().json()];case 3:return e=i.sent(),[3,5];case 4:return i.sent(),[2];case 5:if(!e||!e.gcm_sender_id)return[2];if("103953800507"!==e.gcm_sender_id)throw x.create(S.INCORRECT_GCM_SENDER_ID);return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,t.prototype.getToken.call(this)]}})})},s.prototype.requestPermission=function(){return i(this,void 0,void 0,function(){var t;return n(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?x.create(S.PERMISSION_BLOCKED):x.create(S.PERMISSION_DEFAULT)}})})},s.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw x.create(S.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw x.create(S.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=t},s.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw x.create(S.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw x.create(S.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var e=l(t);if(65!==e.length)throw x.create(S.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=e},s.prototype.onMessage=function(t,e,i){return"function"==typeof t?this.onMessageInternal(t,e,i):this.onMessageInternal(t)},s.prototype.onTokenRefresh=function(t,e,i){return"function"==typeof t?this.onTokenRefreshInternal(t,e,i):this.onTokenRefreshInternal(t)},s.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(i,n){if(e)if("activated"!==e.state)if("redundant"!==e.state){var r=function(){if("activated"===e.state)i(t);else{if("redundant"!==e.state)return;n(x.create(S.SW_REG_REDUNDANT))}e.removeEventListener("statechange",r)};e.addEventListener("statechange",r)}else n(x.create(S.SW_REG_REDUNDANT));else i(t);else n(x.create(S.NO_SW_IN_REG))})},s.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})["catch"](function(t){throw x.create(S.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},s.prototype.getPublicVapidKey_=function(){return i(this,void 0,void 0,function(){return n(this,function(){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,E]})})},s.prototype.setupSWMessageListener_=function(){var t=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[w.TYPE_OF_MSG]){var i=e.data;switch(i[w.TYPE_OF_MSG]){case T.PUSH_MSG_RECEIVED:case T.NOTIFICATION_CLICKED:var n=i[w.DATA];t.messageObserver&&t.messageObserver.next(n)}}},!1)},s}(N);P={isSupported:p},t.INTERNAL.registerService("messaging",function(t){if(!p())throw x.create(S.UNSUPPORTED_BROWSER);return self&&"ServiceWorkerGlobalScope"in self?new F(t):new B(t)},P)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-messaging - be sure to load firebase-app.js first.")}});class Msg{constructor(t,e){if(!window.WebSocket)throw new Error("no websockets found");const{onMessage:i,onStatusChange:n,idleTimeout:r,lastId:s}=e||{};this.onMessageHook=i,this.onStatusChange=n,this.idleTimeout=r||4e4,this.url=t,this.url.match(/^\w+:/)||(this.url=("https:"==window.location.protocol?"wss://":"ws://")+window.location.host+t),this.ws=null,this.doReconnect=!0,this.lastId=s,this.failures=0,this.hasError=null,this.lastTs=new Date,this.idleTimer=window.setInterval(this.tick.bind(this),this.idleTimeout/2),this.reconnect()}tick(){if(this.ws&&this.ws.OPEN==this.ws.readyState){new Date-this.lastTs>this.idleTimeout&&(console.log("ws gone dead"),this.emitStatusChange("timeout",{target:this.ws,type:"timeout"}),this.ws.close(),this.ws=null,this.reconnect())}}emitStatusChange(t,e){this.onStatusChange&&this.onStatusChange(t,e)}close(){this.doReconnect=!1,this.reconnect()}reconnect(){if(this.ws)return this.emitStatusChange("closing",{target:this.ws,type:"closing"}),void this.ws.close();let t=this.url;this.lastId&&(t=t+"?last="+this.lastId),this.ws=new WebSocket(t),this.emitStatusChange("connecting",{type:"connecting",target:this.ws}),console.log("ws",this.ws),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onopen=this.onOpen.bind(this)}onOpen(t){t.target==this.ws?(console.log("open"),this.emitStatusChange("open",t),this.hasError=null,this.lastTs=new Date):console.error("ignoring OPEN for the previous websocket")}onClose(t){if(console.log("ws close:",t.code,t.reason),t.target==this.ws){if(this.ws=null,1e3==t.code)return this.doReconnect=!1,void this.emitStatusChange("ended",t);if(1013==t.code&&console.warn("upstream is unwell"),this.emitStatusChange("close",t),this.doReconnect){const t=Math.min(8,this.failures++),e=1e3*(5+Math.pow(2,t))*(.5+Math.random());window.setTimeout(this.reconnect.bind(this),e)}}else console.log("ignoring close for the previous websocket")}onError(t){t.target==this.ws?(this.hasError=t,this.emitStatusChange("error",t)):console.log("ignoring error for the previous websocket")}onMessage(t){if(t.target!=this.ws)return void console.warn("ignoring MESSAGE for the previous websocket");this.failures=0;const e=JSON.parse(t.data);this.lastTs=new Date,e.id&&(this.lastId=e.id),"msg/ping"!=e.type&&this.onMessageHook&&this.onMessageHook(t,e)}send(t){if(!this.ws)throw new Error("send() while not open");this.ws.send(JSON.stringify(t))}}_MOBILEPOPUP={link:"http://m.echo.msk.ru/",text:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438<br />\u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430",yes:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",no:"\u041e\u0442\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f",id:"goToMobilePopUp",returntimeout:18e5},function(){var t=/\d+/.exec($("body").attr("data-main")),e="http://m.echo.msk.ru";/^\/news/.test(location.pathname)&&(e+=t?"/news/detail.php?ID="+t:"/news/"),/^\/blog/.test(location.pathname)&&(e+=t?"/blogs/detail.php?ID="+t:"/blogs/"),/^\/schedule/.test(location.pathname)&&(e+="/schedule/"),/^\/polls/.test(location.pathname)&&(e+="/polls/"),/^\/(contributors|guests)/.test(location.pathname)&&(e+=t?"/peoples/detail.php?ID="+t:"/peoples/"),/^\/(programs|interview)/.test(location.pathname)&&(t?/^P/.test($("body").attr("data-main"))?e+="/programs/detail.php?ID="+t:e+="/interview/detail.php?ID="+t:/^\/programs/.test(location.pathname)?e+="/programs/":e+="/interview/"),_MOBILEPOPUP.link=e}(),$(document).ready(function(){var t;window.echoInit!=undefined&&window.echoInit(),$(".cont_tab[data-selected]").each(function(){var t=$(this),e=t.attr("data-selected");t.find("a[data-key='"+e+"']").each(function(){$(this).addClass("current")})}),$("a.print").click(function(t){t.preventDefault(),link=$("link#css-print"),"all"==link.attr("media")?link.attr("media","print"):link.attr("media","all")}),$("div.typical a[href]:not([target])").each(function(){linkedHost=this.hostname.toLowerCase(),linkedHost!=window.location.hostname.toLowerCase()&&"echo.msk.ru"!=linkedHost&&$(this).attr("target","_blank")}),function(){var t="/elements/"+$("body").attr("data-main")+"/comments_page/",e=$(".commentPage .pager a");if(e.size()>0){var i=window.location.hash;e.find('a[href="'+i+'"]').each(function(){$(this).trigger("click")}),i.match(/^#cmnt-/)&&$.get(t+i.substr(1)+".html",function(t){$(".commentPage").html(t),window.location.hash=i})}$(document).on("click",".commentList .pager a.ajax",function(e){var i=$(this);$.get(t+i.attr("name")+".html",function(t){$(".commentPage").html(t),window.location.hash="#comments"}),e.preventDefault()}),$(document).on("change",".c_select",function(){var e=$(this).find("option:selected").val();switch(e){case"full":window.location.assign($(".com_titl h2 a").attr("href"));break;case"all":window.location.reload(),window.location.hash="#comments";break;case"answered":window.location.assign($("div.conthead a.right").attr("href"));break;case"queue":window.location.assign($("div.conthead a.right").attr("href")+"queue");break;default:$("div.commentPage").load(t+e+".html",function(){window.location.hash="#comments"})}})}(),function(){function t(t){t.hasClass("flag")&&(t.hasClass("on-state")?t.html("(\u0412\u044b \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u043b\u0438\u0441\u044c)"):t.html("\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),t.hasClass("like")&&t.parent().find("div.likeList").load(t.attr("href"))}$("a.like, a.recom").on("switch",function(t,e){var i=$(this);1==e?i.addClass("on-state"):i.removeClass("on-state")}),$("a.like").on("switch",function(t,e,i){if(i){var n=$(this);n.html('<span class="wsico">&nbsp;</span>'+i),n.parent().find("div.likeList").load(n.attr("href"))}}),$("a.recom").on("switch",function(t,e){var i=$(this);1==e?i.html('<span class="wsico">&nbsp;</span>\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c'):i.html('<span class="wsico">&nbsp;</span>\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c')}),$(document).on("click","a.like, a.recom, a.flag, a.foe, a.ignor",function(e){var i=$(this),n={state:0,_method:"put"};if(i.hasClass("on-state"))n.state=0;else{if(i.hasClass("flag")&&!confirm("\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f?"))return void e.preventDefault();if(i.hasClass("ignor")){if(!confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043d\u0435\u0441\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0447\u0451\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a?"))return void e.preventDefault();i.hide()}n.state=1}$.post(i.attr("href"),n,function(e){e.error?alert(e.error):i.hasClass("like")||i.hasClass("recom")?$('[href="'+i.attr("href")+'"]').trigger("switch",[e.state,e.count]):(1==e.state?i.addClass("on-state"):i.removeClass("on-state"),t(i))},"json"),e.preventDefault()}),$(document).on("click","a.hide",function(t){var e=$(this),i={};e.hasClass("delete")&&(i._method="delete"),$.post(e.attr("href"),i,function(t){e.parents("div.onecomm").first().replaceWith($(t).find("div.onecomm"))},"html"),t.preventDefault()}),$(document).on("click","a.ban-request",function(t){var e=$(this);confirm("\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0437\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?")&&$.post(e.attr("href"),function(t){t.error?alert(t.error):(e.hide(),alert("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"))},"json"),t.preventDefault()});var e=$.data(document.body,"user")||{},i=e.access_level||0;i<6&&e.own_id&&$("div.blog").attr("data-creator")==e.own_id&&(i=6),e.liked&&$.each(e.liked,function(t,e){$('a[href="/likes/'+e+'/"]').trigger("switch",[1])}),e.foes&&$.each(e.foes,function(t,e){$("#foe"+e).addClass("on-state"),$('[data-author="'+e+'"]').each(function(){var t=$(this);t.hasClass("bcast-q")?t.html("(\u0432\u043e\u043f\u0440\u043e\u0441 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d)"):t.html("(\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d)")})}),$(document).on("mouseover",".onecomm.to-load",function(){var n=$(this);n.removeClass("to-load");var r=n.attr("data-author"),s=n.attr("data-mlevel"),a=n.find("div.morelink"),o=n.hasClass("cmnt-hidden"),l=n.find(".author .about"),c=a.find("a.like");if(e.own_id!=r&&e.liked&&e.flagged&&(e.liked.indexOf(a.attr("id"))>=0&&c.addClass("on-state").attr("title","\u0412\u044b \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043b\u0438"),3==s&&s++,i>=2&&n.find(".author a.dark").after('<a href="/foes/'+r+'" class="ignor">\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'),i>=3&&i<6&&(a.append('<a ref="nofollow" href="/flags/'+a.attr("id")+'" class="red flag">\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f</a>'),e.flagged.indexOf(a.attr("id"))>=0))){var u=a.find("a.flag");u.addClass("on-state"),t(u)}i>3&&i>s&&(o?a.append('<a rel="nofollow" href="/moderate/comments/'+a.attr("id")+'/unhide.html" class="red hide">(\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c)</a>'):a.append('<a rel="nofollow" href="/moderate/comments/'+a.attr("id")+'/hide.html" class="red hide">(\u0421\u043a\u0440\u044b\u0442\u044c)</a>'),i<6?l.size()>0&&e.own_id!=r&&a.append('<a rel="nofollow" href="/moderate/comments/'+a.attr("id")+'/ban_request.html" class="red ban-request">(\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0431\u0430\u043d)</a>'):(a.append('<a rel="nofollow" href="/moderate/comments/'+a.attr("id")+'.html" class="red hide delete">(\u0423\u0434\u0430\u043b\u0438\u0442\u044c)</a>'),l.size()>0&&a.append('<a rel="nofollow" href="/moderate/comments/'+a.attr("id")+'/ban.html" class="red hide">(\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c)</a>'))),i>3&&0==l.size()&&a.append("<strong>(\u0417\u0430\u0431\u0430\u043d\u0435\u043d)</strong>")}),$(document).on("mouseover",".likeBlock.to-load",function(){var e=$(this);e.removeClass("to-load"),t(e.find("a.like"))})}(),$(document).on("click",".answ",function(t){var e=$(this),i=e.parents("div.onecomm").first();i.find(".error").remove(),i.find("div.answform").size()>0?$(".answform").remove().appendTo($(".commentPage")).hide():($(".answform").remove().appendTo(i).show(),$(".answform input#comment_parent_id").val(e.attr("data-parent-id")),$(".answform textarea#comment_body").val(i.find("strong.name").text()+": "+$(".answform textarea#comment_body").val())),t.preventDefault()}),$(document).on("ajax:success",".add-comm form",function(t,e){var i=$(e),n=$(this);n.parent().find(".error").remove(),i.hasClass("error")?n.before(i):(n.find("#qa_answer").size()>0?n.parents(".commBlock").first().replaceWith(i):n.find("#comment_parent_id").size()>0?(i.insertAfter(n.parents(".onecomm").first()),$(".answform").remove().appendTo($(".commentPage")).hide()):i.prependTo($("div.commentPage")),n.find("textarea").val(""))}),$(document).on("click",".qa-reply",function(t){t.preventDefault(),$(this).closest(".commBlock").find(".answform").toggle()}),$(document).on("ajax:success","a.qa-moderate",function(t,e){t.preventDefault(),$(this).closest(".commBlock").parents(".commBlock").first().replaceWith(e)}),t=$("div.avatar#setavatar"),$(".fileupload input[type=file]").on("change",function(){var e=new FormData;e.append(this.name,this.files[0]),$.ajax({url:$(this).data("path"),method:"POST",data:e,cache:!1,contentType:!1,processData:!1,error:function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430")},success:function(e){$(".pic",t).html(e),$("a.delete",t).show()}})}),$(document).on("ajax:success","div.avatar#setavatar a.delete",function(e,i){$(".pic",t).html(i),$(this).hide()}),$(".filtrsearch input").click(function(){var t=$("#search_cond_search_"+$(this).val());$(this).attr("checked")?t.val("true"):t.val("")}),$("select.c_select#search_cond_when").change(function(){$("form#search_when").submit()}),$("a.calend input.calendar").on("change",function(){var t=$(this),e=t.closest("form"),i=e.data("format");if(i){var n=t.val().split(".").reverse(),r=e.attr("action");switch(i){case"schedule":e.attr("action",r+n.join("-")+".html");break;case"news":e.attr("action",r+n.join("/")+".html")}}"POST"==e.attr("method")?e.submit():location.href=e.attr("action")}),$(".mainpreview").on("change",function(t){var e=$(this),i=$("span[data-more]",e);t.preventDefault(),i.length>0?($(".moregiant a[href]",e).attr("href",i.data("more")),i.remove()):$(".moregiant",e).remove()}),$(document).delegate("[data-remote].replace-me","ajax:success",function(t,e){$(this).replaceWith(e)}),$(function(){$(".js-tabs").tabs(),$(".js-top-7").masonry({itemSelector:".js-top-7-item",columnWidth:220,gutter:20})}),$(function(){function t(){$("#user_club_req").attr("checked")?$(".club_only").show():$(".club_only").hide()}t(),$("#user_club_req").on("change",function(){t()})}),function(){var t=$("body").data("main");if(""!=t){var e=$.data(document.body,"user")||{},i={main:t};e.own_id&&(i.user_id=e.own_id),$.ajax({url:"/assets/counters.js",async:!0,cache:!1,data:i})}}(),$("form.voteform").submit(function(){var t=$(this).find(".free_answer");return t.size()>0&&""!=t.val()||(0!=$(this).find("span.checked").size()||(alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0448 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"),!1))}),$("blockquote.tw").each(function(){var t=$(this),e=window.location.href,i=t.text();i.length>120||t.append('<span class="twitter-share-button"><span class="social_block"><span class="iblock tw_sharer"><a class="ico tw tw_btn" href="http://twitter.com/share?url='+e+"&text="+encodeURIComponent(i)+'" target="_blank" title="Retweet"><strong class="wsico">Q</strong><span>\u0422\u0432\u0438\u0442\u043d\u0443\u0442\u044c</span></a></span></span></span>')}),$(".notifications a.close").on("click",function(t){t.preventDefault(),$(this).closest(".notifications").fadeOut()}),function(){var t;if("undefined"!=typeof sched_current&&sched_current&&sched_now)for(t=0;t<sched_current.length;t+=1){var e=sched_current[t];if(sched_now>=e[0]){$(".liveprogtitle").html(e[1]);break}}}(),$(document).on("update",".person_list",function(){$(this).find(".audionota").audionota()}),function(){if(fbLink="https://www.facebook.com/dialog/feed?app_id=229675500419533&link="+document.URL+"&redirect_uri="+document.URL+"&name="+document.title+"&caption=",twLink="http://twitter.com/intent/tweet?text="+document.URL+"%20",$("meta[name=author]").size()>0){var t=$("meta[name=author]").attr("content");t.length>0&&(twLink+=encodeURIComponent(t+": "))}vkLink="https://vk.com/share.php?url="+document.URL+"&title="+document.title+"&description=",$("div.typical").contentshare({shareIcons:["/i/contentshare/fb.png","/i/contentshare/tw.png","/i/contentshare/vk.png"],shareLinks:[fbLink,twLink,vkLink]}),$.fn.contentshare.defaults.shareable.on("mouseup",function(){$.fn.contentshare.showTooltip()})}(),window.localStorage&&function(){function t(t){"default"==t?window.localStorage.setItem("msg_ts",(new Date).getTime().toString()):window.localStorage.removeItem("msg_ts"),t!=r&&(console.log("setting msg_ax to",t),window.localStorage.setItem("msg_ax",t),setTimeout(function(){$(document).trigger("push:subscription",t)},1e3))}function e(e){n.getToken().then(function(n){if(!n)return console.log("no fcm token"),void(e&&i());window.localStorage.getItem("fcm_id")!=n?(t("allow"),console.log("sending new token to server"),$.post("/api/push",{token:n},function(t){t.error?console.log("server error: "+t.error):(window.localStorage.setItem("fcm_id",n),console.log("sent new token to server"))})):console.log("known fcm token")})["catch"](function(t){console.log("getToken(): "+t)})}function i(){if("default"==r){var i=window.localStorage.getItem("msg_ts");if(i){var s=new Date(parseFloat(i));if(new Date-s<864e5)return void console.log("Won't request msg permission yet")}}n.requestPermission().then(function(){console.log("Notification permission granted."),e(!1)})["catch"](function(e){console.log("Unable to get permission to notify.",e),t("messaging/permission-default"==e.code?"default":"block")})}firebase.initializeApp({messagingSenderId:"57466097932"});var n=firebase.messaging();navigator.serviceWorker.register("/sw.js").then(function(t){n.useServiceWorker(t)}),n.usePublicVapidKey("BOVTxlHEoDeY7lxfeCZhwGM4OjLglM2X9Qxxr9_tDwX_T15dcyYlRWMan57WlrdmKdhrPIgT1thSxJz3-7s9Hao");var r=window.localStorage.getItem("msg_ax")||"default";e(!0),n.onMessage(function(t){console.log("foreground:",t)}),navigator.serviceWorker.addEventListener("message",function(t){console.log("sw message:",t)})}();const e=document.querySelector("[data-msg-url]");if(window.WebSocket&&e){const t=document.querySelector(".online__list > .online__hint"),i=function(e,i){t.className=`online__hint ${e}`,t.querySelector("span").innerText=i},n=e.dataset.msgLast;let r=0;const s=document.querySelector('link[rel="icon"]');e.addEventListener("click",function(){r=0,e.innerHTML="<span>\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c 0 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",e.classList.add("hidden"),s.type="image/x-icon",s.href="/favicon.ico",document.querySelectorAll(".online__list-item.hidden").forEach(t=>t.classList.remove("hidden"))});const a=function(e,n){switch(console.log("msg status",e,n),e){case"ended":t.innerHTML="\u041e\u043d\u043b\u0430\u0439\u043d \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d.";break;case"close":i("live-error","\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e...");break;case"open":i("ongoing","\u041b\u0435\u043d\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.");break;case"connecting":i("connecting","\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435...");break;case"closing":i("live-error","\u0421\u0431\u043e\u0439 \u0441\u0435\u0442\u0438. \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f...");break;case"timeout":i("live-error","\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f");break;case"error":i("live-error","\u041e\u0448\u0438\u0431\u043a\u0430");break;default:console.log("unknown status",e)}},o=function(t,i){const n="#quip-"+i.quip_id;let a=document.querySelector(n);if(a&&a.dataset.observed&&xecob.unobserve(a),"delete"==i.type)return void(a&&(a.style.backgroundColor="#aaa",a.addEventListener("transitionend",t=>t.target.remove()),a.style.transition="opacity 2s",a.style.opacity="0"));if("update"!=i.type&&"create"!=i.type)return void console.error("unknown data type",i.type);const o=new Date(i.approved_at);let l=o.toTimeString().slice(0,5);new Date-o>864e5&&(l=i.approved_at.replace(/^(\d{4})-(\d\d)-(\d\d)T(\d\d:\d\d).*$/,"$3.$2.$1 $4"));const c=!a||a.classList.contains("hidden"),u=`\n      <div\n        class="online__list-item ${i.important?"m-important":""} ${c?"hidden":""}"\n        id="quip-${i.quip_id}">\n        <div class="online__list-item-time">${l}</div>\n        <div class="online__list-item-content">\n          ${i.body}\n        </div>\n        <input type="hidden" id="quip-meat-${i.quip_id}" data-quip="${i.quip_id}" />\n      </div>`;if(a)a.outerHTML=u;else{let t=++r%100,i="\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439";1==(t=t>=10&&t<20?9:t%10)?i="\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435":t>=2&&t<=4&&(i="\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f"),s.type="image/png",s.href="/i/icons/favicon-alert.png",e.innerHTML=`<span>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c ${r} ${i}`,e.classList.remove("hidden"),e.insertAdjacentHTML("afterend",u),a=document.querySelector(n)}i.meat&&(a.querySelector(`#quip-meat-${i.quip_id}`).value=JSON.stringify(i.meat),a.dataset.observed=!0,xecob.observe(a))};new Msg(e.dataset.msgUrl,{onStatusChange:a,onMessage:o,lastId:n})}});