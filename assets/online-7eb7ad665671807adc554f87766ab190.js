function passwordSwitcher(){$(".switch-password").off("click.switchPass").on("click.switchPass",function(){var e=$(this),t=$(this).parent().find("input");e.hasClass("visible")?(e.removeClass("visible"),t.attr("type","text")):(e.addClass("visible"),t.attr("type","password"))})}function setSlider(e){var t=!0;e.css("overflow","hidden"),0==e.find(".scroll-content").length&&e.children().wrapAll('<div class="scroll-content"> /');var i=e.find(".scroll-content").height()-e.height();if(e.data("difference",i),i<=0&&e.find(".slider-wrap").length>0&&(e.find(".slider-wrap").remove(),e.find(".scroll-content").css({top:0})),i>0){var n=i/e.find(".scroll-content").height(),r=Math.round((1-n)*e.height());r-=r%2;var a=e.find(".scroll-content").position(),s=100*(1-Math.abs(a.top)/i);0==e.find(".slider-wrap").length&&(e.append('<div class="slider-wrap"><div class="slider-vertical"></div></div>'),s=100),e.find(".slider-wrap").height(e.height()),e.find(".slider-vertical").slider({orientation:"vertical",min:0,max:100,range:"min",value:s,slide:function(t,n){var r=-(100-n.value)*i/100;e.find(".scroll-content").css({top:r}),$("ui-slider-range").height(n.value+"%")},change:function(t,i){var n=-(100-i.value)*(e.find(".scroll-content").height()-e.height())/100;e.find(".scroll-content").css({top:n}),$("ui-slider-range").height(i.value+"%")}}),e.find(".ui-slider-handle").css({height:r,"margin-bottom":-.5*r});var o=e.height(),l=o-r,u=.5*(o-l);e.find(".ui-slider").css({height:l,"margin-top":u}),e.find(".ui-slider-range").css({bottom:-u}),t&&($(".ui-slider-handle").append('<span class="scrollbar-top" />'),$(".ui-slider-handle").append('<span class="scrollbar-bottom" />'),$(".ui-slider-handle").append('<span class="scrollbar-grip" />'))}$(".ui-slider").click(function(e){e.stopPropagation()}),$(".slider-wrap").click(function(e){var t=$(this).offset().top,i=100*(e.pageY-t)/$(this).height();$(this).find(".slider-vertical").slider("value",100-i)}),$.fn.mousewheel&&(e.unmousewheel(),e.mousewheel(function(t,i){var n=Math.round(5e3/e.data("difference"));n<1&&(n=1),n>100&&(n=100);var r=$(this).find(".slider-vertical").slider("value");r+=i*n,$(this).find(".slider-vertical").slider("value",r),t.preventDefault()}))}
/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/function setQuality(e,t,i,n){$(t).addClass("active").siblings().removeClass("active"),$("#notaplayer_"+e).jPlayer("setMedia",{mp3:i}).jPlayer("playHead",0).jPlayer("play"),localStorage.setItem("mediaQuality",n)}function isNoAnotherPage(e){var t=$(e),i=t.attr("href");return!i||""!=i&&"#"!=i.substring(0,1)&&"javascript:"!=i.substring(0,11)&&!t.attr("target")&&"external"!=t.attr("rel")&&"ajax"!=t.attr("rel")}function bodyclassName(e,t,i){echoears||(e.width()<1300?(_columns=4,t.removeClass("widescreen")):(_columns=5,t.addClass("widescreen"))),i.length>0&&i.height()<$("#mainsidebar").height()?(_columns--,t.addClass("smallheight")):t.removeClass("smallheight")}function attacheWheelEvents(e,t){e.addEventListener?"onwheel"in document?e.addEventListener("wheel",t,!1):"onmousewheel"in document?e.addEventListener("mousewheel",t,!1):e.addEventListener("MozMousePixelScroll",t,!1):e.attachEvent("onmousewheel",t)}function pageUp(){var e,t=$(".up_link");touchdevice||$(window).scroll(function(){window.clearTimeout(e),e=window.setTimeout(function(){$(document).scrollTop()>$(window).height()?t.slideDown(200):t.slideUp(100)},100)})}function popularblFunc(){var e,t=$(".popular");if(0!==t.length&&!touchdevice){null!=localStorage.getItem("lock")&&"2"==localStorage.getItem("lock")&&($(".up_link").css("bottom",0),$(".popular").removeClass("open")),t.find(".door").on("click",function(){return"2"==localStorage.getItem("lock")?($(".up_link").css("bottom",80),t.addClass("open"),localStorage.setItem("lock","1")):($(".up_link").css("bottom",0),t.removeClass("open"),localStorage.setItem("lock","2")),!1});var i=$(".header_body").height()+$(".header_body").offset().top,n=$(".footer .links_block").offset().top;$(window).scroll(function(){window.clearTimeout(e),e=window.setTimeout(function(){var e=$(document).scrollTop()+$(window).height()-537;$(document).scrollTop()>i&&e<n?t.addClass("fixedpopul"):t.removeClass("fixedpopul")},100)})}}function aab(e){e.blocked}window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){var e,t=arguments;t.callee=t.callee.caller,e=[].slice.call(t),"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function t(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)e[i]=e[i]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this;if(!(!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])))return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(n,r,a){return"object"==typeof r&&(a=r,r=0),"function"==typeof a&&(a={onAfter:a}),"max"==n&&(n=9e9),a=e.extend({},i.defaults,a),r=r||a.duration,a.queue=a.queue&&a.axis.length>1,a.queue&&(r/=2),a.offset=t(a.offset),a.over=t(a.over),this._scrollable().each(function(){function s(e){u.animate(d,r,a.easing,e&&function(){e.call(this,n,a)})}if(null!=n){var o,l=this,u=e(l),c=n,d={},h=u.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(!(c=e(c,this)).length)return;case"object":(c.is||c.style)&&(o=(c=e(c)).offset())}e.each(a.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",r=n.toLowerCase(),p="scroll"+n,f=l[p],m=i.max(l,t);if(o)d[p]=o[r]+(h?0:f-u.offset()[r]),a.margin&&(d[p]-=parseInt(c.css("margin"+n))||0,d[p]-=parseInt(c.css("border"+n+"Width"))||0),d[p]+=a.offset[r]||0,a.over[r]&&(d[p]+=c["x"==t?"width":"height"]()*a.over[r]);else{var g=c[r];d[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}a.limit&&/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],m)),!e&&a.queue&&(f!=d[p]&&s(a.onAfterFirst),delete d[p])}),s(a.onAfter)}}).end()},i.max=function(t,i){var n="x"==i?"Width":"Height",r="scroll"+n;if(!e(t).is("html,body"))return t[r]-e(t)[n.toLowerCase()]();var a="client"+n,s=t.ownerDocument.documentElement,o=t.ownerDocument.body;return Math.max(s[r],o[r])-Math.min(s[a],o[a])}}(jQuery),$(window).load(function(){!function(e){function t(e){if(e&&e.length){var t=e.match(n.text)[1],i=t.match(n.url);return i?'<img src="'+i[1]+'" />':t}}function i(i,n,r){"after"!=i&&"before"!=i||(r=t(n.currentStyle[i]))&&e(n)["before"==i?"prepend":"append"](e(document.createElement("span")).addClass(i).html(r))}var n={text:/^['"]?(.+?)["']?$/,url:/^url\(["']?(.+?)['"]?\)$/};if(e.pseudo=function(e){i("before",e),i("after",e),e.runtimeStyle.behavior=null},document.createStyleSheet){var r=document.createStyleSheet(null,0);r.addRule(".dummy","display: static;"),r.cssText="html, head, head *, body, *.before, *.after, *.before *, *.after * { behavior: none; } * { behavior: expression($.pseudo(this)); }"}}(jQuery)}),function(e){e.fn.fileupload=function(){this.each(function(){function t(){file=i.value,reWin=/.*\\(.*)/;var t=file.replace(reWin,"$1");reUnix=/.*\/(.*)/,t=t.replace(reUnix,"$1"),n.innerHTML=t;var a=/.*\.(.*)/,s=t.replace(a,"$1");r.indexOf("."+s.toLowerCase())<0&&(i.value="",e(n).addClass("error").text("\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430"),window.setTimeout(function(){e(n).removeClass("error").text("")},3e3))}var i=e(this).get(0),n=e(this).siblings(".cf_file_progress").get(0);i.value="",i.onchange=t;var r=i.accept.split(",")})}}(jQuery),function(e){e.fn.formValidator=function(t){var i={};this.each(function(){e.extend(i,t);var n=e(this),r=e(":input",n);r.length;r.removeClass("error").each(function(){var t=e(this),i=t.parents(".fieldrow"),n=t.val();if(gr=t.data("group"),t.parent().removeClass("error"),i.find("em.error").css("display","none"),t.data("validate")||t.data("required"))if(t.data("required")&&""==t.val())t.addClass("error"),t.parent().addClass("error"),i.find(".error.required").css("display","block");else{if(gr){var a=r.filter('[data-group="'+gr+'"]'),s=!1;a.each(function(){(e(this).is('[type="checkbox"]')?e(this)[0].checked:e(this).val())&&(s=!0)}),s?a.removeClass("error").closest("div.fieldrow").find(".error.group").hide():a.addClass("error").closest("div.fieldrow").find(".error.group").show()}switch(t.data("validate")){case"number":if(""!=n)for(var o="-+0123456789. ",l=n.length-1;l>=0;l--){var u=new String(n.charAt(l));if(!(o.lastIndexOf(u)>-1)){t.addClass("error"),t.parent().addClass("error"),i.find(".error.validate").css("display","block");break}}break;case"password":""!=n&&n.length<6&&(t.addClass("error"),i.find(".error.validate").css("display","block"));break;case"email":""!=n&&(/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(n)||(t.addClass("error"),t.parent().addClass("error"),i.find(".error.validate").css("display","block")))}if(t.data("minlength")&&""!=n&&(n.length<1*t.data("minlength")?(t.removeClass("ok"),t.parent().addClass("error"),t.addClass("error"),i.find(".error.minlength").css("display","block")):(t.removeClass("error"),i.addClass("ok"))),t.data("identity")){var c=e(t.data("identity"));c.length<1&&alert("\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440 \u0432 \u043f\u043e\u043b\u0435 "+t.attr("name")),""!=n&&""!=c.val()&&n!=c.val()&&(t.addClass("error"),t.parent().addClass("error"),i.find(".error.identity").css("display","block"))}}}),n.data("valid",0==e(":input.error",n).length)})}}(jQuery),
/*
 * jQuery Easing Compatibility v1 - http://gsgd.co.uk/sandbox/jquery.easing.php
 *
 * Adds compatibility for applications that use the pre 1.2 easing names
 *
 * Copyright (c) 2007 George Smith
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 */
jQuery.extend(jQuery.easing,{easeIn:function(e,t,i,n,r){return jQuery.easing.easeInQuad(e,t,i,n,r)},easeOut:function(e,t,i,n,r){return jQuery.easing.easeOutQuad(e,t,i,n,r)},easeInOut:function(e,t,i,n,r){return jQuery.easing.easeInOutQuad(e,t,i,n,r)},expoin:function(e,t,i,n,r){return jQuery.easing.easeInExpo(e,t,i,n,r)},expoout:function(e,t,i,n,r){return jQuery.easing.easeOutExpo(e,t,i,n,r)},expoinout:function(e,t,i,n,r){return jQuery.easing.easeInOutExpo(e,t,i,n,r)},bouncein:function(e,t,i,n,r){return jQuery.easing.easeInBounce(e,t,i,n,r)},bounceout:function(e,t,i,n,r){return jQuery.easing.easeOutBounce(e,t,i,n,r)},bounceinout:function(e,t,i,n,r){return jQuery.easing.easeInOutBounce(e,t,i,n,r)},elasin:function(e,t,i,n,r){return jQuery.easing.easeInElastic(e,t,i,n,r)},elasout:function(e,t,i,n,r){return jQuery.easing.easeOutElastic(e,t,i,n,r)},elasinout:function(e,t,i,n,r){return jQuery.easing.easeInOutElastic(e,t,i,n,r)},backin:function(e,t,i,n,r){return jQuery.easing.easeInBack(e,t,i,n,r)},backout:function(e,t,i,n,r){return jQuery.easing.easeOutBack(e,t,i,n,r)},backinout:function(e,t,i,n,r){return jQuery.easing.easeInOutBack(e,t,i,n,r)}}),function(e){e.fn.replaceCheckBox=function(){this.each(function(){var t=e(this);e("label[for="+t.attr("id")+"]");if(t.hasClass("custom"))return!1;t.wrap('<span class="field checkbox" />').wrap("<span />");var i=t.parents("span.checkbox:eq(0)");t.prop("checked")&&i.addClass("checked"),i.on("click",function(){if(t.attr("disabled"))return!1;t.trigger("change")}),t.on("change",function(){if(t.attr("disabled"))return!1;t.prop("checked")?(i.removeClass("checked"),t.prop("checked",!1)):(i.addClass("checked"),t.prop("checked",!0))})})}}(jQuery),function(e){e.fn.selectReplace=function(){this.each(function(){var t=e(this),i=e('<span class="inpselblock"></span>'),n=e('<span class="inpseltxt"></span>'),r=t.width();if(t.hasClass("custom"))return!1;i.parent().width(r),t.wrap(i),n.insertBefore(t),n.text(e("option:selected",t).text());var a=e('<a class="selopener" href="#"></a>').insertBefore(n),s=e('<div class="optcontainer'+(t.hasClass("round")?" round":"")+'" id="'+t.attr("name")+'opts"></div>').appendTo("body");s.css("min-width",r).hide(function(){e(this).addClass("hide")}),e("option",t).each(function(i){var r=e(this),o=e('<a href="#" title="'+r.text()+'">'+r.text()+"</a>").appendTo(s);o.click(function(){return t.get(0).selectedIndex=i,n.text(e("option:eq("+i+")",t).text()),s.find(".selected").removeClass("selected"),e(this).addClass("selected"),s.slideUp("fast",function(){e(this).addClass("hide"),a.removeClass("open")}),t.change(),!1}),r.prop("selected")&&o.addClass("selected")}),a.click(function(){if(e(".inpselblock").removeClass("open"),e("div.optcontainer").slideUp("fast",function(){e(this).addClass("hide")}),s.hasClass("hide")){var i=e(n).offset(),r=0;s.removeClass("hide"),s.css({left:i.left+"px",top:i.top-1+"px","min-width":t.outerWidth()+15}),s.slideDown("fast",function(){e(document).on("click",function(t){(t.pageX<i.left||t.pageX>i.left+s.width()||t.pageY<i.top||t.pageY>i.top+s.height())&&s.slideUp("fast",function(){e(this).addClass("hide"),a.removeClass("open")})}),a.addClass("open")}),s.siblings().each(function(){var t=parseInt(e(this).css("z-index"));r=Math.max(r,isNaN(t)?0:t)}),s.css({"z-index":r+1})}else s.slideUp("fast",function(){e(this).addClass("hide"),a.removeClass("open")});return!1}),t.addClass("custom")})}}(jQuery),function(e){e.fn.radioReplace=function(){this.each(function(){var t=e(this),i=(e("label[for="+t.attr("id")+"]"),e(this.form));t.attr("name");if(t.hasClass("custom"))return!1;t.wrap('<span class="field radio" />').wrap("<span />");var n=t.parents("span.radio:eq(0)");t.prop("checked")&&n.addClass("checked"),t.change(function(){if(e(this).attr("disabled"))return!1;var t=e(this).attr("name");e('input[name="'+t+'"]',i).each(function(){var t=e(this),i=t.parents("span.radio:eq(0)");t.prop("checked")?i.addClass("checked"):i.removeClass("checked")})})})}}(jQuery),function(e){e.fn.columnize=function(t){var i={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return"string"==typeof(t=e.extend(i,t)).width&&(t.width=parseInt(t.width,10),isNaN(t.width)&&(t.width=i.width)),this.each(function(){function n(e,t){var i=t?".":"";return f.length?i+f+"-"+e:i+e}function r(i,r,a,s){for(;(p||a.height()<s)&&r[0].childNodes.length;){var o=r[0].childNodes[0];if(e(o).find(n("columnbreak",!0)).length)return;if(e(o).hasClass(n("columnbreak")))return;i.append(o)}if(0!==i[0].childNodes.length){var l=i[0].childNodes,u=l[l.length-1];i[0].removeChild(u);var c=e(u);if(3==c[0].nodeType){var d,h=c[0].nodeValue,f=t.width/18;t.accuracy&&(f=t.accuracy);for(var m=null;a.height()<s&&h.length;){var g=h.indexOf(" ",f);d=-1!=g?h.substring(0,h.indexOf(" ",f)):h,m=document.createTextNode(d),i.append(m),h=h.length>f&&-1!=g?h.substring(g):""}if(a.height()>=s&&null!==m&&(i[0].removeChild(m),h=m.nodeValue+h),!h.length)return!1;c[0].nodeValue=h}return r.contents().length?r.prepend(c):r.append(c),3==c[0].nodeType}}function a(e,t,i,s){if(!e.contents(":last").find(n("columnbreak",!0)).length&&!e.contents(":last").hasClass(n("columnbreak"))&&t.contents().length){var o=t.contents(":first");if(1!=o.get(0).nodeType)return;var l=o.clone(!0);o.hasClass(n("columnbreak"))?(e.append(l),o.remove()):p?(e.append(l),o.remove()):1!=l.get(0).nodeType||l.hasClass(n("dontend"))||(e.append(l),l.is("img")&&i.height()<s+20?o.remove():!o.hasClass(n("dontsplit"))&&i.height()<s+20?o.remove():l.is("img")||o.hasClass(n("dontsplit"))?l.remove():(l.empty(),r(l,o,i,s)?o.addClass(n("split")):(o.addClass(n("split")),o.children().length&&a(l,o,i,s)),0===l.get(0).childNodes.length&&l.remove()))}}function s(){if(!u.data("columnized")||1!=u.children().length){if(u.data("columnized",!0),u.data("columnizing",!0),u.empty(),u.append(e("<div class='"+n("first")+" "+n("last")+" "+n("column")+" ' style='width:100%; float: "+t.columnFloat+";'></div>")),$col=u.children().eq(u.children().length-1),$destroyable=d.clone(!0),t.overflow){for(targetHeight=t.overflow.height,r($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(n("dontend"))||a($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&o($col.contents(":last").get(0));){var i=$col.contents(":last");i.remove(),$destroyable.prepend(i)}for(var s="",l=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var c=$destroyable[0].childNodes[0];if(c.attributes)for(var h=0;h<c.attributes.length;h++)0===c.attributes[h].nodeName.indexOf("jQuery")&&c.removeAttribute(c.attributes[h].nodeName);l.innerHTML="",l.appendChild($destroyable[0].childNodes[0]),s+=l.innerHTML}e(t.overflow.id)[0].innerHTML=s}else $col.append($destroyable);u.data("columnizing",!1),t.overflow&&t.overflow.doneFunc&&t.overflow.doneFunc()}}function o(t){return 3==t.nodeType?!!/^\s+$/.test(t.nodeValue)&&(!!t.previousSibling&&o(t.previousSibling)):1==t.nodeType&&(!!e(t).hasClass(n("dontend"))||0!==t.childNodes.length&&o(t.childNodes[t.childNodes.length-1]))}function l(){if(0,h!=u.width()){h=u.width();var i=Math.round(u.width()/t.width),l=t.width,f=t.height;if(t.columns&&(i=t.columns),p&&(i=d.find(n("columnbreak",!0)).length+1,l=!1),i<=1)return s();if(!u.data("columnizing")){u.data("columnized",!0),u.data("columnizing",!0),u.empty(),u.append(e("<div style='width:"+Math.floor(100/i)+"%; float: "+t.columnFloat+";'></div>")),(T=u.children(":last")).append(d.clone()),c=T.height(),u.empty();var m=c/i,g=3,v=!1;t.overflow?(g=1,m=t.overflow.height):f&&l&&(g=1,m=f,v=!0);for(var y=0;y<g&&y<20;y++){var _,b,T,w;u.empty();try{_=d.clone(!0)}catch(M){_=d.clone()}_.css("visibility","hidden");for(var k=0;k<i;k++)b=0===k?n("first"):"",b+=" "+n("column"),b=k==i-1?n("last")+" "+b:b,u.append(e("<div class='"+b+"' style='width:"+Math.floor(100/i)+"%; float: "+t.columnFloat+";'></div>"));for(k=0;k<i-(t.overflow?0:1)||v&&_.contents().length;){for(u.children().length<=k&&u.append(e("<div class='"+b+"' style='width:"+Math.floor(100/i)+"%; float: "+t.columnFloat+";'></div>")),T=u.children().eq(k),v&&T.width(l+"px"),r(T,_,T,m),a(T,_,T,m);T.contents(":last").length&&o(T.contents(":last").get(0));)(w=T.contents(":last")).remove(),_.prepend(w);k++,0===T.contents().length&&_.contents().length?T.append(_.contents(":first")):k!=i-(t.overflow?0:1)||t.overflow||_.find(n("columnbreak",!0)).length&&i++}if(t.overflow&&!v){var S=!1,C=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(S||C){for(var E="",x=document.createElement("DIV");_[0].childNodes.length>0;){var A=_[0].childNodes[0];for(k=0;k<A.attributes.length;k++)0===A.attributes[k].nodeName.indexOf("jQuery")&&A.removeAttribute(A.attributes[k].nodeName);x.innerHTML="",x.appendChild(_[0].childNodes[0]),E+=x.innerHTML}e(t.overflow.id)[0].innerHTML=E}else e(t.overflow.id).empty().append(_.contents().clone(!0))}else if(v)u.children().each(function(e){(T=u.children().eq(e)).width(l+"px"),0===e?T.addClass(n("first")):e==u.children().length-1?T.addClass(n("last")):(T.removeClass(n("first")),T.removeClass(n("last")))}),u.width(u.children().length*l+"px");else{T=u.children().eq(u.children().length-1),_.contents().each(function(){T.append(e(this))});T.height();var P=0,I=1e7,L=0,D=!1,O=0;u.children().each(function(e){return function(t){var i=e.children().eq(t);if(!i.children(":last").find(n("columnbreak",!0)).length){var r=i.height();D=!1,P+=r,r>L&&(L=r,D=!0),r<I&&(I=r),O++}}}(u));var j=P/O;0===P?y=g:t.lastNeverTallest&&D?(30,m+=30,y==g-1&&g++):L-I>30?m=j+30:Math.abs(j-m)>20?m=j:y=g}u.append(e("<br style='clear:both;'>"))}u.find(n("column",!0)).find(":first"+n("removeiffirst",!0)).remove(),u.find(n("column",!0)).find(":last"+n("removeiflast",!0)).remove(),u.data("columnizing",!1),t.overflow&&t.overflow.doneFunc(),t.doneFunc()}}}var u=t.target?e(t.target):e(this),c=e(this).height(),d=e("<div></div>"),h=0,p=t.manualBreaks,f=i.cssClassPrefix;"string"==typeof t.cssClassPrefix&&(f=t.cssClassPrefix);if(d.append(e(this).contents().clone(!0)),!t.ignoreImageLoading&&!t.target&&!u.data("imageLoaded")&&(u.data("imageLoaded",!0),e(this).find("img").length>0)){var m=function(e,i){return function(){e.data("firstImageLoaded")||(e.data("firstImageLoaded","true"),e.empty().append(i.children().clone(!0)),e.columnize(t))}}(e(this),d);return e(this).find("img").one("load",m),void e(this).find("img").one("abort",m)}u.empty(),l(),t.buildOnce||e(window).resize(function(){t.buildOnce||(u.data("timeout")&&clearTimeout(u.data("timeout")),u.data("timeout",setTimeout(l,200)))})})}}(jQuery),
/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,r=n._mouseInit;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),r.call(t)}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery?e.jQuery:e.Zepto)}(this,function(e,t){e.fn.jPlayer=function(i){var n="jPlayer",r="string"==typeof i,a=Array.prototype.slice.call(arguments,1),s=this;return i=!r&&a.length?e.extend.apply(null,[!0,i].concat(a)):i,r&&"_"===i.charAt(0)?s:(this.each(r?function(){var r=e(this).data(n),o=r&&e.isFunction(r[i])?r[i].apply(r,a):r;return o!==r&&o!==t?(s=o,!1):void 0}:function(){var t=e(this).data(n);t?t.option(i||{}):e(this).data(n,new e.jPlayer(i,this))}),s)},e.jPlayer=function(t,i){if(arguments.length){this.element=e(i),this.options=e.extend(!0,{},this.options,t);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),i=t.getUTCHours(),n=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*i,r=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*n,a=this.options.timeFormat.padHour&&10>i?"0"+i:i,s=this.options.timeFormat.padMin&&10>n?"0"+n:n,o=this.options.timeFormat.padSec&&10>r?"0"+r:r,l="";return l+=this.options.timeFormat.showHour?a+this.options.timeFormat.sepHour:"",(l+=this.options.timeFormat.showMin?s+this.options.timeFormat.sepMin:"")+(this.options.timeFormat.showSec?o+this.options.timeFormat.sepSec:"")}};var n=new i;e.jPlayer.convertTime=function(e){return n.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),i=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/,a=/(webkit)[ \/]([\w.]+)/.exec(t)||i.exec(t)||n.exec(t)||t.indexOf("compatible")<0&&r.exec(t)||[];return{browser:a[1]||"",version:a[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),i=/(ipad|playbook)/,n=/(android)/,r=/(mobile)/,a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[],s=i.exec(t)||!r.exec(t)&&n.exec(t)||[];return a[1]&&(a[1]=a[1].replace(/\s/g,"_")),{platform:a[1]||"",tablet:s[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var r=e.jPlayer.uaBrowser(navigator.userAgent);r.browser&&(e.jPlayer.browser[r.browser]=!0,e.jPlayer.browser.version=r.version);var a=e.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(e.jPlayer.platform[a.platform]=!0,e.jPlayer.platform.mobile=!a.tablet,e.jPlayer.platform.tablet=!!a.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,i,n=document,r=n.createElement("video"),a={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},s=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!n[a.w3c[0]],moz:!!n[a.moz[0]],webkit:"function"==typeof n[a.webkit[3]],webkitVideo:"function"==typeof r[a.webkitVideo[2]],ms:"function"==typeof r[a.ms[2]]},used:{}},t=0,i=s.length;i>t;t++){var o=s[t];if(e.support[o]){e.spec=o,e.used[o]=!0;break}}if(e.spec){var l=a[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return(e=e||n)[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return(e=e||n)[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var s=function(t){var i,n=e.jPlayer.focus;n&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,n){return t.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||e.each(n.options.keyBindings,function(i,r){return r&&e.isFunction(r.fn)&&("number"==typeof r.key&&t.which===r.key||"string"==typeof r.key&&t.key===r.key)?(t.preventDefault(),r.fn(n),!1):void 0}))};e.jPlayer.keys=function(t){var i="keydown.jPlayer";e(document.documentElement).unbind(i),t&&e(document.documentElement).bind(i,s)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var a=!1;e.each(i.formats,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.formats.push(r)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.solution[r]){var a=!1;e.each(i.solutions,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.solutions.push(r)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var a=!1;e.each(i.aurora.formats,function(e,t){return r===t?(a=!0,!1):void 0}),a||i.aurora.formats.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,n){i.options[e]!==t&&(i.element.bind(n+".jPlayer",i.options[e]),i.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){i.require[i.format[t].media]=!0}),this.options=this.require.video?e.extend(!0,{},this.optionsVideo,this.options):e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=e.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,n){if(0===t)i[n].desired=!0;else{var r=!1,a=!1;e.each(i.formats,function(e,t){i[i.solutions[0]].canPlay[t]&&("video"===i.format[t].media?a=!0:r=!0)}),i[n].desired=i.require.audio&&!r||i.require.video&&!a}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){i.html.support[t]=i.html.canPlay[t]&&i.html.desired,i.aurora.support[t]=i.aurora.canPlay[t]&&i.aurora.desired,i.flash.support[t]=i.flash.canPlay[t]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,n){e.each(i.formats,function(e,t){return i[n].support[t]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,r="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var a='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',s=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+r+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement(a);for(var o=0;o<s.length;o++)n.appendChild(document.createElement(s[o]))}else{var l=function(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)};(n=document.createElement("object")).setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),l(n,"flashvars",r),l(n,"allowscriptaccess","always"),l(n,"bgcolor",this.options.backgroundColor),l(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=e(n)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(e.jPlayer.event.repeat),i._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,i){t.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(t){return!1}},_testPlaybackRate:function(e){var t,i=.5;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t&&(t.playbackRate=i,t.playbackRate===i)}catch(n){return!1}},_uaBlocklist:function(t){var i=navigator.userAgent.toLowerCase(),n=!1;return e.each(t,function(e,t){return t&&t.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,i){var n=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){i.gate&&(n.options.volume=t.volume,n.options.muted=t.muted,n._updateMute(),n._updateVolume(),n._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=t.defaultPlaybackRate,n.options.playbackRate=t.playbackRate,n._updatePlaybackRate(),n._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){i.gate&&(e.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(r,a){t.addEventListener(this,function(){i.gate&&n._trigger(e.jPlayer.event[a])},!1)})},_addAuroraEventListeners:function(t,i){var n=this;t.volume=100*this.options.volume,t.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress),t.duration>0&&n._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){i.gate&&n._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){i.gate&&(n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var i=0,n=0,r=0,a=0;isFinite(e.duration)&&(this.status.duration=e.duration),i=e.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(r=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,a=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(r=100,a=n),t&&(i=0,a=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var i=0,n=0,r=0,a=0;this.status.duration=e.duration/1e3,i=e.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,e.buffered>0?(r=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,a=this.status.duration>0?i/(e.buffered*this.status.duration):0):(r=100,a=n),t&&(i=0,a=0,n=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,i,n){var r=e.Event(t);r.jPlayer={},r.jPlayer.version=e.extend({},this.version),r.jPlayer.options=e.extend(!0,{},this.options),r.jPlayer.status=e.extend(!0,{},this.status),r.jPlayer.html=e.extend(!0,{},this.html),r.jPlayer.aurora=e.extend(!0,{},this.aurora),r.jPlayer.flash=e.extend(!0,{},this.flash),i&&(r.jPlayer.error=e.extend({},i)),n&&(r.jPlayer.warning=e.extend({},n)),this.element.trigger(r)},jPlayerFlashEvent:function(t,i){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,r=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(r?this.pause(n):this.play(n))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:case e.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:i.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&(this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var e="",t=this.status.duration,i=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=(t=this.status.media.duration)-this.status.currentTime),e=this.options.remainingDuration?(i>0?"-":"")+this._convertTime(i):this._convertTime(t)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){
var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var i=this;return e.each(t,function(e,n){n&&i.format[e]&&"data:"!==n.substr(0,5)&&(t[e]=i._qualifyURL(n))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var i=this,n=!1,r=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(r,a){var s="video"===i.format[a].media;return e.each(i.solutions,function(r,o){if(i[o].support[a]&&i._validString(t[a])){var l="html"===o,u="aurora"===o;return s?(l?(i.html.video.gate=!0,i._html_setVideo(t),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(t),i.html.active=!0,e.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):u?(i.aurora.gate=!0,i._aurora_setAudio(t),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),!n&&void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(r?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){"object"==typeof e&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,i){var n=this,r="function"==typeof i,a=Array.prototype.slice.call(arguments);"string"==typeof t&&(r&&a.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){n.element!==this&&(!r||i.call(this.data("jPlayer"),n))&&this.jPlayer.apply(this,a)}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){"object"==typeof e&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(e=e===t||!!e,this._muted(e))},unmute:function(e){e=e===t||!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var i=e(t.currentTarget),n=i.offset(),r=t.pageX-n.left,a=i.width(),s=i.height()-t.pageY+n.top,o=i.height();this.volume(this.options.verticalVolume?s/o:r/a)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var i=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){i._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,i){var n=this;if("string"==typeof i)if(e.jPlayer.prototype.options.cssSelector[t]){if(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=i,this.css.cs[t]=this.options.cssSelectorAncestor+" "+i,this.css.jq[t]=i?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]){var r=function(i){i.preventDefault(),n[t](i),n.options.autoBlur?e(this).blur():e(this).focus()};this.css.jq[t].bind("click.jPlayer",r)}i&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var i=e(t.currentTarget),n=i.offset(),r=100*(t.pageX-n.left)/i.width();this.playHead(r)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var i,n=e(t.currentTarget),r=n.offset(),a=t.pageX-r.left,s=n.width(),o=n.height()-t.pageY+r.top,l=n.height();i=(this.options.verticalPlaybackRate?o/l:a/s)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(i)}},_updatePlaybackRate:function(){var e=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*e+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){var t="object"==typeof e;this._loop(!(t&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(i,n){var r=i;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof i){var a=i.split(".");if(n===t){for(var s=e.extend(!0,{},this.options),o=0;o<a.length;o++){if(s[a[o]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:i,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;s=s[a[o]]}return s}for(var l=r={},u=0;u<a.length;u++)u<a.length-1?(l[a[u]]={},l=l[a[u]]):l[a[u]]=n}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(t,i){var n=this;switch(t){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[t]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":e.each(i,function(e,t){n._cssSelector(e,t)});break;case"playbackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==i){var r=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!r||r&&!this.status.waitForPlay)&&(r||(this.options[t]=i),i?this._requestFullscreen():this._exitFullscreen(),r||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[t]!==i&&(this._removeUiClass(),this.options[t]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===i.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==i.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[t]=i,this._updateInterface();break;case"toggleDuration":this.options[t]=i;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==i&&(this.options[t]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],i);break;case"keyEnabled":this.options[t]=i,i||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],i);break;case"audioFullScreen":this.options[t]=i;break;case"autoBlur":this.options[t]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t=".jPlayerAutohide",i="mousemove.jPlayer"+t,n=function(t){var i,n,r=!1;"undefined"!=typeof e.internal.mouse?(i=e.internal.mouse.x-t.pageX,n=e.internal.mouse.y-t.pageY,r=Math.floor(i)>0||Math.floor(n)>0):r=!0,e.internal.mouse={x:t.pageX,y:t.pageY},r&&e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(t),this.css.jq.gui.unbind(t),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(i,n),this.css.jq.gui.bind(i,n),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){"object"==typeof e&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,i=e.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(t)},_exitFullscreen:function(){var t,i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(t)},_html_initMedia:function(t){var i=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var n=document.createElement("track");n.setAttribute("kind",t.kind?t.kind:""),n.setAttribute("src",t.src?t.src:""),n.setAttribute("srclang",t.srclang?t.srclang:""),n.setAttribute("label",t.label?t.label:""),t.def&&n.setAttribute("default",t.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var i=this;e.each(this.formats,function(e,n){return i.html.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e,i.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=e*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=e*i.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var i=this;e.each(this.formats,function(e,n){return i.aurora.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(t[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(t[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_setVideo:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(t[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=e.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),t=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(n){}else navigator.plugins&&navigator.mimeTypes.length>0&&((e=navigator.plugins["Shockwave Flash"])&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,i){return t>e?t:e>i?i:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[i],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[i]+t.message,hint:e.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(i){this._trigger(e.jPlayer.event.warning,t,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,i){t.internal.domNode[i]=function(e){t[i](e)}}),e.each(e.jPlayer.event,function(i,n){var r=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){return t===i?(r=!1,!1):void 0}),r&&t.element.bind(n+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(i,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.status[i]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.options[i]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");var i=e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions;e.each(i.split(/\s+/g),function(e,i){delete t.internal.domNode[i]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),
/*!
 * zeroclipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie, and a JavaScript interface.
 * Copyright 2013 Jon Rohan, James M. Greene, .
 * Released under the MIT license
 * http://zeroclipboard.github.io/ZeroClipboard/
 * v1.2.0-beta.4
 */
function(){"use strict";var e,t=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(i){return i.replace(e,t)}}(),i=function(e,i){var n,r,a,s,o,l;if(window.getComputedStyle?n=window.getComputedStyle(e,null).getPropertyValue(i):(r=t(i),n=e.currentStyle?e.currentStyle[r]:e.style[r]),"cursor"===i&&(!n||"auto"===n))for(a=e.tagName.toLowerCase(),o=0,l=(s=["a"]).length;o<l;o++)if(a===s[o])return"pointer";return n},n=function(e){var t;m.prototype._singleton&&(e||(e=window.event),this!==window?t=this:e.target?t=e.target:e.srcElement&&(t=e.srcElement),m.prototype._singleton.setCurrent(t))},r=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},a=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)},s=function(e,t){if(e.addClass)return e.addClass(t),e;if(t&&"string"==typeof t){var i=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var n=" "+e.className+" ",r=e.className,a=0,s=i.length;a<s;a++)n.indexOf(" "+i[a]+" ")<0&&(r+=" "+i[a]);e.className=r.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},o=function(e,t){if(e.removeClass)return e.removeClass(t),e;if(t&&"string"==typeof t||t===undefined){var i=(t||"").split(/\s+/);if(1===e.nodeType&&e.className)if(t){for(var n=(" "+e.className+" ").replace(/[\n\t]/g," "),r=0,a=i.length;r<a;r++)n=n.replace(" "+i[r]+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}else e.className=""}return e},l=function(){var e,t,i,n=1;return"function"==typeof document.body.getBoundingClientRect&&(t=(e=document.body.getBoundingClientRect()).right-e.left,i=document.body.offsetWidth,n=Math.round(t/i*100)/100),n},u=function(e){var t={left:0,top:0,width:0,height:0,zIndex:999999999},n=i(e,"z-index");if(n&&"auto"!==n&&(t.zIndex=parseInt(n,10)),e.getBoundingClientRect){var r,a,s,o=e.getBoundingClientRect();"pageXOffset"in window&&"pageYOffset"in window?(r=window.pageXOffset,a=window.pageYOffset):(s=l(),r=Math.round(document.documentElement.scrollLeft/s),a=Math.round(document.documentElement.scrollTop/s));var u=document.documentElement.clientLeft||0,c=document.documentElement.clientTop||0;t.left=o.left+r-u,t.top=o.top+a-c,t.width="width"in o?o.width:o.right-o.left,t.height="height"in o?o.height:o.bottom-o.top}return t},c=function(e){return m.prototype._singleton.options.useNoCache?(e.indexOf("?")>=0?"&nocache=":"?nocache=")+(new Date).getTime():""},d=function(e){var t,i=[];e.trustedDomains&&("string"==typeof e.trustedDomains&&e.trustedDomains?t=[e.trustedDomains]:"length"in e.trustedDomains&&(t=e.trustedDomains),i.push("trustedDomain="+encodeURIComponent(t.join(","))));return"string"==typeof e.amdModuleId&&e.amdModuleId&&i.push("amdModuleId="+encodeURIComponent(e.amdModuleId)),"string"==typeof e.cjsModuleId&&e.cjsModuleId&&i.push("cjsModuleId="+encodeURIComponent(e.cjsModuleId)),i.join("&")},h=function(e,t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},p=function(e){if("string"==typeof e)throw new TypeError("ZeroClipboard doesn't accept query strings.");return e.length?e:[e]},f=function(e,t,i,n,r){r?window.setTimeout(function(){e.call(t,i,n)},0):e.call(t,i,n)},m=function(e,t){if(e&&(m.prototype._singleton||this).glue(e),m.prototype._singleton)return m.prototype._singleton;for(var i in m.prototype._singleton=this,this.options={},y)this.options[i]=y[i];for(var n in t)this.options[n]=t[n];this.handlers={},m.detectFlashSupport()&&T()},g=[];m.prototype.setCurrent=function(t){e=t,this.reposition();var n=t.getAttribute("title");n&&this.setTitle(n);var r=!0===this.options.forceHandCursor||"pointer"===i(t,"cursor");v.call(this,r)},m.prototype.setText=function(e){e&&""!==e&&(this.options.text=e,this.ready()&&this.flashBridge.setText(e))},m.prototype.setTitle=function(e){e&&""!==e&&this.htmlBridge.setAttribute("title",e)},m.prototype.setSize=function(e,t){this.ready()&&this.flashBridge.setSize(e,t)},m.prototype.setHandCursor=function(e){e="boolean"==typeof e?e:!!e,v.call(this,e),this.options.forceHandCursor=e};var v=function(e){this.ready()&&this.flashBridge.setHandCursor(e)};m.version="1.2.0-beta.4";var y={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};m.setDefaults=function(e){for(var t in e)y[t]=e[t]},m.destroy=function(){m.prototype._singleton.unglue(g);var e=m.prototype._singleton.htmlBridge;e.parentNode.removeChild(e),delete m.prototype._singleton},m.detectFlashSupport=function(){var e=!1;if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(i){}return!e&&navigator.mimeTypes["application/x-shockwave-flash"]&&(e=!0),e};var _=null,b=null,T=function(){var e=m.prototype._singleton,t=document.getElementById("global-zeroclipboard-html-bridge");if(!t){var i={};for(var n in e.options)i[n]=e.options[n];i.amdModuleId=_,i.cjsModuleId=b;var r=d(i),a='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+e.options.moviePath+c(e.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+e.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+r+'"/>         <embed src="'+e.options.moviePath+c(e.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+r+'"           scale="exactfit">         </embed>       </object>';(t=document.createElement("div")).id="global-zeroclipboard-html-bridge",t.setAttribute("class","global-zeroclipboard-container"),t.setAttribute("data-clipboard-ready",!1),t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.width="15px",t.style.height="15px",t.style.zIndex="9999",t.innerHTML=a,document.body.appendChild(t)}e.htmlBridge=t,e.flashBridge=document["global-zeroclipboard-flash-bridge"]||t.children[0].lastElementChild};m.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),o(e,this.options.activeClass),e=null,this.options.text=null},m.prototype.ready=function(){var e=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===e||!0===e},m.prototype.reposition=function(){if(!e)return!1;var t=u(e);this.htmlBridge.style.top=t.top+"px",this.htmlBridge.style.left=t.left+"px",this.htmlBridge.style.width=t.width+"px",this.htmlBridge.style.height=t.height+"px",this.htmlBridge.style.zIndex=t.zIndex+1,this.setSize(t.width,t.height)},m.dispatch=function(e,t){m.prototype._singleton.receiveEvent(e,t)},m.prototype.on=function(e,t){for(var i=e.toString().split(/\s/g),n=0;n<i.length;n++)e=i[n].toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=t);this.handlers.noflash&&!m.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)},m.prototype.addEventListener=m.prototype.on,m.prototype.off=function(e,t){for(var i=e.toString().split(/\s/g),n=0;n<i.length;n++)for(var r in e=i[n].toLowerCase().replace(/^on/,""),this.handlers)r===e&&this.handlers[r]===t&&delete this.handlers[r]},m.prototype.removeEventListener=m.prototype.off,m.prototype.receiveEvent=function(t,i){t=t.toString().toLowerCase().replace(/^on/,"");var n=e,r=!0;switch(t){case"load":if(i&&parseFloat(i.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10)return void this.receiveEvent("onWrongFlash",{flashVersion:i.flashVersion});this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":s(n,this.options.hoverClass);break;case"mouseout":o(n,this.options.hoverClass),this.resetBridge();break;case"mousedown":s(n,this.options.activeClass);break;case"mouseup":o(n,this.options.activeClass);break;case"datarequested":var a=n.getAttribute("data-clipboard-target"),l=a?document.getElementById(a):null;if(l){var u=l.value||l.textContent||l.innerText;u&&this.setText(u)}else{var c=n.getAttribute("data-clipboard-text");c&&this.setText(c)}r=!1;break;case"complete":this.options.text=null}if(this.handlers[t]){var d=this.handlers[t];"string"==typeof d&&"function"==typeof window[d]&&(d=window[d]),"function"==typeof d&&f(d,n,this,i,r)}},m.prototype.glue=function(e){e=p(e);for(var t=0;t<e.length;t++)-1==h(e[t],g)&&(g.push(e[t]),r(e[t],"mouseover",n))},m.prototype.unglue=function(e){e=p(e);for(var t=0;t<e.length;t++){a(e[t],"mouseover",n);var i=h(e[t],g);-1!=i&&g.splice(i,1)}},"function"==typeof define&&define.amd?define(["require","exports","module"],function(e,t,i){return _=i&&i.id||null,m}):"undefined"!=typeof module&&module?(b=module.id||null,module.exports=m):window.ZeroClipboard=m}(),$.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0431\u0442"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru),
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,o=l.call(arguments,1),u=0,c=0,d=0,h=0;if((t=e.event.fix(s)).type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(c=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(c=-1*d,d=0),u=0===d?c:d,"deltaY"in s&&(u=d=-1*s.deltaY),"deltaX"in s&&(c=s.deltaX,0===d&&(u=-1*c)),0!==d||0!==c){if(1===s.deltaMode){var p=e.data(this,"mousewheel-line-height");u*=p,d*=p,c*=p}else if(2===s.deltaMode){var f=e.data(this,"mousewheel-page-height");u*=f,d*=f,c*=f}return h=Math.max(Math.abs(d),Math.abs(c)),(!a||h<a)&&(a=h,n(s,h)&&(a/=40)),n(s,h)&&(u/=40,c/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/a),c=Math[c>=1?"floor":"ceil"](c/a),d=Math[d>=1?"floor":"ceil"](d/a),t.deltaX=c,t.deltaY=d,t.deltaFactor=a,t.deltaMode=0,o.unshift(t,u,c,d),r&&clearTimeout(r),r=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function i(){a=null}function n(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var r,a,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=s.length;u;)e.event.fixHooks[s[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=o.length;i;)this.addEventListener(o[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),
/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var i,n=t()+".mask",r=navigator.userAgent,a=/iphone/i.test(r),s=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var o,l,u,c,d;return!t&&this.length>0?e(this[0]).data(e.mask.dataName)():(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),o=e.mask.definitions,l=[],u=d=t.length,c=null,e.each(t.split(""),function(e,t){"?"==t?(d--,u=e):o[t]?(l.push(RegExp(o[t])),null===c&&(c=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function h(e){for(;d>++e&&!l[e];);return e}function p(e){for(;--e>=0&&!l[e];);return e}function f(e,t){var i,n;if(!(0>e)){for(i=e,n=h(t);d>i;i++)if(l[i]){if(!(d>n&&l[i].test(w[n])))break;w[i]=w[n],w[n]=r.placeholder,n=h(n)}_(),T.caret(Math.max(c,e))}}function m(e){var t,i,n,a;for(t=e,i=r.placeholder;d>t;t++)if(l[t]){if(n=h(t),a=w[t],w[t]=i,!(d>n&&l[n].test(a)))break;i=a}}function g(e){var t,i,n,r=e.which;8===r||46===r||a&&127===r?(i=(t=T.caret()).begin,0==(n=t.end)-i&&(i=46!==r?p(i):n=h(i-1),n=46===r?h(n):n),y(i,n),f(i,n-1),e.preventDefault()):27==r&&(T.val(k),T.caret(0,b()),e.preventDefault())}function v(t){var i,n,a,o=t.which,u=T.caret();t.ctrlKey||t.altKey||t.metaKey||32>o||o&&(0!=u.end-u.begin&&(y(u.begin,u.end),f(u.begin,u.end-1)),i=h(u.begin-1),d>i&&(n=String.fromCharCode(o),l[i].test(n)&&(m(i),w[i]=n,_(),a=h(i),s?setTimeout(e.proxy(e.fn.caret,T,a),0):T.caret(a),r.completed&&a>=d&&r.completed.call(T))),t.preventDefault())}function y(e,t){var i;for(i=e;t>i&&d>i;i++)l[i]&&(w[i]=r.placeholder)}function _(){T.val(w.join(""))}function b(e){var t,i,n=T.val(),a=-1;for(t=0,pos=0;d>t;t++)if(l[t]){for(w[t]=r.placeholder;pos++<n.length;)if(i=n.charAt(pos-1),l[t].test(i)){w[t]=i,a=t;break}if(pos>n.length)break}else w[t]===n.charAt(pos)&&t!==u&&(pos++,a=t);return e?_():u>a+1?(T.val(""),y(0,d)):(_(),T.val(T.val().substring(0,a+1))),u?t:c}var T=e(this),w=e.map(t.split(""),function(e){return"?"!=e?o[e]?r.placeholder:e:void 0}),k=T.val();T.data(e.mask.dataName,function(){return e.map(w,function(e,t){return l[t]&&e!=r.placeholder?e:null}).join("")}),T.attr("readonly")||T.one("unmask",function(){T.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){var e;clearTimeout(i),k=T.val(),e=b(),i=setTimeout(function(){_(),e==t.length?T.caret(0,e):T.caret(e)},10)}).bind("blur.mask",function(){b(),T.val()!=k&&T.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(n,function(){setTimeout(function(){var e=b(!0);T.caret(e),r.completed&&e==T.val().length&&r.completed.call(T)},0)}),b()}))}})}(jQuery),
/*! Magnific Popup - v1.0.0 - 2014-12-12
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2014 Dmitry Semenov; */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(e){var t,i,n,r,a,s,o,l="Close",u="BeforeClose",c="AfterClose",d="BeforeAppend",h="MarkupParse",p="Open",f="Change",m="mfp",g="."+m,v="mfp-ready",y="mfp-removing",_="mfp-prevent-close",b=function(){},T=!!window.jQuery,w=e(window),k=function(e,i){t.ev.on(m+e+g,i)},S=function(t,i,n,r){var a=document.createElement("div");return a.className="mfp-"+t,n&&(a.innerHTML=n),r?i&&i.appendChild(a):(a=e(a),i&&a.appendTo(i)),a},C=function(i,n){t.ev.triggerHandler(m+i,n),t.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),t.st.callbacks[i]&&t.st.callbacks[i].apply(t,e.isArray(n)?n:[n]))},E=function(i){return i===o&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),o=i),t.currTemplate.closeBtn},x=function(){e.magnificPopup.instance||((t=new b).init(),e.magnificPopup.instance=t)},A=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};b.prototype={constructor:b,init:function(){var i=navigator.appVersion;t.isIE7=-1!==i.indexOf("MSIE 7."),t.isIE8=-1!==i.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(i),t.isIOS=/iphone|ipad|ipod/gi.test(i),t.supportsTransition=A(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),r=e(document),t.popupsCache={}},open:function(i){var a;if(n||(n=e(document.body)),!1===i.isObj){t.items=i.items.toArray(),t.index=0;var o,l=i.items;for(a=0;l.length>a;a++)if((o=l[a]).parsed&&(o=o.el[0]),o===i.el[0]){t.index=a;break}}else t.items=e.isArray(i.items)?i.items:[i.items],t.index=i.index||0;if(!t.isOpen){t.types=[],s="",t.ev=i.mainEl&&i.mainEl.length?i.mainEl.eq(0):r,i.key?(t.popupsCache[i.key]||(t.popupsCache[i.key]={}),t.currTemplate=t.popupsCache[i.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,i),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=S("bg").on("click"+g,function(){t.close()}),t.wrap=S("wrap").attr("tabindex",-1).on("click"+g,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=S("container",t.wrap)),t.contentContainer=S("content"),t.st.preloader&&(t.preloader=S("preloader",t.container,t.st.tLoading));var u=e.magnificPopup.modules;for(a=0;u.length>a;a++){var c=u[a];c=c.charAt(0).toUpperCase()+c.slice(1),t["init"+c].call(t)}C("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(k(h,function(e,t,i,n){i.close_replaceWith=E(n.type)}),s+=" mfp-close-btn-in"):t.wrap.append(E())),t.st.alignTop&&(s+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:w.scrollTop(),position:"absolute"}),(!1===t.st.fixedBgPos||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:r.height(),position:"absolute"}),t.st.enableEscapeKey&&r.on("keyup"+g,function(e){27===e.keyCode&&t.close()}),w.on("resize"+g,function(){t.updateSize()}),t.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&t.wrap.addClass(s);var d=t.wH=w.height(),f={};if(t.fixedContentPos&&t._hasScrollBar(d)){var m=t._getScrollbarSize();m&&(f.marginRight=m)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):f.overflow="hidden");var y=t.st.mainClass;return t.isIE7&&(y+=" mfp-ie7"),y&&t._addClassToMFP(y),t.updateItemHTML(),C("BuildControls"),e("html").css(f),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||n),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(v),t._setFocus()):t.bgOverlay.addClass(v),r.on("focusin"+g,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(d),C(p),i}t.updateItemHTML()},close:function(){t.isOpen&&(C(u),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(y),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){C(l);var i=y+" "+v+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(i+=t.st.mainClass+" "),t._removeClassFromMFP(i),t.fixedContentPos){var n={marginRight:""};t.isIE7?e("body, html").css("overflow",""):n.overflow="",e("html").css(n)}r.off("keyup"+g+" focusin"+g),t.ev.off(g),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&!0!==t.currTemplate[t.currItem.type]||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,C(c)},updateSize:function(e){if(t.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;t.wrap.css("height",n),t.wH=n}else t.wH=e||w.height();t.fixedContentPos||t.wrap.css("height",t.wH),C("Resize")},updateItemHTML:function(){var i=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),i.parsed||(i=t.parseEl(t.index));var n=i.type;if(C("BeforeChange",[t.currItem?t.currItem.type:"",n]),t.currItem=i,!t.currTemplate[n]){var r=!!t.st[n]&&t.st[n].markup;C("FirstMarkupParse",r),t.currTemplate[n]=!r||e(r)}a&&a!==i.type&&t.container.removeClass("mfp-"+a+"-holder");var s=t["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,t.currTemplate[n]);t.appendContent(s,n),i.preloaded=!0,C(f,i),a=i.type,t.container.prepend(t.contentContainer),C("AfterChange")},appendContent:function(e,i){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&!0===t.currTemplate[i]?t.content.find(".mfp-close").length||t.content.append(E()):t.content=e:t.content="",C(d),t.container.addClass("mfp-"+i+"-holder"),t.contentContainer.append(t.content)},parseEl:function(i){var n,r=t.items[i];if(r.tagName?r={el:e(r)}:(n=r.type,r={data:r,src:r.src}),r.el){for(var a=t.types,s=0;a.length>s;s++)if(r.el.hasClass("mfp-"+a[s])){n=a[s];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=n||t.st.type||"inline",r.index=i,r.parsed=!0,t.items[i]=r,C("ElementParse",r),t.items[i]},addGroup:function(e,i){var n=function(n){n.mfpEl=this,t._openClick(n,e,i)};i||(i={});var r="click.magnificPopup";i.mainEl=e,i.items?(i.isObj=!0,e.off(r).on(r,n)):(i.isObj=!1,i.delegate?e.off(r).on(r,i.delegate,n):(i.items=e,e.off(r).on(r,n)))},_openClick:function(i,n,r){if((void 0!==r.midClick?r.midClick:e.magnificPopup.defaults.midClick)||2!==i.which&&!i.ctrlKey&&!i.metaKey){var a=void 0!==r.disableOn?r.disableOn:e.magnificPopup.defaults.disableOn;if(a)if(e.isFunction(a)){if(!a.call(t))return!0}else if(a>w.width())return!0;i.type&&(i.preventDefault(),t.isOpen&&i.stopPropagation()),r.el=e(i.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),t.open(r)}},updateStatus:function(e,n){if(t.preloader){i!==e&&t.container.removeClass("mfp-s-"+i),n||"loading"!==e||(n=t.st.tLoading);var r={status:e,text:n};C("UpdateStatus",r),e=r.status,n=r.text,t.preloader.html(n),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),i=e}},_checkIfClose:function(i){if(!e(i).hasClass(_)){var n=t.st.closeOnContentClick,r=t.st.closeOnBgClick;if(n&&r)return!0;if(!t.content||e(i).hasClass("mfp-close")||t.preloader&&i===t.preloader[0])return!0;if(i===t.content[0]||e.contains(t.content[0],i)){if(n)return!0}else if(r&&e.contains(document,i))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?r.height():document.body.scrollHeight)>(e||w.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(i){return i.target===t.wrap[0]||e.contains(t.wrap[0],i.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,i,n){var r;n.data&&(i=e.extend(n.data,i)),C(h,[t,i,n]),e.each(i,function(e,i){if(void 0===i||!1===i)return!0;if((r=e.split("_")).length>1){var n=t.find(g+"-"+r[0]);if(n.length>0){var a=r[1];"replaceWith"===a?n[0]!==i[0]&&n.replaceWith(i):"img"===a?n.is("img")?n.attr("src",i):n.replaceWith('<img src="'+i+'" class="'+n.attr("class")+'" />'):n.attr(r[1],i)}}else t.find(g+"-"+e).html(i)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(t,i){return x(),(t=t?e.extend(!0,{},t):{}).isObj=!0,t.index=i||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,i){i.options&&(e.magnificPopup.defaults[t]=i.options),e.extend(this.proto,i.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(i){x();var n=e(this);if("string"==typeof i)if("open"===i){var r,a=T?n.data("magnificPopup"):n[0].magnificPopup,s=parseInt(arguments[1],10)||0;a.items?r=a.items[s]:(r=n,a.delegate&&(r=r.find(a.delegate)),r=r.eq(s)),t._openClick({mfpEl:r},n,a)}else t.isOpen&&t[i].apply(t,Array.prototype.slice.call(arguments,1));else i=e.extend(!0,{},i),T?n.data("magnificPopup",i):n[0].magnificPopup=i,t.addGroup(n,i);return n};var P,I,L,D="inline",O=function(){L&&(I.after(L.addClass(P)).detach(),L=null)};e.magnificPopup.registerModule(D,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(D),k(l+"."+D,function(){O()})},getInline:function(i,n){if(O(),i.src){var r=t.st.inline,a=e(i.src);if(a.length){var s=a[0].parentNode;s&&s.tagName&&(I||(P=r.hiddenClass,I=S(P),P="mfp-"+P),L=a.after(I).detach().removeClass(P)),t.updateStatus("ready")}else t.updateStatus("error",r.tNotFound),a=e("<div>");return i.inlineElement=a,a}return t.updateStatus("ready"),t._parseMarkup(n,{},i),n}}});var j,M="ajax",R=function(){j&&n.removeClass(j)},N=function(){R(),t.req&&t.req.abort()};e.magnificPopup.registerModule(M,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(M),j=t.st.ajax.cursor,k(l+"."+M,N),k("BeforeChange."+M,N)},getAjax:function(i){j&&n.addClass(j),t.updateStatus("loading");var r=e.extend({url:i.src,success:function(n,r,a){var s={data:n,xhr:a};C("ParseAjax",s),t.appendContent(e(s.data),M),i.finished=!0,R(),t._setFocus(),setTimeout(function(){t.wrap.addClass(v)},16),t.updateStatus("ready"),C("AjaxContentAdded")},error:function(){R(),i.finished=i.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",i.src))}},t.st.ajax.settings);return t.req=e.ajax(r),""}}});var U,F=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=t.st.image.titleSrc;if(n){if(e.isFunction(n))return n.call(t,i);if(i.el)return i.el.attr(n)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,i=".image";t.types.push("image"),k(p+i,function(){"image"===t.currItem.type&&e.cursor&&n.addClass(e.cursor)}),k(l+i,function(){e.cursor&&n.removeClass(e.cursor),w.off("resize"+g)}),k("Resize"+i,t.resizeImage),t.isLowIE&&k("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var i=0;t.isLowIE&&(i=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-i)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,U&&clearInterval(U),e.isCheckingImgSize=!1,C("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var i=0,n=e.img[0],r=function(a){U&&clearInterval(U),U=setInterval(function(){return n.naturalWidth>0?void t._onImageHasSize(e):(i>200&&clearInterval(U),void(3===++i?r(10):40===i?r(50):100===i&&r(500)))},a)};r(1)},getImage:function(i,n){var r=0,a=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,C("ImageLoadComplete")):200>++r?setTimeout(a,100):s())},s=function(){i&&(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("error",o.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},o=t.st.image,l=n.find(".mfp-img");if(l.length){var u=document.createElement("img");u.className="mfp-img",i.el&&i.el.find("img").length&&(u.alt=i.el.find("img").attr("alt")),i.img=e(u).on("load.mfploader",a).on("error.mfploader",s),u.src=i.src,l.is("img")&&(i.img=i.img.clone()),(u=i.img[0]).naturalWidth>0?i.hasSize=!0:u.width||(i.hasSize=!1)}return t._parseMarkup(n,{title:F(i),img_replaceWith:i.img},i),t.resizeImage(),i.hasSize?(U&&clearInterval(U),i.loadError?(n.addClass("mfp-loading"),t.updateStatus("error",o.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),t.updateStatus("ready")),n):(t.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),t.findImageSize(i)),n)}}});var B,V=function(){return void 0===B&&(B=void 0!==document.createElement("p").style.MozTransform),B};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,i=t.st.zoom,n=".zoom";if(i.enabled&&t.supportsTransition){var r,a,s=i.duration,o=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return r["-webkit-"+a]=r["-moz-"+a]=r["-o-"+a]=r[a]=n,t.css(r),t},c=function(){t.content.css("visibility","visible")};k("BuildControls"+n,function(){if(t._allowZoom()){if(clearTimeout(r),t.content.css("visibility","hidden"),!(e=t._getItemToZoom()))return void c();(a=o(e)).css(t._getOffset()),t.wrap.append(a),r=setTimeout(function(){a.css(t._getOffset(!0)),r=setTimeout(function(){c(),setTimeout(function(){a.remove(),e=a=null,C("ZoomAnimationEnded")},16)},s)},16)}}),k(u+n,function(){if(t._allowZoom()){if(clearTimeout(r),t.st.removalDelay=s,!e){if(!(e=t._getItemToZoom()))return;a=o(e)}a.css(t._getOffset(!0)),t.wrap.append(a),t.content.css("visibility","hidden"),setTimeout(function(){a.css(t._getOffset())},16)}}),k(l+n,function(){t._allowZoom()&&(c(),a&&a.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return!!t.currItem.hasSize&&t.currItem.img},_getOffset:function(i){var n,r=(n=i?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem)).offset(),a=parseInt(n.css("padding-top"),10),s=parseInt(n.css("padding-bottom"),10);r.top-=e(window).scrollTop()-a;var o={width:n.width(),height:(T?n.innerHeight():n[0].offsetHeight)-s-a};return V()?o["-moz-transform"]=o.transform="translate("+r.left+"px,"+r.top+"px)":(o.left=r.left,o.top=r.top),o}}});var q="iframe",H="//about:blank",z=function(e){if(t.currTemplate[q]){var i=t.currTemplate[q].find("iframe");i.length&&(e||(i[0].src=H),t.isIE8&&i.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(q,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(q),k("BeforeChange",function(e,t,i){t!==i&&(t===q?z():i===q&&z(!0))}),k(l+"."+q,function(){z()})},getIframe:function(i,n){var r=i.src,a=t.st.iframe;e.each(a.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var s={};return a.srcAction&&(s[a.srcAction]=r),t._parseMarkup(n,s,i),t.updateStatus("ready"),n}}});var W=function(e){var i=t.items.length;return e>i-1?e-i:0>e?i+e:e},$=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=t.st.gallery,n=".mfp-gallery",a=Boolean(e.fn.mfpFastClick);return t.direction=!0,!(!i||!i.enabled)&&(s+=" mfp-gallery",k(p+n,function(){i.navigateByImgClick&&t.wrap.on("click"+n,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),r.on("keydown"+n,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),k("UpdateStatus"+n,function(e,i){i.text&&(i.text=$(i.text,t.currItem.index,t.items.length))}),k(h+n,function(e,n,r,a){var s=t.items.length;r.counter=s>1?$(i.tCounter,a.index,s):""}),k("BuildControls"+n,function(){if(t.items.length>1&&i.arrows&&!t.arrowLeft){var n=i.arrowMarkup,r=t.arrowLeft=e(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(_),s=t.arrowRight=e(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(_),o=a?"mfpFastClick":"click";r[o](function(){t.prev()}),s[o](function(){t.next()}),t.isIE7&&(S("b",r[0],!1,!0),S("a",r[0],!1,!0),S("b",s[0],!1,!0),S("a",s[0],!1,!0)),t.container.append(r.add(s))}}),k(f+n,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),void k(l+n,function(){r.off(n),t.wrap.off("click"+n),t.arrowLeft&&a&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null}))},next:function(){t.direction=!0,t.index=W(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=W(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,i=t.st.gallery.preload,n=Math.min(i[0],t.items.length),r=Math.min(i[1],t.items.length);for(e=1;(t.direction?r:n)>=e;e++)t._preloadItem(t.index+e);for(e=1;(t.direction?n:r)>=e;e++)t._preloadItem(t.index-e)},_preloadItem:function(i){if(i=W(i),!t.items[i].preloaded){var n=t.items[i];n.parsed||(n=t.parseEl(i)),C("LazyLoad",n),"image"===n.type&&(n.img=e('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,C("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var G="retina";e.magnificPopup.registerModule(G,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,i=e.ratio;(i=isNaN(i)?i():i)>1&&(k("ImageHasSize."+G,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/i,width:"100%"})}),k("ElementParse."+G,function(t,n){n.src=e.replaceSrc(n,i)}))}}}}),function(){var t=1e3,i="ontouchstart"in window,n=function(){w.off("touchmove"+r+" touchend"+r)},r="."+"mfpFastClick";e.fn.mfpFastClick=function(a){return e(this).each(function(){var s,o,l,u,c,d,h,p=e(this);i&&p.on("touchstart"+r,function(e){c=!1,h=1,d=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],l=d.clientX,u=d.clientY,w.on("touchmove"+r,function(e){d=e.originalEvent?e.originalEvent.touches:e.touches,h=d.length,d=d[0],(Math.abs(d.clientX-l)>10||Math.abs(d.clientY-u)>10)&&(c=!0,n())}).on("touchend"+r,function(e){n(),c||h>1||(s=!0,e.preventDefault(),clearTimeout(o),o=setTimeout(function(){s=!1},t),a())})});p.on("click"+r,function(){s||a()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+r+" click"+r),i&&w.off("touchmove"+r+" touchend"+r)}}(),x()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).videojs=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}function i(e,t){Hr(e).forEach(function(i){return t(e[i],i)})}function n(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?Vr.apply(void 0,[e].concat(n)):(n.forEach(function(t){t&&i(t,function(t,i){e[i]=t})}),e)}function r(e){return!!e&&"object"==typeof e}function a(e){return r(e)&&"[object Object]"===qr.call(e)&&e.constructor===Object}function s(e,t){if(!e||!t)return"";if("function"!=typeof Or.getComputedStyle)return"";var i=Or.getComputedStyle(e);return i?i.getPropertyValue(t)||i[t]:""}function o(e){return"string"==typeof e&&Boolean(e.trim())}function l(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function u(){return Rr===Or.document}function c(e){return r(e)&&1===e.nodeType}function d(){try{return Or.parent!==Or.self}catch(Dr){return!0}}function h(e){return function(t,i){if(!o(t))return Rr[e](null);o(i)&&(i=Rr.querySelector(i));var n=c(i)?i:Rr;return n[e]&&n[e](t)}}function p(e,t,i,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={});var r=Rr.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Fr.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."),r.setAttribute(e,i)):"textContent"===e?f(r,i):r[e]===i&&"tabIndex"!==e||(r[e]=i)}),Object.getOwnPropertyNames(i).forEach(function(e){r.setAttribute(e,i[e])}),n&&O(r,n),r}function f(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function m(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function g(e,t){return l(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function v(e,t){return e.classList?e.classList.add(t):g(e,t)||(e.className=(e.className+" "+t).trim()),e}function y(e,t){return e.classList?e.classList.remove(t):(l(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function _(e,t,i){var n=g(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?v(e,t):y(e,t),e}function b(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var n=t[i];null==n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)})}function T(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,r=n.length-1;0<=r;r--){var a=n[r].name,s=n[r].value;"boolean"!=typeof e[a]&&-1===i.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function w(e,t){return e.getAttribute(t)}function k(e,t,i){e.setAttribute(t,i)}function S(e,t){e.removeAttribute(t)}function C(){Rr.body.focus(),Rr.onselectstart=function(){return!1}}function E(){Rr.onselectstart=function(){return!0}}function x(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(s(e,"height"))),i.width||(i.width=parseFloat(s(e,"width"))),i}}function A(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);return{left:n,top:r,width:t,height:i}}function P(e,t){var i={},n=A(t.target),r=A(e),a=r.width,s=r.height,o=t.offsetY-(r.top-n.top),l=t.offsetX-(r.left-n.left);return t.changedTouches&&(l=t.changedTouches[0].pageX-r.left,o=t.changedTouches[0].pageY+r.top),i.y=1-Math.max(0,Math.min(1,o/s)),i.x=Math.max(0,Math.min(1,l/a)),i}function I(e){return r(e)&&3===e.nodeType}function L(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function D(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),c(e)||I(e)?e:"string"==typeof e&&/\S/.test(e)?Rr.createTextNode(e):void 0}).filter(function(e){return e})}function O(e,t){return D(t).forEach(function(t){return e.appendChild(t)}),e}function j(e,t){return O(L(e),t)}function M(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}function R(e,t){t&&(Ir=t),Or.setTimeout(Xr,e)}function N(){Gr=!0,Or.removeEventListener("load",N)}function U(e){var t=Rr.createElement("style");return t.className=e,t}function F(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function B(){return Kr++}function V(e,t){if(Zr.has(e)){var i=Zr.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Zr["delete"](e)}}function q(e,t,i,n){i.forEach(function(i){e(t,i,n)})}function H(e){function t(){return!0}function i(){return!1}if(e.fixed_)return e;if(!e||!e.isPropagationStopped){var n=e||Or.event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||Rr),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var a=Rr.documentElement,s=Rr.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}function z(e,t,i){if(Array.isArray(t))return q(z,e,t,i);Zr.has(e)||Zr.set(e,{});var n=Zr.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=B()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=H(t);var r=n.handlers[t.type];if(r)for(var a=r.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,i)}catch(t){Fr.error(t)}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;ea()&&-1<ta.indexOf(t)&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function W(e,t,i){if(Zr.has(e)){var n=Zr.get(e);if(n.handlers){if(Array.isArray(t))return q(W,e,t,i);var r=function(e,t){n.handlers[t]=[],V(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);V(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function $(e,t,i){var n=Zr.has(e)?Zr.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=H(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)$.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){Zr.has(t.target)||Zr.set(t.target,{});var a=Zr.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function G(e,t,i){function n(){W(e,t,n),i.apply(this,arguments)}if(Array.isArray(t))return q(G,e,t,i);n.guid=i.guid=i.guid||B(),z(e,t,n)}function X(e,t,i){function n(){W(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||B(),z(e,t,n)}function Q(e,t,i){t.guid||(t.guid=B());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n}function K(e,t){var i=Or.performance.now();return function(){var n=Or.performance.now();t<=n-i&&(e.apply(void 0,arguments),i=n)}}function Y(){}function J(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function Z(e){if(!e.nodeName&&!na(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function ee(e){if(!J(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function te(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function ie(e,t){var i,n,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return r=a?(i=e.eventBusEl_,3<=t.length&&t.shift(),n=t[0],t[1]):(i=t[0],n=t[1],t[2]),Z(i),ee(n),te(r),{isTargetingSelf:a,target:i,type:n,listener:r=Q(e,r)}}function ne(e,t,i,n){Z(e),e.nodeName?ia[t](e,i,n):e[t](i,n)}function re(e,t){void 0===t&&(t={});var i=t.eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=p("span",{className:"vjs-event-bus"});return n(e,ra),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),Or.setTimeout(function(){e.eventBusEl_=null},0)}),e}function ae(e,t){return n(e,aa),e.state=n({},e.state,t),"function"==typeof e.handleStateChanged&&na(e)&&e.on("statechanged",e.handleStateChanged),e}function se(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function oe(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function le(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){t&&i(t,function(t,i){a(t)?(a(e[i])||(e[i]={}),e[i]=le(e[i],t)):e[i]=t})}),e}function ue(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||i<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function ce(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ue.bind(null,"start",0,e),end:ue.bind(null,"end",1,e)}}function de(e,t){return Array.isArray(e)?ce(e):void 0===e||void 0===t?ce():ce([[e,t]])}function he(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=de(0,0));for(var a=0;a<e.length;a++)i=e.start(a),t<(n=e.end(a))&&(n=t),r+=n-i;return r/t}function pe(e){if(e instanceof pe)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:r(e)&&("number"==typeof e.code&&(this.code=e.code),n(this,e)),this.message||(this.message=pe.defaultMessages[this.code]||"")}function fe(e){return null!=e&&"function"==typeof e.then}function me(e){fe(e)&&e.then(null,function(){})}function ge(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function ve(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)}function ye(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)}function _e(e){
var t=["protocol","hostname","port","pathname","search","hash","host"],i=Rr.createElement("a");i.href=e;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=Rr.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),Rr.body.appendChild(n));for(var a={},s=0;s<t.length;s++)a[t[s]]=i[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=Or.location.protocol),r&&Rr.body.removeChild(n),a}function be(e){if(!e.match(/^https?:\/\//)){var t=Rr.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}function Te(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""}function we(e,t){void 0===t&&(t=Or.location);var i=_e(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host}function ke(e,t,i){var n=e;return ds(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=Vr({},t,{uri:e}),n.callback=i,n}function Se(e,t,i){return Ce(t=ke(e,t,i))}function Ce(e){function t(e){return clearTimeout(a),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,m)}function i(){if(!r){var t;clearTimeout(a),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=m,n=null;return 0!==t?(i={body:function(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:c,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(i.headers=ps(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,i,i.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var n,r,a,s=!1,o=function(t,i,n){s||(s=!0,e.callback(t,i,n))},l=e.xhr||null,u=(l=l||(e.cors||e.useXDR?new Se.XDomainRequest:new Se.XMLHttpRequest)).url=e.uri||e.url,c=l.method=e.method||"GET",d=e.body||e.data,h=l.headers=e.headers||{},p=!!e.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:l};if("json"in e&&!1!==e.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(i,0)},l.onload=i,l.onerror=t,l.onprogress=function(){},l.onabort=function(){r=!0},l.ontimeout=t,l.open(c,u,!p,e.username,e.password),p||(l.withCredentials=!!e.withCredentials),!p&&0<e.timeout&&(a=setTimeout(function(){if(!r){r=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},e.timeout)),l.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&l.setRequestHeader(n,h[n]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(d||null),l}function Ee(e,t){var i=new Or.WebVTT.Parser(Or,Or.vttjs,Or.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(Or.console&&Or.console.groupCollapsed&&Or.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return Fr.error(e)}),Or.console&&Or.console.groupEnd&&Or.console.groupEnd()),i.flush()}function xe(e,t){var i={uri:e},n=we(e);n&&(i.cors=n);var r="use-credentials"===t.tech_.crossOrigin();r&&(i.withCredentials=r),fs(i,Q(this,function(e,i,n){if(e)return Fr.error(e,i);t.loaded_=!0,"function"!=typeof Or.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return Ee(n,t);Fr.error("vttjs failed to load, stopping trying to process "+t.src)}):Ee(n,t)}))}function Ae(){}function Pe(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Ie(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function Le(){this.values=ks(null)}function De(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i);2===s.length&&t(s[0],s[1])}}function Oe(e,t,i){function n(){var t=Ie(e);if(null===t)throw new Pe(Pe.Errors.BadTimeStamp,"Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}var a=e;if(r(),t.startTime=n(),r(),"-->"!==e.substr(0,3))throw new Pe(Pe.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+a);e=e.substr(3),r(),t.endTime=n(),r(),function(e,t){var n=new Le;De(e,function(e,t){switch(e){case"region":for(var r=i.length-1;0<=r;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(e){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(e){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(e){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}function je(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return e=i[1]?i[1]:i[2],t=t.substr(e.length),e}function n(t,i){var n=Cs[t];if(!n)return null;var r=e.document.createElement(n),a=xs[t];return a&&i&&(r[a]=i.trim()),r}for(var r,a,s,o,l=e.document.createElement("div"),u=l,c=[];null!==(r=i());)if("<"!==r[0])u.appendChild(e.document.createTextNode((a=r,Ss.innerHTML=a,a=Ss.textContent,Ss.textContent="",a)));else{if("/"===r[1]){c.length&&c[c.length-1]===r.substr(2).replace(">","")&&(c.pop(),u=u.parentNode);continue}var d,h=Ie(r.substr(1,r.length-2));if(h){d=e.document.createProcessingInstruction("timestamp",h),u.appendChild(d);continue}var p=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=n(p[1],p[3])))continue;if(s=u,As[(o=d).localName]&&As[o.localName]!==s.localName)continue;if(p[2]){var f=p[2].split(".");f.forEach(function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;if(Es.hasOwnProperty(i)){var n=t?"background-color":"color",r=Es[i];d.style[n]=r}}),d.className=f.join(" ")}c.push(p[1]),u.appendChild(d),u=d}return l}function Me(e){for(var t=0;t<Ps.length;t++){var i=Ps[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function Re(){}function Ne(e,t,i){Re.call(this),this.cue=t,this.cueDiv=je(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){function t(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}function i(e){if(!e||!e.length)return null;var n=e.pop(),r=n.textContent||n.innerText;if(r){var a=r.match(/^.*(\n|\r)/);return a?a[e.length=0]:r}return"ruby"===n.tagName?i(e):n.childNodes?(t(e,n),i(e)):void 0}var n=[],r="";if(!e||!e.childNodes)return"ltr";for(t(n,e);r=i(n);)for(var a=0;a<r.length;a++)if(Me(r.charCodeAt(a)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Ue(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function Fe(e,t,i,n){var r=new Ue(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),d=i[l]+u,h=o[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),s<0&&(c+=""===a.vertical?i.height:i.width,o=o.reverse()),r.move(h,c)}else{var p=r.lineHeight/i.height*100;switch(a.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new Ue(t)}var f=function(e,t){for(var r,a=new Ue(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(i,t[o])||e.within(i)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(i))return e;var l=e.intersectPercentage(i);l<s&&(r=new Ue(e),s=l),e=new Ue(a)}return r||a}(r,o);t.move(f.toCSSCompatValues(i))}function Be(){}function Ve(e){return"string"==typeof e&&!!Ds[e.toLowerCase()]&&e.toLowerCase()}function qe(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,s=t,o=i,l=null,u="",c=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Ls[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Ve(e);t&&(h=t,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Ve(e);t&&(f=t,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Ve(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}function He(e){return"number"==typeof e&&0<=e&&e<=100}function ze(){var e=100,t=3,i=0,n=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!He(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!He(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!He(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!He(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!He(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&!!js[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t||(s=t)}}})}function We(e,t,i){e.setTimeout(function(){return function r(e,t,i,a,s,o){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===o&&(o=!1);var l=t,u=l[0],c=l.slice(1);if("string"==typeof u)r(e,Ns[u],i,a,s,o);else if(u){var d=Xe(a,u);if(!d.setSource)return s.push(d),r(e,c,i,a,s,o);d.setSource(n({},e),function(t,n){if(t)return r(e,c,i,a,s,o);s.push(d),r(n,e.type===n.type?c:Ns[n.type],i,a,s,o)})}else c.length?r(e,c,i,a,s,o):o?i(e,s):r(e,Ns["*"],i,a,s,!0)}(t,Ns[t.type],i,e)},1)}function $e(e,t,i,n){void 0===n&&(n=null);var r="call"+oe(i),a=e.reduce(Ge(r),n),s=a===Fs,o=s?null:t[i](a);return function(e,t,i,n){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](n,i)}}(e,i,o,s),o}function Ge(e){return function(t,i){return t===Fs?Fs:i[e]?i[e](t):t}}function Xe(e,t){var i=Us[e.id()],n=null;if(null==i)return n=t(e),Us[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],s=a[0],o=a[1];s===t&&(n=o)}return null===n&&(n=t(e),i.push([t,n])),n}function Qe(e){void 0===e&&(e="");var t=Te(e);return Hs[t.toLowerCase()]||""}function Ke(e){if(!e.type){var t=Qe(e.src);t&&(e.type=t)}return e}function Ye(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Je(e,t,i){try{e.style[t]=i}catch(e){return}}function Ze(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(r=n=i="-"),(r=0<r||0<s?r+":":"")+(n=((r||10<=a)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)}function et(e,t){return void 0===t&&(t=e),to(e,t)}function tt(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))}function it(e,t){return tt(e/t*100,0,100).toFixed(2)+"%"}function nt(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function rt(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var s=i[a].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)}function at(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function st(e){var t=e.el();if(!t.resetSourceWatch_){var i={},n=at([e.el(),Or.HTMLMediaElement.prototype,Or.Element.prototype,hl],"innerHTML"),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i.apply(t,r);return rt(e),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(i[e]=t[e],t[e]=r(i[e]))}),Object.defineProperty(t,"innerHTML",le(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(e){t[e]=i[e]}),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}}function ot(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=at([e.el(),Or.HTMLMediaElement.prototype,pl],"src"),n=t.setAttribute,r=t.load;Object.defineProperty(t,"src",le(i,{set:function(n){var r=i.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(i,r){var a=n.call(t,i,r);return/src/i.test(i)&&e.triggerSourceset(t.src),a},t.load=function(){var i=r.call(t);return rt(e)||(e.triggerSourceset(""),st(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):rt(e)||st(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}function lt(e,t,i,n){function r(i){return Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0})}void 0===n&&(n=!0);var a={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return n&&(a.set=r),Object.defineProperty(e,t,a)}function ut(e){return xl.hasOwnProperty(e)}function ct(e){return ut(e)?xl[e]:void 0}function dt(e,t){e[El]=e[El]||{},e[El][t]=!0}function ht(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)}function pt(e,t){return t.prototype.name=e,function(){ht(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Sl(t,[this].concat(n));return this[e]=function(){return a},ht(this,a.getEventHash()),a}}function ft(e,t,i){var n=ft.getPlayer(e);if(n)return t&&Fr.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var a="string"==typeof e?zr("#"+Il(e)):e;if(!c(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||Fr.warn("The element supplied is not included in the DOM"),t=t||{},ft.hooks("beforesetup").forEach(function(e){var i=e(a,le(t));r(i)&&!Array.isArray(i)?t=le(t,i):Fr.error("please return an object in beforesetup hooks")});var s=ca.getComponent("Player");return n=new s(a,t,i),ft.hooks("setup").forEach(function(e){return e(n)}),n}function mt(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function gt(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n}function vt(){}function yt(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function _t(e,t,i,n,r,a){for(var s,o=++t,l=eu;;){var u=e.charAt(o);switch(u){case"=":if(l===tu)s=e.slice(t,o),l=nu;else{if(l!==iu)throw new Error("attribute equal must after attrName");l=nu}break;case"'":case'"':if(l===nu||l===tu){if(l===tu&&(a.warning('attribute value must after "="'),s=e.slice(t,o)),t=o+1,!(0<(o=e.indexOf(u,t))))throw new Error("attribute value no end '"+u+"' match");c=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,c,t-1),l=au}else{if(l!=ru)throw new Error('attribute value must after "="');c=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,c,t),a.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=o+1,l=au}break;case"/":switch(l){case eu:i.setTagName(e.slice(t,o));case au:case su:case ou:l=ou,i.closed=!0;case ru:case tu:case iu:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),l==eu&&i.setTagName(e.slice(t,o)),o;case">":switch(l){case eu:i.setTagName(e.slice(t,o));case au:case su:case ou:break;case ru:case tu:"/"===(c=e.slice(t,o)).slice(-1)&&(i.closed=!0,c=c.slice(0,-1));case iu:l===iu&&(c=s),l==ru?(a.warning('attribute "'+c+'" missed quot(")!!'),i.add(s,c.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===n[""]&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),i.add(c,c,t));break;case nu:throw new Error("attribute value missed!!")}return o;case"\x80":u=" ";default:if(u<=" ")switch(l){case eu:i.setTagName(e.slice(t,o)),l=su;break;case tu:s=e.slice(t,o),l=iu;break;case ru:var c=e.slice(t,o).replace(/&#?\w+;/g,r);a.warning('attribute "'+c+'" missed quot(")!!'),i.add(s,c,t);case au:l=su}else switch(l){case iu:i.tagName,"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),i.add(s,s,t),t=o,l=tu;break;case au:a.warning('attribute space is required"'+s+'"!!');case su:l=tu,t=o;break;case nu:l=ru,t=o;break;case ou:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function bt(e,t,i){for(var n=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,l=s.value;if(0<(h=o.indexOf(":")))var u=s.prefix=o.slice(0,h),c=o.slice(h+1),d="xmlns"===u&&c;else u=null,d="xmlns"===(c=o)&&"";s.localName=c,!1!==d&&(null==r&&(r={},kt(i,i={})),i[d]=r[d]=l,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,l))}for(a=e.length;a--;)(u=(s=e[a]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=i[u||""]));var h;c=0<(h=n.indexOf(":"))?(u=e.prefix=n.slice(0,h),e.localName=n.slice(h+1)):(u=null,e.localName=n);var p=e.uri=i[u||""];if(t.startElement(p,c,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,!0;if(t.endElement(p,c,n),r)for(u in r)t.endPrefixMapping(u)}function Tt(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(i)||(s=s.replace(/&#?\w+;/g,n)),r.characters(s,0,s.length),a}return t+1}function wt(e,t,i,n){var r=n[i];return null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function kt(e,t){for(var i in e)t[i]=e[i]}function St(e,t,i,n){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(r=e.indexOf("-->",t+4))?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var a=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),s=a.length;if(1<s&&/!doctype/i.test(a[0][0])){var o=a[1][0],l=3<s&&/^public$/i.test(a[2][0])&&a[3][0],u=4<s&&a[4][0],c=a[s-1];return i.startDTD(o,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),i.endDTD(),c.index+c[0].length}}return-1}function Ct(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Et(){}function xt(e,t){return e.__proto__=t,e}function At(e,t){for(var i in e)t[i]=e[i]}function Pt(e,t){var i=e.prototype;if(Object.create){var n=Object.create(t.prototype);i.__proto__=n}if(!(i instanceof t)){var r=function(){};r.prototype=t.prototype,At(i,r=new r),e.prototype=i=r}i.constructor!=e&&(i.constructor=e)}function It(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,Su[e]),this.message=Su[e],Error.captureStackTrace&&Error.captureStackTrace(this,It);return i.code=e,t&&(this.message=this.message+": "+t),i}function Lt(){}function Dt(e,t){this._node=e,this._refresh=t,Ot(this)}function Ot(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);ui(e,"length",i.length),At(i,e),e._inc=t}}function jt(){}function Mt(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function Rt(e,t,i,n){if(n?t[Mt(t,n)]=i:t[t.length++]=i,e){var r=(i.ownerElement=e).ownerDocument;r&&(n&&Ht(r,e,n),function(e,t,i){r&&r._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(0,e,i))}}function Nt(e,t,i){var n=Mt(t,i);if(!(0<=n))throw It(Eu,new Error(e.tagName+"@"+i));for(var r=t.length-1;n<r;)t[n]=t[++n];if(t.length=r,e){var a=e.ownerDocument;a&&(Ht(a,e,i),i.ownerElement=null)}}function Ut(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Ft(){}function Bt(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function Vt(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(Vt(e,t))return!0}while(e=e.nextSibling)}function qt(){}function Ht(e,t,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete t._nsMap[i.prefix?i.localName:""]}function zt(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,a=0;r;)r=(n[a++]=r).nextSibling;n.length=a}}}function Wt(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,zt(e.ownerDocument,e),t}function $t(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===Tu){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var s=i?i.previousSibling:e.lastChild;for(r.previousSibling=s,a.nextSibling=i,s?s.nextSibling=r:e.firstChild=r,null==i?e.lastChild=a:i.previousSibling=a;r.parentNode=e,r!==a&&(r=r.nextSibling););return zt(e.ownerDocument||e,e),t.nodeType==Tu&&(t.firstChild=t.lastChild=null),t}function Gt(){this._nsMap={}}function Xt(){}function Qt(){}function Kt(){}function Yt(){}function Jt(){}function Zt(){}function ei(){}function ti(){}function ii(){}function ni(){}function ri(){}function ai(){}function si(e,t){var i=[],n=9==this.nodeType?this.documentElement:this,r=n.prefix,a=n.namespaceURI;if(a&&null==r&&null==(r=n.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return li(this,i,e,t,s),i.join("")}function oi(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!n&&!r)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var a=i.length;a--;){var s=i[a];if(s.prefix==n)return s.namespace!=r}return!0}function li(e,t,i,n,r){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case du:r=r||[];var a=e.attributes,s=a.length,o=e.firstChild,l=e.tagName;i=uu===e.namespaceURI||i,t.push("<",l);for(var u=0;u<s;u++)"xmlns"==(c=a.item(u)).prefix?r.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&r.push({prefix:"",namespace:c.value});for(u=0;u<s;u++){var c;if(oi(c=a.item(u),0,r)){var d=c.prefix||"",h=c.namespaceURI,p=d?" xmlns:"+d:" xmlns";t.push(p,'="',h,'"'),r.push({prefix:d,namespace:h})}li(c,t,i,n,r)}if(oi(e,0,r)&&(d=e.prefix||"",h=e.namespaceURI,p=d?" xmlns:"+d:" xmlns",t.push(p,'="',h,'"'),r.push({prefix:d,namespace:h})),o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),i&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):li(o,t,i,n,r),o=o.nextSibling;else for(;o;)li(o,t,i,n,r),o=o.nextSibling;t.push("</",l,">")}else t.push("/>");return;case _u:case Tu:for(o=e.firstChild;o;)li(o,t,i,n,r),o=o.nextSibling;return;case hu:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,Bt),'"');case pu:return t.push(e.data.replace(/[<&]/g,Bt));case fu:return t.push("<![CDATA[",e.data,"]]>");case yu:return t.push("<!--",e.data,"-->");case bu:var f=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),f)t.push(' PUBLIC "',f),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var g=e.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case vu:return t.push("<?",e.target," ",e.data,"?>");case mu:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ui(e,t,i){e[t]=i}function ci(e){return!!e&&"object"==typeof e}function di(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(e,t){return"object"!=typeof t||Object.keys(t).forEach(function(i){Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):ci(e[i])&&ci(t[i])?e[i]=di(e[i],t[i]):e[i]=t[i]}),e},{})}function hi(e){return e.reduce(function(e,t){return e.concat(t)},[])}function pi(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}function fi(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,a=e.range,s=void 0===a?"":a,o=e.indexRange,l=void 0===o?"":o,u={uri:r,resolvedUri:Vl(i||"",r)};if(s||l){var c=(s||l).split("-"),d=parseInt(c[0],10),h=parseInt(c[1],10);u.byterange={length:h-d+1,offset:d}}return u}function mi(e){var t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=Nu[i](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(o.start,o.end).map(function(e){return function(t,i){var n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/a,timeline:s,time:i*n}}}(e));if("static"===i){var u=l.length-1;l[u].duration=s-n/a*u}return l}function gi(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.duration;if(!t)throw new Error(ju);var l=fi({baseUrl:t,source:n.sourceURL,range:n.range}),u=fi({baseUrl:t,source:t,indexRange:s});if(u.map=l,o){var c=mi(e);c.length&&(u.duration=c[0].duration,u.timeline=c[0].timeline)}else r&&(u.duration=r,u.timeline=0);return u.number=0,[u]}function vi(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),c=[],d=o+t.firstOffset,h=0;h<u.length;h++){var p=t.references[h],f=p.referencedSize,m=gi({baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:p.subsegmentDuration,sourceDuration:r,indexRange:d+"-"+(d+f-1)})[0];n&&(m.map=n),c.push(m),d+=f}return e.segments=c,e}function yi(e){return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){return e.discontinuityStarts=function(e,t){return e.reduce(function(e,i,n){return i[t]&&e.push(n),e},[])}(e.segments,"discontinuity"),e});var t}function _i(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e){var n=e[i];if(n.sidx){var r=n.sidx.uri+"-"+(o=(s=n.sidx.byterange).offset+s.length-1,s.offset+"-"+o),a=t[r]&&t[r].sidx;n.sidx&&a&&vi(n,a,n.sidx.resolvedUri)}}var s,o;return e}function bi(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a}function Ti(e,t,i){var n;if(void 0===i&&(i={}),!e.length)return{};var r=e[0].attributes,a=r.sourceDuration,s=r.type,o=void 0===s?"static":s,l=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,c=yi(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType})).map(bi),d=yi(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType})),h=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},
n.SUBTITLES={},n),uri:"",duration:a,playlists:_i(c,i)};return 0<=u&&(p.minimumUpdatePeriod=1e3*u),t&&(p.locations=t),"dynamic"===o&&(p.suggestedPresentationDelay=l),d.length&&(p.mediaGroups.AUDIO.audio=function(e,t){var i;void 0===t&&(t={});var n=d.reduce(function(e,n){var r=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",s="main";if(a){var o=r?" ("+r+")":"";s=n.attributes.lang+o}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth||(e[s]={language:a,autoselect:!0,"default":"main"===r,playlists:_i([function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a}(n)],t),uri:""},void 0===i&&"main"===r&&((i=n)["default"]=!0)),e},{});return i||(n[Object.keys(n)[0]]["default"]=!0),n}(0,i)),h.length&&(p.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),h.reduce(function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,"default":!1,autoselect:!1,playlists:_i([function(e){var t,i=e.attributes,n=e.segments;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var r=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(r.CODECS=i.codecs),{attributes:r,uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}}(i)],t),uri:""}),e},{})}(0,i)),p}function wi(e,t){for(var i,n,r,a,s,o,l,u,c,d,h,p,f=e.type,m=void 0===f?"static":f,g=e.minimumUpdatePeriod,v=void 0===g?0:g,y=e.media,_=void 0===y?"":y,b=e.sourceDuration,T=e.timescale,w=void 0===T?1:T,k=e.startNumber,S=void 0===k?1:k,C=e.periodIndex,E=[],x=-1,A=0;A<t.length;A++){var P=t[A],I=P.d,L=P.r||0,D=P.t||0;x<0&&(x=D),D&&x<D&&(x=D);var O=void 0;if(L<0){var j=A+1;O=j===t.length?"dynamic"===m&&0<v&&0<_.indexOf("$Number$")?(n=x,r=I,a=(i=e).NOW,s=i.clientOffset,o=i.availabilityStartTime,u=void 0===(l=i.timescale)?1:l,d=void 0===(c=i.start)?0:c,p=(a+s)/1e3+(void 0===(h=i.minimumUpdatePeriod)?0:h)-(o+d),Math.ceil((p*u-n)/r)):(b*w-x)/I:(t[j].t-x)/I}else O=L+1;for(var M=S+E.length+O,R=S+E.length;R<M;)E.push({number:R,duration:I/w,time:x,timeline:C}),x+=I,R++}return E}function ki(e,t){return e.replace(Uu,(i=t,function(e,t,n,r){if("$$"===e)return"$";if("undefined"==typeof i[t])return e;var a=""+i[t];return"RepresentationID"===t?a:(r=n?parseInt(r,10):1)<=a.length?a:new Array(r-a.length+1).join("0")+a}));var i}function Si(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,a=fi({baseUrl:e.baseUrl,source:ki(r.sourceURL,i),range:r.range});return function(e,t){return e.duration||t?e.duration?mi(e):wi(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map(function(t){i.Number=t.number,i.Time=t.time;var n=ki(e.media||"",i);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:Vl(e.baseUrl||"",n),map:a,number:t.number}})}function Ci(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error(Mu);var a,s=r.map(function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=fi({baseUrl:i,source:r.sourceURL,range:r.range}),s=fi({baseUrl:i,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)});return i&&(a=mi(e)),t&&(a=wi(e,t)),a.map(function(e,t){if(s[t]){var i=s[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})}function Ei(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Si,t=di(n,r.template)):r.base?(i=gi,t=di(n,r.base)):r.list&&(i=Ci,t=di(n,r.list));var a={attributes:n};if(!i)return a;var s=i(t,r.timeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,c=void 0===u?1:u;t.duration=l/c}else s.length?t.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a}function xi(e,t){return pi(e.childNodes).filter(function(e){return e.tagName===t})}function Ai(e){return e.textContent.trim()}function Pi(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)}function Ii(e){return e&&e.attributes?pi(e.attributes).reduce(function(e,t){var i=Fu[t.name]||Fu.DEFAULT;return e[t.name]=i(t.value),e},{}):{}}function Li(e,t){return t.length?hi(e.map(function(e){return t.map(function(t){return Vl(e,Ai(t))})})):e}function Di(e){var t=xi(e,"SegmentTemplate")[0],i=xi(e,"SegmentList")[0],n=i&&xi(i,"SegmentURL").map(function(e){return di({tag:"SegmentURL"},Ii(e))}),r=xi(e,"SegmentBase")[0],a=i||t,s=a&&xi(a,"SegmentTimeline")[0],o=i||r||t,l=o&&xi(o,"Initialization")[0],u=t&&Ii(t);u&&l?u.initialization=l&&Ii(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&xi(s,"S").map(function(e){return Ii(e)}),list:i&&di(Ii(i),{segmentUrls:n,initialization:Ii(l)}),base:r&&di(Ii(r),{initialization:Ii(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c}function Oi(e,t,i){return function(n){var r=Ii(n),a=Li(t,xi(n,"BaseURL")),s={role:Ii(xi(n,"Role")[0])},o=di(e,r,s),l=function(e){return e.reduce(function(e,t){var i=Ii(t),n=Bu[i.schemeIdUri];if(n){e[n]={attributes:i};var r=xi(t,"cenc:pssh")[0];if(r){var a=Ai(r),s=a&&Wl(a);e[n].pssh=s}}return e},{})}(xi(n,"ContentProtection"));Object.keys(l).length&&(o=di(o,{contentProtection:l}));var u=Di(n),c=xi(n,"Representation"),d=di(i,u);return hi(c.map(function(e,t,i){return function(n){var r=xi(n,"BaseURL"),a=Li(t,r),s=di(e,Ii(n)),o=Di(n);return a.map(function(e){return{segmentInfo:di(i,o),attributes:di(s,{baseUrl:e})}})}}(o,a,d)))}}function ji(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,a=i.NOW,s=void 0===a?Date.now():a,o=i.clientOffset,l=void 0===o?0:o,u=xi(e,"Period");if(!u.length)throw new Error(Lu);var c=xi(e,"Location"),d=Ii(e),h=Li([r],xi(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=l,c.length&&(d.locations=c.map(Ai)),{locations:d.locations,representationInfo:hi(u.map(function(e,t){return function(i,n){var r=Li(t,xi(i,"BaseURL")),a=Ii(i),s=parseInt(a.id,10),o=Ul.isNaN(s)?n:s,l=di(e,{periodIndex:o}),u=xi(i,"AdaptationSet"),c=Di(i);return hi(u.map(Oi(l,r,c)))}}(d,h)))}}function Mi(e){if(""===e)throw new Error(Du);var t,i,n=new Iu;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error(Ou);return i}function Ri(e,t){void 0===t&&(t={});var i=ji(Mi(e),t);return Ti(i.representationInfo.map(Ei),i.locations,t.sidxMapping)}function Ni(e){return function(e){var t=xi(e,"UTCTiming")[0];if(!t)return null;var i=Ii(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ru)}return i}(Mi(e))}function Ui(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}}function Fi(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}function Bi(e){var t=31&e[1];return(t<<=8)|e[2]}function Vi(e){return!!(64&e[1])}function qi(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function Hi(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function zi(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=0<=i?i:0,(16&e[t+5])>>4?i+20:i+10}function Wi(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}function $i(e,t,i){for(var n,r,a,s,o=0,l=cc,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(n=e.subarray(o,l),oc.ts.parseType(n,t.pid)){case"pes":r=oc.ts.parsePesType(n,t.table),a=oc.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=oc.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o+=cc,l+=cc}for(o=(l=e.byteLength)-cc,u=!1;0<=o;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(n=e.subarray(o,l),oc.ts.parseType(n,t.pid)){case"pes":r=oc.ts.parsePesType(n,t.table),a=oc.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=oc.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o-=cc,l-=cc}}function Gi(e,t,i){for(var n,r,a,s,o,l,u,c=0,d=cc,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(n=e.subarray(c,d),oc.ts.parseType(n,t.pid)){case"pes":if(r=oc.ts.parsePesType(n,t.table),a=oc.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!h&&(s=oc.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0),!i.firstKeyFrame)){if(a&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),o.set(u,l),l+=u.byteLength;if(oc.ts.videoPacketContainsKeyFrame(o)){var f=oc.ts.parsePesTime(o);f&&(i.firstKeyFrame=f,i.firstKeyFrame.type="video")}p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;c+=cc,d+=cc}for(c=(d=e.byteLength)-cc,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(n=e.subarray(c,d),oc.ts.parseType(n,t.pid)){case"pes":r=oc.ts.parsePesType(n,t.table),a=oc.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=oc.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0)}if(h)break;c-=cc,d-=cc}}function Xi(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=cc;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),oc.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=oc.ts.parsePat(i));break;case"pmt":t.table||(t.table=oc.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=cc,r+=cc}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case Ju:i.video=[],Gi(e,t,i),0===i.video.length&&delete i.video;break;case Zu:i.audio=[],$i(e,t,i),0===i.audio.length&&delete i.audio}return i}function Qi(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t}function Ki(e,t){return e+"-"+t}function Yi(e){var t=e.manifestString,i=e.customTagParsers,n=void 0===i?[]:i,r=e.customTagMappers,a=void 0===r?[]:r,s=new Xl;return n.forEach(function(e){return s.addParser(e)}),a.forEach(function(e){return s.addTagMapper(e)}),s.push(t),s.end(),s.manifest}function Ji(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var a=e.mediaGroups[i][n][r];t(a,i,n,r)}})}function Zi(e){var t=e.playlist,i=e.uri,n=e.id;t.id=n,i&&(t.uri=i),t.attributes=t.attributes||{}}function en(e,t){e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var n="placeholder-uri-"+i;e.playlists[i].uri=n}Ji(e,function(t,i,n,r){if(t.playlists&&t.playlists.length&&!t.playlists[0].uri){var a="placeholder-uri-"+i+"-"+n+"-"+r,s=Ki(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}}),function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];Zi({playlist:i,id:Ki(t,i.uri)}),i.resolvedUri=Dc(e.uri,i.uri),e.playlists[i.id]=i,(e.playlists[i.uri]=i).attributes.BANDWIDTH||Oc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Ji(e,function(t){t.uri&&(t.resolvedUri=Dc(e.uri,t.uri))})}(e)}function tn(e,t){e.resolvedUri||(e.resolvedUri=Dc(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Dc(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Dc(t,e.map.uri))}function nn(e,t){var i=jc(e,{}),n=i.playlists[t.id];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=jc(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=jc(e[a],n[a-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){tn(e,r.resolvedUri)});for(var a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,i}function rn(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)}function an(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return ft.createTimeRanges(n)}function sn(e,t){return an(e,function(e,i){return e-.1<=t&&t<=i+.1})}function on(e,t){return an(e,function(e){return t<=e-Rc})}function ln(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")}function un(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function cn(e,t,i){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if("undefined"!=typeof(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,"undefined"!=typeof r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t);if(n.precise)return n.result;var r=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!=typeof(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:n.result+i}function dn(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ul.Infinity}return cn(e,t,i)}function hn(e,t,i){var n=0;if(i<t){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var s=t;s<i;s++)n+=e.segments[s].duration;return n}function pn(e,t){if(!e.segments.length)return 0;var i=e.segments.length,n=e.segments[i-1].duration||e.targetDuration,r="number"==typeof t?t:n+2*e.targetDuration;if(0===r)return i;for(var a=0;i--&&!(r<=(a+=e.segments[i].duration)););return Math.max(0,i)}function fn(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return dn(e);if(null===t)return null;t=t||0;var r=i?pn(e,n):e.segments.length;return cn(e,e.mediaSequence+r,t)}function mn(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function gn(e){return e.excludeUntil&&e.excludeUntil===1/0}function vn(e){var t=mn(e);return!e.disabled&&!t}function yn(e,t){return t.attributes&&t.attributes[e]}function _n(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!vn(e)&&(e.attributes.BANDWIDTH||0)<i}).length}function bn(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),n(t,e)}function Tn(){return function e(t,i){t=Bc({timeout:45e3},t);var n=e.beforeRequest||ft.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var a=Fc(t,function(e,t){return bn(a,e,t,i)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}}function wn(e){var t={};return e.byterange&&(t.Range=function(e){var t=e.offset+e.length-1;return"bytes="+e.offset+"-"+t}(e.byterange)),t}function kn(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")}function Sn(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Cn(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t}function En(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function xn(e){return e.resolvedUri}function An(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(kn).join("")+" "+t.slice(16*n,16*n+16).map(Sn).join("")+"\n";return i}function Pn(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:n},o=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)}function In(e){var t=e.programTime,i=e.playlist,n=e.retryCount,r=void 0===n?2:n,a=e.seekTo,s=e.pauseAfterSeek,o=void 0===s||s,l=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!i||!a)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return u({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var c=function(e,t){var i;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var a=t.segments[t.segments.length-1],s=a.dateTimeObject,o=a.videoTimingInfo?function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds}(a.videoTimingInfo):a.duration+.25*a.duration;return new Date(s.getTime()+1e3*o)<i?null:(s<i&&(n=a),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Uc.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(t,i);if(!c)return u({message:t+" was not found in the stream"});var d=c.segment,h=function(e,t){var i,n;try{i=new Date(e),n=new Date(t)}catch(e){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?u({message:t+" is not buffered yet. Try again"}):(a(c.estimatedStart+h),void l.one("seeked",function(){In({programTime:t,playlist:i,retryCount:r-1,seekTo:a,pauseAfterSeek:o,tech:l,callback:u})}));var p=d.start+h;l.one("seeked",function(){return u(null,l.currentTime())}),o&&l.pause(),a(p)}function Ln(e,t){if(4===e.readyState)return t()}function Dn(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t}function On(e,t){var i,n,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Dn(s);if(!t[o])break;i=t[o].sidxInfo,n=s,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=t[o])}}return r}function jn(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer}function Mn(e){var t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m={isPartial:a,buffer:[]};if(t.onmessage=function(e){Tc&&("data"===e.data.action&&function(e,t,i){var n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,l=n.metadata,u=n.videoFrameDtsTime,c=n.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:l});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==u&&(h.videoFrameDtsTime=u),void 0!==c&&(h.videoFramePtsTime=c),i(h)}(e,m,o),"trackinfo"===e.data.action&&l(e.data.trackInfo),"gopInfo"===e.data.action&&function(e){m.gopInfo=e.data.gopInfo}(e),"audioTimingInfo"===e.data.action&&u(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&c(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&d(e.data.videoSegmentTimingInfo),"id3Frame"===e.data.action&&h([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&p(e.data.caption),"transmuxed"===e.data.type&&(t.onmessage=null,function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({transmuxedData:m,callback:f}),$c()))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),i.byteLength){var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:g,byteOffset:v,byteLength:i.byteLength},[g])}t.postMessage({action:a?"partialFlush":"flush"})}function Rn(e,t){e.postMessage({action:t}),$c()}function Nn(e,t){Tc?Wc.push(Rn.bind(null,t,e)):Rn(t,Tc=e)}function Un(e){Tc?Wc.push(e):Mn(Tc=e)}function Fn(e){e.forEach(function(e){e.abort()})}function Bn(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Yc,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Jc,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Kc,xhr:t}:null}function Vn(e){var t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,c=e.doneFn,d=t.map&&t.map.tracks||{},h=Boolean(d.audio&&d.video),p=a.bind(null,t,"audio","start"),f=a.bind(null,t,"audio","end"),m=a.bind(null,t,"video","start"),g=a.bind(null,t,"video","end");if(!n&&!t.lastReachedChar){var v=function(e,t){var i=dc(e,t*ac);if(!i)return null;var n={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1};return n.hasVideo&&(n.videoStart=i.video[0].ptsTime),n.hasAudio&&(n.audioStart=i.audio[0].ptsTime),n}(i,t.baseStartTime);v&&(r(t,{hasAudio:v.hasAudio,hasVideo:v.hasVideo,isMuxed:h}),r=null,v.hasAudio&&!h&&p(v.audioStart),v.hasVideo&&m(v.videoStart),m=p=null)}Un({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,isPartial:n,remux:h,onData:function(e){e.type="combined"===e.type?"video":e.type,u(t,e)},onTrackInfo:function(e){r&&(h&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){p&&"undefined"!=typeof e.start&&(p(e.start),p=null),f&&"undefined"!=typeof e.end&&f(e.end)},onVideoTimingInfo:function(e){m&&"undefined"!=typeof e.start&&(m(e.start),m=null),g&&"undefined"!=typeof e.end&&g(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onId3:function(e,i){o(t,e,i)},onCaptions:function(e){l(t,[e])},onDone:function(e){c&&!n&&(e.type="combined"===e.type?"video":e.type,c(null,t,e))}})}function qn(e){var t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,c=e.doneFn,d=new Uint8Array(i);if(Gu(d)){t.isFmp4=!0;var h=t.map.tracks,p={isFmp4:!0,hasVideo:!!h.video,hasAudio:!!h.audio};h.audio&&h.audio.codec&&"enca"!==h.audio.codec&&(p.audioCodec=h.audio.codec),h.video&&h.video.codec&&"encv"!==h.video.codec&&(p.videoCodec=h.video.codec),h.video&&h.audio&&(p.isMuxed=!0),r(t,p);var f=yc(t.map.timescales,d);p.hasAudio&&!p.isMuxed&&a(t,"audio","start",f),p.hasVideo&&a(t,"video","start",f);var m=function(e){u(t,{data:i,type:p.hasAudio&&!p.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),c(null,t,{})};if(!h.video||!i.byteLength||!t.transmuxer)return void m();var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;return t.transmuxer.addEventListener("message",function e(n){if("mp4Captions"===n.data.action){t.transmuxer.removeEventListener("message",e);var r=n.data.data;t.bytes=i=new Uint8Array(r,r.byteOffset||0,r.byteLength),m(n.data.captions)}}),void t.transmuxer.postMessage({action:"pushMp4Captions",timescales:t.map.timescales,trackIds:[h.video.id],data:g,byteOffset:v,byteLength:i.byteLength},[g])}if(t.transmuxer){if("undefined"==typeof t.container&&(t.container=Wu(d)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void c(null,t,{});Vn({segment:t,bytes:i,isPartial:n,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}else c(null,t,{})}function Hn(e){var t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.id3Fn,o=e.captionsFn,l=e.dataFn,u=e.doneFn,c=0,d=!1;return function(e,h){if(!d){if(e)return d=!0,Fn(t),u(e,h);if((c+=1)===t.length){if(h.endOfAllRequests=Date.now(),h.encryptedBytes)return function(e){var t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,c=e.doneFn;i.addEventListener("message",function d(e){if(e.data.source===n.requestId){i.removeEventListener("message",d);var t=e.data.decrypted;n.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),qn({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}}),t=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),i.postMessage(Cn({source:n.requestId,encrypted:n.encryptedBytes,key:t,iv:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({decryptionWorker:i,segment:h,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:l,doneFn:u});qn({segment:h,bytes:h.bytes,isPartial:!1,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:l,doneFn:u})}}}}function zn(e){var t=e.segment,i=e.progressFn,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.id3Fn,o=e.captionsFn,l=e.dataFn,u=e.handlePartialData;return function(e){var c=e.target;if(!c.aborted){if(u&&!t.key&&c.responseText&&8<=c.responseText.length){var d=jn(c.responseText.substring(t.lastReachedChar||0));!t.lastReachedChar&&Gu(new Uint8Array(d))||(t.lastReachedChar=c.responseText.length,qn({segment:t,bytes:d,isPartial:!0,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:l}))}return t.stats=ft.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}}}function Wn(e){var t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,r=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,c=e.id3Fn,d=e.captionsFn,h=e.dataFn,p=e.doneFn,f=e.handlePartialData,m=[],g=Hn({activeXhrs:m,decryptionWorker:n,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,dataFn:h,doneFn:p});if(r.key&&!r.key.bytes){var v=t(ft.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(i,n){var r=n.response,a=Bn(i,n);if(a)return t(a,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Kc,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(r,g));m.push(v)}if(r.map&&!r.map.bytes){var y=t(ft.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:wn(r.map)}),function(e){var t=e.segment,i=e.finishProcessingFn;return function(e,n){var r=n.response,a=Bn(e,n);if(a)return i(a,t);if(0===r.byteLength)return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:Kc,xhr:n},t);t.map.bytes=new Uint8Array(n.response);var s=Wu(t.map.bytes);return"mp4"!==s?i({status:n.status,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+n.uri,code:Kc,internal:!0,xhr:n},t):(_c(t.map.bytes).forEach(function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||"number"==typeof(t.map.tracks[e.type]=e).id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale)}),i(null,t))}}({segment:r,finishProcessingFn:g}));m.push(y)}var _=ft.mergeOptions(i,{uri:r.resolvedUri,responseType:"arraybuffer",headers:wn(r)});f&&(_.responseType="text",_.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")});var b=t(_,function(e){var t=e.segment,i=e.finishProcessingFn,n=e.responseType;return function(e,r){var a=r.response,s=Bn(e,r);if(s)return i(s,t);var o="arraybuffer"!==n&&r.responseText?jn(r.responseText.substring(t.lastReachedChar||0)):r.response;return 0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Kc,xhr:r},t):(t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),i(null,t))}}({segment:r,finishProcessingFn:g,responseType:_.responseType}));b.addEventListener("progress",zn({segment:r,progressFn:s,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,dataFn:h,handlePartialData:f})),m.push(b);var T={};return m.forEach(function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,i=e.abortFn;return function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}}({loadendState:T,abortFn:a}))}),function(){return Fn(m)}}function $n(e,t){return function(i){var n=this;if(!t)return new rd(e);if(rd&&!i){var r=Gn(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[ed]=new rd(r),function(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&nd.revokeObjectURL(e.objURL),i.call(e)}}}(this[ed],r),this[ed]}var a={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:a})})}};t.call(a),this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:n})})},this.isThisThread=!0}}function Gn(e){try{return nd.createObjectURL(new Blob([e],{type:td}))}catch(Dr){var t=new id;return t.append(e),nd.createObjectURL(t.getBlob(type))}}function Xn(e,t){var i=t.attributes||{}
;return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]}function Qn(e,t){var i=t.attributes||{},n=function(e){var t=e.attributes||{};if(t.CODECS)return Ic(t.CODECS)}(t)||{};if(Xn(e,t)&&!n.audio&&!function(e,t){if(!Xn(e,t))return!0;var i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1}(e,t)){var r=Cc(e,i.AUDIO);r&&(n.audio=r.audio)}var a={};return n.video&&(a.video=Lc(""+n.video.type+n.video.details)),n.audio&&(a.audio=Lc(""+n.audio.type+n.audio.details)),n.text&&(a.text=n.text.type),n.unknown&&(a.unknown=n.unknown),a}function Kn(e){return ft.log.debug?ft.log.debug.bind(ft,"VHS:",e+" >"):function(){}}function Yn(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}}function Jn(e,t){if(!e)return"";var i=Ul.getComputedStyle(e);return i?i[t]:""}function Zn(e,t){var i=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r})}function er(e,t){var i,n;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||Ul.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),i-(n||Ul.Number.MAX_VALUE)}function tr(e,t,i,n,r){if(e){var a={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},s=e.playlists.map(function(e){var t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes.BANDWIDTH||Ul.Number.MAX_VALUE,width:t,height:i,playlist:e}});Zn(s,function(e,t){return e.bandwidth-t.bandwidth});var o=(s=s.filter(function(e){return!Uc.isIncompatible(e.playlist)})).filter(function(e){return Uc.isEnabled(e.playlist)});o.length||(o=s.filter(function(e){return!Uc.isDisabled(e.playlist)}));var l=o.filter(function(e){return e.bandwidth*zc.BANDWIDTH_VARIANCE<t}),u=l[l.length-1],c=l.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===r){var d=c||o[0]||s[0];if(d&&d.playlist){var h="sortedPlaylistReps";return c&&(h="bandwidthBestRep"),o[0]&&(h="enabledPlaylistReps"),cd("choosing "+Yn(d)+" using "+h+" with options",a),d.playlist}return cd("could not choose a playlist with options",a),null}var p=l.filter(function(e){return e.width&&e.height});Zn(p,function(e,t){return e.width-t.width});var f=p.filter(function(e){return e.width===i&&e.height===n});u=f[f.length-1];var m,g,v,y=f.filter(function(e){return e.bandwidth===u.bandwidth})[0];y||(g=(m=p.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===m[0].width&&e.height===m[0].height}),u=g[g.length-1],v=g.filter(function(e){return e.bandwidth===u.bandwidth})[0]);var _=v||y||c||o[0]||s[0];if(_&&_.playlist){var b="sortedPlaylistReps";return v?b="resolutionPlusOneRep":y?b="resolutionBestRep":c?b="bandwidthBestRep":o[0]&&(b="enabledPlaylistReps"),cd("choosing "+Yn(_)+" using "+b+" with options",a),_.playlist}return cd("could not choose a playlist with options",a),null}}function ir(){var e=this.useDevicePixelRatio&&Ul.devicePixelRatio||1;return tr(this.playlists.master,this.systemBandwidth,parseInt(Jn(this.tech_.el(),"width"),10)*e,parseInt(Jn(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)}function nr(e){var t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,r=e.videoDuration;if(i){var a=Ul.WebKitDataCue||Ul.VTTCue,s=t.metadataTrack_;if(s&&(i.forEach(function(e){var t=e.cueTime+n;!("number"!=typeof t||Ul.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach(function(e){var i=new a(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return ft.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return ft.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return ft.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(i),s.addCue(i)})}),s.cues&&s.cues.length)){for(var o=s.cues,l=[],u=0;u<o.length;u++)o[u]&&l.push(o[u]);var c=l.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),d=Object.keys(c).sort(function(e,t){return Number(e)-Number(t)});d.forEach(function(e,t){var i=c[e],n=Number(d[t+1])||r;i.forEach(function(e){e.endTime=n})})}}}function rr(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)}function ar(e){return"number"==typeof e&&isFinite(e)}function sr(e){return e+"TimingInfo"}function or(e){var t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered;return e.overrideCheck||t!==i?t<i?n:r.length?r.end(r.length-1):n:null}function lr(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(i===n)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if("main"===r&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==n}return!1}function ur(e){var t=e.segmentDuration,i=e.maxDuration;return!!t&&Math.round(t)>i+Rc}function cr(e,t){if("hls"!==t)return null;var i=function(e,t){var i=e&&"number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:0,n=t&&"number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:0;return Math.max(i,n)}(e.audioTimingInfo,e.videoTimingInfo);if(!i)return null;var n=e.playlist.targetDuration,r=ur({segmentDuration:i,maxDuration:2*n}),a=ur({segmentDuration:i,maxDuration:n}),s="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||a?{severity:r?"warn":"info",message:s}:null}function dr(){}function hr(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function pr(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]}function fr(e,t){if(0!==t.queue.length){var i=0,n=t.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!pr(e,t)){if(n.type!==e){if(null===(i=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(e,t.queue)))return;n=t.queue[i]}t.queue.splice(i,1),n.action(e,t),n.doneFn?t.queuePending[e]=n:fr(e,t)}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),n.action(t),n.doneFn&&n.doneFn(),fr("audio",t),fr("video",t))}}function mr(e,t){var i=t[e+"Buffer"],n=hr(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)}function gr(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)}function vr(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({type:t,action:n,doneFn:r,name:a}),fr(t,i)}function yr(e,t){return function(){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}fr(e,t)}}function _r(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}function br(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}function Tr(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function wr(e,t){(t.activePlaylistLoader=e).load()}function kr(e){function t(){i.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})}["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Dd[t](t,e)});var i=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,a=e.vhs;["AUDIO","SUBTITLES"].forEach(function(t){var n,r,a,s;i[t].activeGroup=(a=t,s=e,function(e){var t=s.masterPlaylistLoader,i=s.mediaTypes[a].groups,n=t.media();if(!n)return null;var r=null;return n.attributes[a]&&(r=i[n.attributes[a]]),r=r||i.main,void 0===e?r:null===e?null:r.filter(function(t){return t.id===e.id})[0]||null}),i[t].activeTrack=Od[t](t,e),i[t].onGroupChanged=(n=t,r=e,function(){var e=r.segmentLoaders,t=e[n],i=e.main,a=r.mediaTypes[n],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;Tr(t,a),o&&(o.playlistLoader?(t.resyncLoader(),wr(o.playlistLoader,a)):l&&i.resetEverything())}),i[t].onGroupChanging=function(e,t){return function(){var i=t.segmentLoaders[e];i.abort(),i.pause()}}(t,e),i[t].onTrackChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;if(Tr(n,a),o){if("AUDIO"===e){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader&&(n.track&&n.track(s),n.resetEverything()),wr(o.playlistLoader,a)}}}(t,e)});var s=i.AUDIO.activeGroup();if(s){var o=(s.filter(function(e){return e["default"]})[0]||s[0]).id;i.AUDIO.tracks[o].enabled=!0,i.AUDIO.onTrackChanged()}for(var l in n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanging()})}),r.audioTracks().addEventListener("change",t),r.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),a.on("dispose",function(){r.audioTracks().removeEventListener("change",t),r.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),i.AUDIO.tracks)r.audioTracks().addTrack(i.AUDIO.tracks[l])}function Sr(e,t,i){var n=e.masterPlaylistController_,r=n[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(t.attributes.RESOLUTION){var a=t.attributes.RESOLUTION;this.width=a.width,this.height=a.height}this.bandwidth=t.attributes.BANDWIDTH,this.codecs=Qn(n.master(),t),this.playlist=t,this.id=i,this.enabled=function(e,t,i){return function(n){var r=e.master.playlists[t],a=gn(r),s=vn(r);return void 0===n?s:(n?delete r.disabled:r.disabled=!0,n===s||a||(i(),n?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),n)}}(e.playlists,t.id,r)}function Cr(e){!function t(e,i){function n(){l&&e.currentTime(l)}function r(t){null!=t&&(l=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",n),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function a(){return Date.now()-o<1e3*u.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):u.getSource&&"function"==typeof u.getSource?(o=Date.now(),u.getSource.call(e,r)):void ft.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function s(){e.off("loadedmetadata",n),e.off("error",a),e.off("dispose",s)}var o=0,l=0,u=ft.mergeOptions(Ud,i);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})}),e.on("error",a),e.on("dispose",s),e.reloadSourceOnError=function(i){s(),t(e,i)}}(this,e)}function Er(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})}function xr(e){var t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=function(e,t){return e.reduce(function(e,i){if(!i.contentProtection)return e;var n=t.reduce(function(e,t){var n=i.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e},{});return Object.keys(n).length&&e.push(n),e},[])}(n?r.concat([n]):r,Object.keys(i)),s=[],o=[];return a.forEach(function(e){o.push(new Promise(function(e){t.tech_.one("keysessioncreated",e)})),s.push(new Promise(function(i,n){t.eme.initializeMediaKeys({keySystems:e},function(e){e?n(e):i()})}))}),Promise.race([Promise.all(s),Promise.race(o)])}function Ar(e){var t=e.player,i=function(e,t,i){if(!e)return e;var n={video:t&&t.attributes&&t.attributes.CODECS,audio:i&&i.attributes&&i.attributes.CODECS};!n.audio&&n.video&&1<n.video.split(",").length&&n.video.split(",").forEach(function(e){e=e.trim(),xc(e)?n.audio=e:Ac(e)&&(n.video=e)});var r=n.video?'video/mp4;codecs="'+n.video+'"':null,a=n.audio?'audio/mp4;codecs="'+n.audio+'"':null,s={};for(var o in e)s[o]={audioContentType:a,videoContentType:r},t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(s[o].url=e[o]);return ft.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia);return!(!i||(t.currentSource().keySystems=i)&&!t.eme&&(ft.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}function Pr(){if(!Ul.localStorage)return null;var e=Ul.localStorage.getItem(Bd);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}var Ir,Lr="7.11.1",Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Or="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},jr={},Mr=void 0!==Dr?Dr:"undefined"!=typeof window?window:{},Rr="undefined"!=typeof document?document:Mr["__GLOBAL_DOCUMENT_CACHE@4"]||(Mr["__GLOBAL_DOCUMENT_CACHE@4"]=jr),Nr=[],Ur=function(e,t){return function(i,n,r){var a=t.levels[n],s=new RegExp("^("+a+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(e+":"),Nr){Nr.push([].concat(r));var o=Nr.length-1e3;Nr.splice(0,0<o?o:0)}if(Or.console){var l=Or.console[i];l||"debug"!==i||(l=Or.console.info||Or.console.log),l&&a&&s.test(i)&&l[Array.isArray(r)?"apply":"call"](Or.console,r)}}},Fr=function Hd(e){function t(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i("log",n,t)}var i,n="info";return i=Ur(e,t),t.createLogger=function(t){return Hd(e+": "+t)},t.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},t.level=function(e){if("string"==typeof e){if(!t.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');n=e}return n},(t.history=function(){return Nr?[].concat(Nr):[]}).filter=function(e){return(Nr||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},t.history.clear=function(){Nr&&(Nr.length=0)},t.history.disable=function(){null!==Nr&&(Nr.length=0,Nr=null)},t.history.enable=function(){null===Nr&&(Nr=[])},t.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("error",n,t)},t.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("warn",n,t)},t.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("debug",n,t)},t}("VIDEOJS"),Br=Fr.createLogger,Vr=t(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t}),qr=Object.prototype.toString,Hr=function(e){return r(e)?Object.keys(e):[]},zr=h("querySelector"),Wr=h("querySelectorAll"),$r=Object.freeze({__proto__:null,isReal:u,isEl:c,isInFrame:d,createEl:p,textContent:f,prependTo:m,hasClass:g,addClass:v,removeClass:y,toggleClass:_,setAttributes:b,getAttributes:T,getAttribute:w,setAttribute:k,removeAttribute:S,blockTextSelection:C,unblockTextSelection:E,getBoundingClientRect:x,findPosition:A,getPointerPosition:P,isTextNode:I,emptyEl:L,normalizeContent:D,appendContent:O,insertContent:j,isSingleLeftClick:M,$:zr,$$:Wr}),Gr=!1,Xr=function(){if(u()&&!1!==Ir.options.autoSetup){var e=Array.prototype.slice.call(Rr.getElementsByTagName("video")),t=Array.prototype.slice.call(Rr.getElementsByTagName("audio")),i=Array.prototype.slice.call(Rr.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,a=n.length;r<a;r++){var s=n[r];if(!s||!s.getAttribute){R(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Ir(s)}else Gr||R(1)}};u()&&("complete"===Rr.readyState?N():Or.addEventListener("load",N));var Qr,Kr=3;Or.WeakMap||(Qr=function(){function e(){this.vdata="vdata"+Math.floor(Or.performance&&Or.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var i=e[this.vdata]||B();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];Fr("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t["delete"]=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var Yr,Jr,Zr=Or.WeakMap?new WeakMap:new Qr,ea=function(){if("boolean"!=typeof Yr){Yr=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Yr=!0}});Or.addEventListener("test",null,e),Or.removeEventListener("test",null,e)}catch(e){}}return Yr},ta=["touchstart","touchmove"],ia=Object.freeze({__proto__:null,fixEvent:H,on:z,off:W,trigger:$,one:G,any:X});Y.prototype.allowedEvents_={},Y.prototype.addEventListener=Y.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},z(this,e,t),this.addEventListener=i},Y.prototype.removeEventListener=Y.prototype.off=function(e,t){W(this,e,t)},Y.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},G(this,e,t),this.addEventListener=i},Y.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},X(this,e,t),this.addEventListener=i},Y.prototype.dispatchEvent=Y.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=H(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),$(this,e)},Y.prototype.queueTrigger=function(e){var t=this;Jr=Jr||new Map;var i=e.type||e,n=Jr.get(this);n||(n=new Map,Jr.set(this,n));var r=n.get(i);n["delete"](i),Or.clearTimeout(r);var a=Or.setTimeout(function(){0===n.size&&(n=null,Jr["delete"](t)),t.trigger(e)},0);n.set(i,a)};var na=function(e){return e instanceof Y||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},ra={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=ie(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(ne(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,ne(this,"on","dispose",u),ne(s,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=ie(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)ne(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,ne(s,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=ie(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)ne(s,"any",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,ne(s,"any",o,u)}},off:function(e,t,i){if(!e||J(e))W(this.eventBusEl_,e,t);else{var n=e,r=t;Z(n),ee(r),te(i),i=Q(this,i),this.off("dispose",i),n.nodeName?(W(n,r,i),W(n,"dispose",i)):na(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){return $(this.eventBusEl_,e,t)}},aa={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),i(e,function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e}),t&&na(this)&&this.trigger({changes:t,type:"statechanged"}),t}},sa=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t["delete"]=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},e}(),oa=Or.Map?Or.Map:sa,la=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t["delete"]=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}(),ua=Or.Set?Or.Set:la,ca=function(){function e(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=le({},this.options_),t=this.options_=le(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+B()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(re(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ae(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ua,this.setIntervalIds_=new ua,this.rafIds_=new ua,this.namedRafs_=new oa,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Zr.has(this.el_)&&Zr["delete"](this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=le(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,i){return p(e,t,i)},t.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],s=n&&n.split("-")[0],o=r&&r[s],l=i;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var n=t[i-1],r=n;return void 0===n&&(r=e),r})),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.reduce(function(e,t){return e.concat(t)},[]);for(var n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},t.addChild=function(t,i,n){var r,a;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof t){a=oe(t);var s=i.componentClass||a;i.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&oe(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[se(a)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:c(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[oe(e.name())]=null,this.childNameIndex_[se(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,i=this.options_.children;if(i){var n,r=this.options_,a=e.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var n,r;return r="string"==typeof e?i[n=e]||t.options_[n]||{}:(n=e.name,e),{name:n,opts:r}}).filter(function(t){var i=e.getComponent(t.opts.componentClass||oe(t.name));return i&&!a.isTech(i)}).forEach(function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var a=t.addChild(i,n);a&&(t[i]=a)}})}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return zr(e,t||this.contentEl())},t.$$=function(e,t){return Wr(e,t||this.contentEl())},t.hasClass=function(e){return g(this.el_,e)},t.addClass=function(e){v(this.el_,e)},t.removeClass=function(e){y(this.el_,e)},t.toggleClass=function(e,t){_(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return w(this.el_,e)},t.setAttribute=function(e,t){k(this.el_,e,t)},t.removeAttribute=function(e){S(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+oe(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=s(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+oe(e);t=this.el_[i]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){function e(){t=!1}var t,i=0,n=null;this.on("touchstart",function(e){1===e.touches.length&&(n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},i=Or.performance.now(),t=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)t=!1;else if(n){var i=e.touches[0].pageX-n.pageX,r=e.touches[0].pageY-n.pageY;10<Math.sqrt(i*i+r*r)&&(t=!1)}}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(n=null)===t&&Or.performance.now()-i<200&&(e.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Q(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var i=function(){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(e,t){var i,n=this;return e=Q(this,e),this.clearTimersOnDispose_(),i=Or.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_["delete"](i),e()},t),this.setTimeoutIds_.add(i),i},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_["delete"](e),Or.clearTimeout(e)),e},t.setInterval=function(e,t){e=Q(this,e),this.clearTimersOnDispose_();var i=Or.setInterval(e,t);return this.setIntervalIds_.add(i),i},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_["delete"](e),Or.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Q(this,e),t=Or.requestAnimationFrame(function(){i.rafIds_.has(t)&&i.rafIds_["delete"](t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var i=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Q(this,t);var n=this.requestAnimationFrame(function(){t(),i.namedRafs_.has(e)&&i.namedRafs_["delete"](e)});return this.namedRafs_.set(e,n),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_["delete"](e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_["delete"](e),Or.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var i=t[0],n=t[1];e[i].forEach(function(t,i){return e[n](i)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,i){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent("Tech"),r=n&&n.isTech(i),a=e===i||e.prototype.isPrototypeOf(i.prototype);if(r||!a)throw new Error('Illegal component, "'+t+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=oe(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var o=s.players,l=Object.keys(o);if(o&&0<l.length&&l.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=i,e.components_[se(t)]=i},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();ca.prototype.supportsRaf_="function"==typeof Or.requestAnimationFrame&&"function"==typeof Or.cancelAnimationFrame,ca.registerComponent("Component",ca);var da=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};t(function(e){function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(i)}e.exports=t}),t(function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(i)}e.exports=t});for(var ha,pa,fa,ma,ga,va=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t},ya=Or.navigator&&Or.navigator.userAgent||"",_a=/AppleWebKit\/([\d.]+)/i.exec(ya),ba=_a?parseFloat(_a.pop()):null,Ta=/iPod/i.test(ya),wa=(ha=ya.match(/OS (\d+)_/i))&&ha[1]?ha[1]:null,ka=/Android/i.test(ya),Sa=function(){var e=ya.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),Ca=ka&&Sa<5&&ba<537,Ea=/Firefox/i.test(ya),xa=/Edg/i.test(ya),Aa=!xa&&(/Chrome/i.test(ya)||/CriOS/i.test(ya)),Pa=(pa=ya.match(/(Chrome|CriOS)\/(\d+)/))&&pa[2]?parseFloat(pa[2]):null,Ia=(!(ma=(fa=/MSIE\s(\d+)\.\d/.exec(ya))&&parseFloat(fa[1]))&&/Trident\/7.0/i.test(ya)&&/rv:11.0/.test(ya)&&(ma=11),ma),La=/Safari/i.test(ya)&&!Aa&&!ka&&!xa,Da=/Windows/i.test(ya),Oa=(Boolean(u()&&("ontouchstart"in Or||Or.navigator.maxTouchPoints||Or.DocumentTouch&&Or.document instanceof Or.DocumentTouch))),ja=/iPad/i.test(ya)||La&&Oa&&!/iPhone/i.test(ya),Ma=/iPhone/i.test(ya)&&!ja,Ra=Ma||ja||Ta,Na=(La||Ra)&&!Aa,Ua=Object.freeze({__proto__:null,IS_IPOD:Ta,IOS_VERSION:wa,IS_ANDROID:ka,
ANDROID_VERSION:Sa,IS_NATIVE_ANDROID:Ca,IS_FIREFOX:Ea,IS_EDGE:xa,IS_CHROME:Aa,CHROME_VERSION:Pa,IE_VERSION:Ia,IS_SAFARI:La,IS_WINDOWS:Da,TOUCH_ENABLED:Oa,IS_IPAD:ja,IS_IPHONE:Ma,IS_IOS:Ra,IS_ANY_SAFARI:Na}),Fa={prefixed:!0},Ba=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Va=Ba[0],qa=0;qa<Ba.length;qa++)if(Ba[qa][1]in Rr){ga=Ba[qa];break}if(ga){for(var Ha=0;Ha<ga.length;Ha++)Fa[Va[Ha]]=ga[Ha];Fa.prefixed=ga[0]!==Va[0]}pe.prototype.code=0,pe.prototype.message="",pe.prototype.status=null,pe.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],pe.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var za=0;za<pe.errorTypes.length;za++)pe[pe.errorTypes[za]]=za,pe.prototype[pe.errorTypes[za]]=za;var Wa=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]},$a=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=ge(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(ge))},Ga=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()},Xa=t(function(e,t){function i(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var i,a=String(e);return(i=n[a.toLowerCase()])?i:(i=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){var a;if(a=n[t.toLowerCase()])return a===i;if(a=r[t.toLowerCase()])return a===i}else if("number"==typeof t)return t===i;return!1}};var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=t.names=t.title={};for(a in n)s[n[a]]=a;for(var o in r)n[o]=r[o]}),Qa=(Xa.code,Xa.codes,Xa.aliases,Xa.names,Xa.title,"vjs-modal-dialog"),Ka=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=p("div",{className:Qa+"-content"},{role:"document"}),n.descEl_=p("p",{className:Qa+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),f(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return Qa+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),j(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),L(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return void 0!==e&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=Rr.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),Xa.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Xa.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}Rr.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof Or.HTMLAnchorElement||e instanceof Or.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Or.HTMLInputElement||e instanceof Or.HTMLSelectElement||e instanceof Or.HTMLTextAreaElement||e instanceof Or.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Or.HTMLIFrameElement||e instanceof Or.HTMLObjectElement||e instanceof Or.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(ca);Ka.prototype.options_={pauseOnOpen:!0,temporary:!0},ca.registerComponent("ModalDialog",Ka);var Ya=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(da(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}va(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},na(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(Y);for(var Ja in Ya.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Ya.prototype.allowedEvents_)Ya.prototype["on"+Ja]=null;var Za=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].enabled){ve(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}va(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&ve(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,ve(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Ya),es=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].selected){ye(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(da(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}va(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&ye(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,ye(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Ya),ts=function(e){function t(){return e.apply(this,arguments)||this}va(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ya),is=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),ns=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var i=this.length||0,n=0,r=e.length;if(this.cues_=e,this.length_=e.length,i<r)for(n=i;n<r;n++)t.call(this,n)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),rs={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},as={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ss={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},os={disabled:"disabled",hidden:"hidden",showing:"showing"},ls=function(e){function t(t){function i(e){Object.defineProperty(da(n),e,{get:function(){return r[e]},set:function(){}})}var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+B(),kind:t.kind||"",language:t.language||""},a=t.label||"";for(var s in r)i(s);return Object.defineProperty(da(n),"label",{get:function(){return a},set:function(e){e!==a&&(a=e,this.trigger("labelchange"))}}),n}return va(t,e),t}(Y),us=Object.freeze({__proto__:null,parseUrl:_e,getAbsoluteURL:be,getFileExtension:Te,isCrossOrigin:we}),cs="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},ds=function(e){var t=hs.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}
/**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Bjrklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   */,hs=Object.prototype.toString,ps=function(e){var t={};return e&&e.trim().split("\n").forEach(function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),r=e.slice(i+1).trim();"undefined"==typeof t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]}),t},fs=Se,ms=Se;Se.XMLHttpRequest=cs.XMLHttpRequest||function(){},Se.XDomainRequest="withCredentials"in new Se.XMLHttpRequest?Se.XMLHttpRequest:cs.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){Se["delete"===e?"del":e]=function(t,i,n){return(i=ke(t,i,n)).method=e.toUpperCase(),Ce(i)}}),fs["default"]=ms;var gs=function(e){function t(t){var i;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var n=le(t,{kind:ss[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=os[n.mode]||"disabled",a=n["default"];"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=e.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var s=new ns(i.cues_),o=new ns(i.activeCues_),l=!1,u=Q(da(i),function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&i.tech_.ready(function(){i.tech_.on("timeupdate",u)},!0),Object.defineProperties(da(i),{"default":{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;os[e]&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||xe(this.src,this),"disabled"!==r?this.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||a||"subtitles"!==n.kind&&"captions"!==n.kind)&&xe(i.src,da(i))):i.loaded_=!0,i}va(t,e);var i=t.prototype;return i.addCue=function(e){var t=e;if(Or.vttjs&&!(e instanceof Or.vttjs.VTTCue)){for(var i in t=new Or.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(ls);gs.prototype.allowedEvents_={cuechange:"cuechange"};var vs=function(e){function t(t){var i;void 0===t&&(t={});var n=le(t,{kind:as[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(da(i),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return va(t,e),t}(ls),ys=function(e){function t(t){var i;void 0===t&&(t={});var n=le(t,{kind:rs[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(da(i),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return va(t,e),t}(ls),_s=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new gs(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i["default"]=r["default"],Object.defineProperties(da(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:da(i)})}),i}return va(t,e),t}(Y);_s.prototype.allowedEvents_={load:"load"},_s.NONE=0,_s.LOADING=1,_s.LOADED=2,_s.ERROR=3;var bs={audio:{ListClass:Za,TrackClass:vs,capitalName:"Audio"},video:{ListClass:es,TrackClass:ys,capitalName:"Video"},text:{ListClass:ts,TrackClass:gs,capitalName:"Text"}};Object.keys(bs).forEach(function(e){bs[e].getterName=e+"Tracks",bs[e].privateName=e+"Tracks_"});var Ts={remoteText:{ListClass:ts,TrackClass:gs,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:is,TrackClass:_s,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ws=Vr({},bs,Ts);Ts.names=Object.keys(Ts),bs.names=Object.keys(bs),ws.names=[].concat(Ts.names).concat(bs.names);var ks=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Ae.prototype=e,new Ae};((Pe.prototype=ks(Error.prototype)).constructor=Pe).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Le.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Ss=Rr.createElement("textarea"),Cs={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Es={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},xs={v:"title",lang:"lang"},As={rt:"ruby"},Ps=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Re.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Re.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Ne.prototype=ks(Re.prototype)).constructor=Ne,Ue.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Ue.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Ue.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Ue.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Ue.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Ue.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Ue.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Ue.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},Be.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Be.convertCueToDOMTree=function(e,t){return e&&t?je(e,t):null},Be.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=Ue.getSimpleBoxPosition(n),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var i,o,l=0;l<t.length;l++)o=t[l],i=new Ne(e,o,s),n.appendChild(i.div),Fe(0,i,a,r),o.displayState=i.div,r.push(Ue.getSimpleBoxPosition(i))}()}else for(var o=0;o<t.length;o++)n.appendChild(t[o].displayState)},(Be.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Pe))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?De(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":!function(e){var t=new Le;De(e,function(e,i){switch(e){case"MPEGT":t.integer(e+"S",i);break;case"LOCA":t.set(e+"L",Ie(i))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}},/=/):De(e,function(e,t){switch(e){case"Region":!function(e){var t=new Le;if(De(e,function(e,i){switch(e){case"id":t.set(e,i);break;case"width":t.percent(e,i);break;case"lines":t.integer(e,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var r=new Le;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;t.set(e+"X",r.get("x")),t.set(e+"Y",r.get("y"));break;case"scroll":t.alt(e,i,["up"])}},/=/,/\s/),t.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=t.get("width",100),i.lines=t.get("lines",3),i.regionAnchorX=t.get("regionanchorX",0),i.regionAnchorY=t.get("regionanchorY",100),i.viewportAnchorX=t.get("viewportanchorX",0),i.viewportAnchorY=t.get("viewportanchorY",100),i.scroll=t.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:t.get("id"),region:i})}}(t)}},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var a=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Pe(Pe.Errors.BadSignature);n.state="HEADER"}for(var s=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:r=t(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("-->")){n.cue.id=r;continue}case"CUE":try{Oe(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("-->");if(!r||o&&(s=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Pe(Pe.Errors.BadSignature)}catch(Dr){e.reportOrThrowError(Dr)}return e.onflush&&e.onflush(),this}};var Is=Be,Ls={"":1,lr:1,rl:1},Ds={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};qe.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Os=qe,js={"":!0,up:!0},Ms=t(function(e){var t=e.exports={WebVTT:Is,VTTCue:Os,VTTRegion:ze};Or.vttjs=t,Or.WebVTT=t.WebVTT;var i=t.VTTCue,n=t.VTTRegion,r=Or.VTTCue,a=Or.VTTRegion;t.shim=function(){Or.VTTCue=i,Or.VTTRegion=n},t.restore=function(){Or.VTTCue=r,Or.VTTRegion=a},Or.VTTCue||t.shim()});Ms.WebVTT,Ms.VTTCue,Ms.VTTRegion;var Rs=function(e){function t(t,i){var n;return void 0===t&&(t={}),void 0===i&&(i=function(){}),t.reportTouchActivity=!1,(n=e.call(this,null,t,i)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),ws.names.forEach(function(e){var i=ws[e];t&&t[i.getterName]&&(n[i.privateName]=t[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==t.preloadTextTracks,n.autoRemoteTextTracks_=new ws.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}va(t,e);var i=t.prototype;return i.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},i.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Q(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(){this.duration_=this.duration()},i.buffered=function(){return de(0,0)},i.bufferedPercent=function(){return he(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(bs.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},i.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}})},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return void 0!==e&&(this.error_=new pe(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?de(0,0):de()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;bs.names.forEach(function(t){function i(){e.trigger(t+"trackchange")}var n=bs[t],r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})},i.addWebVttScript_=function(){var e=this;if(!Or.WebVTT)if(Rr.body.contains(this.el())){if(!this.options_["vtt.js"]&&a(Ms)&&0<Object.keys(Ms).length)return void this.trigger("vttjsloaded");var t=Rr.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),Or.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){function e(e){return a.addTrack(e.track)}function t(e){return a.removeTrack(e.track)}function i(){return r.trigger("texttrackchange")}function n(){i();for(var e=0;e<a.length;e++){var t=a[e];t.removeEventListener("cuechange",i),"showing"===t.mode&&t.addEventListener("cuechange",i)}}var r=this,a=this.textTracks(),s=this.remoteTextTracks();s.on("addtrack",e),s.on("removetrack",t),this.addWebVttScript_(),n(),a.addEventListener("change",n),a.addEventListener("addtrack",n),a.addEventListener("removetrack",n),this.on("dispose",function(){s.off("addtrack",e),s.off("removetrack",t),a.removeEventListener("change",n),a.removeEventListener("addtrack",n),a.removeEventListener("removetrack",n);for(var r=0;r<a.length;r++)a[r].removeEventListener("cuechange",i)})},i.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var s=new ws.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,i)},i.createRemoteTextTrack=function(e){var t=le(e,{tech:this});return new Ts.remoteTextEl.TrackClass(t)},i.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Fr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},i.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||Or.Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=oe(e),t.techs_[e]=i,t.techs_[se(e)]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=oe(e),Or&&Or.videojs&&Or.videojs[e]?(Fr.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Or.videojs[e]):void 0)},t}(ca);ws.names.forEach(function(e){var t=ws[e];Rs.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Rs.prototype.featuresVolumeControl=!0,Rs.prototype.featuresMuteControl=!0,Rs.prototype.featuresFullscreenResize=!1,Rs.prototype.featuresPlaybackRate=!1,Rs.prototype.featuresProgressEvents=!1,Rs.prototype.featuresSourceset=!1,Rs.prototype.featuresTimeupdateEvents=!1,Rs.prototype.featuresNativeTextTracks=!1,Rs.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n=n||(e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(t,i))return n[r];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:Fr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ca.registerComponent("Tech",Rs),Rs.registerTech("Tech",Rs),Rs.defaultTechOrder_=[];var Ns={},Us={},Fs={},Bs={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Vs={setCurrentTime:1,setMuted:1,setVolume:1},qs={play:1,pause:1},Hs={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},zs=function(e){function t(t,i,n){var r,a=le({createEl:!1},i);if(r=e.call(this,t,a,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var l=oe(o[s]),u=Rs.getTech(l);if(l||(u=ca.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return va(t,e),t}(ca);ca.registerComponent("MediaLoader",zs);var Ws=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}va(t,e);var i=t.prototype;return i.createEl=function(t,i,r){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===r&&(r={}),i=n({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&Fr.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=n({role:"button"},r),this.tabIndex_=i.tabIndex;var a=e.prototype.createEl.call(this,t,i,r);return this.createControlTextEl(a),a},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,f(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){Xa.isEventKey(t,"Space")||Xa.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ca);ca.registerComponent("ClickableComponent",Ws);var $s=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),t.on("posterchange",Q(da(n),n.update)),n}va(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},i.createEl=function(){return p("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(){if(this.player_.controls()){var e=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;!this.player_.tech(!0)||(Ia||xa)&&e||this.player_.tech(!0).focus(),this.player_.paused()?me(this.player_.play()):this.player_.pause()}},t}(Ws);ca.registerComponent("PosterImage",$s);var Gs="#222",Xs={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Qs=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=Q(da(r),r.updateDisplay);return t.on("loadstart",Q(da(r),r.toggleDisplay)),t.on("texttrackchange",a),t.on("loadedmetadata",Q(da(r),r.preselectTrack)),t.ready(Q(da(r),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",a),t.on("playerresize",a),Or.addEventListener("orientationchange",a),t.on("dispose",function(){return Or.removeEventListener("orientationchange",a)});for(var e=this.options_.playerOptions.tracks||[],i=0;i<e.length;i++)this.player_.addRemoteTextTrack(e[i],!0);this.preselectTrack()}})),r}va(t,e);var i=t.prototype;return i.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in n?i=o.kind===a.kind?o:i||o:a&&!a.enabled?t=e=i=null:o["default"]&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof Or.WebVTT&&Or.WebVTT.processCues(Or,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},i.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r=i[n];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Je(a.firstChild,"color",Ye(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Je(a.firstChild,"backgroundColor",Ye(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Je(a,"backgroundColor",Ye(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Gs:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Gs:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Gs:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Gs)),t.fontPercent&&1!==t.fontPercent){var s=Or.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Xs[t.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Or.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);Or.WebVTT.processCues(Or,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var l=s.activeCues[o].displayState;v(l,"vjs-text-track-cue"),v(l,"vjs-text-track-cue-"+(s.language?s.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(ca);ca.registerComponent("TextTrackDisplay",Qs);var Ks=function(e){function t(){return e.apply(this,arguments)||this}return va(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=p("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(ca);ca.registerComponent("LoadingSpinner",Ks);var Ys=function(e){function t(){return e.apply(this,arguments)||this}va(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=n({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=n({type:"button"},i);var r=ca.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(r),r},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name
;return Fr.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),ca.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){Xa.isEventKey(t,"Space")||Xa.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Ws);ca.registerComponent("Button",Ys);var Js=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return me(t),void(!this.player_.tech(!0)||(Ia||xa)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var a=function(){return r.focus()};fe(t)?t.then(a,function(){}):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(){this.mouseused_=!0},t}(Ys);Js.prototype.controlText_="Play Video",ca.registerComponent("BigPlayButton",Js);var Zs=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){Xa.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Ys);ca.registerComponent("CloseButton",Zs);var eo=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),i.replay&&n.on(t,"ended",n.handleEnded),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(Ys);eo.prototype.controlText_="Play",ca.registerComponent("PlayToggle",eo);var to=Ze,io=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["timeupdate","ended"],n.updateContent),n.updateTextNode_(),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=p("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=et(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(t.contentEl_){var e=t.textNode_;e&&!t.contentEl_.contains(e)&&(e=null,Fr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=Rr.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}}))},i.updateContent=function(){},t}(ca);io.prototype.labelText_="Time",io.prototype.controlText_="Time",ca.registerComponent("TimeDisplay",io);var no=function(e){function t(){return e.apply(this,arguments)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(){var e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)},t}(io);no.prototype.labelText_="Current Time",no.prototype.controlText_="Current Time",ca.registerComponent("CurrentTimeDisplay",no);var ro=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n.on(t,"loadstart",n.updateContent),n.on(t,"loadedmetadata",n.updateContent),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(){var e=this.player_.duration();this.updateTextNode_(e)},t}(io);ro.prototype.labelText_="Duration",ro.prototype.controlText_="Duration",ca.registerComponent("DurationDisplay",ro);var ao=function(e){function t(){return e.apply(this,arguments)||this}return va(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(ca);ca.registerComponent("TimeDivider",ao);var so=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(p("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(){var e;"number"==typeof this.player_.duration()&&(e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e))},t}(io);so.prototype.labelText_="Remaining Time",so.prototype.controlText_="Remaining Time",ca.registerComponent("RemainingTimeDisplay",so);var oo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t}(ca);ca.registerComponent("LiveDisplay",oo);var lo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=p("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(Ys);lo.prototype.controlText_="Seek to live, currently playing live",ca.registerComponent("SeekToLive",lo);var uo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}va(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,r){return void 0===i&&(i={}),void 0===r&&(r={}),i.className=i.className+" vjs-slider",i=n({tabIndex:0},i),r=n({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,i,r)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Aa||e.preventDefault(),C(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},i.handleMouseMove=function(){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;E(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var i=e.vertical()?"height":"width";e.bar.el().style[i]=(100*t).toFixed(2)+"%"})),t}},i.getProgress=function(){return Number(tt(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var t=P(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){Xa.isEventKey(t,"Left")||Xa.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Xa.isEventKey(t,"Right")||Xa.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(ca);ca.registerComponent("Slider",uo);var co=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",n.update),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=p("span",{className:"vjs-control-text"}),n=p("span",{textContent:this.localize("Loaded")}),r=Rr.createTextNode(": ");return this.percentageEl_=p("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),t},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var t=e.player_.liveTracker,i=e.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():e.player_.duration(),r=e.player_.bufferedEnd(),a=e.partEls_,s=it(r,n);e.percent_!==s&&(e.el_.style.width=s,f(e.percentageEl_,s),e.percent_=s);for(var o=0;o<i.length;o++){var l=i.start(o),u=i.end(o),c=a[o];c||(c=e.el_.appendChild(p()),a[o]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=it(l,r),c.style.width=it(u-l,r))}for(var d=a.length;d>i.length;d--)e.el_.removeChild(a[d-1]);a.length=i.length})},t}(ca);ca.registerComponent("LoadProgressBar",co);var ho=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=K(Q(da(n),n.update),30),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=A(this.el_),r=x(this.player_.el()),a=e.width*t;if(r&&n){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=n.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){f(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var a,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;a=(l<1?"":"-")+et(l,o)}else a=et(i,s);r.update(e,t,a),n&&n()})},t}(ca);ca.registerComponent("TimeTooltip",ho);var po=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=K(Q(da(n),n.update),30),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(ca);po.prototype.options_={children:[]},Ra||ka||po.prototype.options_.children.push("timeTooltip"),ca.registerComponent("PlayProgressBar",po);var fo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=K(Q(da(n),n.update),30),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},t}(ca);fo.prototype.options_={children:["timeTooltip"]},ca.registerComponent("MouseTimeDisplay",fo);var mo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}va(t,e);var i=t.prototype;return i.setEventHandlers_=function(){this.update_=Q(this,this.update),this.update=K(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in Rr&&"visibilityState"in Rr&&this.on(Rr,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){Rr.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(){var t=this,i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var e=t.player_.ended()?t.player_.duration():t.getCurrentTime_(),n=t.player_.liveTracker,r=t.player_.duration();n&&n.isLive()&&(r=t.player_.liveTracker.liveCurrentTime()),t.percent_!==i&&(t.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),t.percent_=i),t.currentTime_===e&&t.duration_===r||(t.el_.setAttribute("aria-valuetext",t.localize("progress bar timing: currentTime={1} duration={2}",[et(e,r),et(r,r)],"{1} of {2}")),t.currentTime_=e,t.duration_=r),t.bar&&t.bar.update(x(t.el()),t.getProgress())}),i},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){M(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e){if(M(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=i)return void n.seekToLiveEdge();var r=n.seekableStart(),a=n.liveCurrentTime();if(a<=(t=r+i*n.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=i*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?me(this.player_.play()):this.update_()},i.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){if(Xa.isEventKey(t,"Space")||Xa.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Xa.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(Xa.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Xa(t))){t.preventDefault(),t.stopPropagation();var i=10*(Xa.codes[Xa(t)]-Xa.codes[0])/100;this.player_.currentTime(this.player_.duration()*i)}else Xa.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Xa.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in Rr&&"visibilityState"in Rr&&this.off(Rr,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(uo);mo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ra||ka||mo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ca.registerComponent("SeekBar",mo);var go=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=K(Q(da(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=K(Q(da(n),n.handleMouseSeek),30),n.enable(),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(i||n){var r=t.el(),a=A(r),s=P(r,e).x;s=tt(s,0,1),n&&n.update(a,s),i&&i.update(a,t.getProgress())}}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(ca);go.prototype.options_={children:["seekBar"]},ca.registerComponent("ProgressControl",go);var vo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),n.on(t,["disablepictureinpicturechanged","loadedmetadata"],n.handlePictureInPictureEnabledChange),n.disable(),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Rr.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(Ys);vo.prototype.controlText_="Picture-in-Picture",ca.registerComponent("PictureInPictureToggle",vo);var yo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"fullscreenchange",n.handleFullscreenChange),!1===Rr[t.fsApi_.fullscreenEnabled]&&n.disable(),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Ys);yo.prototype.controlText_="Fullscreen",ca.registerComponent("FullscreenToggle",yo);var _o=function(e){function t(){return e.apply(this,arguments)||this}return va(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(ca);ca.registerComponent("VolumeLevel",_o);var bo=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){M(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){M(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(uo);bo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},bo.prototype.playerEvent="volumechange",ca.registerComponent("VolumeBar",bo);var To=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,"undefined"!=typeof i.volumeBar&&!a(i.volumeBar)||(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(da(n),t),n.throttledHandleMouseMove=K(Q(da(n),n.handleMouseMove),30),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},i.handleMouseUp=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(ca);To.prototype.options_={children:["volumeBar"]},ca.registerComponent("VolumeControl",To);var wo=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(da(n),t),n.on(t,["loadstart","volumechange"],n.update),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(){var e=this.player_.volume(),t=this.player_.lastVolume_();if(0===e){var i=t<.1?.1:t;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;Ra&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)y(this.el_,"vjs-vol-"+i);v(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(Ys);wo.prototype.controlText_="Mute",ca.registerComponent("MuteToggle",wo);var ko=function(e){function t(t,i){var n;return void 0===i&&(i={}),"undefined"!=typeof i.inline?i.inline=i.inline:i.inline=!0,"undefined"!=typeof i.volumeControl&&!a(i.volumeControl)||(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).on(t,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}va(t,e);var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){Xa.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(){this.addClass("vjs-hover"),z(Rr,"keyup",Q(this,this.handleKeyPress))},i.handleMouseOut=function(){this.removeClass("vjs-hover"),W(Rr,"keyup",Q(this,this.handleKeyPress))},i.handleKeyPress=function(e){Xa.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(ca);ko.prototype.options_={children:["muteToggle","volumeControl"]},ca.registerComponent("VolumePanel",ko);var So=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=Q(da(n),n.handleBlur),n.boundHandleTapClick_=Q(da(n),n.handleTapClick),n}va(t,e);var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof ca&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof ca&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=p(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),z(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var t=e.relatedTarget||Rr.activeElement;if(!this.children().some(function(e){return e.el()===t})){var i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter(function(t){return t.el()===e.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){Xa.isEventKey(e,"Left")||Xa.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Xa.isEventKey(e,"Right")||Xa.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},t}(ca);ca.registerComponent("Menu",So);var Co=function(e){function t(t,i){var n;void 0===i&&(i={}),(n=e.call(this,t,i)||this).menuButton_=new Ys(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=Ys.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+r,
n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),z(Rr,"keyup",Q(da(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}va(t,e);var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var e=new So(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=p("li",{className:"vjs-menu-title",innerHTML:oe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new ca(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+Ys.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(){this.removeClass("vjs-hover"),W(Rr,"keyup",Q(this,this.handleMenuKeyUp))},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){Xa.isEventKey(e,"Esc")||Xa.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Xa.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Xa.isEventKey(e,"Up")||Xa.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(Xa.isEventKey(e,"Esc")||Xa.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(Xa.isEventKey(e,"Esc")||Xa.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Xa.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ra&&d())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(ca);ca.registerComponent("MenuButton",Co);var Eo=function(e){function t(t,i){var n,r=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!r)return da(n);var a=Q(da(n),n.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),n.player_.on("ready",a),n.player_.on("dispose",function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)}),n}return va(t,e),t}(Co);ca.registerComponent("TrackButton",Eo);var xo=["Tab","Esc","Up","Down","Right","Left"],Ao=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}va(t,e);var i=t.prototype;return i.createEl=function(t,i,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",n({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),r)},i.handleKeyDown=function(t){xo.some(function(e){return Xa.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Ws);ca.registerComponent("MenuItem",Ao);var Po=function(e){function t(t,i){function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleTracksChange.apply(da(a),t)}function r(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleSelectedLanguageChange.apply(da(a),t)}var a,s,o=i.track,l=t.textTracks();return i.label=o.label||o.language||"Unknown",i.selected="showing"===o.mode,(a=e.call(this,t,i)||this).track=o,a.kinds=(i.kinds||[i.kind||a.track.kind]).filter(Boolean),t.on(["loadstart","texttrackchange"],n),l.addEventListener("change",n),l.addEventListener("selectedlanguagechange",r),a.on("dispose",function(){t.off(["loadstart","texttrackchange"],n),l.removeEventListener("change",n),l.removeEventListener("selectedlanguagechange",r)}),void 0===l.onchange&&a.on(["tap","click"],function(){if("object"!=typeof Or.Event)try{s=new Or.Event("change")}catch(t){}s||(s=Rr.createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(s)}),a.handleTracksChange(),a}va(t,e);var i=t.prototype;return i.handleClick=function(t){var i=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var a=n[r];-1!==this.kinds.indexOf(a.kind)&&(a===i?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},i.handleTracksChange=function(){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},i.handleSelectedLanguageChange=function(){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Ao);ca.registerComponent("TextTrackMenuItem",Po);var Io=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,"default":!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}va(t,e);var i=t.prototype;return i.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,i=0,n=e.length;i<n;i++){var r=e[i];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){t=!1;break}}t!==this.isSelected_&&this.selected(t)},i.handleSelectedLanguageChange=function(){for(var e=this.player().textTracks(),t=!0,i=0,n=e.length;i<n;i++){var r=e[i];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){t=!1;break}}t&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Po);ca.registerComponent("OffTextTrackMenuItem",Io);var Lo=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return va(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=Po),this.label_&&(i=this.label_+" off"),e.push(new Io(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a=n[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Eo);ca.registerComponent("TextTrackButton",Lo);var Do=function(e){function t(t,i){var n,r=i.track,a=i.cue,s=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=a.text,i.selected=a.startTime<=s&&s<a.endTime,(n=e.call(this,t,i)||this).track=r,n.cue=a,r.addEventListener("cuechange",Q(da(n),n.update)),n}va(t,e);var i=t.prototype;return i.handleClick=function(){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},t}(Ao);ca.registerComponent("ChaptersTrackMenuItem",Do);var Oo=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(oe(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],a=new Do(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(Lo);Oo.prototype.kind_="chapters",Oo.prototype.controlText_="Chapters",ca.registerComponent("ChaptersButton",Oo);var jo=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=t.textTracks(),s=Q(da(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",function(){a.removeEventListener("change",s)}),r}va(t,e);var i=t.prototype;return i.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!1,i=0,n=e.length;i<n;i++){var r=e[i];if(r.kind!==this.kind_&&"showing"===r.mode){t=!0;break}}t?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Lo);jo.prototype.kind_="descriptions",jo.prototype.controlText_="Descriptions",ca.registerComponent("DescriptionsButton",jo);var Mo=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Lo);Mo.prototype.kind_="subtitles",Mo.prototype.controlText_="Subtitles",ca.registerComponent("SubtitlesButton",Mo);var Ro=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return va(t,e),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},t}(Po);ca.registerComponent("CaptionSettingsMenuItem",Ro);var No=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ro(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Lo);No.prototype.kind_="captions",No.prototype.controlText_="Captions",ca.registerComponent("CaptionsButton",No);var Uo=function(e){function t(){return e.apply(this,arguments)||this}return va(t,e),t.prototype.createEl=function(t,i,r){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),a+="</span>",e.prototype.createEl.call(this,t,n({innerHTML:a},i),r)},t}(Po);ca.registerComponent("SubsCapsMenuItem",Uo);var Fo=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(oe(n.label_)),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ro(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,Uo)},t}(Lo);Fo.prototype.kinds_=["captions","subtitles"],Fo.prototype.controlText_="Subtitles",ca.registerComponent("SubsCapsButton",Fo);var Bo=function(e){function t(t,i){function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.handleTracksChange.apply(da(r),t)}var r,a=i.track,s=t.audioTracks();return i.label=a.label||a.language||"Unknown",i.selected=a.enabled,(r=e.call(this,t,i)||this).track=a,r.addClass("vjs-"+a.kind+"-menu-item"),s.addEventListener("change",n),r.on("dispose",function(){s.removeEventListener("change",n)}),r}va(t,e);var i=t.prototype;return i.createEl=function(t,i,r){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),a+="</span>",e.prototype.createEl.call(this,t,n({innerHTML:a},i),r)},i.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<i.length;n++){var r=i[n];r.enabled=r===this.track}},i.handleTracksChange=function(){this.selected(this.track.enabled)},t}(Ao);ca.registerComponent("AudioTrackMenuItem",Bo);var Vo=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new Bo(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(Eo);Vo.prototype.controlText_="Audio Track",ca.registerComponent("AudioTrackButton",Vo);var qo=function(e){function t(t,i){var n,r=i.rate,a=parseFloat(r,10);return i.label=r,i.selected=1===a,i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=r,n.rate=a,n.on(t,"ratechange",n.update),n}va(t,e);var i=t.prototype;return i.handleClick=function(){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(Ao);qo.prototype.contentElType="button",ca.registerComponent("PlaybackRateMenuItem",qo);var Ho=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}va(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=p("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var e=new So(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;0<=i;i--)e.addChild(new qo(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(){for(var e=this.player().playbackRate(),t=this.playbackRates(),i=t[0],n=0;n<t.length;n++)if(t[n]>e){i=t[n];break}this.player().playbackRate(i)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},i.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Co);Ho.prototype.controlText_="Playback Rate",ca.registerComponent("PlaybackRateMenuButton",Ho);var zo=function(e){function t(){return e.apply(this,arguments)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(ca);ca.registerComponent("Spacer",zo);var Wo=function(e){function t(){return e.apply(this,arguments)||this}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(zo);ca.registerComponent("CustomControlSpacer",Wo);var $o=function(e){function t(){return e.apply(this,arguments)||this}return va(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(ca);$o.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Rr&&$o.prototype.options_.children.splice($o.prototype.options_.children.length-1,0,"pictureInPictureToggle"),ca.registerComponent("ControlBar",$o);var Go=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",n.open),n}va(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Ka);Go.prototype.options_=Vr({},Ka.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ca.registerComponent("ErrorDisplay",Go);var Xo="vjs-text-track-settings",Qo=["#000","Black"],Ko=["#00F","Blue"],Yo=["#0FF","Cyan"],Jo=["#0F0","Green"],Zo=["#F0F","Magenta"],el=["#F00","Red"],tl=["#FFF","White"],il=["#FF0","Yellow"],nl=["1","Opaque"],rl=["0.5","Semi-Transparent"],al=["0","Transparent"],sl={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Qo,tl,el,Jo,Ko,il,Zo,Yo]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[nl,rl,al]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[tl,Qo,el,Jo,Ko,il,Zo,Yo]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[nl,rl]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[al,rl,nl]}};sl.windowColor.options=sl.backgroundColor.options;var ol=function(e){function t(t,n){var r;return n.temporary=!1,(r=e.call(this,t,n)||this).updateDisplay=Q(da(r),r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=p("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),i(sl,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}va(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=sl[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+i+' id="'+a+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,i,n=this;return t=function(e,t,i){var r=function(e,t){return nt(e.options[e.options.selectedIndex].value,t)}(n.$(t.selector),t.parser);return void 0!==r&&(e[i]=r),e},void 0===(i={})&&(i=0),Hr(e=sl).reduce(function(i,n){return t(i,e[n],n)},i)},n.setValues=function(e){var t=this;i(sl,function(i,n){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(nt(e.options[n].value,i)===t){e.selectedIndex=n;break}}(t.$(i.selector),e[n],i.parser)})},n.setDefaults=function(){var e=this;i(sl,function(t){var i=t.hasOwnProperty("default")?t["default"]:0;e.$(t.selector).selectedIndex=i})},n.restoreSettings=function(){var e;try{e=JSON.parse(Or.localStorage.getItem(Xo))}catch(e){Fr.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Or.localStorage.setItem(Xo,JSON.stringify(e)):Or.localStorage.removeItem(Xo)}catch(e){Fr.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(Ka);ca.registerComponent("TextTrackSettings",ol);var ll=function(e){function t(t,i){var n,r=i.ResizeObserver||Or.ResizeObserver;null===i.ResizeObserver&&(r=!1);var a=le({createEl:!r,reportTouchActivity:!1},i);return(n=e.call(this,t,a)||this).ResizeObserver=i.ResizeObserver||Or.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(e,t,i,n){function r(){var r=this,s=arguments,o=function(){o=a=null,i||e.apply(r,s)};!a&&i&&e.apply(r,s),n.clearTimeout(a),a=n.setTimeout(o,t)}var a;return void 0===n&&(n=Or),r.cancel=function(){n.clearTimeout(a),a=null},r}(function(){n.resizeHandler()},100,!1,da(n)),r?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(t.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){W(this,"resize",e),W(this,"unload",t),t=null};z(n.el_.contentWindow,"unload",t),z(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}va(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(ca);ca.registerComponent("ResizeManager",ll);var ul={trackingThreshold:30,liveTolerance:15},cl=function(e){function t(t,i){var n,r=le(ul,i,{createEl:!1});return(n=e.call(this,t,r)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),Ia&&"hidden"in Rr&&"visibilityState"in Rr&&n.on(Rr,"visibilitychange",n.handleVisibilityChange),n}va(t,e);var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Rr.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Or.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&2<e,this.skipNextSeeked_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},i.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,
this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Rr,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),e.prototype.dispose.call(this)},t}(ca);ca.registerComponent("LiveTracker",cl);var dl,hl=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Rr.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=Rr.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",Or.Element.prototype.appendChild.call(this,i),this.innerHTML}}),pl=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?be(Or.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Or.Element.prototype.setAttribute.call(this,"src",e),e}}),fl=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r=t.source,a=!1;if(r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var s=n.el_.childNodes,o=s.length,l=[];o--;){var u=s[o];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),a||n.el_.hasAttribute("crossorigin")||!we(u.src)||(a=!0)):l.push(u))}for(var c=0;c<l.length;c++)n.el_.removeChild(l[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&a&&Fr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(Oa||Ma||Ca)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}va(t,e);var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){ot(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){i=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}}function t(){for(var e=0;e<i.length;e++){var r=i[e];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",t)}var i,n=this.textTracks();e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",t),n.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",t)})},i.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var t=this,i=bs[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var a={change:function(){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[Ts.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,a=0;a<n.length;a++)if(n[a]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(e){var i=a[e];n.addEventListener(e,i),t.on("dispose",function(){return n.removeEventListener(e,i)})}),this.on("loadstart",s),this.on("dispose",function(){return t.off("loadstart",s)})}},i.proxyNativeTracks_=function(){var e=this;bs.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},i.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=Rr.createElement("video");var r=le({},this.options_.tag&&T(this.options_.tag));Oa&&!0===this.options_.nativeControlsForTouch||delete r.controls,b(e,n(r,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&k(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var a=["loop","muted","playsinline","autoplay"],s=0;s<a.length;s++){var o=a[s],l=this.options_[o];void 0!==l&&(l?k(e,o,o):S(e,o),e[o]=l)}return e},i.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Na?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){Fr(e,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;return this.el_.duration===1/0&&ka&&Aa&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Or.navigator&&Or.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)me(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(t,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,n):e.prototype.addTextTrack.call(this,t,i,n)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=Rr.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t["default"]&&(i["default"]=t["default"]),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},i.addRemoteTextTrack=function(t,i){var n=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),n=i.length;n--;)t!==i[n]&&t!==i[n].track||this.el().removeChild(i[n])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Or.performance&&"function"==typeof Or.performance.now?e.creationTime=Or.performance.now():Or.performance&&Or.performance.timing&&"number"==typeof Or.performance.timing.navigationStart&&(e.creationTime=Or.Date.now()-Or.performance.timing.navigationStart),e},t}(Rs);lt(fl,"TEST_VID",function(){if(u()){var e=Rr.createElement("video"),t=Rr.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),fl.isSupported=function(){try{fl.TEST_VID.volume=.5}catch(Dr){return!1}return!(!fl.TEST_VID||!fl.TEST_VID.canPlayType)},fl.canPlayType=function(e){return fl.TEST_VID.canPlayType(e)},fl.canPlaySource=function(e){return fl.canPlayType(e.type)},fl.canControlVolume=function(){try{var e=fl.TEST_VID.volume;return fl.TEST_VID.volume=e/2+.1,e!==fl.TEST_VID.volume}catch(e){return!1}},fl.canMuteVolume=function(){try{var e=fl.TEST_VID.muted;return fl.TEST_VID.muted=!e,fl.TEST_VID.muted?k(fl.TEST_VID,"muted","muted"):S(fl.TEST_VID,"muted"),e!==fl.TEST_VID.muted}catch(e){return!1}},fl.canControlPlaybackRate=function(){if(ka&&Aa&&Pa<58)return!1;try{var e=fl.TEST_VID.playbackRate;return fl.TEST_VID.playbackRate=e/2+.1,e!==fl.TEST_VID.playbackRate}catch(e){return!1}},fl.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(Rr.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Rr.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Rr.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Rr.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},fl.supportsNativeTextTracks=function(){return Na||Ra&&Aa},fl.supportsNativeVideoTracks=function(){return!(!fl.TEST_VID||!fl.TEST_VID.videoTracks)},fl.supportsNativeAudioTracks=function(){return!(!fl.TEST_VID||!fl.TEST_VID.audioTracks)},fl.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],i=e[1];lt(fl.prototype,t,function(){return fl[i]()},!0)}),fl.prototype.movingMediaElementInDOM=!Ra,fl.prototype.featuresFullscreenResize=!0,fl.prototype.featuresProgressEvents=!0,fl.prototype.featuresTimeupdateEvents=!0,fl.patchCanPlayType=function(){4<=Sa&&!Ea&&!Aa&&(dl=fl.TEST_VID&&fl.TEST_VID.constructor.prototype.canPlayType,fl.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":dl.call(this,e)})},fl.unpatchCanPlayType=function(){var e=fl.TEST_VID.constructor.prototype.canPlayType;return dl&&(fl.TEST_VID.constructor.prototype.canPlayType=dl),e},fl.patchCanPlayType(),fl.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},fl.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){fl.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){fl.prototype["set"+oe(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){fl.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){fl.prototype["set"+oe(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){fl.prototype[e]=function(){return this.el_[e]()}}),Rs.withSourceHandlers(fl),fl.nativeSourceHandler={},fl.nativeSourceHandler.canPlayType=function(e){try{return fl.TEST_VID.canPlayType(e)}catch(e){return""}},fl.nativeSourceHandler.canHandleSource=function(e){if(e.type)return fl.nativeSourceHandler.canPlayType(e.type);if(e.src){var t=Te(e.src);return fl.nativeSourceHandler.canPlayType("video/"+t)}return""},fl.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},fl.nativeSourceHandler.dispose=function(){},fl.registerSourceHandler(fl.nativeSourceHandler),Rs.registerTech("Html5",fl);var ml=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],gl={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},vl=["tiny","xsmall","small","medium","large","xlarge","huge"],yl={};vl.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;yl[e]="vjs-layout-"+t});var _l={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},bl=function(e){function t(i,r,a){var s;if(i.id=i.id||r.id||"vjs_video_"+B(),(r=n(t.getTagSettings(i),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof i.closest){var o=i.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var l=i;l&&1===l.nodeType;){if(T(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}if((s=e.call(this,null,r,a)||this).boundDocumentFullscreenChange_=Q(da(s),s.documentFullscreenChange_),s.boundFullWindowOnEscKey_=Q(da(s),s.fullWindowOnEscKey),s.isFullscreen_=!1,s.log=Br(s.id_),s.fsApi_=Fa,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&T(i),s.language(s.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach(function(e){u[e.toLowerCase()]=r.languages[e]}),s.languages_=u}else s.languages_=t.prototype.options_.languages;s.resetCache_(),s.poster_=r.poster||"",s.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(e){if("function"!=typeof s[e])throw new Error('plugin "'+e+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),re(da(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(z(Rr,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on("playerreset",s.updateStyleEl_);var c=le(s.options_);r.plugins&&Object.keys(r.plugins).forEach(function(e){s[e](r.plugins[e])}),r.debug&&s.debug(!0),s.options_.playerOptions=c,s.middleware_=[],s.initChildren(),s.isAudio("audio"===i.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),Oa&&s.addClass("vjs-touch-enabled"),Ra||s.addClass("vjs-workinghover"),t.players[s.id_]=da(s);var d=Lr.split(".")[0];return s.addClass("vjs-v"+d),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("stageclick",s.handleStageClick_),s.on("keydown",s.handleKeyDown),s.on("languagechange",s.handleLanguagechange),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s}va(t,e);var i=t.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),W(Rr,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),W(Rr,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Us[this.id()]=null,ws.names.forEach(function(e){var t=ws[e],n=i[t.getterName]();n&&n.off&&n.off()}),e.prototype.dispose.call(this)},i.createEl=function(){var t,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();n?t=this.el_=i.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a=T(i);if(r){for(t=this.el_=i,i=this.tag=Rr.createElement("video");t.children.length;)i.appendChild(t.firstChild);g(t,"video-js")||v(t,"video-js"),t.appendChild(i),n=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{i[e]=t[e]}catch(e){}})}if(i.setAttribute("tabindex","-1"),a.tabindex="-1",(Ia||Aa&&Da)&&(i.setAttribute("role","application"),a.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(e){r&&"class"===e||t.setAttribute(e,a[e]),r&&i.setAttribute(e,a[e])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=t.player=this,this.addClass("vjs-paused"),!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=U("vjs-styles-dimensions");var s=zr(".vjs-styles-defaults"),o=zr("head");o.insertBefore(this.styleEl_,s?s.nextSibling:o.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=i.getElementsByTagName("a"),u=0;u<l.length;u++){var c=l.item(u);v(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(t,i),m(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=t},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):Fr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?Fr.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},i.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,na(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(e,t){na(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))}(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),F(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=a&&(o.width=a),0<=s&&(o.height=s))}},i.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var r=oe(e),a=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Rs.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var s={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ws.names.forEach(function(e){var t=ws[e];s[t.getterName]=i[t.privateName]}),n(s,this.options_[r]),n(s,this.options_[a]),n(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime);var o=Rs.getTech(e);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(s),this.tech_.ready(Q(this,this.handleTechReady_),!0),Ga(this.textTracksJson_||[],this.tech_),ml.forEach(function(e){i.on(i.tech_,e,i["handleTech"+oe(e)+"_"])}),Object.keys(gl).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+gl[e]+"_"].bind(i),event:t}):i["handleTech"+gl[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||m(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;ws.names.forEach(function(t){var i=ws[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=$a(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return void 0===e&&Fr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},i.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){function e(){t.muted(i)}var i=t.muted();t.muted(!0),t.playTerminatedQueue_.push(e);var n=t.play();if(fe(n))return n["catch"](e)};if("any"===e&&!0!==this.muted()?fe(i=this.play())&&(i=i["catch"](n)):i="muted"===e&&!0!==this.muted()?n():this.play(),fe(i))return i.then(function(){t.trigger({type:"autoplay-success",autoplay:e})})["catch"](function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},i.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return Qe(t)}(this,t)),this.cache_.source=le({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=T(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},i.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(i=function(){})),i(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))})},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(Fr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){M(e)&&this.controls_&&(this.paused()?me(this.play()):this.pause())},i.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var i=this.el(),n=Rr[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},i.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},i.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(){this.isInPictureInPicture(!1)},
i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(e,t){var i=null;1<arguments.length&&(i=t),this.trigger("textdata",i)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},i.techCall_=function(e,t){this.ready(function(){if(e in Vs)return function(e,t,i,n){return t[i](e.reduce(Ge(i),n))}(this.middleware_,this.tech_,e,t);if(e in qs)return $e(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw Fr(e),e}},!0)},i.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Bs)return function(e,t,i){return e.reduceRight(Ge(i),t[i]())}(this.middleware_,this.tech_,e);if(e in qs)return $e(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){if(void 0===this.tech_[e])throw Fr("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",i),i;if("TypeError"===i.name)throw Fr("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i;throw Fr(i),i}}},i.play=function(){var e=this,t=this.options_.Promise||Or.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},i.play_=function(e){var t=this;void 0===e&&(e=me),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!Na&&!Ra||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},i.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||de(0,0)},i.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=de(0,0)),e},i.bufferedPercent=function(){return he(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return t<i&&(i=t),i},i.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},i.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},i.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},i.requestFullscreen=function(e){var t=this.options_.Promise||Or.Promise;if(t){var i=this;return new t(function(t,n){function r(){i.off("fullscreenerror",s),i.off("fullscreenchange",a)}function a(){r(),t()}function s(e,t){r(),n(t)}i.one("fullscreenchange",a),i.one("fullscreenerror",s);var o=i.requestFullscreenHelper_(e);if(o)return o.then(r,r),o})}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||Or.Promise;if(e){var t=this;return new e(function(e,i){function n(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){n(),e()}function a(e,t){n(),i(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var s=t.exitFullscreenHelper_();if(s)return s.then(n,n),s})}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=Rr[this.fsApi_.exitFullscreen]();return t&&t.then(function(){return e.isFullscreen(!1)}),t}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Rr.documentElement.style.overflow,z(Rr,"keydown",this.boundFullWindowOnEscKey_),Rr.documentElement.style.overflow="hidden",v(Rr.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){Xa.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,W(Rr,"keydown",this.boundFullWindowOnEscKey_),Rr.documentElement.style.overflow=this.docOrigOverflow,y(Rr.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Rr&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Rr)return Rr.exitPictureInPicture()},i.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&!function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)&&("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))},i.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=void 0===i?function(e){return Xa.isEventKey(e,"f")}:i,r=t.muteKey,a=void 0===r?function(e){return Xa.isEventKey(e,"m")}:r,s=t.playPauseKey,o=void 0===s?function(e){return Xa.isEventKey(e,"k")||Xa.isEventKey(e,"Space")}:s;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var l=ca.getComponent("FullscreenToggle");!1!==Rr[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),ca.getComponent("MuteToggle").prototype.handleClick.call(this,e)):o.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ca.getComponent("PlayToggle").prototype.handleClick.call(this,e))},i.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=Rs.getTech(r);if(a=a||ca.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else Fr.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(e){function t(e,t,i){var n;return e.some(function(e){return t.some(function(t){if(n=i(e,t))return!0})}),n}function i(e,t){var i=e[0];if(e[1].canPlaySource(t,r.options_[i.toLowerCase()]))return{source:t,tech:i}}var n,r=this,a=this.options_.techOrder.map(function(e){return[e,Rs.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(Fr.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,a,(n=i,function(e,t){return n(t,e)})):t(a,e,i))||!1},i.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var i=function n(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){e=n(e),Array.isArray(e)?t=t.concat(e):r(e)&&t.push(e)}),e=t}else e="string"==typeof e&&e.trim()?[Ke({src:e})]:r(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ke(e)]:[];return e}(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),We(this,i[0],function(e,n){if(t.middleware_=n,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e))return 1<i.length?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());!function(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}(n,t.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},i.src_=function(e){var t=this,i=this.selectSource([e]);return!i||(function(e,t){return oe(e)===oe(t)}(i.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){t.changingSrc_=!1})),!1)},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,t=this.options_.Promise||Or.Promise;this.paused()||!t?this.doReset_():me(this.play().then(function(){return e.doReset_()}))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),na(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},i.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},i.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},i.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new pe(e),this.addClass("vjs-error"),Fr.error("(CODE:"+this.error_.code+" "+pe.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},i.reportUserActivity=function(){this.userActivity_=!0},i.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){function e(){r(),this.clearInterval(t)}var t,i,n,r=Q(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())}),this.on("mouseup",e),this.on("mouseleave",e);var a,s=this.getChild("controlBar");!s||Ra||ka||(s.on("mouseenter",function(){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},i.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},i.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},i.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},i.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t=t||e,this.tech_)return this.tech_.removeRemoteTextTrack(t)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),na(this)&&this.trigger("languagechange"))},i.languages=function(){return le(t.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=le(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=le(n)).player=void 0,e.tracks[i]=n}return e},i.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Ka(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<vl.length;i++){var n=vl[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(yl[e]),this.addClass(yl[n]),this.breakpoint_=n;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=n({},_l,e),this.updateCurrentBreakpoint_()),n(this.breakpoints_)},i.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return yl[this.breakpoint_]||""},i.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=le(e);var n=this.cache_.media,r=n.artwork,a=n.poster,s=n.src,o=n.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:Qe(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach(function(e){return i.addRemoteTextTrack(e,!1)}),this.ready(t)}},i.getMedia=function(){if(this.cache_.media)return le(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Qe(t.poster)}]),t},t.getTagSettings=function(e){var t={sources:[],tracks:[]},i=T(e),r=i["data-setup"];if(g(e,"vjs-fill")&&(i.fill=!0),g(e,"vjs-fluid")&&(i.fluid=!0),null!==r){var a=Wa(r||"{}"),s=a[0],o=a[1];s&&Fr.error(s),n(i,o)}if(n(t,i),e.hasChildNodes())for(var l=e.childNodes,u=0,c=l.length;u<c;u++){var d=l[u],h=d.nodeName.toLowerCase();"source"===h?t.sources.push(T(d)):"track"===h&&t.tracks.push(T(d))}return t},i.flexNotSupported_=function(){var e=Rr.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t}(ca);ws.names.forEach(function(e){var t=ws[e];bl.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),bl.prototype.crossorigin=bl.prototype.crossOrigin,bl.players={};var Tl=Or.navigator;bl.prototype.options_={techOrder:Rs.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Tl&&(Tl.languages&&Tl.languages[0]||Tl.userLanguage||Tl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){bl.prototype[e]=function(){return this.techGet_(e)}}),ml.forEach(function(e){bl.prototype["handleTech"+oe(e)+"_"]=function(){return this.trigger(e)}}),ca.registerComponent("Player",bl);var wl=t(function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(i,n)}e.exports=t}),kl=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Dr){return!1}},Sl=t(function(e){function t(){return kl()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&wl(r,i.prototype),r},t.apply(null,arguments)}e.exports=t}),Cl="plugin",El="activePlugins_",xl={},Al=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),re(this),delete this.trigger,ae(this,this.constructor.defaultState),dt(t,this.name),this.dispose=Q(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),$(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[El][e]=!1,this.player=this.state=null,t[e]=pt(e,xl[e])},e.isBasic=function(t){var i="string"==typeof t?ct(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(ut(t))Fr.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(bl.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return xl[t]=i,t!==Cl&&(e.isBasic(i)?bl.prototype[t]=function(e,t){function i(){ht(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return dt(this,e),ht(this,{name:e,plugin:t,instance:i}),i}return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}(t,i):bl.prototype[t]=pt(t,i)),i},e.deregisterPlugin=function(e){if(e===Cl)throw new Error("Cannot de-register base plugin.");ut(e)&&(delete xl[e],delete bl.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(xl)),e.forEach(function(e){var i=ct(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=ct(e);return t&&t.VERSION||""},e}();Al.getPlugin=ct,Al.BASE_PLUGIN_NAME=Cl,Al.registerPlugin(Cl,Al),bl.prototype.usingPlugin=function(e){return!!this[El]&&!0===this[El][e]},bl.prototype.hasPlugin=function(e){return!!ut(e)};var Pl=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wl(e,t)},Il=function(e){return 0===e.indexOf("#")?e.slice(1):e};if(ft.hooks_={},ft.hooks=function(e,t){return ft.hooks_[e]=ft.hooks_[e]||[],t&&(ft.hooks_[e]=ft.hooks_[e].concat(t)),ft.hooks_[e]},ft.hook=function(e,t){ft.hooks(e,t)},ft.hookOnce=function(e,t){ft.hooks(e,[].concat(t).map(function(t){return function i(){return ft.removeHook(e,i),t.apply(void 0,arguments)}}))},ft.removeHook=function(e,t){var i=ft.hooks(e).indexOf(t);return!(i<=-1||(ft.hooks_[e]=ft.hooks_[e].slice(),ft.hooks_[e].splice(i,1),0))},!0!==Or.VIDEOJS_NO_DYNAMIC_STYLE&&u()){var Ll=zr(".vjs-styles-defaults");if(!Ll){Ll=U("vjs-styles-defaults");var Dl=zr("head");Dl&&Dl.insertBefore(Ll,Dl.firstChild),F(Ll,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}R(1,ft),ft.VERSION=Lr,ft.options=bl.prototype.options_,ft.getPlayers=function(){return bl.players},ft.getPlayer=function(e){var t,i=bl.players;if("string"==typeof e){var n=Il(e),r=i[n];if(r)return r;t=zr("#"+n)}else t=e;if(c(t)){var a=t,s=a.player,o=a.playerId;if(s||i[o])return s||i[o]}},ft.getAllPlayers=function(){return Object.keys(bl.players).map(function(e){return bl.players[e]}).filter(Boolean)},ft.players=bl.players,ft.getComponent=ca.getComponent,ft.registerComponent=function(e,t){Rs.isTech(t)&&Fr.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),ca.registerComponent.call(ca,e,t)},ft.getTech=Rs.getTech,ft.registerTech=Rs.registerTech,ft.use=function(e,t){Ns[e]=Ns[e]||[],Ns[e].push(t)},Object.defineProperty(ft,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ft.middleware,"TERMINATOR",{value:Fs,writeable:!1,enumerable:!0}),ft.browser=Ua,ft.TOUCH_ENABLED=Oa,ft.extend=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),Pl(i,e),e&&(i.super_=e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},ft.mergeOptions=le,ft.bind=Q,ft.registerPlugin=Al.registerPlugin,ft.deregisterPlugin=Al.deregisterPlugin,ft.plugin=function(e,t){return Fr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Al.registerPlugin(e,t)},ft.getPlugins=Al.getPlugins,ft.getPlugin=Al.getPlugin,ft.getPluginVersion=Al.getPluginVersion,ft.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),ft.options.languages=le(ft.options.languages,((i={})[e]=t,i)),ft.options.languages[e]},ft.log=Fr,ft.createLogger=Br,ft.createTimeRange=ft.createTimeRanges=de,ft.formatTime=et,ft.setFormatTime=function(e){to=e},ft.resetFormatTime=function(){to=Ze},ft.parseUrl=_e,ft.isCrossOrigin=we,ft.EventTarget=Y,ft.on=z,ft.one=G,ft.off=W,ft.trigger=$,ft.xhr=fs,ft.TextTrack=gs,ft.AudioTrack=vs,ft.VideoTrack=ys,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){ft[e]=function(){return Fr.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),$r[e].apply(null,arguments)}}),ft.computedStyle=s,ft.dom=$r,ft.url=us,ft.defineLazyProperty=lt;var Ol,jl=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Ml=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t},Rl=void 0!==Dr?Dr:"undefined"!=typeof window?window:{},Nl="undefined"!=typeof document?document:Rl["__GLOBAL_DOCUMENT_CACHE@4"]||(Rl["__GLOBAL_DOCUMENT_CACHE@4"]=jr),Ul="undefined"!=typeof window?window:void 0!==Dr?Dr:"undefined"!=typeof self?self:{},Fl=mt(t(function(e){var t,i,n,r,a;t=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=a.normalizePath(d)}else u.path=o.path,s.params||(u.params=o.params,s.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(u)},parseURL:function(e){var i=t.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a})),Bl=mt(Or),Vl=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Fl.buildAbsoluteURL(Bl.location&&Bl.location.href||"",e)),Fl.buildAbsoluteURL(e,t))},ql=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),-1<i},t.trigger=function(e,t){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=i.length,o=0;o<s;++o)i[o].apply(this,a)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),Hl=t(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t}),zl=(Ol=Or)&&"object"==typeof Ol&&"default"in Ol?Ol["default"]:Ol,Wl=function(e){for(var t=function(e){return zl.atob?zl.atob(e):Buffer.from(e,"base64").toString("binary")}(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i},$l=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return Ml(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(ql),Gl=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}Ml(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,i){var n=i(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i)
;if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var a=gt(t[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),l&&(i.byterange.offset=parseInt(l,10))}}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=gt(t[1]),i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION.split("x"),c={};u[0]&&(c.width=parseInt(u[0],10)),u[1]&&(c.height=parseInt(u[1],10)),i.attributes.RESOLUTION=c}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=gt(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=gt(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=gt(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},t}(ql),Xl=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new $l,t.parseStream=new Gl,t.lineStream.pipe(t.parseStream);var i,n,r=jl(t),a=[],s={},o={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var u=0;return t.parseStream.on("data",function(e){var t,c;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((s.byterange=t).length=e.length,"offset"in e||(e.offset=u)),"offset"in e&&((s.byterange=t).offset=e.offset),u=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Wl(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!=typeof e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||o,e.attributes?(s.attributes||(s.attributes={}),Hl(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||o,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(c={"default":/yes/i.test(e.attributes.DEFAULT)})["default"]?c.autoselect=!0:c.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(c.language=e.attributes.LANGUAGE),e.attributes.URI&&(c.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(c.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(c.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(c.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=c}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}})[e.tagType]||function(){}).call(r)},uri:function(){s.uri=e.uri,a.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=l,i&&(s.map=i),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}Ml(t,e);var i=t.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(ql),Ql=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,n=/^application\/dash\+xml/i;t.simpleTypeFromSourceType=function(e){return i.test(e)?"hls":n.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}});
/*! @name m3u8-parser @version 4.5.0 @license Apache-2.0 */e(Ql);var Kl=Ql.simpleTypeFromSourceType,Yl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Jl=new RegExp("[\\-\\.0-9"+Yl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Zl=new RegExp("^"+Yl.source+Jl.source+"*(?::"+Yl.source+Jl.source+"*)?$"),eu=0,tu=1,iu=2,nu=3,ru=4,au=5,su=6,ou=7;vt.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),kt(t,t={}),function(e,t,i,n,r){function a(e){var t=e.slice(1,-1);return t in i?i[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function s(t){if(f<t){var i=e.substring(f,t).replace(/&#?\w+;/g,a);d&&o(f),n.characters(i,0,t-f),f=t}}function o(t,i){for(;u<=t&&(i=c.exec(e));)l=i.index,u=l+i[0].length,d.lineNumber++;d.columnNumber=t-l+1}for(var l=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,h=[{currentNSMap:t}],p={},f=0;;){try{var m=e.indexOf("<",f);if(m<0){if(!e.substr(f).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(e.substr(f));g.appendChild(v),n.currentElement=v}return}switch(f<m&&s(m),e.charAt(m+1)){case"/":var y=e.indexOf(">",m+3),_=e.substring(m+2,y),b=h.pop();y<0?(_=e.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),y=m+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),y=m+1+_.length);var T=b.localNSMap,w=b.tagName==_;if(w||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(n.endElement(b.uri,b.localName,_),T)for(var k in T)n.endPrefixMapping(k);w||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);y++;break;case"?":d&&o(m),y=Ct(e,m,n);break;case"!":d&&o(m),y=St(e,m,n,r);break;default:d&&o(m);var S=new Et,C=h[h.length-1].currentNSMap,E=(y=_t(e,m,S,C,a,r),S.length);if(!S.closed&&wt(e,y,S.tagName,p)&&(S.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),d&&E){for(var x=yt(d,{}),A=0;A<E;A++){var P=S[A];o(P.offset),P.locator=yt(d,{})}n.locator=x,bt(S,n,C)&&h.push(S),n.locator=d}else bt(S,n,C)&&h.push(S);"http://www.w3.org/1999/xhtml"!==S.uri||S.closed?y++:y=Tt(e,y,S.tagName,a,n)}}catch(t){r.error("element parse error: "+t),y=-1}f<y?f=y:s(Math.max(m,f)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},Et.prototype={setTagName:function(e){if(!Zl.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,i){if(!Zl.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},xt({},xt.prototype)instanceof xt||(xt=function(e,t){function i(){}for(t in i.prototype=t,i=new i,e)i[t]=e[t];return i});var lu={XMLReader:vt},uu="http://www.w3.org/1999/xhtml",cu={},du=cu.ELEMENT_NODE=1,hu=cu.ATTRIBUTE_NODE=2,pu=cu.TEXT_NODE=3,fu=cu.CDATA_SECTION_NODE=4,mu=cu.ENTITY_REFERENCE_NODE=5,gu=cu.ENTITY_NODE=6,vu=cu.PROCESSING_INSTRUCTION_NODE=7,yu=cu.COMMENT_NODE=8,_u=cu.DOCUMENT_NODE=9,bu=cu.DOCUMENT_TYPE_NODE=10,Tu=cu.DOCUMENT_FRAGMENT_NODE=11,wu=cu.NOTATION_NODE=12,ku={},Su={},Cu=(ku.INDEX_SIZE_ERR=(Su[1]="Index size error",1),ku.DOMSTRING_SIZE_ERR=(Su[2]="DOMString size error",2),ku.HIERARCHY_REQUEST_ERR=(Su[3]="Hierarchy request error",3)),Eu=(ku.WRONG_DOCUMENT_ERR=(Su[4]="Wrong document",4),ku.INVALID_CHARACTER_ERR=(Su[5]="Invalid character",5),ku.NO_DATA_ALLOWED_ERR=(Su[6]="No data allowed",6),ku.NO_MODIFICATION_ALLOWED_ERR=(Su[7]="No modification allowed",7),ku.NOT_FOUND_ERR=(Su[8]="Not found",8)),xu=(ku.NOT_SUPPORTED_ERR=(Su[9]="Not supported",9),ku.INUSE_ATTRIBUTE_ERR=(Su[10]="Attribute in use",10));ku.INVALID_STATE_ERR=(Su[11]="Invalid state",11),ku.SYNTAX_ERR=(Su[12]="Syntax error",12),ku.INVALID_MODIFICATION_ERR=(Su[13]="Invalid modification",13),ku.NAMESPACE_ERR=(Su[14]="Invalid namespace",14),ku.INVALID_ACCESS_ERR=(Su[15]="Invalid access",15),It.prototype=Error.prototype,At(ku,It),Lt.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)li(this[n],i,e,t);return i.join("")}},Dt.prototype.item=function(e){return Ot(this),this[e]},Pt(Dt,Lt),jt.prototype={length:0,item:Lt.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new It(xu);var i=this.getNamedItem(e.nodeName);return Rt(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new It(xu);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Rt(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return Nt(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return Nt(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},Ut.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];return!(!i||t&&!(t in i))},createDocument:function(e,t,i){var n=new qt;if(n.implementation=this,n.childNodes=new Lt,(n.doctype=i)&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new Zt;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=i,n}},Ft.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return $t(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return Wt(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function t(e,i,n){var r=new i.constructor;for(var a in i){var s=i[a];"object"!=typeof s&&s!=r[a]&&(r[a]=s)}switch(i.childNodes&&(r.childNodes=new Lt),r.ownerDocument=e,r.nodeType){case du:var o=i.attributes,l=r.attributes=new jt,u=o.length;l._ownerElement=r;for(var c=0;c<u;c++)r.setAttributeNode(t(e,o.item(c),!0));break;case hu:n=!0}if(n)for(var d=i.firstChild;d;)r.appendChild(t(e,d,n)),d=d.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==pu&&e.nodeType==pu?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=t.nodeType==hu?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==hu?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},At(cu,Ft),At(cu,Ft.prototype),qt.prototype={nodeName:"#document",nodeType:_u,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=Tu)return null==this.documentElement&&e.nodeType==du&&(this.documentElement=e),$t(this,e,t),e.ownerDocument=this,e;for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),Wt(this,e)},importNode:function(e,t){return function i(e,t,n){var r;switch(t.nodeType){case du:(r=t.cloneNode(!1)).ownerDocument=e;case Tu:break;case hu:n=!0}if((r=r||t.cloneNode(!1)).ownerDocument=e,r.parentNode=null,n)for(var a=t.firstChild;a;)r.appendChild(i(e,a,n)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return Vt(this.documentElement,function(i){if(i.nodeType==du&&i.getAttribute("id")==e)return t=i,!0}),t},createElement:function(e){var t=new Gt;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new Lt,(t.attributes=new jt)._ownerElement=t},createDocumentFragment:function(){var e=new ni;return e.ownerDocument=this,e.childNodes=new Lt,e},createTextNode:function(e){var t=new Kt;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Yt;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Jt;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new ri;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new Xt;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ii;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new Gt,n=t.split(":"),r=i.attributes=new jt;return i.childNodes=new Lt,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i},createAttributeNS:function(e,t){var i=new Xt,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},Pt(qt,Ft),qt.prototype.getElementsByTagName=(Gt.prototype={nodeType:du,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===Tu?this.insertBefore(e,null):function(e,t){var i=t.parentNode;if(i){var n=e.lastChild;i.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,zt(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new Dt(this,function(t){var i=[];return Vt(t,function(n){n===t||n.nodeType!=du||"*"!==e&&n.tagName!=e||i.push(n)}),i})},getElementsByTagNameNS:function(e,t){return new Dt(this,function(i){var n=[];return Vt(i,function(r){r===i||r.nodeType!==du||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)}),n})}}).getElementsByTagName,qt.prototype.getElementsByTagNameNS=Gt.prototype.getElementsByTagNameNS,Pt(Gt,Ft),Xt.prototype.nodeType=hu,Pt(Xt,Ft),Qt.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(Su[Cu])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){i=this.data.substring(0,e)+i+this.data.substring(e+t),this.nodeValue=this.data=i,this.length=i.length}},Pt(Qt,Ft),Kt.prototype={nodeName:"#text",nodeType:pu,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},Pt(Kt,Qt),Yt.prototype={nodeName:"#comment",nodeType:yu},Pt(Yt,Qt),Jt.prototype={nodeName:"#cdata-section",nodeType:fu},Pt(Jt,Qt),Zt.prototype.nodeType=bu,Pt(Zt,Ft),ei.prototype.nodeType=wu,Pt(ei,Ft),ti.prototype.nodeType=gu,Pt(ti,Ft),ii.prototype.nodeType=mu,Pt(ii,Ft),ni.prototype.nodeName="#document-fragment",ni.prototype.nodeType=Tu,Pt(ni,Ft),ri.prototype.nodeType=vu,Pt(ri,Ft),ai.prototype.serializeToString=function(e,t,i){return si.call(e,t,i)},Ft.prototype.toString=si;try{Object.defineProperty&&(Object.defineProperty(Dt.prototype,"length",{get:function(){return Ot(this),this.$$length}}),Object.defineProperty(Ft.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case du:case Tu:var i=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&i.push(e(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case du:case Tu:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ui=function(e,t,i){e["$$"+t]=i})}catch(Dr){}var Au={DOMImplementation:Ut,XMLSerializer:ai},Pu=t(function(e,t){function i(e){this.options=e||{locator:{}}}function n(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function o(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var i=this.options,r=new l,s=i.domBuilder||new n,o=i.errorHandler,u=i.locator,c=i.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&s.setDocumentLocator(u),r.errorHandler=function(e,t,i){function r(t){var n=e[t];!n&&o&&(n=2==e.length?function(i){e(t,i)}:e),s[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+a(i))}||function(){}}if(!e){if(t instanceof n)return t;e=t}var s={},o=e instanceof Function;return i=i||{},r("warning"),r("error"),r("fatalError"),s}(o,s,u),r.domBuilder=i.domBuilder||s,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="\xa9",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,d):r.errorHandler.error("invalid doc source"),s.doc},n.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var a=this.doc,s=a.createElementNS(e,i||t),l=n.length;o(this,s),this.currentElement=s,this.locator&&r(this.locator,s);for(var u=0;u<l;u++){e=n.getURI(u);var c=n.getValue(u),d=(i=n.getQName(u),a.createAttributeNS(e,i));this.locator&&r(n.getLocator(u),d),d.value=d.nodeValue=c,s.setAttributeNode(d)}},endElement:function(){var e=this.currentElement;e.tagName,this.currentElement=e.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,i),o(this,i)},ignorableWhitespace:function(){},characters:function(e){if(e=s.apply(this,arguments)){if(this.cdata)var t=this.doc.createCDATASection(e);else t=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(e)&&this.doc.appendChild(t),this.locator&&r(this.locator,t)}},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e){e=s.apply(this,arguments);var t=this.doc.createComment(e);this.locator&&r(this.locator,t),o(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var a=n.createDocumentType(e,t,i);this.locator&&r(this.locator,a),o(this,a)}},warning:function(){},error:function(){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){n.prototype[e]=function(){return null}});var l=lu.XMLReader,u=t.DOMImplementation=Au.DOMImplementation;t.XMLSerializer=Au.XMLSerializer,t.DOMParser=i}),Iu=(Pu.DOMImplementation,Pu.XMLSerializer,Pu.DOMParser),Lu="INVALID_NUMBER_OF_PERIOD",Du="DASH_EMPTY_MANIFEST",Ou="DASH_INVALID_XML",ju="NO_BASE_URL",Mu="SEGMENT_TIME_UNSPECIFIED",Ru="UNSUPPORTED_UTC_TIMING_SCHEME",Nu={"static":function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+i)/1e3,f=n+l,m=p+c-f,g=Math.ceil(m*a/s),v=Math.floor((p-f-h)*a/s),y=Math.floor((p-f)*a/s);return{start:Math.max(0,v),end:Math.min(g,y)}}},Uu=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Fu={mediaPresentationDuration:function(e){return Pi(e)},availabilityStartTime:function(e){return function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)}(e)/1e3},minimumUpdatePeriod:function(e){return Pi(e)},suggestedPresentationDelay:function(e){return Pi(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Pi(e)},start:function(e){return Pi(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Pi(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Bu={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Vu=vi,qu=Math.pow(2,32),Hu=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+4),n+=8):(i.earliestPresentationTime=t.getUint32(n)*qu+t.getUint32(n+4),i.firstOffset=t.getUint32(n+8)*qu+t.getUint32(n+12),n+=16),n+=2;var r=t.getUint16(n);for(n+=2;0<r;n+=12,r--)i.references.push({referenceType:(128&e[n])>>>7,referencedSize:2147483647&t.getUint32(n),subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(128&e[n+8]),sapType:(112&e[n+8])>>>4,sapDeltaTime:268435455&t.getUint32(n+8)});return i},zu=t(function(e,t){function i(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)}function n(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}function r(e,t){void 0===t&&(t=0);var n=(e=i(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n}function a(e,t){return void 0===t&&(t=0),(e=i(e)).length-t<10||"ID3"!==n(e.subarray(t,t+3))?t:a(e,t+=r(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var s={aac:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&16==(22&e[t+1])},mp3:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&2==(6&e[t+1])},webm:function(e){return 4<=e.length&&26==(255&e[0])&&69==(255&e[1])&&223==(255&e[2])&&163==(255&e[3])},mp4:function(e){return 8<=e.length&&/^(f|s)typ$/.test(n(e.subarray(4,8)))&&!/^ftyp3g$/.test(n(e.subarray(4,10)))},"3gp":function(e){return 10<=e.length&&/^ftyp3g$/.test(n(e.subarray(4,10)))},ts:function(e){if(e.length<189&&1<=e.length)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return 4<=e.length&&/^fLaC$/.test(n(e.subarray(0,4)))},ogg:function(e){return 4<=e.length&&/^OggS$/.test(n(e.subarray(0,4)))}},o=Object.keys(s).filter(function(e){return"ts"!==e}).concat("ts");o.forEach(function(e){var t=s[e];s[e]=function(e){return t(i(e))}}),t.detectContainerForBytes=function(e){e=i(e);for(var t=0;t<o.length;t++){var n=o[t];if(s[n](e))return n}return""},t.getId3Offset=a,t.id3Size=r,t.isLikely=s,t.isLikelyFmp4MediaSegment=function(e){e=i(e);for(var t=0;t<e.length;){var r=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===n(e.subarray(t+4,t+8)))return!0;0==r||r+t>e.length?t=e.length:t+=r}return!1}});e(zu);var Wu=zu.detectContainerForBytes,$u=zu.getId3Offset,Gu=(zu.id3Size,zu.isLikely,zu.isLikelyFmp4MediaSegment),Xu=t(function(e,t){function i(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)}Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToString=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},t.concatTypedArrays=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e+(t&&(t.byteLength||t.length)||0)},0),a=new Uint8Array(r),s=0;return t.forEach(function(e){e=i(e),a.set(e,s),s+=e.byteLength}),a},t.isTypedArray=function(e){return ArrayBuffer.isView(e)},t.stringToBytes=function(e,t){return void 0===t&&(t=!1),"string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map(function(e){return 255&e.charCodeAt(0)}))},t.toUint8=i});e(Xu),Xu.bytesToString;var Qu=Xu.concatTypedArrays,Ku=(Xu.isTypedArray,Xu.stringToBytes),Yu=Xu.toUint8,Ju=27,Zu=15,ec=21;Ui.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},Ui.prototype.push=function(e){this.trigger("data",e)},Ui.prototype.flush=function(e){this.trigger("done",e)},Ui.prototype.partialFlush=function(e){this.trigger("partialdone",e)},Ui.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},Ui.prototype.reset=function(e){this.trigger("reset",e)},new Ui;var tc={parseType:function(e,t){var i=Bi(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=Vi(e),i=4+qi(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=Vi(e),n=4+qi(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Vi,parsePesType:function(e,t){switch(t[Bi(e)]){case Ju:return"video";case Zu:return"audio";case ec:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Vi(e))return null;var t=4+qi(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+qi(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(a=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Hi(31&i[r+3])&&(a=!0),a}},ic=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nc={isLikelyAacData:function(e){var t=function i(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:i(e,t+=zi(e,t))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:zi,parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ic[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Wi(e.subarray(10,14)));do{if((i=Wi(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r)))break;var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}}t+=10,t+=i}while(t<e.byteLength);return null}},rc=9e4,ac=(function(e){return 9e4*e},function(e,t){return e*t},function(e){return e/9e4},function(e,t){return e/t},rc),sc=Fi,oc={};oc.ts=tc,oc.aac=nc;var lc,uc=rc,cc=188,dc=function(e,t){var i;return(i=oc.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(oc.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=oc.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(t=e.subarray(o,o+s),a=oc.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=oc.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(t=e.subarray(o,o+s),r=oc.aac.parseSampleRate(t)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var l=uc/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}(e):Xi(e))&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=sc(e.dts,i),e.pts=sc(e.pts,i),e.dtsTime=e.dts/uc,e.ptsTime=e.pts/uc})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=sc(e.dts,n),e.pts=sc(e.pts,n),e.dtsTime=e.dts/uc,e.ptsTime=e.pts/uc}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=sc(r.dts,n),r.pts=sc(r.pts,n),r.dtsTime=r.dts/uc,r.ptsTime=r.dts/uc}}}(i,t),i):null},hc=function(e){return e>>>0},pc=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},fc=hc,mc=function zd(e,t){var i,n,r,a,s,o=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=fc(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=pc(e.subarray(i+4,i+8)),a=1<n?i+n:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(i+8,a)):(s=zd(e.subarray(i+8,a),t.slice(1))).length&&(o=o.concat(s))),i=a;return o},gc=hc,vc=function(e){return("00"+e.toString(16)).slice(-2)},yc=function(e,t){var i,n,r;return i=mc(t,["moof","traf"]),n=[].concat.apply([],i.map(function(t){return mc(t,["tfhd"]).map(function(i){var n,r,a;return n=gc(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,(a="number"!=typeof(a=mc(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=gc(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=gc(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0])||isNaN(a)?1/0:a)/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},_c=function(e){var t=mc(e,["moov","trak"]),i=[];return t.forEach(function(e){var t,n,r={},a=mc(e,["tkhd"])[0];a&&(n=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===n?t.getUint32(12):t.getUint32(20));var s=mc(e,["mdia","hdlr"])[0];if(s){var o=pc(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=mc(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=pc(u.subarray(4,8));var c,d=mc(u,[r.codec])[0];d&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(c=d.subarray(78),"avcC"===pc(c.subarray(4,8))&&11<c.length?(r.codec+=".",r.codec+=vc(c[9]),r.codec+=vc(c[10]),r.codec+=vc(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=d.subarray(28),"esds"===pc(c.subarray(4,8))&&20<c.length&&0!==c[19]?(r.codec+="."+vc(c[19]),r.codec+="."+vc(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=mc(e,["mdia","mdhd"])[0];h&&(r.timescale=lc(h)),i.push(r)}),i},bc=(lc=function(e){var t=0===e[0]?12:20;return gc(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])},t(function(e,t){function i(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)}):e}function n(e){return e.map(i)}function r(e){void 0===e&&(e="");var t=e.split(","),i={},n=[];return t.forEach(function(e){var t;e=e.trim(),d.forEach(function(n){var r=c[n].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=n;var a=e.substring(0,r[1].length),s=e.replace(a,"");i[n]={type:a,details:s}}}),t||n.push(e)}),n.length&&(i.unknown=n),i}function a(e){return void 0===e&&(e=""),c.audio.test(e.trim().toLowerCase())}function s(e){return void 0===e&&(e=""),c.text.test(e.trim().toLowerCase())}function o(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(e){return i(e.trim())}),n="video";1===t.length&&a(t[0])?n="audio":1===t.length&&s(t[0])&&(n="application");var r="mp4";return t.every(function(e){return c.mp4.test(e)})?r="mp4":t.every(function(e){return c.webm.test(e)})?r="webm":t.every(function(e){return c.ogg.test(e)})&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}}Object.defineProperty(t,"__esModule",{value:!0});var l,u=(l=Or)&&"object"==typeof l&&"default"in l?l["default"]:l,c={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},d=["video","audio","text"],h=["Video","Audio","Text"];t.DEFAULT_AUDIO_CODEC="mp4a.40.2",t.DEFAULT_VIDEO_CODEC="avc1.4d400d",t.browserSupportsCodec=function(e){return void 0===e&&(e=""),u.MediaSource&&u.MediaSource.isTypeSupported&&u.MediaSource.isTypeSupported(o(e))||!1},t.codecsFromDefault=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var a=i[n];if(a["default"]&&a.playlists)return r(a.playlists[0].attributes.CODECS)}return null},t.getMimeForCodec=o,t.isAudioCodec=a,t.isTextCodec=s,t.isVideoCodec=function(e){return void 0===e&&(e=""),c.video.test(e.trim().toLowerCase())},t.mapLegacyAvcCodecs=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return n([e])[0]})},t.muxerSupportsCodec=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<h.length;t++)if(c["muxer"+h[t]].test(e))return!0;return!1})},t.parseCodecs=r,t.translateLegacyCodec=i,t.translateLegacyCodecs=n}));e(bc);var Tc,wc=bc.DEFAULT_AUDIO_CODEC,kc=bc.DEFAULT_VIDEO_CODEC,Sc=bc.browserSupportsCodec,Cc=bc.codecsFromDefault,Ec=bc.getMimeForCodec,xc=bc.isAudioCodec,Ac=(bc.isTextCodec,bc.isVideoCodec),Pc=(bc.mapLegacyAvcCodecs,bc.muxerSupportsCodec),Ic=bc.parseCodecs,Lc=bc.translateLegacyCodec,Dc=(bc.translateLegacyCodecs,Vl),Oc=ft.log,jc=ft.mergeOptions,Mc=function(e){function t(t,i,n){var r;if(void 0===n&&(n={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");var a=n,s=a.withCredentials,o=void 0!==s&&s,l=a.handleManifestRedirects,u=void 0!==l&&l;r.src=t,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=u;var c=i.options_;return r.customTagParsers=c&&c.customTagParsers||[],r.customTagMappers=c&&c.customTagMappers||[],r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.vhs_.xhr({uri:Dc(r.master.uri,r.media().uri),
withCredentials:r.withCredentials},function(e){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}))}),r}Ml(t,e);var i=t.prototype;return i.playlistRequestError=function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},i.haveMetadata=function(e){var t=this,i=e.playlistString,n=e.playlistObject,r=e.url,a=e.id;this.request=null,this.state="HAVE_METADATA";var s=n||Yi({manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});s.lastRequest=Date.now(),Zi({playlist:s,uri:r,id:a});var o=nn(this.master,s);this.targetDuration=s.targetDuration,o?(this.master=o,this.media_=this.master.playlists[a]):this.trigger("playlistunchanged"),this.media().endList||(Ul.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Ul.setTimeout(function(){t.trigger("mediaupdatetimeout")},rn(this.media(),!!o))),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ul.clearTimeout(this.mediaUpdateTimeout),Ul.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,t){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Ul.clearTimeout(this.finalRenditionTimeout),t){var n=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=Ul.setTimeout(this.media.bind(this,e,!1),n)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id;if(this.master.playlists[e.id].endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,n){if(i.request){if(e.lastRequest=Date.now(),e.resolvedUri=Qi(i.handleManifestRedirects,e.resolvedUri,n),t)return i.playlistRequestError(i.request,e,r);i.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},i.pause=function(){this.stopRequest(),Ul.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(e){var t=this;Ul.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ul.setTimeout(function(){return t.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Ul.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Qi(e.handleManifestRedirects,e.src,i);var n=Yi({manifestString:i.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers});e.setupInitialPlaylist(n)}})},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,en(this.master,this.srcUri()),e.playlists.forEach(function(e){e.segments&&e.segments.forEach(function(t){tn(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Ul.location.href;this.master=function(e,t){var i=Ki(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ul.location.href,resolvedUri:Ul.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(ft.EventTarget),Rc=1/30,Nc=ft.createTimeRange,Uc={duration:dn,seekable:function(e,t,i){var n=t||0,r=fn(e,t,!0,i);return null===r?Nc():Nc(n,r)},safeLiveIndex:pn,getMediaInfoForTime:function(e,t,i,n){var r,a=e.segments.length,s=t-n;if(s<0){if(0<i)for(r=i-1;0<=r;r--)if(0<(s+=e.segments[r].duration+Rc))return{mediaIndex:r,startTime:n-hn(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<a;r++)if((s-=e.segments[r].duration+Rc)<0)return{mediaIndex:r,startTime:n+hn(e,i,r)};return{mediaIndex:a-1,startTime:t}},isEnabled:vn,isDisabled:function(e){return e.disabled},isBlacklisted:mn,isIncompatible:gn,playlistEnd:fn,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:yn,estimateSegmentRequestTime:function(e,t,i,n){return void 0===n&&(n=0),yn("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:_n},Fc=ft.xhr,Bc=ft.mergeOptions,Vc=Object.freeze({__proto__:null,createTransferableMessage:Cn,initSegmentId:En,segmentKeyId:xn,hexDump:An,tagDump:function(e){return An(e.bytes)},textRanges:function(e){var t,i,n,r="";for(t=0;t<e.length;t++)r+=(n=t,(i=e).start(n)+"-"+i.end(n)+" ");return r}}),qc=ft.mergeOptions,Hc=function(e){function t(t,i,n,r){var a;void 0===n&&(n={}),(a=e.call(this)||this).masterPlaylistLoader_=r||jl(a),r||(a.isMaster_=!0);var s=n,o=s.withCredentials,l=void 0!==o&&o,u=s.handleManifestRedirects,c=void 0!==u&&u;if(a.vhs_=i,a.withCredentials=l,a.handleManifestRedirects=c,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_(a.media().id)}),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}Ml(t,e);var i=t.prototype;return i.requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(e,t,i){var n=this,r=e.sidx&&Dn(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var a=Qi(this.handleManifestRedirects,e.sidx.resolvedUri),s=this.masterPlaylistLoader_.sidxMapping_;s[r]={sidxInfo:e.sidx};var o=function(a,o){if(!n.requestErrored_(a,o,t)){var l=Hu(Yu(o.response).subarray(8));return s[r].sidx=l,Vu(e,l,e.sidx.resolvedUri),i(!0)}};this.request=function(e,t,i){function n(e,t,n,r){return t.abort(),o=!0,i(e,t,n,r)}function r(e,t){if(!o){if(e)return n(e,t,"",s);var i=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);if(s=Qu(s,Ku(i,!0)),a=a||$u(s),s.length<10||a&&s.length<a+2)return Ln(t,function(){return n(e,t,"",s)});var r=Wu(s);return"ts"===r&&s.length<188?Ln(t,function(){return n(e,t,"",s)}):!r&&s.length<376?Ln(t,function(){return n(e,t,"",s)}):n(null,t,r,s)}}var a,s=[],o=!1,l=t({uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function(t){return t.total,t.loaded,bn(e,null,{statusCode:e.status},r)})}},function(e,t){return bn(l,e,t,r)});return l}(a,this.vhs_.xhr,function(t,i,r,s){if(t)return o(t,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},i);var l=e.sidx.byterange,u=l.offset,c=l.length;if(s.length>=c+u)return o(t,{response:s.subarray(u,u+c),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:wn({byterange:e.sidx.byterange})},o)})}else this.mediaRequest_=Ul.setTimeout(function(){return i(!1)},0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ul.clearTimeout(this.minimumUpdatePeriodTimeout_),Ul.clearTimeout(this.mediaRequest_),Ul.clearTimeout(this.mediaUpdateTimeout),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,function(){t.haveMetadata({startingState:i,playlist:e})}))},i.haveMetadata=function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.stopRequest(),Ul.clearTimeout(this.mediaUpdateTimeout),Ul.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(e){var t=this;Ul.clearTimeout(this.mediaUpdateTimeout),Ul.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ul.setTimeout(function(){return t.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Ul.setTimeout(function(){return e.haveMaster_()},0)},i.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(i,n){if(!t.requestErrored_(i,n)){var r=n.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?t.masterLoaded_=Date.parse(n.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=Qi(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),void t.syncClientServerClock_(function(){return e(n,r)})):e(n,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)})},i.syncClientServerClock_=function(e){var t=this,i=Ni(this.masterPlaylistLoader_.masterXml_);return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Dc(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,r){if(t.request){if(n)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}}))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=function(e){var t=e.masterXml,i=e.srcUrl,n=Ri(t,{manifestUri:i,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping});return en(n,i),n}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),t=this.masterPlaylistLoader_.master;t&&(e=function(e,t,i){for(var n=!0,r=qc(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),a=0;a<t.playlists.length;a++){var s=t.playlists[a];if(s.sidx){var o=Dn(s.sidx);i&&i[o]&&Vu(s,i[o].sidx,s.sidx.resolvedUri)}var l=nn(r,s);l&&(r=l,n=!1)}return Ji(t,function(e,t,i,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=nn(r,e.playlists[0]);o&&((r=o).mediaGroups[t][i][a].playlists[0]=r.playlists[s],n=!1)}}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:r}(t,e,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=e||t;var i=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return i&&i!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=i),(!t||e&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(e)},i.updateMinimumUpdatePeriodTimeout_=function(){function e(i){t.minimumUpdatePeriodTimeout_=Ul.setTimeout(function(){t.trigger("minimumUpdatePeriod"),e(i)},i)}var t=this;Ul.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.masterPlaylistLoader_.master&&this.masterPlaylistLoader_.master.minimumUpdatePeriod;0<i?e(i):0===i&&(this.media()?e(1e3*this.media().targetDuration):this.one("loadedplaylist",function(){e(1e3*t.media().targetDuration)}))},i.refreshXml_=function(){var e=this;this.requestMaster_(function(t,i){i&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=function(e,t){var i=On(e.playlists,t);return Ji(e,function(e){if(e.playlists&&e.playlists.length){var n=e.playlists;i=qc(i,On(n,t))}}),i}(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];n?this.media_=i[e]:this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=Ul.setTimeout(function(){t.trigger("mediaupdatetimeout")},rn(this.media(),Boolean(n)))),this.trigger("loadedplaylist")},t}(ft.EventTarget),zc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Wc=[],$c=function(){Tc=null,Wc.length&&("function"==typeof(Tc=Wc.shift())?Tc():Mn(Tc))},Gc=function(e){Nn("reset",e)},Xc=function(){Tc=null,Wc.length=0},Qc=function(e){Nn("endTimeline",e)},Kc=2,Yc=-101,Jc=-102,Zc="undefined"!=typeof window?window:{},ed="undefined"==typeof Symbol?"__target":Symbol(),td="application/javascript",id=Zc.BlobBuilder||Zc.WebKitBlobBuilder||Zc.MozBlobBuilder||Zc.MSBlobBuilder,nd=Zc.URL||Zc.webkitURL||nd&&nd.msURL,rd=Zc.Worker;if(rd){var ad,sd=Gn("self.onmessage = function () {}"),od=new Uint8Array(1);try{(ad=new rd(sd)).postMessage(od,[od.buffer])}catch(Dr){rd=null}finally{nd.revokeObjectURL(sd),ad&&ad.terminate()}}var ld,ud=new $n("./transmuxer-worker.worker.js",function(){var e=this;
/*! @name @videojs/http-streaming @version 2.4.1 @license Apache-2.0 */!function(){function t(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}}function i(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i}function n(e){for(var t=[];e--;)t.push(0);return t}function r(){if(!me){var e={96000:[Ie,[227,64],n(154),[56]],88200:[Ie,[231],n(170),[56]],64000:[Ie,[248,192],n(240),[56]],48000:[Ie,[255,192],n(268),[55,148,128],n(54),[112]],44100:[Ie,[255,192],n(268),[55,163,128],n(84),[112]],32000:[Ie,[255,192],n(268),[55,234],n(226),[112]],24000:[Ie,[255,192],n(268),[55,255,128],n(268),[111,112],n(126),[224]],16000:[Ie,[255,192],n(268),[55,255,128],n(268),[111,255],n(269),[223,108],n(195),[1,192]],12000:[Le,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,253,128],n(259),[56]],11025:[Le,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,255,192],n(268),[55,175,128],n(108),[112]],8000:[Le,n(268),[3,121,16],n(47),[7]]};t=e,me=Object.keys(t).reduce(function(e,i){return e[i]=new Uint8Array(t[i].reduce(function(e,t){return e.concat(t)},[])),e},{})}var t;return me}function a(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new tt(0,0),new tt(0,1),new tt(1,0),new tt(1,1)],this.cc708Stream_=new Je,this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done"))}function s(e){return 32<=e&&e<=127||160<=e&&e<=255}function o(e){this.windowNum=e,this.reset()}function l(e){this.serviceNum=e,this.text="",this.currentWindow=new o(-1),this.windows=[]}function u(e){return null===e?"":(e=Ze[e]||e,String.fromCharCode(e))}function c(){for(var e=[],t=15;t--;)e.push("");return e}function d(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}function h(e){var t,i;h.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=d(e.dts,i),e.pts=d(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}function p(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}function f(e,t,i){return decodeURIComponent(p(e,t,i))}function m(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}function g(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=0<=i?i:0,(16&e[t+5])>>4?i+20:i+10}function v(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function y(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}}function _(e,t){var i=[],n=0,r=0,a=0,s=1/0,o=null,l=null;t=t||{},_.prototype.init.call(this),this.push=function(t){We(e,t),e&&Ot.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.processFrames_=function(){var u,c,d,h,p;0!==i.length&&0!==(u=Fe(i,e,r)).length&&(e.baseMediaDecodeTime=ze(e,t.keepOriginalTimestamps),Ue(e,u,a,s),e.samples=Be(u),d=be(Ve(u)),i=[],c=Te(n,[e]),n++,e.initSegment=we([e]),(h=new Uint8Array(c.byteLength+d.byteLength)).set(c),h.set(d,c.byteLength),He(e),null===o&&(l=o=u[0].pts),l+=u.length*(1024*Bt/e.samplerate),p={start:o},this.trigger("timingInfo",p),this.trigger("data",{track:e,boxes:h}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:o,end:l}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){He(e),l=o=null},this.reset=function(){this.resetTiming_(),i=[],this.trigger("reset")}}function b(e,t){var i,n,r,a=0,s=[],o=[],l=null,u=null,c=!0;t=t||{},b.prototype.init.call(this),this.push=function(t){We(e,t),"undefined"==typeof e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],jt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),s.push(t)},this.processNals_=function(i){var n;for(s=o.concat(s);s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0!==s.length){var d=ke(s);if(d.length)if(o=d[d.length-1],i&&(d.pop(),d.duration-=o.duration,d.nalCount-=o.length,d.byteLength-=o.byteLength),d.length){if(this.trigger("timelineStartInfo",e.timelineStartInfo),c){if(!(r=Se(d))[0][0].keyFrame){if(!(r=Ce(r))[0][0].keyFrame)return s=[].concat.apply([],d).concat(o),void(o=[]);(d=[].concat.apply([],r)).duration=r.duration}c=!1}for(null===l&&(l=d[0].pts,u=l),u+=d.duration,this.trigger("timingInfo",{start:l,end:u}),n=0;n<d.length;n++){var h=d[n];e.samples=Ae(h);var p=be(Pe(h));He(e),We(e,h),e.baseMediaDecodeTime=ze(e,t.keepOriginalTimestamps);var f=Te(a,[e]);a++,e.initSegment=we([e]);var m=new Uint8Array(f.byteLength+p.byteLength);m.set(f),m.set(p,f.byteLength),this.trigger("data",{track:e,boxes:m,sequence:a,videoFrameDts:h.dts,videoFramePts:h.pts})}s=[]}else s=[]}},this.resetTimingAndConfig_=function(){n=i=void 0,u=l=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),o=[],s=[],c=!0,this.trigger("reset")}}function T(e){return e.prototype=new pe,e.prototype.init.call(e),e}function w(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",function(i){i.dispatchType=e.metadataStream.dispatchType,i.cueTime=je(i.pts),t.trigger("id3Frame",i)}),e.on("caption",function(e){t.trigger("caption",e)})}function k(e){var t=null,i=!0;e=e||{},k.prototype.init.call(this),e.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.push=function(n){if(i){var r=Ht(n);!r||t&&"aac"===t.type?r||t&&"ts"===t.type||w(t=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new mt.TransportPacketStream,parse:new mt.TransportParseStream,elementary:new mt.ElementaryStream,timestampRollover:new mt.TimestampRolloverStream,adts:new Ft.Adts,h264:new Ft.h264.H264Stream,captionStream:new mt.CaptionStream,metadataStream:new mt.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",function(i){if("metadata"===i.type){for(var n=0;n<i.tracks.length;n++)t.tracks[i.tracks[n].type]||(t.tracks[i.tracks[n].type]=i.tracks[n],t.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new qt(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",function(i){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(i.dts-e.baseMediaDecodeTime)}),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",function(e){t.trigger("data",{type:"video",data:e})}),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new Vt(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}}),t.captionStream.on("data",function(i){var n;n=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,i.startTime=Ne(i.startPts,n,e.keepOriginalTimestamps),i.endTime=Ne(i.endPts,n,e.keepOriginalTimestamps),t.trigger("caption",i)}),(t=T(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(e),this):w(t=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new mt.MetadataStream,aacStream:new Dt,audioRollover:new mt.TimestampRolloverStream("audio"),timedMetadataRollover:new mt.TimestampRolloverStream("timed-metadata"),adtsStream:new Tt(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type&&"audio"!==i.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new Vt(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))}),(t=T(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(e),this),i=!1}t.headOfPipeline.push(n)},this.flush=function(){t&&(i=!0,t.headOfPipeline.flush())},this.partialFlush=function(){t&&t.headOfPipeline.partialFlush()},this.endTimeline=function(){t&&t.headOfPipeline.endTimeline()},this.reset=function(){t&&t.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(i){e.keepOriginalTimestamps||(e.baseMediaDecodeTime=i),t&&(t.tracks.audio&&(t.tracks.audio.timelineStartInfo.dts=void 0,t.tracks.audio.timelineStartInfo.pts=void 0,He(t.tracks.audio),t.audioRollover&&t.audioRollover.discontinuity()),t.tracks.video&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),t.tracks.video.timelineStartInfo.dts=void 0,t.tracks.video.timelineStartInfo.pts=void 0,He(t.tracks.video)),t.timestampRollover&&t.timestampRollover.discontinuity())},this.setRemux=function(i){e.remux=i,t&&t.coalesceStream&&t.coalesceStream.setRemux(i)},this.setAudioAppendStart=function(e){t&&t.tracks.audio&&t.audioSegmentStream&&t.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(){}}function S(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null}function C(e,t){var i=Xt(e,["moof","traf"]),n=Xt(e,["mdat"]),r={},a=[];return n.forEach(function(e,t){var n=i[t];a.push({mdat:e,traf:n})}),a.forEach(function(e){var i,n=e.mdat,a=e.traf,s=Xt(a,["tfhd"]),o=Zt(s[0]),l=o.trackId,u=Xt(a,["tfdt"]),c=0<u.length?Kt(u[0]).baseMediaDecodeTime:0,d=Xt(a,["trun"]);t===l&&0<d.length&&(i=function(e,t,i){var n,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=S(r,t);if(n={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:ei(u),trackId:i},c)n.pts=c.pts,n.dts=c.dts,s=c;else{if(!s)break;n.pts=s.pts,n.dts=s.dts}l.push(n)}return l}(n,function(e,t,i){var n=c,r=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,s=i.trackId,o=[];return e.forEach(function(e){var t=Jt(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(d,0,o),l),r[l]||(r[l]=[]),r[l]=r[l].concat(i))}),r}function E(e){return"AudioSegmentStream"===e?"audio":"VideoSegmentStream"===e?"video":""}t.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var x,A,P,I,L,D,O,j,M,R,N,U,F,B,V,q,H,z,W,$,G,X,Q,K,Y,J,Z,ee,te,ie,ne,re,ae,se,oe,le,ue,ce,de,he,pe=t,fe=Math.pow(2,32)-1;!function(){var e;if(X={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in X)X.hasOwnProperty(e)&&(X[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);Q=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Y=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),K=new Uint8Array([0,0,0,1]),J=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ee={video:J,audio:Z},ne=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ie=new Uint8Array([0,0,0,0,0,0,0,0]),re=new Uint8Array([0,0,0,0,0,0,0,0]),ae=re,se=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),oe=re,te=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),x=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},A=function(){return x(X.dinf,x(X.dref,ne))},P=function(e){return x(X.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},V=function(e){return x(X.hdlr,ee[e])},B=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),x(X.mdhd,t)},F=function(e){return x(X.mdia,B(e),V(e.type),D(e))},L=function(e){return x(X.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},D=function(e){return x(X.minf,"video"===e.type?x(X.vmhd,te):x(X.smhd,ie),A(),H(e))},O=function(e,t){for(var i=[],n=t.length;n--;)i[n]=W(t[n]);return x.apply(null,[X.moof,L(e)].concat(i))},j=function(e){for(var t=e.length,i=[];t--;)i[t]=N(e[t]);return x.apply(null,[X.moov,R(4294967295)].concat(i).concat(M(e)))},M=function(e){for(var t=e.length,i=[];t--;)i[t]=$(e[t]);return x.apply(null,[X.mvex].concat(i))},R=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return x(X.mvhd,t)},q=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)t=n[i].flags,r[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return x(X.sdtp,r)},H=function(e){return x(X.stbl,z(e),x(X.stts,oe),x(X.stsc,ae),x(X.stsz,se),x(X.stco,re))},z=function(e){return x(X.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?le(e):ue(e))},le=function(e){var t,i,n=e.sps||[],r=e.pps||[],a=[],s=[];for(t=0;t<n.length;t++)a.push((65280&n[t].byteLength)>>>8),a.push(255&n[t].byteLength),a=a.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)s.push((65280&r[t].byteLength)>>>8),s.push(255&r[t].byteLength),s=s.concat(Array.prototype.slice.call(r[t]));if(i=[X.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),x(X.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length],a,[r.length],s))),x(X.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var o=e.sarRatio[0],l=e.sarRatio[1];i.push(x(X.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return x.apply(null,i)},ue=function(e){return x(X.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),P(e))},U=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return x(X.tkhd,t)},W=function(e){var t,i,n,r,a,s;return t=x(X.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(1+fe)),s=Math.floor(e.baseMediaDecodeTime%(1+fe)),i=x(X.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(n=G(e,92),x(X.traf,t,i,n)):(r=q(e),n=G(e,r.length+92),x(X.traf,t,i,n,r))},N=function(e){return e.duration=e.duration||4294967295,x(X.trak,U(e),F(e))},$=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),x(X.trex,t)},he=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},de=function(e,t){var i,n,r,a,s,o;for(t+=20+16*(a=e.samples||[]).length,r=he(a,t),(n=new Uint8Array(r.length+16*a.length)).set(r),i=r.length,o=0;o<a.length;o++)s=a[o],n[i++]=(4278190080&s.duration)>>>24,n[i++]=(16711680&s.duration)>>>16,n[i++]=(65280&s.duration)>>>8,n[i++]=255&s.duration,n[i++]=(4278190080&s.size)>>>24,n[i++]=(16711680&s.size)>>>16,n[i++]=(65280&s.size)>>>8,n[i++]=255&s.size,n[i++]=s.flags.isLeading<<2|s.flags.dependsOn,n[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,n[i++]=61440&s.flags.degradationPriority,n[i++]=15&s.flags.degradationPriority,n[i++]=(4278190080&s.compositionTimeOffset)>>>24,n[i++]=(16711680&s.compositionTimeOffset)>>>16,n[i++]=(65280&s.compositionTimeOffset)>>>8,n[i++]=255&s.compositionTimeOffset;return x(X.trun,n)},ce=function(e,t){var i,n,r,a,s,o;for(t+=20+8*(a=e.samples||[]).length,r=he(a,t),(i=new Uint8Array(r.length+8*a.length)).set(r),n=r.length,o=0;o<a.length;o++)s=a[o],i[n++]=(4278190080&s.duration)>>>24,i[n++]=(16711680&s.duration)>>>16,i[n++]=(65280&s.duration)>>>8,i[n++]=255&s.duration,i[n++]=(4278190080&s.size)>>>24,i[n++]=(16711680&s.size)>>>16,i[n++]=(65280&s.size)>>>8,i[n++]=255&s.size;return x(X.trun,i)},G=function(e,t){return"audio"===e.type?ce(e,t):de(e,t)},I=function(){return x(X.ftyp,Q,K,Q,Y)};var me,ge,ve,ye,_e,be=function(e){return x(X.mdat,e)},Te=O,we=function(e){var t,i=I(),n=j(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},ke=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},Se=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},Ce=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},Ee=function(e,t){var n,r,a,s,o=t||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],r=0;r<s.length;r++)o+=(a=i(s[r],o)).size,l.push(a);return l},xe=function(e){var t,i,n,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)s=a[n],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},Ae=function(e,t){var n,r=[];return n=i(e,t||0),r.push(n),r},Pe=function(e){var t,i,n=0,r=e.byteLength,a=e.length,s=new Uint8Array(r+4*a),o=new DataView(s.buffer);for(t=0;t<e.length;t++)i=e[t],o.setUint32(n,i.data.byteLength),n+=4,s.set(i.data,n),n+=i.data.byteLength;return s},Ie=[33,16,5,32,164,27],Le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],De=9e4,Oe=ge=function(e){return 9e4*e},je=(ve=function(e,t){return e*t},ye=function(e){return e/9e4}),Me=(_e=function(e,t){return e/t},function(e,t){return ge(_e(e,t))}),Re=function(e,t){return ve(ye(e),t)},Ne=function(e,t,i){return ye(i?e:e-t)},Ue=function(e,t,i,n){var a,s,o,l,u,c=0,d=0,h=0;if(t.length&&(a=Me(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(De/(e.samplerate/1024)),i&&n&&(c=a-Math.max(i,n),h=(d=Math.floor(c/s))*s),!(d<1||De/2<h))){for(o=(o=r()[e.samplerate])||t[0].data,l=0;l<d;l++)u=t[0],t.splice(0,0,{data:o,dts:u.dts-s,pts:u.pts-s});e.baseMediaDecodeTime-=Math.floor(Re(h,e.samplerate))}},Fe=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},Be=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},Ve=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},qe=De,He=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ze=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/qe,i=Math.floor(i)),i},We=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},$e=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,r=n=0}return i},Ge=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Xe=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s},Qe=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},Ke=4;(a.prototype=new pe).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=$e(e.escapedRBSP)).payload&&t.payloadType===Ke&&(i=Ge(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Xe(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},a.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},a.prototype.flush=function(){return this.flushStream("flush")},a.prototype.partialFlush=function(){return this.flushStream("partialFlush")},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},a.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},a.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},a.prototype.dispatchCea708Packet=function(e){this.cc708Stream_.push(e)};var Ye={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};o.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},o.prototype.getText=function(){return this.rows.join("\n")},o.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},o.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},o.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},o.prototype.addText=function(e){this.rows[this.rowIdx]+=e},o.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}},l.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new o(i),"function"==typeof t&&(this.windows[i].beforeRowOverflow=t)},l.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]};var Je=function ri(){ri.prototype.init.call(this);var e=this;this.current708Packet=null,this.services={},this.push=function(t){3===t.type?e.new708Packet():null===e.current708Packet&&e.new708Packet(),e.add708Bytes(t)}};Je.prototype=new pe,Je.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Je.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,n=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Je.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,i=null,n=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)n=31&(a=t[r++]),7==(i=a>>5)&&0<n&&(i=a=t[r++]),this.pushServiceBlock(i,r,n),0<n&&(r+=n-1)},Je.prototype.pushServiceBlock=function(e,t,i){var n,r=t,a=this.current708Packet.data,o=this.services[e];for(o=o||this.initService(e,r);r<t+i&&r<a.length;r++)s(n=a[r])?r=this.handleText(r,o):16===n?r=this.extendedCommands(r,o):128<=n&&n<=135?r=this.setCurrentWindow(r,o):152<=n&&n<=159?r=this.defineWindow(r,o):136===n?r=this.clearWindows(r,o):140===n?r=this.deleteWindows(r,o):137===n?r=this.displayWindows(r,o):138===n?r=this.hideWindows(r,o):139===n?r=this.toggleWindows(r,o):151===n?r=this.setWindowAttributes(r,o):144===n?r=this.setPenAttributes(r,o):145===n?r=this.setPenColor(r,o):146===n?r=this.setPenLocation(r,o):143===n?o=this.reset(r,o):8===n?o.currentWindow.backspace():12===n?o.currentWindow.clearText():13===n?o.currentWindow.pendingNewLine=!0:14===n?o.currentWindow.clearText():141===n&&r++},Je.prototype.extendedCommands=function(e,t){return s(this.current708Packet.data[++e])&&(e=this.handleText(e,t,!0)),e},Je.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Je.prototype.initService=function(e,t){var i=this;return this.services[e]=new l(e),this.services[e].init(this.getPts(t),function(t){i.flushDisplayed(t,i.services[e])}),this.services[e]},
Je.prototype.handleText=function(e,t,i){var n=function(e){var t=Ye[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)}((i?4096:0)|this.current708Packet.data[e]),r=t.currentWindow;return r.pendingNewLine&&!r.isEmpty()&&r.newLine(this.getPts(e)),r.pendingNewLine=!1,r.addText(n),e},Je.prototype.setCurrentWindow=function(e,t){var i=7&this.current708Packet.data[e];return t.setCurrentWindow(i),e},Je.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e],r=7&n;t.setCurrentWindow(r);var a=t.currentWindow;return n=i[++e],a.visible=(32&n)>>5,a.rowLock=(16&n)>>4,a.columnLock=(8&n)>>3,a.priority=7&n,n=i[++e],a.relativePositioning=(128&n)>>7,a.anchorVertical=127&n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(240&n)>>4,a.rowCount=15&n,n=i[++e],a.columnCount=63&n,n=i[++e],a.windowStyle=(56&n)>>3,a.penStyle=7&n,a.virtualRowCount=a.rowCount+1,e},Je.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;return n=i[++e],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++e],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++e],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++e],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,e},Je.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},Je.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Je.prototype.displayWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=1);return e},Je.prototype.hideWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=0);return e},Je.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible^=1);return e},Je.prototype.clearWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].clearText();return e},Je.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].reset();return e},Je.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;return n=i[++e],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++e],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,e},Je.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penColor;return n=i[++e],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++e],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++e],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,e},Je.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],r.row=15&n,n=i[++e],r.column=63&n,e},Je.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var Ze={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},et=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],tt=function ai(e,t){ai.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=c();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=c();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=c()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=u((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=u((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=et.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=u(n),a+=u(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};tt.prototype=new pe,tt.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},tt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=c(),this.nonDisplayed_=c(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},tt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},tt.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},tt.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},tt.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},tt.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},tt.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},tt.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},tt.prototype.isNormalChar=function(e){return 32<=e&&e<=127},tt.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=c(),this.displayed_=c()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},tt.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},tt.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},tt.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},tt.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},tt.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},tt.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var it={CaptionStream:a,Cea608Stream:tt,Cea708Stream:Je},nt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};h.prototype=new pe;var rt,at=h,st={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=f(e.data,1,t),e.value=f(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=f(e.data,1,t),e.url=f(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(p(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(rt=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0;if(rt.prototype.init.call(this),this.dispatchType=nt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug;else if(r.push(e),a+=e.data.byteLength,1===r.length&&(n=m(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<n;)t.data.set(r[0].data.subarray(0,n-u),u),u+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&t.data[5]&&(s+=4,s+=m(t.data.subarray(10,14)),n-=m(t.data.subarray(16,20)));do{if((o=m(t.data.subarray(s+4,s+8)))<1)return;if((l={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=l.id,st[l.id]&&(st[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var c=l.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),s+=10,s+=o}while(s<n);this.trigger("data",t)}}}).prototype=new pe;var ot,lt,ut,ct=rt,dt=at;(ot=function(){var e=new Uint8Array(188),t=0;ot.prototype.init.call(this),this.push=function(i){var n,r=0,a=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;a<n.byteLength;)71!==n[r]||71!==n[a]?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=188,a+=188);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new pe,(lt=function(){var e,t,i,n;lt.prototype.init.call(this),(n=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===nt.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===nt.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===nt.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=nt.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=nt.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new pe,lt.STREAM_TYPES={h264:27,adts:15},(ut=function(){function e(e,t,n){var r,a,s=new Uint8Array(e.size),o={type:t},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],s.set(a.data,u),u+=a.data.byteLength;!function(e,t){var i;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(i=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&i&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])}(s,o),r="video"===t||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&i.trigger("data",o)}}var t,i=this,n={data:[],size:0},r={data:[],size:0},a={data:[],size:0};ut.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,i;switch(s.streamType){case nt.H264_STREAM_TYPE:t=n,i="video";break;case nt.ADTS_STREAM_TYPE:t=r,i="audio";break;case nt.METADATA_STREAM_TYPE:t=a,i="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&e(t,i,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i.trigger("data",e)}})[s.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){e(n,"video"),e(r,"audio"),e(a,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new pe;var ht={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ot,TransportParseStream:lt,ElementaryStream:ut,TimestampRolloverStream:dt,CaptionStream:it.CaptionStream,Cea608Stream:it.Cea608Stream,Cea708Stream:it.Cea708Stream,MetadataStream:ct};for(var pt in nt)nt.hasOwnProperty(pt)&&(ht[pt]=nt[pt]);var ft,mt=ht,gt=De,vt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ft=function(e){var t,i=0;ft.prototype.init.call(this),this.push=function(n){var r,a,s,o,l,u,c=0;if(e||(i=0),"audio"===n.type)for(t?(o=t,(t=new Uint8Array(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;c+5<t.length;)if(255===t[c]&&240==(246&t[c+1])){if(a=2*(1&~t[c+1]),r=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,u=(l=1024*(1+(3&t[c+6])))*gt/vt[(60&t[c+2])>>>2],s=c+r,t.byteLength<s)return;if(this.trigger("data",{pts:n.pts+i*u,dts:n.dts+i*u,sampleCount:l,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:vt[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+a,s)}),i++,t.byteLength===s)return void(t=void 0);t=t.subarray(s)}else c++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new pe;var yt,_t,bt,Tt=ft,wt=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),i=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;e<n||(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord()),i<<=e,n-=e},this.readBits=function(e){var r=Math.min(n,e),a=i>>>32-r;return 0<(n-=r)?i<<=r:0<t&&this.loadWord(),0<(r=e-r)?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_t=function(){var e,t,i=0;_t.prototype.init.call(this),this.push=function(n){for(var r,a=(t=t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),r):n.data).byteLength;i<a-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}for(i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));1!==t[++e]&&e<a;);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&3<t.byteLength&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new pe,bt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(yt=function(){var e,t,i,n,r,a,s,o=new _t;yt.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on("data",function(s){var o={trackId:t,pts:i,dts:n,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},a=function(e){var t,i,n,r,a,o,l,u,c,d,h,p,f,m=0,g=0,v=0,y=0,_=1;if(i=(t=new wt(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),bt[i]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,f=0;f<h;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(_=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*m-2*g)*_),height:(2-d)*(c+1)*16-2*v-2*y,sarRatio:p}}}).prototype=new pe;var kt,St={H264Stream:yt,NalByteStream:_t},Ct=function(e){var t=function i(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:i(e,t+=g(e,t))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},Et=g,xt=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i};(kt=function(){var e=new Uint8Array,t=0;kt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,a,s,o=0,l=0;for(e.length?(s=e.length,(e=new Uint8Array(i.byteLength+s)).set(e.subarray(0,s)),e.set(i,s)):e=i;3<=e.length-l;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=xt(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",a),l+=o}else{if(e.length-l<10)break;if(l+(o=Et(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}n=e.length-l,e=0<n?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new pe;var At,Pt,It,Lt,Dt=kt,Ot=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],jt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Mt=St.H264Stream,Rt=Ct,Nt=De;(Pt=function(e,t){var i=[],n=0,r=0,a=0,s=1/0;t=t||{},Pt.prototype.init.call(this),this.push=function(t){We(e,t),e&&Ot.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,c,d;0!==i.length&&(o=Fe(i,e,r),e.baseMediaDecodeTime=ze(e,t.keepOriginalTimestamps),Ue(e,o,a,s),e.samples=Be(o),u=be(Ve(o)),i=[],l=Te(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),He(e),d=Math.ceil(1024*Nt/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*d}),this.trigger("data",{track:e,boxes:c})),this.trigger("done","AudioSegmentStream")},this.reset=function(){He(e),i=[],this.trigger("reset")}}).prototype=new pe,(At=function(e,t){var i,n,r=0,a=[],s=[];t=t||{},At.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){We(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],jt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,n,o,l,u,c,d,h,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ke(a),(o=Se(i))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],e))?(p=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=Ce(o)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");He(e),o=f}We(e,o),e.samples=Ee(o),u=be(xe(o)),e.baseMediaDecodeTime=ze(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",y(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Te(r,[e]),c=new Uint8Array(l.byteLength+u.byteLength),r++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){He(e),n=i=void 0},this.getGopForFusion_=function(t){var i,n,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&v(e.pps[0],a.pps[0])&&e.sps&&v(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||-1e4<=(i=t.dts-r.dts-r.duration)&&i<=45e3&&(!n||i<o)&&(n=a,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=i=0;t<s.length&&i<e.length&&(n=s[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,o,l;for(t=s.length-1,i=e.length-1,a=null,o=!1;0<=t&&0<=i;){if(n=s[t],r=e[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?t--:(t===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(l=o?i:a))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}}).prototype=new pe,(Lt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Lt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new pe,Lt.prototype.flush=function(e){var t,i,n,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,jt.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Ot.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=we(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=Ne(t.startPts,o,this.keepOriginalTimestamps),t.endTime=Ne(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=Ne(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)i=s.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Lt.prototype.setRemux=function(e){this.remuxTracks=e},(It=function(e){var t,i,n=this,r=!0;It.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};(this.transmuxPipeline_=r).type="aac",r.metadataStream=new mt.MetadataStream,r.aacStream=new Dt,r.audioTimestampRolloverStream=new mt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new mt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Tt,r.coalesceStream=new Lt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Pt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new mt.MetadataStream,r.packetStream=new mt.TransportPacketStream,r.parseStream=new mt.TransportParseStream,r.elementaryStream=new mt.ElementaryStream,r.timestampRolloverStream=new mt.TimestampRolloverStream,r.adtsStream=new Tt,r.h264Stream=new Mt,r.captionStream=new mt.CaptionStream,r.coalesceStream=new Lt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),
r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new At(t,e),r.videoSegmentStream.on("timelineStartInfo",function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Pt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,He(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,He(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=Rt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new pe;var Ut={Transmuxer:It,VideoSegmentStream:At,AudioSegmentStream:Pt,AUDIO_PROPERTIES:Ot,VIDEO_PROPERTIES:jt,generateVideoSegmentTimingInfo:y},Ft={Adts:Tt,h264:St},Bt=De;_.prototype=new pe;var Vt=_;b.prototype=new pe;var qt=b,Ht=Ct;k.prototype=new pe;var zt=k,Wt=function(e){return e>>>0},$t=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Gt=Wt,Xt=function si(e,t){var i,n,r,a,s,o=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=Gt(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=$t(e.subarray(i+4,i+8)),a=1<n?i+n:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(i+8,a)):(s=si(e.subarray(i+8,a),t.slice(1))).length&&(o=o.concat(s))),i=a;return o},Qt=Wt,Kt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Qt(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Qt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Yt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Jt=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),a&&c&&(t={flags:Yt(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),c--);c--;)t={},s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=Yt(e.subarray(d,d+4)),d+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},Zt=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],c=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),s&&(n.defaultSampleDuration=i.getUint32(t),t+=4),o&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n},ei=Qe,ti=it.CaptionStream,ii=function(){var e,t,i,n,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new ti,s=!0,a=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=a[0],n=s[i];else if(null===i||!n)return t.push(e),null;for(;0<t.length;){var l=t.shift();this.parse(l,a,s)}return null!==(o=function(e,t,i){return null===t?null:{seiNals:C(e,t)[t],timescale:i}}(e,i,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},ni=function(){function t(e,t){this.options=t||{},this.self=e,this.init()}var i=t.prototype;return i.init=function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new zt(this.options):new Ut.Transmuxer(this.options),this.options.handlePartialData?(e=this.self,(t=this.transmuxer).on("data",function(t){var i={data:t.data.track.initSegment.buffer,byteOffset:t.data.track.initSegment.byteOffset,byteLength:t.data.track.initSegment.byteLength},n={boxes:{data:t.data.boxes.buffer,byteOffset:t.data.boxes.byteOffset,byteLength:t.data.boxes.byteLength},initSegment:i,type:t.type,sequence:t.data.sequence};"undefined"!=typeof t.data.videoFrameDts&&(n.videoFrameDtsTime=je(t.data.videoFrameDts)),"undefined"!=typeof t.data.videoFramePts&&(n.videoFramePtsTime=je(t.data.videoFramePts)),e.postMessage({action:"data",segment:n},[n.boxes.data,n.initSegment.data])}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("done",function(t){e.postMessage({action:"done",type:E(t)})}),t.on("partialdone",function(t){e.postMessage({action:"partialdone",type:E(t)})}),t.on("endedsegment",function(t){e.postMessage({action:"endedSegment",type:E(t)})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){if(null!==t.start){var i={start:je(t.start)};t.end&&(i.end=je(t.end)),e.postMessage({action:"audioTimingInfo",audioTimingInfo:i})}else e.postMessage({action:"audioTimingInfo",audioTimingInfo:t})}),t.on("videoTimingInfo",function(t){var i={start:je(t.start)};t.end&&(i.end=je(t.end)),e.postMessage({action:"videoTimingInfo",videoTimingInfo:i})})):function(e,t){t.on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.on("done",function(){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){var i={start:{decode:je(t.start.dts),presentation:je(t.start.pts)},end:{decode:je(t.end.dts),presentation:je(t.end.pts)},baseMediaDecodeTime:je(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=je(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:je(t.start),end:je(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:je(t.start),end:je(t.end)}})})}(this.self,this.transmuxer)},i.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new ii,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],data:t.buffer},[t.buffer])},i.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},i.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},i.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},i.reset=function(){this.transmuxer.reset()},i.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Oe(t)))},i.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(Oe(e.appendStart)))},i.setRemux=function(e){this.transmuxer.setRemux(e.remux)},i.flush=function(){this.transmuxer.flush(),e.postMessage({action:"done",type:"transmuxed"})},i.partialFlush=function(){this.transmuxer.partialFlush(),e.postMessage({action:"partialdone",type:"transmuxed"})},i.endTimeline=function(){this.transmuxer.endTimeline(),e.postMessage({action:"endedtimeline",type:"transmuxed"})},i.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},t}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new ni(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new ni(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(e)}()}),cd=Kn("PlaylistSelector"),dd=function(e){function t(t){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.handlePartialData_=t.handlePartialData,i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=ft.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=Kn("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(jl(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i}Ml(t,e);var i=t.prototype;return i.createTransmuxer_=function(){var e=new ud;return e.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),e},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),Xc()),this.resetStats_(),this.checkBufferTimeout_&&Ul.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},i.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},i.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Gc(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return ft.createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=En(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},i.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=xn(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return null===this.mediaIndex&&!this.handlePartialData_||this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),n&&(n.mediaIndex-=a,0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=function(){this.checkBufferTimeout_&&(Ul.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Gc(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,t,i){if(void 0===i&&(i=function(){}),t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var n=1,r=function(){0==--n&&i()};for(var a in this.audioDisabled_||(n++,this.sourceUpdater_.removeAudio(e,t,r)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil((t-n)*ac),a=Math.ceil((i-n)*ac),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(e,t,r)),this.inbandTextTracks_)rr(e,t,this.inbandTextTracks_[a]);rr(e,t,this.segmentMetadataTrack_),r()}},i.monitorBuffer_=function(){this.checkBufferTimeout_&&Ul.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ul.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ul.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ul.setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.buffered_(),t=this.checkBuffer_(e,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(t.timestampOffset=or({segmentTimeline:t.timeline,currentTimeline:this.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof t.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loadSegment_(t))}},i.isEndOfStream_=function(e,t){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),!t||!this.mediaSource_)return!1;var i=e+1===t.segments.length;return t.endList&&"open"===this.mediaSource_.readyState&&i},i.checkBuffer_=function(e,t,i,n,r,a){var s=0;e.length&&(s=e.end(e.length-1));var o=Math.max(0,s-r);if(!t.segments.length)return null;if(o>=this.goalBufferLength_())return null;if(!n&&1<=o)return null;var l,u=null,c=!1;if(null===a)u=this.getSyncSegmentCandidate_(t),c=!0;else if(null!==i){var d=t.segments[i];l=d&&d.end?d.end:s,u=i+1}else if(this.fetchAtBuffer_){var h=Uc.getMediaInfoForTime(t,s,a.segmentIndex,a.time);u=h.mediaIndex,l=h.startTime}else{var p=Uc.getMediaInfoForTime(t,r,a.segmentIndex,a.time);u=p.mediaIndex,l=p.startTime}var f=this.generateSegmentInfo_(t,u,l,c);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:t,currentMediaIndex:i,nextMediaIndex:u,startOfSegment:l,isSyncRequest:c}),f)},i.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},i.generateSegmentInfo_=function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r,a,s=e.segments[t],o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();return o.length&&(r=o.end(o.length-1)-this.sourceUpdater_.audioTimestampOffset()),l.length&&(a=function(e,t,i){if(null==t||!e.length)return[];var n,r=Math.ceil((t-i+3)*ac);for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:r,gopsToAlignWith:a}},i.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Uc.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=function(e,t,i){return void 0===i&&(i=1),((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var s=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter(function(e){return!Uc.isIncompatible(e)}),c=u.filter(Uc.isEnabled);c.length||(c=u.filter(function(e){return!Uc.isDisabled(e)}));var d=c.filter(Uc.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,o,i)?1:2;return{playlist:e,rebufferingImpact:Uc.estimateSegmentRequestTime(a,n,e)*t-s}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return Zn(h,function(e,t){return er(t.playlist,e.playlist)}),h.length?h[0]:(Zn(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;a<=Rc&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*zc.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(){this.mediaRequestsAborted+=1},i.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(a!==n[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=sr(t);r[a]=r[a]||{},r[a][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,t){var i=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)}),Object.keys(r).forEach(function(e){var t=r[e],a=t.startTime,s=t.endTime,o=t.captions,l=i.inbandTextTracks_;i.logger_("adding cues from "+a+" -> "+s+" for "+e),function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(l,i.vhs_.tech_,e),rr(a,s,l[e]),function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=Ul.WebKitDataCue||Ul.VTTCue;i.forEach(function(e){var i=e.stream;t[i].addCue(new r(e.startTime+n,e.endTime+n,e.text))})}}({captionArray:o,inbandTextTracks:l,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,i,this.vhs_.tech_),nr({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.currentMediaInfo_&&lr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;if(!this.handlePartialData_){var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;if(n&&!e.videoTimingInfo)return!1;if(i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)return!1}return!lr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},i.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[sr(t.type)].start;else{var n,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(n=this.handlePartialData_?t.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},i.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},i.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){var a=En(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!!n,this.activeInitSegmentId_=null,i):null},i.appendToSourceBuffer_=function(e){var t=this,i=e.segmentInfo,n=e.type,r=e.initSegment,a=e.data,s=[a],o=a.byteLength;r&&(s.unshift(r),o+=r.byteLength);var l=function(e){var t,i=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(function(e){t.set(e,i),i+=e.byteLength})),t}({bytes:o,segments:s});this.sourceUpdater_.appendBuffer({segmentInfo:i,type:n,bytes:l},function(e){e&&(t.error(n+" append of "+l.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),t.trigger("appenderror"))})},i.handleVideoSegmentTimingInfo_=function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=t.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}},i.appendData_=function(e,t){var i=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}},i.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({
action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var i=t.buffered_();"number"==typeof e.timestampOffset&&(e.timestampOffset=or({segmentTimeline:e.timeline,currentTimeline:t.currentTimeline_,startOfSegment:e.startOfSegment,buffered:i,overrideCheck:!0})),delete e.audioAppendStart;var n=t.sourceUpdater_.audioBuffered();n.length&&(e.audioAppendStart=n.end(n.length-1)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)})},i.updateTransmuxerAndRequestSegment_=function(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var t=this.createSimplifiedSegmentObj_(e);e.abortRequests=Wn({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,e.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},i.trimBackBuffer_=function(){var e=function(e,t,i){var n=t-zc.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var r=t-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<e&&this.remove(0,e)},i.createSimplifiedSegmentObj_=function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex];if(n&&n.end&&n.timeline===t.timeline&&(i.baseStartTime=n.end+e.timestampOffset),t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=r}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+1/60):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Jc)return;return this.pause(),e.code===Yc?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING";var r=this.isEndOfStream_(n.mediaIndex,n.playlist),a=null!==this.mediaIndex,s=n.timeline!==this.currentTimeline_&&0<n.timeline;!n.isFmp4&&(r||a&&s)&&Qc(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},i.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,l=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return l.start;var u=i.segments[n-1];return 0!==n&&u&&"undefined"!=typeof u.start&&u.end===r+a?o.start:r},i.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&n,s=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var t=function(e,t,i){return"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(e){var t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,l=void 0===o?[]:o,u=e.mediaIndex,c=e.timeline;return["appending ["+u+"] of ["+a+", "+(a+l.length)+"] from playlist ["+s+"]","["+i+" => "+n+"] in timeline ["+c+"]"].join(" ")}(e));var t=cr(e,this.sourceType_);if(t&&("warn"===t.severity?ft.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var i=e.segment;i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.isEndOfStream_(e.mediaIndex,e.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_())}},i.recordThroughput_=function(e){if(e.duration<1/60)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+1/60);else{var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(ar(i)&&ar(n)){rr(i,n,this.segmentMetadataTrack_);var r=Ul.WebKitDataCue||Ul.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},s=new r(i,n,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}},t}(ft.EventTarget),hd=["video","audio"],pd=function(e,t){return function(i,n){var r=n[i+"Buffer"];gr(n.mediaSource,r)&&(n.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer"),r.appendBuffer(e))}},fd=function(e,t){return function(i,n){var r=n[i+"Buffer"];gr(n.mediaSource,r)&&(n.logger_("Removing "+e+" to "+t+" from "+i+"Buffer"),r.remove(e,t))}},md=function(e){return function(t,i){var n=i[t+"Buffer"];gr(i.mediaSource,n)&&(i.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},gd=function(e){return function(){e()}},vd=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(t){ft.log.warn("Failed to call media source endOfStream",t)}}}},yd=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(t){ft.log.warn("Failed to set media source duration",t)}}},_d=function(){return function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(gr(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){ft.log.warn("Failed to abort on "+e+"Buffer",t)}}}}},bd=function(e,t){return function(i){var n=hr(e),r=Ec(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),a.addEventListener("error",i["on"+n+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=a}},Td=function(e){return function(t){var i=t[e+"Buffer"];if(mr(e,t),gr(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(t){ft.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},wd=function(e){return function(t,i){var n=i[t+"Buffer"],r=Ec(e);gr(i.mediaSource,n)&&i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),n.changeType(r),i.codecs[t]=e)}},kd=function(e){function t(t){var i;return(i=e.call(this)||this).mediaSource=t,i.sourceopenListener_=function(){return fr("mediaSource",jl(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Kn("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=yr("video",jl(i)),i.onAudioUpdateEnd_=yr("audio",jl(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}Ml(t,e);var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,t){vr({type:"mediaSource",sourceUpdater:this,action:bd(e,t),name:"addSourceBuffer"})},i.abort=function(e){vr({type:e,sourceUpdater:this,action:_d(e),name:"abort"})},i.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?vr({type:"mediaSource",sourceUpdater:this,action:Td(e),name:"removeSourceBuffer"}):ft.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!ft.browser.IE_VERSION&&!ft.browser.IS_FIREFOX&&Ul.MediaSource&&Ul.MediaSource.prototype&&"function"==typeof Ul.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Ul.SourceBuffer&&Ul.SourceBuffer.prototype&&"function"==typeof Ul.SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,t){this.canChangeType()?vr({type:e,sourceUpdater:this,action:wd(t),name:"changeType"}):ft.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(i){var n=e[i];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(i,n);t.canChangeType()&&t.changeType(i,n)})},i.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(vr({type:r,sourceUpdater:this,action:pd(a,n||{mediaIndex:-1}),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach(function(e){i.appendBuffer.apply(i,e)})}},i.audioBuffered=function(){return gr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ft.createTimeRange()},i.videoBuffered=function(){return gr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ft.createTimeRange()},i.buffered=function(){var e=gr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=gr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var i=null,n=null,r=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return ft.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),o=0;o<a.length;o++)"start"===a[o].type?2==++r&&(i=a[o].time):"end"===a[o].type&&1==--r&&(n=a[o].time),null!==i&&null!==n&&(s.push([i,n]),n=i=null);return ft.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,t){void 0===t&&(t=dr),vr({type:"mediaSource",sourceUpdater:this,action:yd(e),name:"duration",doneFn:t})},i.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=dr),"string"!=typeof e&&(e=void 0),vr({type:"mediaSource",sourceUpdater:this,action:vd(e),name:"endOfStream",doneFn:t})},i.removeAudio=function(e,t,i){void 0===i&&(i=dr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?vr({type:"audio",sourceUpdater:this,action:fd(e,t),doneFn:i,name:"remove"}):i()},i.removeVideo=function(e,t,i){void 0===i&&(i=dr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?vr({type:"video",sourceUpdater:this,action:fd(e,t),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!pr("audio",this)&&!pr("video",this))},i.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(vr({type:"audio",sourceUpdater:this,action:md(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(vr({type:"video",sourceUpdater:this,action:md(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&vr({type:"audio",sourceUpdater:this,action:gd(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&vr({type:"video",sourceUpdater:this,action:gd(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),hd.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return mr(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(ft.EventTarget),Sd=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Cd=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).handlePartialData_=!1,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}Ml(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return ft.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return ft.createTimeRanges([[t,i]])},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=En(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=Sd.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(Sd,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(e,t){rr(e,t,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Yc&&this.handleTimeout_(),e.code===Jc?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof Ul.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s,o=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",s),n.stopForError({message:"Error loading vtt.js"})};return s=function(){n.subtitlesTrack_.tech_.off("vttjserror",o),n.segmentRequestFinished_(e,t,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",o)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new Ul.VTTCue(e.startTime,e.endTime,e.text):e)}),function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var n=[],r=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&1<++r&&n.push(t[a]);n.length&&n.forEach(function(t){return e.removeCue(t)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var t,i=!1;"function"==typeof Ul.TextDecoder?t=new Ul.TextDecoder("utf8"):(t=Ul.WebVTT.StringDecoder(),i=!0);var n=new Ul.WebVTT.Parser(Ul,Ul.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){ft.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;i&&(r=_r(r)),n.parse(r)}var a=e.bytes;i&&(a=_r(a)),n.parse(a),n.flush()},i.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/ac-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!i.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,o-n.duration)}}}else n.empty=!0},t}(dd),Ed=[{name:"VOD",run:function(e,t,i){return i===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==o&&(0===d||o<d))break;o=d,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===n&&"undefined"!=typeof u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||d<=s)&&(s=d,a={time:c.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],xd=function(e){function t(){var t;return(t=e.call(this)||this).timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=Kn("SyncController"),t}Ml(t,e);var i=t.prototype;return i.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+hn(e,n.segmentIndex,0))},i.runStrategies_=function(e,t,i,n){for(var r=[],a=0;a<Ed.length;a++){var s=Ed[a],o=s.run(this,e,t,i,n);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;0<=i;i--){var n=e.segments[i];if(n&&"undefined"!=typeof n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(t,t.timingInfo,i)&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:t.segment.start}))},i.timestampOffsetForTimeline=function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]")),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l=void 0;l=s<0?i.start-hn(t,e.mediaIndex,r):i.end+hn(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:o}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(ft.EventTarget),Ad=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}Ml(t,e);var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:i,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(ft.EventTarget),Pd=new $n("./decrypter-worker.worker.js",function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}var i,n,r,a,s,o,l,u=this;
/*! @name @videojs/http-streaming @version 2.4.1 @license Apache-2.0 */i=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t},n=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t},r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),-1<i},t.trigger=function(e,t){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=i.length,o=0;o<s;++o)i[o].apply(this,a)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),a=null,s=function(){function e(e){var t,i,n;a=a||function(){var e,t,i,n,r,a,s,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],d=u[4],h=c[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!d[t];t^=n||1,i=f[i]||1)for(a=(a=i^i<<1^i<<2^i<<3^i<<4)>>8^255&a^99,o=16843009*p[r=p[n=p[h[d[t]=a]=t]]]^65537*r^257*n^16843008*t,s=257*p[a]^16843008*a,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,c[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l}(),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var r=this._tables[0][4],s=this._tables[1],o=e.length,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var u=e.slice(0),c=[];for(this._key=[u,c],t=o;t<4*o+28;t++)n=u[t-1],(t%o==0||8===o&&t%o==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],t%o==0&&(n=n<<8^n>>>24^l<<24,l=l<<1^283*(l>>7))),u[t]=u[t-o]^n;for(i=0;t;i++,t--)n=u[3&i?t:t-4],c[i]=t<=4||i<4?n:s[0][r[n>>>24]]^s[1][r[n>>16&255]]^s[2][r[n>>8&255]]^s[3][r[255&n]]}return e.prototype.decrypt=function(e,t,i,n,r,a){var s,o,l,u,c=this._key[1],d=e^c[0],h=n^c[1],p=i^c[2],f=t^c[3],m=c.length/4-2,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],w=v[4];for(u=0;u<m;u++)s=y[d>>>24]^_[h>>16&255]^b[p>>8&255]^T[255&f]^c[g],o=y[h>>>24]^_[p>>16&255]^b[f>>8&255]^T[255&d]^c[g+1],l=y[p>>>24]^_[f>>16&255]^b[d>>8&255]^T[255&h]^c[g+2],f=y[f>>>24]^_[d>>16&255]^b[h>>8&255]^T[255&p]^c[g+3],g+=4,d=s,h=o,p=l;for(u=0;u<4;u++)r[(3&-u)+a]=w[d>>>24]<<24^w[h>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^c[g++],s=d,d=h,h=p,p=f,f=s},e}(),o=function(e){function t(){var t;return(t=e.call(this,r)||this).jobs=[],t.delay=1,t.timeout_=null,t}n(t,e);var i=t.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(r),l=function(){function e(i,n,r,a){var s=e.STEP,l=new Int32Array(i.buffer),u=new Uint8Array(i.byteLength),c=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+s),n,r,u)),c=s;c<l.length;c+=s)r=new Uint32Array([t(l[c-4]),t(l[c-3]),t(l[c-2]),t(l[c-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+s),n,r,u));this.asyncStream_.push(function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */a(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,i,n,r){return function(){var a=function(e,i,n){var r,a,o,l,u,c,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new s(Array.prototype.slice.call(i)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(r=n[0],a=n[1],o=n[2],l=n[3],p=0;p<f.length;p+=4)u=t(f[p]),c=t(f[p+1]),d=t(f[p+2]),h=t(f[p+3]),m.decrypt(u,c,d,h,v,p),v[p]=t(v[p]^r),v[p+1]=t(v[p+1]^a),v[p+2]=t(v[p+2]^o),v[p+3]=t(v[p+3]^l),r=u,a=c,o=d,l=h;return g}(e,i,n);r.set(a,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new l(n,r,a,function(t,n){e.postMessage(function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t}({source:i.source,decrypted:n}),[n.buffer])})}}(u)}),Id={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Tr(i,n);var a=n.activeTrack(),s=n.activeGroup(),o=(s.filter(function(e){return e["default"]})[0]||s[0]).id,l=n.tracks[o];if(a!==l){for(var u in ft.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];ft.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Tr(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},Ld={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Id[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Id[e](e,i))}},Dd={AUDIO:function(e,t){function i(i){function a(a){var u=l[e][i][a];!o.filter(function(e){return e.resolvedUri!==u.resolvedUri}).length&&o.length&&delete u.resolvedUri;var c=void 0;if(c="vhs-json"===r&&u.playlists?new Mc(u.playlists[0],n,s):u.resolvedUri?new Mc(u.resolvedUri,n,s):u.playlists&&"dash"===r?new Hc(u.playlists[0],n,s,p):null,u=ft.mergeOptions({id:a,playlistLoader:c},u),Ld[e](e,u.playlistLoader,t),d[i].push(u),"undefined"==typeof h[a]){var f=new ft.AudioTrack({id:a,kind:function(e){var t=e["default"]?"main":"alternative";return e.characteristics&&0<=e.characteristics.indexOf("public.accessibility.describes-video")&&(t="main-desc"),t}(u),enabled:!1,language:u.language,"default":u["default"],label:a});h[a]=f}}d[i]||(d[i]=[]);var o=u.filter(function(t){return t.attributes[e]===i});for(var c in l[e][i])a(c)}var n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master,l=o.mediaGroups,u=o.playlists,c=t.mediaTypes[e],d=c.groups,h=c.tracks,p=t.masterPlaylistLoader;for(var f in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{"default":{"default":!0}}}),l[e])i(f);a.on("error",Id[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var p in u[h]||(u[h]=[]),o[e][h])if(!o[e][h][p].forced){var f=o[e][h][p],m=void 0;if("hls"===r)m=new Mc(f.resolvedUri,n,s);else if("dash"===r){if(!f.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;m=new Hc(f.playlists[0],n,s,d)}else"vhs-json"===r&&(m=new Mc(f.playlists?f.playlists[0]:f.resolvedUri,n,s));if(f=ft.mergeOptions({id:p,playlistLoader:m},f),Ld[e](e,f.playlistLoader,t),u[h].push(f),"undefined"==typeof c[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles","default":f["default"]&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}a.on("error",Id[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in n[e])for(var l in a[o]||(a[o]=[]),n[e][o]){var u=n[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(ft.mergeOptions({id:l},u)),"undefined"==typeof s[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions","default":u["default"]&&u.autoselect,language:u.language,label:l},!1).track;s[l]=c}}}},Od={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},jd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Md=function(e){function t(t){var i;i=e.call(this)||this;var n=t.src,r=t.handleManifestRedirects,a=t.withCredentials,s=t.tech,o=t.bandwidth,l=t.externVhs,u=t.useCueTags,c=t.blacklistDuration,d=t.enableLowInitialPlaylist,h=t.sourceType,p=t.cacheEncryptionKeys,f=t.handlePartialData,m=t.experimentalBufferBasedABR;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");ld=l,i.experimentalBufferBasedABR=Boolean(m),i.withCredentials=a,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=h,i.useCueTags_=u,i.blacklistDuration=c,i.enableLowInitialPlaylist=d,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:dr,activeTrack:dr,onGroupChanged:dr,onTrackChanged:dr}}),e}(),i.mediaSource=new Ul.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(jl(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(jl(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(jl(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=ft.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new xd(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Pd,i.sourceUpdater_=new kd(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Ad;var g={vhs:i.vhs_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,handlePartialData:f,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};return i.masterPlaylistLoader_="dash"===i.sourceType_?new Hc(n,i.vhs_,i.requestOptions_):new Mc(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new dd(ft.mergeOptions(g,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new dd(ft.mergeOptions(g,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new Cd(ft.mergeOptions(g,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),jd.forEach(function(e){i[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(jl(i),e)}),i.logger_=Kn("MPC"),i.triggeredFmp4Usage=!1,i.masterPlaylistLoader_.load(),i}Ml(t,e);var i=t.prototype;return i.checkABR_=function(){var e=this.selectPlaylist();this.shouldSwitchToMedia_(e)&&this.masterPlaylistLoader_.media(e)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Ul.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ul.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;_n(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),kr({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){var i;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),!(i=i||e.selectPlaylist())||!e.shouldSwitchToMedia_(i))return;if(e.initialMedia_=i,e.masterPlaylistLoader_.media(e.initialMedia_),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;_n(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var s in i.AUDIO[a])i.AUDIO[a][s].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),ld.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&1<Object.keys(i.AUDIO[r[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),i=this.tech_.buffered();return function(e){var t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,o=e.experimentalBufferBasedABR,l=e.log;if(!i)return ft.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t||!t.endList)return l(u+" as current playlist "+(t?"is live":"is not set")),!0;if(i.id===t.id)return!1;var c=o?zc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:zc.MAX_BUFFER_LOW_WATER_LINE;if(s<c)return l(u+" as duration < max low water line ("+s+" < "+c+")"),!0;var d=i.attributes.BANDWIDTH,h=t.attributes.BANDWIDTH;if(d<h&&(!o||n<a)){var p=u+" as next bandwidth < current bandwidth ("+d+" < "+h+")";return o&&(p+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+a+")"),l(p),!0}if((!o||h<d)&&r<=n){var f=u+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+r+")";return o&&(f+=" and next bandwidth > current bandwidth ("+d+" > "+h+")"),l(f),!0}return l("not "+u+" as no switching criteria met"),!1}({currentPlaylist:t,nextPlaylist:e,forwardBuffer:i.length?i.end(i.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){function e(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)}var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();t.shouldSwitchToMedia_(e)&&t.masterPlaylistLoader_.media(e),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){ft.browser.IE_VERSION||ft.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},i.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(ft.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var i=ld.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var a=r.end(r.length-1);return a-n<=.1&&i-a<=.1},i.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var i=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var n=this.masterPlaylistLoader_.master.playlists,r=n.filter(vn),a=1===r.length&&r[0]===i;if(1===n.length&&t!==1/0)return ft.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var s=!1;n.forEach(function(e){if(e!==i){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}}),s&&(ft.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:ft.log.warn,u=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+u+" Switching to playlist "+o.id+"."),o.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var c=o.targetDuration/2*1e3||5e3,d="number"==typeof o.lastRequest&&Date.now()-o.lastRequest<=c;return this.masterPlaylistLoader_.media(o,a||d)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,t){var i=this,n=[],r="all"===e;!r&&"main"!==e||n.push(this.masterPlaylistLoader_);var a=[];!r&&"audio"!==e||a.push("AUDIO"),!r&&"subtitle"!==e||(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(function(e){var t=i.mediaTypes_[e]&&i.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(function(t){var r=i[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||n.push(r)}),n.forEach(function(e){return t.forEach(function(t){"function"==typeof e[t]&&e[t]()})})},i.setCurrentTime=function(e){var t=sn(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:ld.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=ld.Playlist.seekable(t,i,n);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=ld.Playlist.seekable(t,i,n)).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=ft.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+ln(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var i=this.tech_.buffered(),n=ld.Playlist.duration(this.masterPlaylistLoader_.media());0<i.length&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var i=Qn(this.master(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=i.video||t.main.videoCodec||kc),t.main.isMuxed&&(n.video+=","+(i.audio||t.main.audioCodec||wc)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||wc,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){var a,s={};if(["video","audio"].forEach(function(e){if(n.hasOwnProperty(e)&&!function(e,t){return e?Sc(t):Pc(t)}(t[e].isFmp4,n[e])){var i=t[e].isFmp4?"browser":"muxer";s[i]=s[i]||[],s[i].push(n[e]),"audio"===e&&(a=i)}}),r&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach(function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)}),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(t){var i=(Ic(e.sourceUpdater_.codecs[t]||"")[t]||{}).type,r=(Ic(n[t]||"")[t]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&l.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+n[t]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var u=Object.keys(s).reduce(function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,i=[];Object.keys(t).forEach(function(n){var r=t[n];if(-1===i.indexOf(r.id)){i.push(r.id);var a=Qn(e.master,r),s=[];!a.audio||Pc(a.audio)||Sc(a.audio)||(r.excludeUntil=1/0,s.push("audio codec "+a.audio)),!a.video||Pc(a.video)||Sc(a.video)||(r.excludeUntil=1/0,s.push("video codec "+a.video)),a.text&&"stpp.ttml.im1t"===a.text&&(r.excludeUntil=1/0,s.push("text codec "+a.text)),s.length&&e.logger_("excluding "+r.id+" as codecs "+s.join(", ")+" are unsupported")}})},i.excludeIncompatibleVariants_=function(e){var t=this,i=Ic(e),n=Object.keys(i).length;this.master().playlists.forEach(function(e){if(e.excludeUntil!==1/0){var r={},a=2,s=[],o=Qn(t.masterPlaylistLoader_.master,e);if(o.audio||o.video){var l=[o.video,o.audio].filter(Boolean).join(",");r=Ic(l),a=Object.keys(r).length}a!==n&&(s.push('codec count "'+a+'" !== "'+n+'"'),e.excludeUntil=1/0),t.sourceUpdater_.canChangeType()||(r.video&&i.video&&r.video.type.toLowerCase()!==i.video.type.toLowerCase()&&(s.push('video codec "'+r.video.type+'" !== "'+i.video.type+'"'),e.excludeUntil=1/0),r.audio&&i.audio&&r.audio.type.toLowerCase()!==i.audio.type.toLowerCase()&&(e.excludeUntil=1/0,s.push('audio codec "'+r.audio.type+'" !== "'+i.audio.type+'"'))),s.length&&t.logger_("blacklisting "+e.id+": "+s.join(" && "))}})},i.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){if(void 0===i&&(i=0),e.segments)for(var n,r=i,a=0;a<e.segments.length;a++){var s=e.segments[a];if(n=n||br(t,r+s.duration/2)){if("cueIn"in s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=null;continue}if(r<n.endTime){r+=s.duration;continue}n.endTime+=s.duration}else if("cueOut"in s&&((n=new Ul.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+parseFloat(s.cueOut),t.addCue(n)),"cueOutCont"in s){var o=s.cueOutCont.split("/").map(parseFloat),l=o[0],u=o[1];(n=new Ul.VTTCue(r,r+s.duration,"")).adStartTime=r-l,n.adEndTime=n.adStartTime+u,t.addCue(n)}r+=s.duration}}(e,this.cueTagsTrack_,t)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),t=zc.GOAL_BUFFER_LENGTH,i=zc.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,zc.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=zc.BUFFER_LOW_WATER_LINE,i=zc.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,zc.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,zc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return zc.BUFFER_HIGH_WATER_LINE},t}(ft.EventTarget),Rd=["seeking","seeked","pause","playing","error"],Nd=function(){function e(e){function t(){return a.monitorCurrentTime_()}function i(){return a.techWaiting_()}function n(){return a.cancelTimer_()}function r(){return a.fixesBadSeeks_()}var a=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Kn("PlaybackWatcher"),this.logger_("initialize");var s=this.masterPlaylistController_,o=["main","subtitle","audio"],l={};o.forEach(function(e){l[e]={reset:function(){return a.resetSegmentDownloads_(e)},updateend:function(){return a.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),a.tech_.on(["seeked","seeking"],l[e].reset)}),this.tech_.on("seekablechanged",r),this.tech_.on("waiting",i),this.tech_.on(Rd,n),this.tech_.on("canplay",t),this.dispose=function(){a.logger_("dispose"),a.tech_.off("seekablechanged",r),a.tech_.off("waiting",i),a.tech_.off(Rd,n),a.tech_.off("canplay",t),o.forEach(function(e){s[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),a.tech_.off(["seeked","seeking"],l[e].reset)}),a.checkCurrentTimeTimeout_&&Ul.clearTimeout(a.checkCurrentTimeTimeout_),a.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ul.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ul.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];0<this[e+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,
this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:un(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){var n=t.start(0);e=n+(n===t.end(0)?0:.1)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+ln(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var r=this.tech_.buffered();return!!function(e){var t=e.buffered,i=e.targetDuration,n=e.currentTime;return!(!t.length||t.end(0)-t.start(0)<2*i||n>t.start(0)||!(t.start(0)-n<i))}({buffered:r,targetDuration:this.media().targetDuration,currentTime:i})&&(e=r.start(0)+.1,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=sn(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=on(r,t);if(0<a.length){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+.1;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),r<t},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;if(t){var r;if(t.length&&i.length){var a=sn(t,n-3),s=sn(t,n),o=sn(i,n);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else on(t,n).length||(r=this.gapFromVideoUnderflow_(t,n));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=on(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Rc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return ft.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return ft.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&2<t-r)return{start:r,end:a}}return null},e}(),Ud={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Fd={PlaylistLoader:Mc,Playlist:Uc,utils:Vc,STANDARD_PLAYLIST_SELECTOR:ir,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Uc.isEnabled);return Zn(t,function(e,t){return er(e,t)}),t.filter(function(t){return!!Qn(e.playlists.master,t).video})[0]||null},lastBandwidthSelector:ir,movingAverageBandwidthSelector:function(e){var t=-1;if(e<0||1<e)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Ul.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,tr(this.playlists.master,t,parseInt(Jn(this.tech_.el(),"width"),10)*i,parseInt(Jn(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:er,comparePlaylistResolution:function(e,t){var i,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||Ul.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),i===(n=n||Ul.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Tn()};Object.keys(zc).forEach(function(e){Object.defineProperty(Fd,e,{get:function(){return ft.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),zc[e]},set:function(t){ft.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?ft.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):zc[e]=t}})});var Bd="videojs-vhs";Fd.canPlaySource=function(){return ft.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Fd.supportsNativeHls=function(){if(!Nl||!Nl.createElement)return!1;var e=Nl.createElement("video");return!!ft.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Fd.supportsNativeDash=!!(Nl&&Nl.createElement&&ft.getTech("Html5").isSupported())&&/maybe|probably/i.test(Nl.createElement("video").canPlayType("application/dash+xml")),Fd.supportsTypeNatively=function(e){return"hls"===e?Fd.supportsNativeHls:"dash"===e&&Fd.supportsNativeDash},Fd.isSupported=function(){return ft.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Vd=function(e){function t(t,i,n){var r;if(r=e.call(this,i,ft.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&ft.log.warn("Using hls options is deprecated. Use vhs instead."),r.logger_=Kn("VhsHandler"),i.options_&&i.options_.playerId){var a=ft(i.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return ft.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),jl(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return ft.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),jl(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return ft.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),jl(r)},configurable:!0}),r.player_=a}if(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(Nl,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var e=Nl.fullscreenElement||Nl.webkitFullscreenElement||Nl.mozFullScreenElement||Nl.msFullscreenElement;e&&e.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),r.on(r.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}Ml(t,e);var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Pr();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=zc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===zc.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta"].forEach(function(t){"undefined"!=typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,t){var i=this;if(e){this.setOptions_(),this.options_.src=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Fd,this.options_.sourceType=Kl(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Md(this.options_);var n=ft.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Nd(n),this.masterPlaylistController_.on("error",function(){var e=ft.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});var r=this.options_.experimentalBufferBasedABR?Fd.movingAverageBandwidthSelector(.55):Fd.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Fd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){ft.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return un(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return un(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(Ul.localStorage){var t=Pr();t=t?ft.mergeOptions(t,e):e;try{Ul.localStorage.setItem(Bd,JSON.stringify(t))}catch(e){return}}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e){var t=e.playlists;e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter(function(e){return!gn(e)}).map(function(t){return new Sr(e,t,t.id)}):[]}}(i)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){i.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ul.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Ar({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});11!==ft.browser.IE_VERSION&&i?(this.logger_("waiting for EME key session creation"),xr({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var e=this,t=ft.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),Er(e,t.playlists)}(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Er(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":"2.4.1","mux.js":"5.7.0","mpd-parser":"0.15.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return kd.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ul.URL.revokeObjectURL&&(Ul.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},i.convertToProgramTime=function(e,t){return Pn({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},i.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),In({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(ft.getComponent("Component")),qd={name:"videojs-http-streaming",VERSION:"2.4.1",canHandleSource:function(e,t){void 0===t&&(t={});var i=ft.mergeOptions(ft.options,t);return qd.canPlayType(e.type,i)},handleSource:function(e,t,i){void 0===i&&(i={});var n=ft.mergeOptions(ft.options,i);return t.vhs=new Vd(e,t,n),ft.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return ft.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Tn(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var i=ft.mergeOptions(ft.options,t).vhs.overrideNative,n=void 0===i?!ft.browser.IS_ANY_SAFARI:i,r=Kl(e);return!r||Fd.supportsTypeNatively(r)&&!n?"":"maybe"}};return Sc("avc1.4d400d,mp4a.40.2")&&ft.getTech("Html5").registerSourceHandler(qd,0),ft.VhsHandler=Vd,Object.defineProperty(ft,"HlsHandler",{get:function(){return ft.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Vd},configurable:!0}),ft.VhsSourceHandler=qd,Object.defineProperty(ft,"HlsSourceHandler",{get:function(){return ft.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),qd},configurable:!0}),ft.Vhs=Fd,Object.defineProperty(ft,"Hls",{get:function(){return ft.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Fd},configurable:!0}),ft.use||(ft.registerComponent("Hls",Fd),ft.registerComponent("Vhs",Fd)),ft.options.vhs=ft.options.vhs||{},ft.options.hls=ft.options.hls||{},ft.registerPlugin?ft.registerPlugin("reloadSourceOnError",Cr):ft.plugin("reloadSourceOnError",Cr),ft}),function(){var e,t;e=window,(t=e&&e.videojs)&&(t.CDN_VERSION="7.11.1")}(),function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i.IVPAIDAdUnit=function(){function e(){n(this,e)}return r(e,[{key:"handshakeVersion",value:function(){arguments.length<=0||arguments[0]===undefined||arguments[0],arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"initAd",value:function(){arguments.length<=4||arguments[4]===undefined||arguments[4],arguments.length<=5||arguments[5]===undefined||arguments[5],arguments.length<=6||arguments[6]===undefined?undefined:arguments[6]}},{key:"resizeAd",value:function(){arguments.length<=3||arguments[3]===undefined?undefined:arguments[3]}},{key:"startAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"stopAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"pauseAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"resumeAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"expandAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"collapseAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"skipAd",value:function(){arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"getAdLinear",value:function(){}},{key:"getAdWidth",value:function(){}},{key:"getAdHeight",value:function(){}},{key:"getAdExpanded",value:function(){}},{key:"getAdSkippableState",value:function(){}},{key:"getAdRemainingTime",value:function(){}},{key:"getAdDuration",value:function(){}},{key:"setAdVolume",value:function(){arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"getAdVolume",value:function(){}},{key:"getAdCompanions",value:function(){}},{key:"getAdIcons",value:function(){}}]),e}();Object.defineProperty(a,"EVENTS",{writable:!1,configurable:!1,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},{}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./IVPAIDAdUnit").IVPAIDAdUnit,u=Object.getOwnPropertyNames(l.prototype).filter(function(e){return-1===["constructor"].indexOf(e)});i.VPAIDAdUnit=function(){function e(t){n(this,e);var i=r(this,Object.getPrototypeOf(e).call(this));return i._destroyed=!1,i._flash=t,i}return a(e,l),o(e,[{key:"_destroy",value:function(){var e=this;this._destroyed=!0,u.forEach(function(t){e._flash.removeCallbackByMethodName(t)}),l.EVENTS.forEach(function(t){e._flash.offEvent(t)}),this._flash=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"on",value:function(e,t){this._flash.on(e,t)}},{key:"off",value:function(e,t){this._flash.off(e,t)}},{key:"handshakeVersion",value:function(){var e=arguments.length<=0||arguments[0]===undefined?"2.0":arguments[0],t=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("handshakeVersion",[e],t)}},{key:"initAd",value:function(e,t,i,n){var r=arguments.length<=4||arguments[4]===undefined?{AdParameters:""}:arguments[4],a=arguments.length<=5||arguments[5]===undefined?{flashVars:""}:arguments[5],s=arguments.length<=6||arguments[6]===undefined?undefined:arguments[6];this._flash.setSize(e,t),r=r||{AdParameters:""},a=a||{flashVars:""},this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),i,n,r.AdParameters||"",a.flashVars||""],s)}},{key:"resizeAd",value:function(e,t,i){var n=arguments.length<=3||arguments[3]===undefined?undefined:arguments[3];this._flash.setSize(e,t),this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),i],n)}},{key:"startAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("startAd",[],e)}},{key:"stopAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("stopAd",[],e)}},{key:"pauseAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("pauseAd",[],e)}},{key:"resumeAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("resumeAd",[],e)}},{key:"expandAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("expandAd",[],e)}},{key:"collapseAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("collapseAd",[],e)}},{key:"skipAd",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("skipAd",[],e)}},{key:"getAdLinear",value:function(e){this._flash.callFlashMethod("getAdLinear",[],e)}},{key:"getAdWidth",value:function(e){this._flash.callFlashMethod("getAdWidth",[],e)}},{key:"getAdHeight",value:function(e){this._flash.callFlashMethod("getAdHeight",[],e)}},{key:"getAdExpanded",value:function(e){this._flash.callFlashMethod("getAdExpanded",[],e)}},{key:"getAdSkippableState",value:function(e){this._flash.callFlashMethod("getAdSkippableState",[],e)}},{key:"getAdRemainingTime",value:function(e){this._flash.callFlashMethod("getAdRemainingTime",[],e)}},{key:"getAdDuration",value:function(e){this._flash.callFlashMethod("getAdDuration",[],e)}},{key:"setAdVolume",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("setAdVolume",[e],t)}},{key:"getAdVolume",value:function(e){this._flash.callFlashMethod("getAdVolume",[],e)}},{key:"getAdCompanions",value:function(e){this._flash.callFlashMethod("getAdCompanions",[],e)}},{key:"getAdIcons",value:function(e){this._flash.callFlashMethod("getAdIcons",[],e)}}]),e}()},{"./IVPAIDAdUnit":1}],3:[function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){if(this._destroyed)throw new Error("VPAIDFlashToJS is destroyed!")}function r(){this._loadLater&&(this.loadAdUnit(this._loadLater.url,this._loadLater.callback),delete this._loadLater)}function a(e,t){var i=!(arguments.length<=2||arguments[2]===undefined)&&arguments[2];Object.defineProperty(y,e,{writable:i,configurable:!1,value:t})}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("swfobject"),l=e("./jsFlashBridge").JSFlashBridge,u=e("./VPAIDAdUnit").VPAIDAdUnit,c=e("./utils").noop,d=e("./utils").callbackTimeout,h=e("./utils").isPositiveInt,p=e("./utils").createElementWithID,f=e("./utils").unique("vpaid"),m=e("./flashTester.js").createFlashTester,g="10.1.0",v={isSupported:function(){return!0}},y=function(){function e(t,n){function a(e){return setTimeout(function(){n(new Error(e))},0),y}var s=arguments.length<=2||arguments[2]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[2],u=this,m=arguments.length<=3||arguments[3]===undefined?{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"}:arguments[3],v=arguments.length<=4||arguments[4]===undefined?{debug:!1,timeout:1e4}:arguments[4];i(this,e);var y=this;if(this._vpaidParentEl=t,this._flashID=f(),this._destroyed=!1,n=n||c,s.width=h(s.width,800),s.height=h(s.height,400),p(t,this._flashID,!0),m.movie=s.data,m.FlashVars="flashid="+this._flashID+"&handler="+l.VPAID_FLASH_HANDLER+"&debug="+v.debug+"&salign="+m.salign,!e.isSupported())return a("user don't support flash or doesn't have the minimum required version of flash "+g);if(this.el=o.createSWF(s,m,this._flashID),!this.el)return a("swfobject failed to create object in element");var _=d(v.timeout,function(e,t){r.call(u),n(e,t)},function(){n("vpaid flash load timeout "+v.timeout)});this._flash=new l(this.el,s.data,this._flashID,s.width,s.height,_)}return s(e,[{key:"destroy",value:function(){this._destroyAdUnit(),this._flash&&(this._flash.destroy(),this._flash=null),this.el=null,this._destroyed=!0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_destroyAdUnit",value:function(){delete this._loadLater,this._adUnitLoad&&(this._adUnitLoad=null,this._flash.removeCallback(this._adUnitLoad)),this._adUnit&&(this._adUnit._destroy(),this._adUnit=null)}},{key:"loadAdUnit",value:function(e,t){var i=this;n.call(this),this._adUnit&&this._destroyAdUnit(),this._flash.isReady()?(this._adUnitLoad=function(e){e||(i._adUnit=new u(i._flash)),i._adUnitLoad=null,t(e,i._adUnit)},this._flash.callFlashMethod("loadAdUnit",[e],this._adUnitLoad)):this._loadLater={url:e,callback:t}}},{key:"unloadAdUnit",value:function(){var e=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];n.call(this),this._destroyAdUnit(),this._flash.callFlashMethod("unloadAdUnit",[],e)}},{key:"getFlashID",value:function(){return n.call(this),this._flash.getFlashID()}},{key:"getFlashURL",value:function(){return n.call(this),this._flash.getFlashURL()}}]),e}();a("isSupported",function(){
return o.hasFlashPlayerVersion(g)&&v.isSupported()},!0),a("runFlashTest",function(e){v=m(document.body,e)}),y.swfobject=o,t.exports=y},{"./VPAIDAdUnit":2,"./flashTester.js":4,"./jsFlashBridge":5,"./utils":8,swfobject:14}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("swfobject"),s="vpaid_video_flash_tester",o="vpaid_video_flash_tester_el",l=e("./jsFlashBridge").JSFlashBridge,u=e("./utils"),c=e("./registry").MultipleValuesRegistry,d=function(){function e(t){var i=this,r=arguments.length<=1||arguments[1]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[1];n(this,e),this.parentEl=u.createElementWithID(t,o),u.hideFlashEl(this.parentEl);var s={};s.movie=r.data,s.FlashVars="flashid="+o+"&handler="+l.VPAID_FLASH_HANDLER,s.allowScriptAccess="always",this.el=a.createSWF(r,s,o),this._handlers=new c,this._isSupported=!1,this.el&&(u.hideFlashEl(this.el),this._flash=new l(this.el,r.data,o,r.width,r.height,function(){var e=!0;i._isSupported=e,i._handlers.get("change").forEach(function(t){setTimeout(function(){t("change",e)},0)})}))}return r(e,[{key:"isSupported",value:function(){return this._isSupported}},{key:"on",value:function(e,t){this._handlers.add(e,t)}}]),e}();i.createFlashTester=function(e,t){return window[s]||(window[s]=new d(e,t)),window[s]}},{"./jsFlashBridge":5,"./registry":7,"./utils":8,swfobject:14}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){var n=this;setTimeout(function(){var r=n._callbacks.get(e);r&&(n._callbacks.remove(e),r(t,i))},0)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./utils").unique,o=e("./utils").isPositiveInt,l=e("./utils").stringEndsWith,u=e("./registry").SingleValueRegistry,c=e("./registry").MultipleValuesRegistry,d=e("./jsFlashBridgeRegistry"),h="vpaid_video_flash_handler",p="AdError",f=i.JSFlashBridge=function(){function e(t,i,r,a,o,l){n(this,e),this._el=t,this._flashID=r,this._flashURL=i,this._width=a,this._height=o,this._handlers=new c,this._callbacks=new u,this._uniqueMethodIdentifier=s(this._flashID),this._ready=!1,this._handShakeHandler=l,d.addInstance(this._flashID,this)}return a(e,[{key:"on",value:function(e,t){this._handlers.add(e,t)}},{key:"off",value:function(e,t){return this._handlers.remove(e,t)}},{key:"offEvent",value:function(e){return this._handlers.removeByKey(e)}},{key:"offAll",value:function(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?[]:arguments[1],i=arguments.length<=2||arguments[2]===undefined?undefined:arguments[2],a="";i&&(a=this._uniqueMethodIdentifier()+"_"+e,this._callbacks.add(a,i));try{this._el[e]([a].concat(t))}catch(n){i?r.call(this,a,n):this._trigger(p,n)}}},{key:"removeCallback",value:function(e){return this._callbacks.removeByValue(e)}},{key:"removeCallbackByMethodName",value:function(e){var t=this;this._callbacks.filterKeys(function(t){return l(t,e)}).forEach(function(e){t._callbacks.remove(e)})}},{key:"removeAllCallbacks",value:function(){return this._callbacks.removeAll()}},{key:"_trigger",value:function(e,t){var i=this;this._handlers.get(e).forEach(function(n){"AdClickThru"===e?n(t):setTimeout(function(){i._handlers.get(e).length>0&&n(t)},0)})}},{key:"_callCallback",value:function(e,t,i,n){this._callbacks.get(t)?r.call(this,t,i,n):i&&""===t&&this.trigger(p,i)}},{key:"_handShake",value:function(e,t){this._ready=!0,this._handShakeHandler&&(this._handShakeHandler(e,t),delete this._handShakeHandler)}},{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"setSize",value:function(e,t){this._width=o(e,this._width),this._height=o(t,this._height),this._el.setAttribute("width",this._width),this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){this.setSize(e,this._height)}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(e){this.setSize(this._width,e)}},{key:"getFlashID",value:function(){return this._flashID}},{key:"getFlashURL",value:function(){return this._flashURL}},{key:"isReady",value:function(){return this._ready}},{key:"destroy",value:function(){this.offAll(),this.removeAllCallbacks(),d.removeInstanceByID(this._flashID),this._el.parentElement&&this._el.parentElement.removeChild(this._el)}}]),e}();Object.defineProperty(f,"VPAID_FLASH_HANDLER",{writable:!1,configurable:!1,value:h}),window[h]=function(e,t,i,n,r,a){var s=d.getInstanceByID(e);s&&("handShake"===i?s._handShake(r,a):"event"!==t?s._callCallback(i,n,r,a):s._trigger(i,a))}},{"./jsFlashBridgeRegistry":6,"./registry":7,"./utils":8}],6:[function(e,t){"use strict";var i=new(0,e("./registry").SingleValueRegistry),n={};Object.defineProperty(n,"addInstance",{writable:!1,configurable:!1,value:function(e,t){i.add(e,t)}}),Object.defineProperty(n,"getInstanceByID",{writable:!1,configurable:!1,value:function(e){return i.get(e)}}),Object.defineProperty(n,"removeInstanceByID",{writable:!1,configurable:!1,value:function(e){return i.remove(e)}}),t.exports=n},{"./registry":7}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i.MultipleValuesRegistry=function(){function e(){n(this,e),this._registries={}}return r(e,[{key:"add",value:function(e,t){this._registries[e]||(this._registries[e]=[]),-1===this._registries[e].indexOf(t)&&this._registries[e].push(t)}},{key:"get",value:function(e){return this._registries[e]||[]}},{key:"filterKeys",value:function(e){return Object.keys(this._registries).filter(e)}},{key:"findByValue",value:function(e){var t=this;return Object.keys(this._registries).filter(function(i){return-1!==t._registries[i].indexOf(e)})}},{key:"remove",value:function(e,t){if(this._registries[e]){var i=this._registries[e].indexOf(t);if(!(i<0))return this._registries[e].splice(i,1)}}},{key:"removeByKey",value:function(e){var t=this._registries[e];return delete this._registries[e],t}},{key:"removeByValue",value:function(e){var t=this;return this.findByValue(e).map(function(i){return t.remove(i,e)})}},{key:"removeAll",value:function(){var e=this._registries;return this._registries={},e}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),e}(),i.SingleValueRegistry=function(){function e(){n(this,e),this._registries={}}return r(e,[{key:"add",value:function(e,t){this._registries[e]=t}},{key:"get",value:function(e){return this._registries[e]}},{key:"filterKeys",value:function(e){return Object.keys(this._registries).filter(e)}},{key:"findByValue",value:function(e){var t=this;return Object.keys(this._registries).filter(function(i){return t._registries[i]===e})}},{key:"remove",value:function(e){var t=this._registries[e];return delete this._registries[e],t}},{key:"removeByValue",value:function(e){var t=this;return this.findByValue(e).map(function(e){return t.remove(e)})}},{key:"removeAll",value:function(){var e=this._registries;return this._registries={},e}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),e}()},{}],8:[function(e,t,i){"use strict";function n(e){var t=-1;return function(){return e+"_"+ ++t}}function r(){}function a(e,t,i){var n=setTimeout(function(){t=r,i()},e);return function(){clearTimeout(n),t.apply(this,arguments)}}function s(e,t){var i=!(arguments.length<=2||arguments[2]===undefined)&&arguments[2],n=document.createElement("div");return n.id=t,i&&(e.innerHTML=""),e.appendChild(n),n}function o(e,t){return!isNaN(parseFloat(e))&&isFinite(e)&&e>0?e:t}function l(e,t){return c.call(e,t)}function u(e){e.style.position="absolute",e.style.left="-1px",e.style.top="-1px",e.style.width="1px",e.style.height="1px"}Object.defineProperty(i,"__esModule",{value:!0}),i.unique=n,i.noop=r,i.callbackTimeout=a,i.createElementWithID=s,i.isPositiveInt=o,i.stringEndsWith=l,i.hideFlashEl=u;var c=String.prototype.endsWith?String.prototype.endsWith:function(e,t){var i=this.toString();(t===undefined||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}},{}],9:[function(e,t){"use strict";function i(){}function n(e,t,i){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:i})}var r=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],a=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],s=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],o=["setAdVolume"];i.prototype.handshakeVersion=function(){},i.prototype.initAd=function(){},i.prototype.startAd=function(){},i.prototype.stopAd=function(){},i.prototype.skipAd=function(){},i.prototype.resizeAd=function(){},i.prototype.pauseAd=function(){},i.prototype.resumeAd=function(){},i.prototype.expandAd=function(){},i.prototype.collapseAd=function(){},i.prototype.subscribe=function(){},i.prototype.unsubscribe=function(){},i.prototype.getAdLinear=function(){},i.prototype.getAdWidth=function(){},i.prototype.getAdHeight=function(){},i.prototype.getAdExpanded=function(){},i.prototype.getAdSkippableState=function(){},i.prototype.getAdRemainingTime=function(){},i.prototype.getAdDuration=function(){},i.prototype.getAdVolume=function(){},i.prototype.getAdCompanions=function(){},i.prototype.getAdIcons=function(){},i.prototype.setAdVolume=function(){},n(i,"METHODS",r),n(i,"GETTERS",s),n(i,"SETTERS",o),n(i,"EVENTS",a);var l=r.filter(function(e){return-1===["skipAd"].indexOf(e)});n(i,"checkVPAIDInterface",function(e){return l.every(function(t){return"function"==typeof e[t]})}),t.exports=i},{}],10:[function(e,t){"use strict";function i(e,t,i,r){this._isValid=u(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,this._iframe=r,this._subscribers=new l,n.call(this))}function n(){if(p.forEach(function(e){this._creative.subscribe(a.bind(this,e),e)}.bind(this)),this._creative.subscribe(r.bind(this),h),this._videoEl){var e=this._iframe.contentDocument.documentElement,t=this._videoEl;e.addEventListener("click",function(i){i.target===e&&t.click()})}}function r(e,t,i){this._subscribers.triggerSync(h,{url:e,id:t,playerHandles:i})}function a(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}function s(e,t,i,n){e?e(i,n):i&&t.trigger(d,i)}var o=e("./IVPAIDAdUnit"),l=e("./subscriber"),u=o.checkVPAIDInterface,c=e("./utils"),d=(o.METHODS,"AdError"),h="AdClickThru",p=o.EVENTS.filter(function(e){return e!=h});i.prototype=Object.create(o.prototype),i.prototype.isValidVPAIDAd=function(){return this._isValid},o.METHODS.forEach(function(e){-1===["subscribe","unsubscribe","initAd"].indexOf(e)&&(i.prototype[e]=function(){var t=o.prototype[e].length,i=Array.prototype.slice.call(arguments),n=t===i.length?i.pop():undefined;setTimeout(function(){var t,r=null;try{t=this._creative[e].apply(this._creative,i)}catch(u){r=u}s(n,this._subscribers,r,t)}.bind(this),0)})}),i.prototype.initAd=function(e,t,i,n,r,a,o){r=r||{},a=c.extend({slot:this._el,videoSlot:this._videoEl},a||{}),setTimeout(function(){var l;try{this._creative.initAd(e,t,i,n,r,a)}catch(d){l=d}s(o,this._subscribers,l)}.bind(this),0)},i.prototype.subscribe=function(e,t,i){this._subscribers.subscribe(t,e,i)},i.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},i.prototype.on=i.prototype.subscribe,i.prototype.off=i.prototype.unsubscribe,o.GETTERS.forEach(function(e){i.prototype[e]=function(t){setTimeout(function(){var i,n=null;try{i=this._creative[e]()}catch(l){n=l}s(t,this._subscribers,n,i)}.bind(this),0)}}),i.prototype.setAdVolume=function(e,t){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(e),i=this._creative.getAdVolume()}catch(l){n=l}n||(n=c.validate(i===e,"failed to apply volume: "+e)),s(t,this._subscribers,n,i)}.bind(this),0)},i.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},t.exports=i},{"./IVPAIDAdUnit":9,"./subscriber":12,"./utils":13}],11:[function(e,t){"use strict";function i(e,t,i,n){i=i||{},this._id=h(),this._destroyed=!1,this._frameContainer=d.createElementInEl(e,"div"),this._videoEl=t,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||f,extraOptions:i.extraOptions||{}}}function n(e){var t=this[e];t&&(t.remove(),delete this[e])}function r(){s.call(this),delete this._adUnit}function a(){s.call(this),l.call(this)}function s(){n.call(this,"_frame"),o.call(this)}function o(){this._onLoad&&(window.removeEventListener("message",this._onLoad),d.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function l(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function u(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function c(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var d=e("./utils"),h=d.unique("vpaidIframe"),p=e("./VPAIDAdUnit"),f='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"></script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');</script></body></html>',m="AdStopped";i.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,a.call(this))},i.prototype.isDestroyed=function(){return this._destroyed},i.prototype.loadAdUnit=function(e,t){function i(e){if(e.origin===c()&&JSON.parse(e.data).id===s.getID()){var i,n,a;if(s._frame.contentWindow?(a=s._frame.contentWindow.getVPAIDAd,n=d.validate("function"==typeof a,"the ad didn't return a function to create an ad")):n="the iframe is not anymore in the DOM tree",!n){var l=s._frame.contentWindow.document.querySelector(".ad-element");(i=new p(a(),l,s._videoEl,s._frame)).subscribe(m,r.bind(s)),n=d.validate(i.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return s._adUnit=i,o.call(s),t(n,n?null:i),!0}}function n(){t("timeout",null)}u.call(this),a.call(this);var s=this,l=d.createIframeWithContent(this._frameContainer,this._templateConfig.template,d.extend({iframeURL_JS:e,iframeID:this.getID(),origin:c()},this._templateConfig.extraOptions));this._frame=l,this._onLoad=d.callbackTimeout(this._vpaidOptions.timeout,i.bind(this),n.bind(this)),window.addEventListener("message",this._onLoad)},i.prototype.unloadAdUnit=function(){a.call(this)},i.prototype.getID=function(){return this._id},t.exports=i,window.VPAIDHTML5Client=i},{"./VPAIDAdUnit":10,"./utils":13}],12:[function(e,t){"use strict";function i(){this._subscribers={}}i.prototype.subscribe=function(e,t,i){this.isHandlerAttached(e,t)||this.get(t).push({handler:e,context:i,eventName:t})},i.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e!==t.handler})},i.prototype.unsubscribeAll=function(){this._subscribers={}},i.prototype.trigger=function(e,t){var i=this;this.get(e).concat(this.get("*")).forEach(function(e){setTimeout(function(){i.isHandlerAttached(e.handler,e.eventName)&&e.handler.call(e.context,t)},0)})},i.prototype.triggerSync=function(e,t){this.get(e).concat(this.get("*")).forEach(function(e){e.handler.call(e.context,t)})},i.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},i.prototype.isHandlerAttached=function(e,t){return this.get(t).some(function(t){return e===t.handler})},t.exports=i},{}],13:[function(e,t){"use strict";function i(){}function n(e,t){return e?null:new Error(t)}function r(e){var t=p[e];t&&(clearTimeout(t),delete p[e])}function a(e,t,n){var a,s;return s=setTimeout(function(){t=i,delete s[a],n()},e),p[a=function(){t.apply(this,arguments)&&r(a)}]=s,a}function s(e,t,i){var n=document.createElement(t);return i&&(n.id=i),e.appendChild(n),n}function o(e,t,i){var n=l(e,null,i.zIndex);if(c(n,u(t,i)))return n}function l(e,t,i){var n=document.createElement("iframe");return n.src=t||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.margin="0px",n.style.padding="0px",n.style.border="none",i&&(n.style.zIndex=i),n.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(n),n}function u(e,t){return Object.keys(t).forEach(function(i){var n="object"==typeof n?JSON.stringify(t[i]):t[i];e=e.replace(new RegExp("{{"+i+"}}","g"),n)}),e}function c(e,t){var i=e.contentWindow&&e.contentWindow.document;return!!i&&(i.write(t),!0)}function d(e,t){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function h(e){var t=-1;return function(){return e+"_"+ ++t}}var p={};t.exports={noop:i,validate:n,clearCallbackTimeout:r,callbackTimeout:a,createElementInEl:s,createIframeWithContent:o,createIframe:l,simpleTemplate:u,setIframeContent:c,extend:d,unique:h}},{}],14:[function(e,t){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof t&&t.exports?t.exports=i():e.swfobject=i()}(this,function(){function e(){if(!W&&document.getElementsByTagName("body")[0]){try{var e,t=v("span");t.style.display="none",(e=U.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(D){return}W=!0;for(var i=V.length,n=0;n<i;n++)V[n]()}}function t(e){W?e():V[V.length]=e}function i(e){if(typeof N.addEventListener!==I)N.addEventListener("load",e,!1);else if(typeof U.addEventListener!==I)U.addEventListener("load",e,!1);else if(typeof N.attachEvent!==I)_(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){var e=U.getElementsByTagName("body")[0],t=v(L);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",j);var i=e.appendChild(t);if(i){var n=0;!function a(){if(typeof i.GetVariable!==I)try{var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),Q.pv=[y(s[0]),y(s[1]),y(s[2])])}catch(j){Q.pv=[8,0,0]}else if(n<10)return n++,void setTimeout(a,10);e.removeChild(t),i=null,r()}()}else r()}function r(){var e=q.length;if(e>0)for(var t=0;t<e;t++){var i=q[t].id,n=q[t].callbackFn,r={success:!1,id:i};if(Q.pv[0]>0){var u=g(i);if(u)if(!b(q[t].swfVersion)||Q.wk&&Q.wk<312)if(q[t].expressInstall&&s()){var c={};c.data=q[t].expressInstall,c.width=u.getAttribute("width")||"0",c.height=u.getAttribute("height")||"0",u.getAttribute("class")&&(c.styleclass=u.getAttribute("class")),u.getAttribute("align")&&(c.align=u.getAttribute("align"));for(var d={},h=u.getElementsByTagName("param"),p=h.length,f=0;f<p;f++)"movie"!==h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));o(c,d,i,n)}else l(u),n&&n(r);else w(i,!0),n&&(r.success=!0,r.ref=a(i),r.id=i,n(r))}else if(w(i,!0),n){var m=a(i);m&&typeof m.SetVariable!==I&&(r.success=!0,r.ref=m,r.id=m.id),n(r)}}}function a(e){var t=null,i=g(e);return i&&"OBJECT"===i.nodeName.toUpperCase()&&(t=typeof i.SetVariable!==I?i:i.getElementsByTagName(L)[0]||i),t}function s(){return!$&&b("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function o(e,t,i,n){var r=g(i);if(i=m(i),$=!0,E=n||null,x={success:!1,id:i},r){"OBJECT"===r.nodeName.toUpperCase()?(S=u(r),C=null):(S=r,C=i),e.id=M,(typeof e.width===I||!/%$/.test(e.width)&&y(e.width)<310)&&(e.width="310"),(typeof e.height===I||!/%$/.test(e.height)&&y(e.height)<137)&&(e.height="137");var a=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(N.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+a+"&MMdoctitle="+encodeURIComponent(U.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!==I?t.flashvars+="&"+s:t.flashvars=s,Q.ie&&4!=r.readyState){var o=v("div");i+="SWFObjectNew",o.setAttribute("id",i),r.parentNode.insertBefore(o,r),r.style.display="none",p(r)}d(e,t,i)}}function l(e){if(Q.ie&&4!=e.readyState){e.style.display="none";var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),p(e)}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=v("div");if(Q.win&&Q.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(L)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,a=0;a<r;a++)1==n[a].nodeType&&"PARAM"===n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function c(e,t){var i=v("div");return i.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",i.firstChild}function d(e,t,i){var n,r=g(i);if(i=m(i),Q.wk&&Q.wk<312)return n;if(r){var a,s,o,l=Q.ie?v("div"):v(L);for(o in typeof e.id===I&&(e.id=i),t)t.hasOwnProperty(o)&&"movie"!==o.toLowerCase()&&h(l,o,t[o]);for(a in Q.ie&&(l=c(e.data,l.innerHTML)),e)e.hasOwnProperty(a)&&("styleclass"===(s=a.toLowerCase())?l.setAttribute("class",e[a]):"classid"!==s&&"data"!==s&&l.setAttribute(a,e[a]));Q.ie?H[H.length]=e.id:(l.setAttribute("type",j),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),n=l}return n}function h(e,t,i){var n=v("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function p(e){var t=g(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(Q.ie?(t.style.display="none",function i(){if(4==t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(i,10)}()):t.parentNode.removeChild(t))}function f(e){return e&&e.nodeType&&1===e.nodeType}function m(e){return f(e)?e.id:e}function g(e){if(f(e))return e;var t=null;try{t=U.getElementById(e)}catch(D){}return t}function v(e){return U.createElement(e)}function y(e){return parseInt(e,10)}function _(e,t,i){e.attachEvent(t,i),z[z.length]=[e,t,i]}function b(e){e+="";var t=Q.pv,i=e.split(".");return i[0]=y(i[0]),i[1]=y(i[1])||0,i[2]=y(i[2])||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function T(e,t,i,n){var r=U.getElementsByTagName("head")[0];if(r){var a="string"==typeof i?i:"screen";if(n&&(A=null,P=null),!A||P!=a){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",a),A=r.appendChild(s),Q.ie&&typeof U.styleSheets!==I&&U.styleSheets.length>0&&(A=U.styleSheets[U.styleSheets.length-1]),P=a}A&&(typeof A.addRule!==I?A.addRule(e,t):typeof U.createTextNode!==I&&A.appendChild(U.createTextNode(e+" {"+t+"}")))}}function w(e,t){if(G){var i=t?"visible":"hidden",n=g(e);W&&n?n.style.visibility=i:"string"==typeof e&&T("#"+e,"visibility:"+i)}}function k(e){return null!==/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!==I?encodeURIComponent(e):e}var S,C,E,x,A,P,I="undefined",L="object",D="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",j="application/x-shockwave-flash",M="SWFObjectExprInst",R="onreadystatechange",N=window,U=document,F=navigator,B=!1,V=[],q=[],H=[],z=[],W=!1,$=!1,G=!0,X=!1,Q=function(){var e=typeof U.getElementById!==I&&typeof U.getElementsByTagName!==I&&typeof U.createElement!==I,t=F.userAgent.toLowerCase(),i=F.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),r=i?/mac/.test(i):/mac/.test(t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s="Microsoft Internet Explorer"===F.appName,o=[0,0,0],l=null;if(typeof F.plugins!==I&&typeof F.plugins[D]===L)(l=F.plugins[D].description)&&typeof F.mimeTypes!==I&&F.mimeTypes[j]&&F.mimeTypes[j].enabledPlugin&&(B=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=y(l.replace(/^(.*)\..*$/,"$1")),o[1]=y(l.replace(/^.*\.(.*)\s.*$/,"$1")),o[2]=/[a-zA-Z]/.test(l)?y(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof N.ActiveXObject!==I)try{var u=new ActiveXObject(O);u&&(l=u.GetVariable("$version"))&&(s=!0,o=[y((l=l.split(" ")[1].split(","))[0]),y(l[1]),y(l[2])])}catch(W){}return{w3:e,pv:o,wk:a,ie:s,win:n,mac:r}}();Q.w3&&((typeof U.readyState!==I&&("complete"===U.readyState||"interactive"===U.readyState)||typeof U.readyState===I&&(U.getElementsByTagName("body")[0]||U.body))&&e(),W||(typeof U.addEventListener!==I&&U.addEventListener("DOMContentLoaded",e,!1),Q.ie&&(U.attachEvent(R,function K(){"complete"===U.readyState&&(U.detachEvent(R,K),e())}),N==top&&function Y(){if(!W){try{U.documentElement.doScroll("left")}catch(I){return void setTimeout(Y,0)}e()}}()),Q.wk&&function J(){W||(/loaded|complete/.test(U.readyState)?e():setTimeout(J,0))}()));V[0]=function(){B?n():r()};Q.ie&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;t<e;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var i=H.length,n=0;n<i;n++)p(H[n]);for(var r in Q)Q[r]=null;for(var a in Q=null,swfobject)swfobject[a]=null;swfobject=null});return{registerObject:function(e,t,i,n){if(Q.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=i,r.callbackFn=n,q[q.length]=r,w(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(Q.w3)return a(e)},embedSWF:function(e,i,n,r,a,l,u,c,h,p){var f=m(i),g={success:!1,id:f};Q.w3&&!(Q.wk&&Q.wk<312)&&e&&i&&n&&r&&a?(w(f,!1),t(function(){n+="",r+="";var t={};if(h&&typeof h===L)for(var m in h)t[m]=h[m];t.data=e,t.width=n,t.height=r;var v={};if(c&&typeof c===L)for(var y in c)v[y]=c[y];if(u&&typeof u===L)for(var _ in u)if(u.hasOwnProperty(_)){var T=X?encodeURIComponent(_):_,k=X?encodeURIComponent(u[_]):u[_];typeof v.flashvars!==I?v.flashvars+="&"+T+"="+k:v.flashvars=T+"="+k}if(b(a)){var S=d(t,v,i);t.id==f&&w(f,!0),g.success=!0,g.ref=S,g.id=S.id}else{if(l&&s())return t.data=l,void o(t,v,i,p);w(f,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){G=!1},enableUriEncoding:function(e){X=typeof e===I||e},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return Q.w3?d(e,t,i):undefined},showExpressInstall:function(e,t,i,n){Q.w3&&s()&&o(e,t,i,n)},removeSWF:function(e){Q.w3&&p(e)},createCSS:function(e,t,i,n){Q.w3&&T(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=U.location.search||U.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return k(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return k(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if($){var e=g(M);e&&S&&(e.parentNode.replaceChild(S,e),C&&(w(C,!0),Q.ie&&(S.style.display="block")),E&&E(x)),$=!1}},version:"2.3"}})},{}],15:[function(e,t){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.initialize(e)}var n=e("./InLine"),r=e("./Wrapper");i.prototype.initialize=function(e){this.id=e.attr("id"),this.sequence=e.attr("sequence"),e.inLine&&(this.inLine=new n(e.inLine)),e.wrapper&&(this.wrapper=new r(e.wrapper))},t.exports=i},{"./InLine":18,"./Wrapper":28}],16:[function(e,t){"use strict";function i(e){function t(e){var t=[];return r.isDefined(e)&&(e=r.isArray(e)?e:[e]).forEach(function(e){t.push(new n(e))}),t}if(!(this instanceof i))return new i(e);s.info("<Companion> found companion ad"),s.debug("<Companion>  companionJTree:",e),this.creativeType=a.attr(e.staticResource,"creativeType"),this.staticResource=a.keyValue(e.staticResource),s.info("<Companion>  creativeType: "+this.creativeType),s.info("<Companion>  staticResource: "+this.staticResource);var o=null;a.keyValue(e.HTMLResource)?o=a.keyValue(e.HTMLResource):a.keyValue(e.hTMLResource)&&(o=a.keyValue(e.hTMLResource)),null!==o&&s.info("<Companion> found html resource",o),this.htmlResource=o;var l=null;a.keyValue(e.IFrameResource)?l=a.keyValue(e.IFrameResource):a.keyValue(e.iFrameresource)&&(l=a.keyValue(e.iFrameresource)),null!==l&&s.info("<Companion> found iframe resource",l),this.iframeResource=l,this.id=a.attr(e,"id"),this.width=a.attr(e,"width"),this.height=a.attr(e,"height"),this.expandedWidth=a.attr(e,"expandedWidth"),this.expandedHeight=a.attr(e,"expandedHeight"),this.scalable=a.attr(e,"scalable"),this.maintainAspectRatio=a.attr(e,"maintainAspectRatio"),this.minSuggestedDuration=a.attr(e,"minSuggestedDuration"),this.apiFramework=a.attr(e,"apiFramework"),this.companionClickThrough=a.keyValue(e.companionClickThrough),this.trackingEvents=t(e.trackingEvents&&e.trackingEvents.tracking),s.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}var n=e("./TrackingEvent"),r=e("../../utils/utilityFunctions"),a=e("../../utils/xml"),s=e("../../utils/consoleLogger");t.exports=i},{"../../utils/consoleLogger":41,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./TrackingEvent":21}],17:[function(e,t){"use strict";function i(e){if(!(this instanceof i))return new i(e);if(this.id=e.attr("id"),this.sequence=e.attr("sequence"),this.adId=e.attr("adId"),this.apiFramework=e.attr("apiFramework"),e.linear&&(this.linear=new n(e.linear)),e.companionAds){var t=[],s=e.companionAds&&e.companionAds.companion;a.isDefined(s)&&(s=a.isArray(s)?s:[s]).forEach(function(e){t.push(new r(e))}),this.companionAds=t}}var n=e("./Linear"),r=e("./Companion"),a=e("../../utils/utilityFunctions");i.prototype.isSupported=function(){return!this.linear||this.linear.isSupported()},i.parseCreatives=function(e){var t=[];return a.isDefined(e)&&a.isDefined(e.creative)&&(a.isArray(e.creative)?e.creative:[e.creative]).forEach(function(e){t.push(new i(e))}),t},t.exports=i},{"../../utils/utilityFunctions":47,"./Companion":16,"./Linear":19}],18:[function(e,t){"use strict";function i(e){function t(e){return e?a.transformArray(a.isArray(e)?e:[e],function(e){return a.isNotEmptyString(e.keyValue)?{uri:e.keyValue,type:e.attr("type")}:undefined}):[]}if(!(this instanceof i))return new i(e);this.adTitle=s.keyValue(e.adTitle),this.adSystem=s.keyValue(e.adSystem),this.impressions=n.parseImpressions(e.impression),this.creatives=r.parseCreatives(e.creatives),this.description=s.keyValue(e.description),this.advertiser=s.keyValue(e.advertiser),this.surveys=t(e.survey),this.error=s.keyValue(e.error),this.pricing=s.keyValue(e.pricing),this.extensions=e.extensions}var n=e("./vastUtil"),r=e("./Creative"),a=e("../../utils/utilityFunctions"),s=e("../../utils/xml");i.prototype.isSupported=function(){var e,t;if(0===this.creatives.length)return!1;for(e=0,t=this.creatives.length;e<t;e+=1)if(!this.creatives[e].isSupported())return!1;return!0},t.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],19:[function(e,t){"use strict";function i(e){function t(e,t){var i=[];return s.isDefined(e)&&(e=s.isArray(e)?e:[e]).forEach(function(e){i.push(new n(e,t))}),i}function u(e){var t=[];return s.isDefined(e)&&(e=s.isArray(e)?e:[e]).forEach(function(e){t.push(new r(e))}),t}if(!(this instanceof i))return new i(e);this.duration=o.duration(l.keyValue(e.duration)),this.mediaFiles=u(e.mediaFiles&&e.mediaFiles.mediaFile),this.trackingEvents=t(e.trackingEvents&&e.trackingEvents.tracking,this.duration),this.skipoffset=o.offset(window.vastClientConfig&&window.vastClientConfig.adSkipOffset||l.attr(e,"skipoffset"),this.duration),e.videoClicks&&(this.videoClicks=new a(e.videoClicks)),e.adParameters&&(this.adParameters=l.keyValue(e.adParameters),l.attr(e.adParameters,"xmlEncoded")&&(this.adParameters=l.decode(this.adParameters)))}var n=e("./TrackingEvent"),r=e("./MediaFile"),a=e("./VideoClicks"),s=e("../../utils/utilityFunctions"),o=e("./parsers"),l=e("../../utils/xml");i.prototype.isSupported=function(){var e,t;for(e=0,t=this.mediaFiles.length;e<t;e+=1)if(this.mediaFiles[e].isSupported())return!0;return!1},t.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./MediaFile":20,"./TrackingEvent":21,"./VideoClicks":27,"./parsers":29}],20:[function(e,t){"use strict";function i(e){
if(!(this instanceof i))return new i(e);this.src=n.keyValue(e);for(var t=0;t<a.length;t++){var r=a[t];this[r]=e.attr(r)}}var n=e("../../utils/xml"),r=e("./vastUtil"),a=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];i.prototype.isSupported=function(){return r.isVPAID(this)?!!r.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||r.isFlashSupported()},t.exports=i},{"../../utils/xml":48,"./vastUtil":30}],21:[function(e,t){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);this.name=e.attr("event"),this.uri=r.keyValue(e),"progress"===this.name&&(this.offset=n.offset(e.attr("offset"),t))}var n=e("./parsers"),r=e("../../utils/xml");t.exports=i},{"../../utils/xml":48,"./parsers":29}],22:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);var t={WRAPPER_LIMIT:5};e=e||{},this.settings=c.extend({},e,t),this.errorURLMacros=[]}var r=e("./Ad"),a=e("./VASTError"),s=e("./VASTResponse"),o=e("./vastUtil"),l=e("../../utils/async"),u=e("../../utils/http").http,c=e("../../utils/utilityFunctions"),d=e("../../utils/xml"),h=e("../../utils/consoleLogger");n.prototype.getVASTResponse=function(e,t){function i(e,t){try{t(null,r._buildVASTResponse(e))}catch(a){t(a)}}function n(e,t){return e?c.isFunction(t)?void 0:new a("on VASTClient.getVASTResponse, missing callback function"):new a("on VASTClient.getVASTResponse, missing ad tag URL")}var r=this,s=n(e,t);if(s){if(c.isFunction(t))return t(s);throw s}l.waterfall([this._getVASTAd.bind(this,e),i],t)},n.prototype._getVASTAd=function(e,t){function i(e,t){var i=m._requestVASTXml.bind(m,e);l.waterfall([i,n],t)}function n(e,t){var i;try{i=d.toJXONTree(e),h.debug("built JXONTree from VAST response:",i),c.isArray(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],t(s(i),i)}catch(r){t(new a("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function s(e){var t=d.attr(e,"version");return e.ad?t&&3!=t&&2!=t?new a('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+t+'"',102):null:new a("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}function o(e,t,i){if(t.length>=m.WRAPPER_LIMIT)return i(new a("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+m.WRAPPER_LIMIT+")",302),t);l.waterfall([function(t){c.isString(e)?f(e,t):t(null,e)},u],function(e,n){return n&&t.push(n),e?i(e,t):n.wrapper?o(n.wrapper.VASTAdTagURI,t,i):i(null,t)})}function u(e,t){try{var n=new r(e);t(p(n),n)}catch(i){t(new a("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function p(e){var t=e.wrapper,i=e.inLine,n="on VASTClient.getVASTAd.validateAd, ";return i&&t?new a(n+"InLine and Wrapper both found on the same Ad",101):i||t?i&&!i.isSupported()?new a(n+"could not find MediaFile that is supported by this video player",403):t&&!t.VASTAdTagURI?new a(n+"missing 'VASTAdTagURI' in wrapper",101):null:new a(n+"nor wrapper nor inline elements found on the Ad",101)}function f(e,t){m._requestVASTXml(e,function(e,n){if(e)return t(e);try{var r=d.toJXONTree(n);t(s(r),r.ad)}catch(i){t(new a("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}var m=this;i(e,function(e,i){function n(e,i){e?(m._trackError(e,i),r.length>0?o(r.shift(),[],n):t(e,i)):t(null,i)}var r=i&&c.isArray(i.ads)?i.ads:null;if(e)return m._trackError(e,r),t(e,r);o(r.shift(),[],n)})},n.prototype._requestVASTXml=function(e,t){function n(e,i,n){if(e){var r=c.isDefined(n)?"on VASTClient.requestVastXML, HTTP request error with status '"+n+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return t(new a(r,301),null)}t(null,i)}try{c.isFunction(e)?e(n):(h.info("requesting adTagUrl: "+e),u.get(e,n,{withCredentials:!0}))}catch(i){t(i)}},n.prototype._buildVASTResponse=function(e){function t(e,t){t.forEach(function(t){e.addAd(t)})}function i(e){var t=e.trackingEvents.progress;if(!e.hasLinear())throw new a("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200);if(e.duration===undefined)throw new a("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101);t&&t.forEach(function(e){if(!c.isNumber(e.offset))throw new a("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)})}var n=new s;return t(n,e),i(n),n},n.prototype._trackError=function(e,t){function i(e){e.wrapper&&e.wrapper.error&&n.push(e.wrapper.error),e.inLine&&e.inLine.error&&n.push(e.inLine.error)}if(c.isArray(t)&&0!==t.length){var n=[];t.forEach(i),o.track(n,{ERRORCODE:e.code||900})}},t.exports=n},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/http":43,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],23:[function(e,t){"use strict";function i(e,t){this.message="VAST Error: "+(e||""),t&&(this.code=t)}i.prototype=new Error,i.prototype.name="VAST Error",t.exports=i},{}],24:[function(e,t){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.player=e}var n=e("./VASTResponse"),r=e("./VASTError"),a=e("./VASTTracker"),s=e("./vastUtil"),o=e("../../utils/async"),l=e("../../utils/dom"),u=e("../../utils/playerUtils"),c=e("../../utils/utilityFunctions"),d=e("../../utils/consoleLogger");i.prototype.playAd=function(e,t){var i=this;return t=t||c.noop,e instanceof n?(o.waterfall([function(t){t(null,e)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(e,n){e&&n&&i._trackError(e,n),t(e,n)}),this._adUnit={_src:null,type:"VAST",pauseAd:function(){i.player.pause(!0)},resumeAd:function(){i.player.play(!0)},isPaused:function(){return i.player.paused(!0)},getSrc:function(){return this._src}},this._adUnit):t(new r("On VASTIntegrator, missing required VASTResponse"))},i.prototype._selectAdSource=function(e,t){var i,n=l.getDimension(this.player.el()).width;if(e.mediaFiles.sort(function(e,t){return Math.abs(n-e.width)-Math.abs(n-t.width)}),i=this.player.selectSource(e.mediaFiles).source)return d.info("selected source: ",i),this._adUnit&&(this._adUnit._src=i),t(null,i,e);t(new r("Could not find Ad mediafile supported by this player",403),e)},i.prototype._createVASTTracker=function(e,t,i){try{i(null,e,new a(e.src,t),t)}catch(n){i(n,t)}},i.prototype._setupEvents=function(e,t,i,n){function r(){h.off("fullscreenchange",a),h.off("vast.adStart",l),h.off("pause",s),h.off("timeupdate",o),h.off("volumechange",c)}function a(){h.isFullscreen()?t.trackFullscreen():t.trackExitFullscreen()}function s(){Math.abs(h.duration()-h.currentTime())<2||(t.trackPause(),u.once(h,["play","vast.adEnd","vast.adsCancel"],function(e){"play"===e.type&&t.trackResume()}))}function o(){var e=1e3*h.currentTime();t.trackProgress(e)}function l(){t.trackImpressions(),t.trackCreativeView()}function c(){var e=h.muted();e?t.trackMute():d&&t.trackUnmute(),d=e}var d,h=this.player;return h.on("fullscreenchange",a),h.on("vast.adStart",l),h.on("pause",s),h.on("timeupdate",o),h.on("volumechange",c),u.once(h,["vast.adEnd","vast.adsCancel"],r),u.once(h,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(e){"vast.adEnd"===e.type&&t.trackComplete()}),n(null,e,i)},i.prototype._addSkipButton=function(e,t,i,n){function r(e,t){function i(){e.off("timeupdate",r),l.remove(n)}var n=a(e),r=s.bind(d,n,t,e);e.el().appendChild(n),e.on("timeupdate",r),u.once(e,["vast.adEnd","vast.adsCancel"],i)}function a(e){var i=window.document.createElement("div");return l.addClass(i,"vast-skip-button"),i.onclick=function(n){if(l.hasClass(i,"enabled")&&(t.trackSkip(),e.trigger("vast.adSkip")),window.Event.prototype.stopPropagation===undefined)return!1;n.stopPropagation()},i}function s(e,t,i){var n=Math.ceil(t-i.currentTime());n>0?e.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c "+c.toFixedDigits(n,2)+"...":l.hasClass(e,"enabled")||(l.addClass(e,"enabled"),e.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c")}var o,d=this;c.isNumber(i.skipoffset)&&(o=i.skipoffset/1e3,r(this.player,o)),n(null,e,t,i)},i.prototype._addClickThrough=function(e,t,i,n){function r(e,t,i){var n=window.document.createElement("a"),r=i.clickThrough;return l.addClass(n,"vast-blocker"),n.href=o(r,e),c.isString(r)&&(n.target="_blank"),n.onclick=function(i){if(e.paused())return e.play(),window.Event.prototype.stopPropagation!==undefined&&i.stopPropagation(),!1;e.pause(),t.trackClick()},n}function a(e,t,i){e.href=o(t.clickThrough,i)}function o(t,i){var n={ASSETURI:e.src,CONTENTPLAYHEAD:s.formatProgress(1e3*i.currentTime())};return t?s.parseURLMacro(t,n):"#"}function d(){h.off("timeupdate",f),l.remove(p)}var h=this.player,p=r(h,t,i),f=a.bind(this,p,i,h);return h.el().insertBefore(p,h.controlBar.el()),h.on("timeupdate",f),u.once(h,["vast.adEnd","vast.adsCancel"],d),n(null,e,t,i)},i.prototype._playSelectedAd=function(e,t,i){function n(){u.once(a,["playing","vast.adsCancel"],function(e){function n(e){"ended"===e.type&&a.duration()-a.currentTime()>3||(a.off("ended",n),a.off("vast.adsCancel",n),a.off("vast.adSkip",n),"ended"!==e.type&&"vast.adSkip"!==e.type||i(null,t))}"vast.adsCancel"!==e.type&&(d.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart..."),a.trigger("vast.adStart"),a.on("ended",n),a.on("vast.adsCancel",n),a.on("vast.adSkip",n))}),d.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()..."),a.play()}var a=this.player;a.preload("auto"),a.src(e),d.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad..."),u.once(a,["durationchange","error","vast.adsCancel"],function(e){"durationchange"===e.type?(d.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()"),n()):"error"===e.type&&i(new r("on VASTIntegrator, Player is unable to play the Ad",400),t)})},i.prototype._trackError=function(e,t){s.track(t.errorURLMacros,{ERRORCODE:e.code||900})},t.exports=i},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./VASTTracker":26,"./vastUtil":30}],25:[function(e,t){"use strict";function i(){if(!(this instanceof i))return new i;this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.clickThrough=undefined,this.adTitle="",this.duration=undefined,this.skipoffset=undefined}function n(e,t){t.forEach(function(t){e.push(t)})}var r=e("./Ad"),a=e("./VideoClicks"),s=e("./Linear"),o=e("./InLine"),l=e("./Wrapper"),u=e("../../utils/utilityFunctions"),c=e("../../utils/xml");window.InLine__A=o,i.prototype.addAd=function(e){var t,i;e instanceof r&&(t=e.inLine,i=e.wrapper,this.ads.push(e),t&&this._addInLine(t),i&&this._addWrapper(i))},i.prototype._addErrorTrackUrl=function(e){var t=e instanceof c.JXONTree?c.keyValue(e):e;t&&this.errorURLMacros.push(t)},i.prototype._addImpressions=function(e){u.isArray(e)&&n(this.impressions,e)},i.prototype._addClickThrough=function(e){u.isNotEmptyString(e)&&(this.clickThrough=e)},i.prototype._addClickTrackings=function(e){u.isArray(e)&&n(this.clickTrackings,e)},i.prototype._addCustomClicks=function(e){u.isArray(e)&&n(this.customClicks,e)},i.prototype._addTrackingEvents=function(e){var t=this.trackingEvents;e&&(e=u.isArray(e)?e:[e]).forEach(function(e){t[e.name]||(t[e.name]=[]),t[e.name].push(e)})},i.prototype._addTitle=function(e){u.isNotEmptyString(e)&&(this.adTitle=e)},i.prototype._addDuration=function(e){u.isNumber(e)&&(this.duration=e)},i.prototype._addVideoClicks=function(e){e instanceof a&&(this._addClickThrough(e.clickThrough),this._addClickTrackings(e.clickTrackings),this._addCustomClicks(e.customClicks))},i.prototype._addMediaFiles=function(e){u.isArray(e)&&n(this.mediaFiles,e)},i.prototype._addSkipoffset=function(e){e&&(this.skipoffset=e)},i.prototype._addAdParameters=function(e){e&&(this.adParameters=e)},i.prototype._addLinear=function(e){e instanceof s&&(this._addDuration(e.duration),this._addTrackingEvents(e.trackingEvents),this._addVideoClicks(e.videoClicks),this._addMediaFiles(e.mediaFiles),this._addSkipoffset(e.skipoffset),this._addAdParameters(e.adParameters),this._linearAdded=!0)},i.prototype._addInLine=function(e){var t=this;e instanceof o&&(this._addTitle(e.adTitle),this._addErrorTrackUrl(e.error),this._addImpressions(e.impressions),e.creatives.forEach(function(e){e.linear&&t._addLinear(e.linear)}))},i.prototype._addWrapper=function(e){var t=this;e instanceof l&&(this._addErrorTrackUrl(e.error),this._addImpressions(e.impressions),e.creatives.forEach(function(e){var i=e.linear;i&&(t._addVideoClicks(i.videoClicks),t.clickThrough=undefined,t._addTrackingEvents(i.trackingEvents))}))},i.prototype.hasLinear=function(){return this._linearAdded},t.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./InLine":18,"./Linear":19,"./VideoClicks":27,"./Wrapper":28}],26:[function(e,t){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);this.sanityCheck(e,t),this.initialize(e,t)}var n=e("./VASTError"),r=e("./VASTResponse"),a=e("./vastUtil"),s=e("../../utils/utilityFunctions");i.prototype.initialize=function(e,t){this.response=t,this.assetURI=e,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*t.duration)/100},midpoint:{tracked:!1,time:Math.round(50*t.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t.duration)/100}}},i.prototype.sanityCheck=function(e,t){if(!s.isString(e)||s.isEmptyString(e))throw new n("on VASTTracker constructor, missing required the URI of the ad asset being played");if(!(t instanceof r))throw new n("on VASTTracker constructor, missing required VAST response")},i.prototype.trackURLs=function(e,t){s.isArray(e)&&e.length>0&&(t=s.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:a.formatProgress(this.progress)},t||{}),a.track(e,t))},i.prototype.trackEvent=function(e,t){function i(e){var t;return e&&(t=[],e.forEach(function(e){t.push(e.uri)})),t}this.trackURLs(i(this.response.trackingEvents[e])),t&&(this.response.trackingEvents[e]=undefined)},i.prototype.trackProgress=function(e){function t(t,i){var n=3e3;return t>e&&Math.abs(i-t)>n}function i(e,t,i){h[e]&&i&&u.push({name:e,trackOnce:!!t})}function n(e){function t(e,t){var a=n[e];r(a,t)&&(a.tracked=!0,i(e,c,!0))}var n=l.quartiles,a=l.quartiles.firstQuartile,s=l.quartiles.midpoint,o=l.quartiles.thirdQuartile;a.tracked?s.tracked?o.tracked||t("thirdQuartile",e):t("midpoint",e):t("firstQuartile",e)}function r(e,t){var i=e.time;return t>=i&&t<=i+5e3}function a(e){if(s.isArray(h.progress)){var t=[];h.progress.forEach(function(i){i.offset<=e?l.trackURLs([i.uri]):t.push(i)}),h.progress=t}}function o(){u.forEach(function(e){l.trackEvent(e.name,e.trackOnce)})}var l=this,u=[],c=!0,d=!1,h=this.response.trackingEvents;s.isNumber(e)&&(i("start",c,e>0),i("rewind",d,t(this.progress,e)),n(e),a(e),o(),this.progress=e)},["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(e){i.prototype["track"+s.capitalize(e)]=function(){this.trackEvent(e)}}),["start","skip","close","closeLinear"].forEach(function(e){i.prototype["track"+s.capitalize(e)]=function(){this.trackEvent(e,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(e){i.prototype["track"+s.capitalize(e)]=function(){this.quartiles[e].tracked=!0,this.trackEvent(e,!0)}}),i.prototype.trackComplete=function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)},i.prototype.trackErrorWithCode=function(e){s.isNumber(e)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:e})},i.prototype.trackImpressions=function(){this.trackURLs(this.response.impressions)},i.prototype.trackCreativeView=function(){this.trackEvent("creativeView")},i.prototype.trackClick=function(){this.trackURLs(this.response.clickTrackings)},t.exports=i},{"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],27:[function(e,t){"use strict";function i(e){function t(e){var t=[];return e&&(e=n.isArray(e)?e:[e]).forEach(function(e){t.push(r.keyValue(e))}),t}if(!(this instanceof i))return new i(e);this.clickThrough=r.keyValue(e.clickThrough),this.clickTrackings=t(e.clickTracking),this.customClicks=t(e.customClick)}var n=e("../../utils/utilityFunctions"),r=e("../../utils/xml");t.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48}],28:[function(e,t){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.adSystem=s.keyValue(e.adSystem),this.impressions=n.parseImpressions(e.impression),this.VASTAdTagURI=s.keyValue(e.vASTAdTagURI),this.creatives=r.parseCreatives(e.creatives),this.error=s.keyValue(e.error),this.extensions=e.extensions,this.followAdditionalWrappers=!a.isDefined(s.attr(e,"followAdditionalWrappers"))||s.attr(e,"followAdditionalWrappers"),this.allowMultipleAds=s.attr(e,"allowMultipleAds"),this.fallbackOnNoAd=s.attr(e,"fallbackOnNoAd")}var n=e("./vastUtil"),r=e("./Creative"),a=e("../../utils/utilityFunctions"),s=e("../../utils/xml");t.exports=i},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],29:[function(e,t){"use strict";var i=e("../../utils/utilityFunctions"),n=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,r={duration:function(e){function t(e){return 60*parseInt(e,10)*60*1e3}function r(e){return 60*parseInt(e,10)*1e3}function a(e){return 1e3*parseInt(e,10)}var s,o;return i.isString(e)&&(s=e.match(n))&&(o=t(s[1])+r(s[2])+a(s[3])+parseInt(s[5]||0)),isNaN(o)?null:o},offset:function(e,t){function i(e){return/^\d+(\.\d+)?%$/g.test(e)}function n(e,t){return t?a(t,parseFloat(e.replace("%",""))):null}function a(e,t){return e*t/100}return i(e)?n(e,t):r.duration(e)}};t.exports=r},{"../../utils/utilityFunctions":47}],30:[function(e,t){"use strict";var i=e("../../utils/utilityFunctions"),n=e("../vpaid/VPAIDHTML5Tech"),r=e("../vpaid/VPAIDFlashTech"),a=e("VPAIDFLASHClient/js/VPAIDFLASHClient"),s={track:function(e,t){var i=s.parseURLMacros(e,t),n=[];return i.forEach(function(e){var t=new Image;t.src=e,n.push(t)}),n},parseURLMacros:function(e,t){var i=[];return(t=t||{}).CACHEBUSTING||(t.CACHEBUSTING=Math.round(1e10*Math.random())),e.forEach(function(e){i.push(s._parseURLMacro(e,t))}),i},parseURLMacro:function(e,t){return(t=t||{}).CACHEBUSTING||(t.CACHEBUSTING=Math.round(1e10*Math.random())),s._parseURLMacro(e,t)},_parseURLMacro:function(e,t){return t=t||{},i.forEach(t,function(t,i){e=e.replace(new RegExp("\\["+i+"\\]","gm"),t)}),e},parseDuration:function(e){function t(e){return 60*parseInt(e,10)*60*1e3}function n(e){return 60*parseInt(e,10)*1e3}function r(e){return 1e3*parseInt(e,10)}var a,s,o=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return i.isString(e)&&(a=e.match(o))&&(s=t(a[1])+n(a[2])+r(a[3])+parseInt(a[5]||0)),isNaN(s)?null:s},parseImpressions:function(e){return e?(e=i.isArray(e)?e:[e],i.transformArray(e,function(e){return i.isNotEmptyString(e.keyValue)?e.keyValue:undefined})):[]},formatProgress:function(e){var t,n,r,a;return t=e/36e5,t=Math.floor(t),n=e/6e4%60,n=Math.floor(n),r=e/1e3%60,r=Math.floor(r),a=e%1e3,i.toFixedDigits(t,2)+":"+i.toFixedDigits(n,2)+":"+i.toFixedDigits(r,2)+"."+i.toFixedDigits(a,3)},parseOffset:function(e,t){function i(e){return/^\d+(\.\d+)?%$/g.test(e)}function n(e,t){return t?r(t,parseFloat(e.replace("%",""))):null}function r(e,t){return e*t/100}return i(e)?n(e,t):s.parseDuration(e)},VPAID_techs:[r,n],isVPAID:function(e){return!!e&&"VPAID"===e.apiFramework},findSupportedVPAIDTech:function(e){var t,i,n;for(t=0,i=this.VPAID_techs.length;t<i;t+=1)if((n=this.VPAID_techs[t]).supports(e))return n;return null},isFlashSupported:function(){return a.isSupported()},runFlashSupportCheck:function(e){a.runFlashTest({data:e})}};t.exports=s},{"../../utils/utilityFunctions":47,"../vpaid/VPAIDFlashTech":32,"../vpaid/VPAIDHTML5Tech":33,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],31:[function(e,t){"use strict";function i(e,t){function a(e,t){if(!e||!i.checkVPAIDInterface(e))throw new n("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface");if(!r.isObject(t))throw new n("on VPAIDAdUnitWrapper, expected options hash  but got '"+t+"'");if(!("responseTimeout"in t&&r.isNumber(t.responseTimeout)))throw new n("on VPAIDAdUnitWrapper, expected responseTimeout in options")}if(!(this instanceof i))return new i(e,t);a(e,t),this.options=r.extend({},t),this._adUnit=e}var n=e("../vast/VASTError"),r=e("../../utils/utilityFunctions");i.checkVPAIDInterface=function(e){function t(e){return r.isFunction(e.subscribe)||r.isFunction(e.addEventListener)||r.isFunction(e.on)}function i(e){return r.isFunction(e.unsubscribe)||r.isFunction(e.removeEventListener)||r.isFunction(e.off)}for(var n=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],a=0,s=n.length;a<s;a++)if(!e||!r.isFunction(e[n[a]]))return!1;return t(e)&&i(e)},i.prototype.adUnitAsyncCall=function(){function e(e,t,i){if(!r.isString(e)||!r.isFunction(i[e]))throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");if(!r.isFunction(t))throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}function t(){return function(){i&&clearTimeout(i),o.apply(this,arguments)}}var i,a=r.arrayLikeObjToArray(arguments),s=a.shift(),o=a.pop();e(s,o,this._adUnit),a.push(t()),this._adUnit[s].apply(this._adUnit,a),i=setTimeout(function(){i=null,o(new n("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+s+"'")),o=r.noop},this.options.responseTimeout)},i.prototype.on=function(e,t){(this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on).call(this._adUnit,e,t)},i.prototype.off=function(e,t){(this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off).call(this._adUnit,e,t)},i.prototype.waitForEvent=function(e,t,i){function a(e,t){if(!r.isString(e))throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");if(!r.isFunction(t))throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}function s(){var e=r.arrayLikeObjToArray(arguments);o&&(clearTimeout(o),o=null),e.unshift(null),t.apply(i,e)}var o;a(e,t),i=i||null,this.on(e,s),o=setTimeout(function(){t(new n("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+e+"'")),o=null,t=r.noop},this.options.responseTimeout)},i.prototype.handshakeVersion=function(e,t){this.adUnitAsyncCall("handshakeVersion",e,t)},i.prototype.initAd=function(e,t,i,n,r,a){this.waitForEvent("AdLoaded",a),this._adUnit.initAd(e,t,i,n,r)},i.prototype.resizeAd=function(e,t,i,n){this.adUnitAsyncCall("resizeAd",e,t,i,n)},i.prototype.startAd=function(e){this.waitForEvent("AdStarted",e),this._adUnit.startAd()},i.prototype.stopAd=function(e){this.waitForEvent("AdStopped",e),this._adUnit.stopAd()},i.prototype.pauseAd=function(e){this.waitForEvent("AdPaused",e),this._adUnit.pauseAd()},i.prototype.resumeAd=function(e){this.waitForEvent("AdPlaying",e),this._adUnit.resumeAd()},i.prototype.expandAd=function(e){this.waitForEvent("AdExpandedChange",e),this._adUnit.expandAd()},i.prototype.collapseAd=function(e){this.waitForEvent("AdExpandedChange",e),this._adUnit.collapseAd()},i.prototype.skipAd=function(e){this.waitForEvent("AdSkipped",e),this._adUnit.skipAd()},["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(e){var t="get"+r.capitalize(e);i.prototype[t]=function(e){this.adUnitAsyncCall(t,e)}}),i.prototype.setAdVolume=function(e,t){this.adUnitAsyncCall("setAdVolume",e,t)},t.exports=i},{"../../utils/utilityFunctions":47,"../vast/VASTError":23}],32:[function(e,t){"use strict";function i(e,t){function n(e){if(!e||!s.isString(e.src))throw new r("on VPAIDFlashTech, invalid MediaFile")}if(!(this instanceof i))return new i(e);n(e),this.name="vpaid-flash",this.mediaFile=e,this.containerEl=null,this.vpaidFlashClient=null,this.settings=t}var n=e("../../utils/mimetypes"),r=e("../vast/VASTError"),a=e("VPAIDFLASHClient/js/VPAIDFLASHClient"),s=e("../../utils/utilityFunctions"),o=e("../../utils/dom"),l=e("../../utils/consoleLogger");i.VPAIDFLASHClient=a,i.supports=function(e){return n.flash.indexOf(e)>-1&&i.VPAIDFLASHClient.isSupported()},i.prototype.loadAdUnit=function(e,t,n){function a(e,t){if(!o.isDomElement(e))throw new r("on VPAIDFlashTech.loadAdUnit, invalid dom container element");if(!s.isFunction(t))throw new r("on VPAIDFlashTech.loadAdUnit, missing valid callback")}var u=this,c=this.settings&&this.settings.vpaidFlashLoaderPath?{data:this.settings.vpaidFlashLoaderPath}:undefined;a(e,n),this.containerEl=e,l.debug("<VPAIDFlashTech.loadAdUnit> loading VPAIDFLASHClient with opts:",c),this.vpaidFlashClient=new i.VPAIDFLASHClient(e,function(e){if(e)return n(e);l.info("<VPAIDFlashTech.loadAdUnit> calling VPAIDFLASHClient.loadAdUnit(); that.mediaFile:",u.mediaFile),u.vpaidFlashClient.loadAdUnit(u.mediaFile.src,n)},c)},i.prototype.unloadAdUnit=function(){if(this.vpaidFlashClient){try{this.vpaidFlashClient.destroy()}catch(e){l.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidFlashClient=null}this.containerEl&&(o.remove(this.containerEl),this.containerEl=null)},t.exports=i},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],33:[function(e,t){"use strict";function i(e){function t(e){if(!e||!s.isString(e.src))throw new r(i.INVALID_MEDIA_FILE)}if(!(this instanceof i))return new i(e);t(e),this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=e}var n=e("../../utils/mimetypes"),r=e("../vast/VASTError"),a=e("VPAIDHTML5Client/js/VPAIDHTML5Client"),s=e("../../utils/utilityFunctions"),o=e("../../utils/dom"),l=e("../../utils/consoleLogger");i.VPAIDHTML5Client=a,i.supports=function(e){return!s.isOldIE()&&n.html5.indexOf(e)>-1},i.prototype.loadAdUnit=function(e,t,n){function a(e,t,n){if(!o.isDomElement(e))throw new r(i.INVALID_DOM_CONTAINER_EL);if(!o.isDomElement(t)||"video"!==t.tagName.toLowerCase())throw new r(i.INVALID_DOM_CONTAINER_EL);if(!s.isFunction(n))throw new r(i.MISSING_CALLBACK)}a(e,t,n),this.containerEl=e,this.videoEl=t,this.vpaidHTMLClient=new i.VPAIDHTML5Client(e,t,{}),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,n)},i.prototype.unloadAdUnit=function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(e){l.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(o.remove(this.containerEl),this.containerEl=null)};var u="on VPAIDHTML5Tech";i.INVALID_MEDIA_FILE=u+", invalid MediaFile",i.INVALID_DOM_CONTAINER_EL=u+", invalid container HtmlElement",i.INVALID_DOM_VIDEO_EL=u+", invalid HTMLVideoElement",i.MISSING_CALLBACK=u+", missing valid callback",t.exports=i},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDHTML5Client/js/VPAIDHTML5Client":11}],34:[function(e,t){"use strict";function i(e,t){function n(){var t=document.createElement("div");return h.addClass(t,"VPAID-container"),e.el().insertBefore(t,e.controlBar.el()),t}if(!(this instanceof i))return new i(e);this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},this.player=e,this.containerEl=n(e),this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"},this.settings=t}function n(e,t,i){var n=e.el().querySelector(".vjs-tech"),a=h.getDimension(n),s=e.isFullscreen()?i.FULLSCREEN:i.NORMAL;t.resizeAd(a.width,a.height,s,r)}function r(e){e&&m.error("ERROR: "+e.message,e)}var a=e("../../utils/mimetypes"),s=e("../vast/VASTError"),o=e("../vast/VASTResponse"),l=e("../vast/VASTTracker"),u=e("../vast/vastUtil"),c=e("./VPAIDAdUnitWrapper"),d=e("../../utils/async"),h=e("../../utils/dom"),p=e("../../utils/playerUtils"),f=e("../../utils/utilityFunctions"),m=e("../../utils/consoleLogger");i.prototype.playAd=function(e,t){function i(e,i,n){e&&n&&a._trackError(n,e.code),l.trigger("vpaid.adEnd"),t(e,n)}function n(){l.trigger("vpaid.adEnd")}function r(){u&&u.unloadAdUnit(),h.removeClass(l.el(),"vjs-vpaid-ad")}if(!(e instanceof o))return t(new s("on VASTIntegrator.playAd, missing required VASTResponse"));var a=this,l=this.player;m.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var u=this._findSupportedTech(e,this.settings);(t=t||f.noop,this._adUnit=null,h.addClass(l.el(),"vjs-vpaid-ad"),l.on("vast.adsCancel",n),l.one("vpaid.adEnd",function(){l.off("vast.adsCancel",n),r()}),u)?(m.info("<VPAIDIntegrator.playAd> found tech: ",u),d.waterfall([function(t){t(null,u,e)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],i),this._adUnit={_paused:!0,type:"VPAID",pauseAd:function(){l.trigger("vpaid.pauseAd"),l.pause(!0)},resumeAd:function(){l.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return u.mediaFile}}):(m.debug("<VPAIDIntegrator.playAd> could not find suitable tech"),i(new s("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403),this._adUnit,e));return this._adUnit},i.prototype._findSupportedTech=function(e,t){if(!(e instanceof o))return null;var i,n,r,s,l=e.mediaFiles.filter(u.isVPAID),c=t&&t.preferredTech,d=[];for(i=0,n=l.length;i<n;i+=1)if(r=l[i],s=u.findSupportedVPAIDTech(r.type)){if(!!c&&(r.type===c||a[c]&&a[c].indexOf(r.type)>-1))return new s(r,t);d.push({mediaFile:r,tech:s})}if(d.length){var h=d[0];return new h.tech(h.mediaFile,t)}return null},i.prototype._createVPAIDAdUnitWrapper=function(e,t,i){return new c(e,{src:t,responseTimeout:i})},i.prototype._loadAdUnit=function(e,t,i){var n=this,r=this.player,a=r.el().querySelector(".vjs-tech"),s=this.settings.responseTimeout||this.options.responseTimeout;e.loadAdUnit(this.containerEl,a,function(a,o){if(a)return i(a,o,t);try{var l=n._createVPAIDAdUnitWrapper(o,e.mediaFile.src,s),u="vjs-"+e.name+"-ad";h.addClass(r.el(),u),r.one("vpaid.adEnd",function(){h.removeClass(r.el(),u)}),i(null,l,t)}catch(p){i(p,o,t)}})},i.prototype._playAdUnit=function(e,t,i){d.waterfall([function(i){i(null,e,t)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],i)},i.prototype._handshake=function(e,t,i){function n(e){var t=r(e);return t>=1&&t<=2}function r(e){var t=e.split(".");return parseInt(t[0],10)}e.handshakeVersion(this.options.VPAID_VERSION,function(r,a){return r?i(r,e,t):a&&n(a)?i(null,e,t):i(new s('on VPAIDIntegrator._handshake, unsupported version "'+a+'"'),e,t)})},i.prototype._initAd=function(e,t,i){var n=this.player.el().querySelector(".vjs-tech"),r=h.getDimension(n);e.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:t.adParameters||""},function(n){i(n,e,t)})},i.prototype._createVASTTracker=function(e,t){return new l(e,t)},i.prototype._setupEvents=function(e,t,i){function r(){p._adUnit&&p._adUnit.isPaused()&&(p._adUnit._paused=!1),d.trigger("play")}function a(){p._adUnit&&(p._adUnit._paused=!0),d.trigger("pause")}function s(){e.pauseAd(f.noop)}function o(){e.resumeAd(f.noop)}var l=e.options.src,c=this._createVASTTracker(l,t),d=this.player,p=this;e.on("AdSkipped",function(){d.trigger("vpaid.AdSkipped"),c.trackSkip()}),e.on("AdImpression",function(){d.trigger("vpaid.AdImpression"),c.trackImpressions()}),e.on("AdStarted",function(){d.trigger("vpaid.AdStarted"),c.trackCreativeView(),r()}),e.on("AdVideoStart",function(){d.trigger("vpaid.AdVideoStart"),c.trackStart(),r()}),e.on("AdPlaying",function(){d.trigger("vpaid.AdPlaying"),c.trackResume(),r()}),e.on("AdPaused",function(){d.trigger("vpaid.AdPaused"),c.trackPause(),a()}),e.on("AdVideoFirstQuartile",function(){d.trigger("vpaid.AdVideoFirstQuartile"),c.trackFirstQuartile()}),e.on("AdVideoMidpoint",function(){d.trigger("vpaid.AdVideoMidpoint"),c.trackMidpoint()}),e.on("AdVideoThirdQuartile",function(){d.trigger("vpaid.AdVideoThirdQuartile"),c.trackThirdQuartile()}),e.on("AdVideoComplete",function(){d.trigger("vpaid.AdVideoComplete"),c.trackComplete()}),e.on("AdClickThru",function(i){function n(t){var i={ASSETURI:e.options.src,CONTENTPLAYHEAD:0};return t?u.parseURLMacro(t,i):null}d.trigger("vpaid.AdClickThru");var r=i.url,a=i.playerHandles,s=f.isNotEmptyString(r)?r:n(t.clickThrough);c.trackClick(),a&&s&&window.open(s,"_blank")}),e.on("AdUserAcceptInvitation",function(){d.trigger("vpaid.AdUserAcceptInvitation"),c.trackAcceptInvitation(),c.trackAcceptInvitationLinear()}),
e.on("AdUserClose",function(){d.trigger("vpaid.AdUserClose"),c.trackClose(),c.trackCloseLinear()}),e.on("AdUserMinimize",function(){d.trigger("vpaid.AdUserMinimize"),c.trackCollapse()}),e.on("AdError",function(){d.trigger("vpaid.AdError"),c.trackErrorWithCode(901)}),e.on("AdVolumeChange",function(){d.trigger("vpaid.AdVolumeChange");var t=d.volume();e.getAdVolume(function(e,i){t!==i&&(0===i&&t>0&&c.trackMute(),i>0&&0===t&&c.trackUnmute(),d.volume(i))})});var m=n.bind(this,d,e,this.VIEW_MODE),g=f.throttle(m,100),v=this.settings.autoResize;v&&(h.addEventListener(window,"resize",g),h.addEventListener(window,"orientationchange",g)),d.on("vast.resize",m),d.on("vpaid.pauseAd",s),d.on("vpaid.resumeAd",o),d.one("vpaid.adEnd",function(){d.off("vast.resize",m),d.off("vpaid.pauseAd",s),d.off("vpaid.resumeAd",o),v&&(h.removeEventListener(window,"resize",g),h.removeEventListener(window,"orientationchange",g))}),i(null,e,t)},i.prototype._addSkipButton=function(e,t,i){function n(){l.trigger("vpaid.AdSkippableStateChange"),e.getAdSkippableState(function(e,t){t?o||r(l):a(l)})}function r(e){o=s(e),e.el().appendChild(o)}function a(){h.remove(o),o=null}function s(){var t=window.document.createElement("div");return h.addClass(t,"vast-skip-button"),h.addClass(t,"enabled"),t.innerHTML="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c",t.onclick=function(t){if(e.skipAd(f.noop),window.Event.prototype.stopPropagation===undefined)return!1;t.stopPropagation()},t}var o,l=this.player;e.on("AdSkippableStateChange",n),p.once(l,["vast.adEnd","vast.adsCancel"],a),i(null,e,t)},i.prototype._linkPlayerControls=function(e,t,i){function a(e,t){function i(){var i=e.muted()?0:e.volume();t.setAdVolume(i,r)}function n(){e.trigger("vpaid.AdVolumeChange");var i=e.volume();t.getAdVolume(function(t,n){t?r(t):i!==n&&e.volume(n)})}e.on("volumechange",i),t.on("AdVolumeChange",n),e.one("vpaid.adEnd",function(){e.off("volumechange",i)})}function s(e,t,i){var r=n.bind(o,e,t,i);e.on("fullscreenchange",r),e.one("vpaid.adEnd",function(){e.off("fullscreenchange",r)})}var o=this;a(this.player,e),s(this.player,e,this.VIEW_MODE),i(null,e,t)},i.prototype._startAd=function(e,t,i){var n=this.player;e.startAd(function(r){r||n.trigger("vast.adStart"),i(r,e,t)})},i.prototype._finishPlaying=function(e,t,i){function n(n){i(n,e,t)}var r=this.player;e.on("AdStopped",function(){r.trigger("vpaid.AdStopped"),n(null)}),e.on("AdError",function(e){var t=e?e.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";n(new s(t))})},i.prototype._trackError=function(e,t){u.track(e.errorURLMacros,{ERRORCODE:t||901})},t.exports=i},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"../vast/VASTResponse":25,"../vast/VASTTracker":26,"../vast/vastUtil":30,"./VPAIDAdUnitWrapper":31}],35:[function(e,t){"use strict";var i=e("../../utils/dom"),n=document.createElement("div");n.className="vjs-ads-label vjs-control vjs-label-hidden",n.innerHTML="Advertisement";var r=function(e){return{init:function(t,r){r.el=n,e.call(this,t,r),setTimeout(function(){var e=t.controlBar&&(t.controlBar.getChild("timerControls")||t.controlBar.getChild("currentTimeDisplay"));e&&t.controlBar.el().insertBefore(n,e.el()),i.removeClass(n,"vjs-label-hidden")},0)},el:function(){return n}}};t.exports=r},{"../../utils/dom":42}],36:[function(e){"use strict";var t=videojs.getComponent("Component"),i=e("./ads-label")(t);videojs.registerComponent("AdsLabel",videojs.extend(t,i))},{"./ads-label":35}],37:[function(e,t){"use strict";var i=document.createElement("div"),n=function(e){return{init:function(t,n){n.el=i,i.className="vjs-black-poster",e.call(this,t,n);var r=t.getChild("posterImage");setTimeout(function(){r&&t&&t.el()&&t.el().insertBefore(i,r.el())},0)},el:function(){return i}}};t.exports=n},{}],38:[function(e){"use strict";var t=videojs.getComponent("Component"),i=e("./black-poster")(t);videojs.registerComponent("BlackPoster",videojs.extend(t,i))},{"./black-poster":37}],39:[function(e,t){"use strict";var i=e("../ads/vast/VASTClient"),n=e("../ads/vast/VASTError"),r=e("../ads/vast/vastUtil"),a=e("../ads/vast/VASTIntegrator"),s=e("../ads/vpaid/VPAIDIntegrator"),o=e("../utils/async"),l=e("../utils/dom"),u=e("../utils/playerUtils"),c=e("../utils/utilityFunctions"),d=e("../utils/consoleLogger");t.exports=function(e){function t(){function e(){_.vast&&_.vast.adUnit&&(_.vast.adUnit=null)}function t(){i(),y&&(u.restorePlayerSnapshot(_,y),y=null)}function i(){u.once(_,["playing","vast.reset","vast.firstPlay"],function(e){"playing"===e.type&&(_.trigger("vast.contentStart"),u.once(_,["ended","vast.reset","vast.firstPlay"],function(e){"ended"===e.type&&_.trigger("vast.contentEnd")}))})}function r(e){if(k.adsEnabled)return e(null);e(new n("Ads are not enabled"))}function a(e){s()?(y=u.getPlayerSnapshot(_),_.pause(),h(),_.paused()?e(null):u.once(_,["playing"],function(){_.pause(),e(null)})):e(new n("video content has been playing before preroll ad"))}function s(){return!c.isIPhone()||_.currentTime()<=k.iosPrerollCancelTimeout}function d(e){function t(){i&&(clearTimeout(i),i=null)}var i;T=!1,i=setTimeout(function(){g(new n("timeout while waiting for the video to start playing",402))},k.adCancelTimeout),u.once(_,["vast.adStart","vast.adsCancel"],t),e(null)}function h(){l.addClass(_.el(),"vjs-vast-ad-loading"),u.once(_,["vast.adStart","vast.adsCancel"],f)}function f(){setTimeout(function(){l.removeClass(_.el(),"vjs-vast-ad-loading")},100)}u.removeNativePoster(_),u.once(_,["vast.adsCancel","vast.adEnd"],function(){e(),t()}),o.waterfall([r,a,d,p],function(e,t){e?g(e,t):_.trigger("vast.adEnd")})}function h(){_.trigger("vast.adsCancel"),T=!0}function p(e){o.waterfall([f,m],e)}function f(e){b.getVASTResponse(k.adTagUrl?k.adTagUrl():k.adTagXML,e)}function m(e,t){function i(){l||_.controlBar.getChild("AdsLabel")||_.controlBar.addChild("AdsLabel")}function n(){_.controlBar.removeChild("AdsLabel"),l=!0}function r(){function e(){_.duration()-r>n&&(_.pause(!0),_.play(!0),_.currentTime(r))}function t(){var e=_.currentTime();Math.abs(e-r)>n?((a+=1)>=2&&_.pause(!0),_.currentTime(r)):r=e}function i(){_.off("timeupdate",t),_.off("ended",e)}var n=3,r=0,a=0;_.on("timeupdate",t),_.on("ended",e),u.once(_,["vast.adEnd","vast.adsCancel","vast.adError"],i)}if(!T){var o=v(e)?new s(_,k):new a(_),l=!1;u.once(_,["vast.adStart","vast.adsCancel"],function(e){"vast.adStart"===e.type&&i()}),u.once(_,["vast.adEnd","vast.adsCancel"],n),c.isIDevice()&&r(),_.vast.vastResponse=e,d.debug("calling adIntegrator.playAd() with vastResponse:",e),_.vast.adUnit=o.playAd(e,t)}}function g(e,t){_.trigger({type:"vast.adError",error:e}),h(),d.error("AD ERROR:",e.message,e,t)}function v(e){var t,i,n=e.mediaFiles;for(t=0,i=n.length;t<i;t++)if(r.isVPAID(n[t]))return!0;return!1}var y,_=this,b=new i,T=!1,w={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:!1,adsEnabled:!0,autoResize:!0,vpaidFlashLoaderPath:"/VPAIDFlash.swf",verbosity:0},k=c.extend({},w,e||{});return c.isUndefined(k.adTagUrl)&&c.isDefined(k.url)&&(k.adTagUrl=k.url),c.isString(k.adTagUrl)&&(k.adTagUrl=c.echoFn(k.adTagUrl)),c.isDefined(k.adTagXML)&&!c.isFunction(k.adTagXML)?g(new n("on VideoJS VAST plugin, the passed adTagXML option does not contain a function")):c.isDefined(k.adTagUrl)||c.isFunction(k.adTagXML)?(d.setVerbosity(k.verbosity),r.runFlashSupportCheck(k.vpaidFlashLoaderPath),u.prepareForAds(_),k.playAdAlways&&_.on("vast.contentEnd",function(){setTimeout(function(){_.trigger("vast.reset")},0)}),_.on("vast.firstPlay",t),_.on("vast.reset",function(){y=null,h()}),_.vast={isEnabled:function(){return k.adsEnabled},enable:function(){k.adsEnabled=!0},disable:function(){k.adsEnabled=!1}},_.vast):g(new n("on VideoJS VAST plugin, missing adTagUrl on options object"))}},{"../ads/vast/VASTClient":22,"../ads/vast/VASTError":23,"../ads/vast/VASTIntegrator":24,"../ads/vast/vastUtil":30,"../ads/vpaid/VPAIDIntegrator":34,"../utils/async":40,"../utils/consoleLogger":41,"../utils/dom":42,"../utils/playerUtils":45,"../utils/utilityFunctions":47}],40:[function(e,t){var i=e("./utilityFunctions"),n={setImmediate:function(e){setTimeout(e,0)},iterator:function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},waterfall:function(e,t){if(t=t||function(){},!i.isArray(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var a=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),s=e.next();s?r.push(a(s)):r.push(t),n.setImmediate(function(){e.apply(null,r)})}}};a(n.iterator(e))()},when:function(e,t){if(!i.isFunction(t))throw new Error("async.when error: missing callback argument");var n=i.isFunction(e)?e:function(){return!!e};return function(){var e=i.arrayLikeObjToArray(arguments),r=e.pop();return n.apply(null,e)?t.apply(this,arguments):(e.unshift(null),r.apply(null,e))}}};t.exports=n},{"./utilityFunctions":47}],41:[function(e,t){"use strict";function i(e){u=e}function n(e,t){t.length>0&&"string"==typeof t[0]&&(t[0]=c+t[0]),e.apply?e.apply(console,Array.prototype.slice.call(t)):e(Array.prototype.slice.call(t))}function r(){u<4||("undefined"==typeof console.debug?n(console.log,arguments):n(console.debug,arguments))}function a(){u<3||n(console.log,arguments)}function s(){u<2||n(console.info,arguments)}function o(){u<1||n(console.warn,arguments)}function l(){n(console.error,arguments)}var u=0,c="[videojs-vast-vpaid] ",d={setVerbosity:i,debug:r,log:a,info:s,warn:o,error:l};"undefined"!=typeof console&&console.log||(d.debug=function(){},d.log=function(){},d.info=function(){},d.warn=function(){},d.error=function(){}),t.exports=d},{}],42:[function(e,t){"use strict";var i=e("./utilityFunctions"),n={isVisible:function(e){return"hidden"!==window.getComputedStyle(e).visibility},isHidden:function(e){return"none"===window.getComputedStyle(e).display},isShown:function(e){return!n.isHidden(e)},hide:function(e){e.__prev_style_display_=e.style.display,e.style.display="none"},show:function(e){n.isHidden(e)&&(e.style.display=e.__prev_style_display_),e.__prev_style_display_=undefined},hasClass:function(e,t){var n,r,a;if(i.isNotEmptyString(t)){if(e.classList)return e.classList.contains(t);for(t=t||"",r=0,a=(n=i.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[]).length;r<a;r+=1)if(n[r]===t)return!0}return!1},addClass:function(e,t){var n;if(i.isNotEmptyString(t)){if(e.classList)return e.classList.add(t);n=i.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[],i.isString(t)&&i.isNotEmptyString(t.replace(/\s+/,""))&&(n.push(t),e.setAttribute("class",n.join(" ")))}},removeClass:function(e,t){var n;if(i.isNotEmptyString(t)){if(e.classList)return e.classList.remove(t);n=i.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];var r,a,s=[];if(i.isString(t)&&i.isNotEmptyString(t.replace(/\s+/,""))){for(r=0,a=n.length;r<a;r+=1)t!==n[r]&&s.push(n[r]);e.setAttribute("class",s.join(" "))}}},addEventListener:function(e,t,r){i.isArray(e)?i.forEach(e,function(e){n.addEventListener(e,t,r)}):i.isArray(t)?i.forEach(t,function(t){n.addEventListener(e,t,r)}):e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},removeEventListener:function(e,t,r){i.isArray(e)?i.forEach(e,function(e){n.removeEventListener(e,t,r)}):i.isArray(t)?i.forEach(t,function(t){n.removeEventListener(e,t,r)}):e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},dispatchEvent:function(e,t){e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t)},isDescendant:function(e,t){for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},getTextContent:function(e){return e.textContent||e.text},prependChild:function(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.insertBefore(t,e.firstChild)},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isDomElement:function(e){return e instanceof Element},click:function(e,t){n.addEventListener(e,"click",t)},once:function(e,t,i){function r(){i.apply(null,arguments),n.removeEventListener(e,t,r)}n.addEventListener(e,t,r)},getDimension:function(e){var t;return!i.isOldIE()&&e.getBoundingClientRect?{width:(t=e.getBoundingClientRect()).width,height:t.height}:{width:e.offsetWidth,height:e.offsetHeight}}};t.exports=n},{"./utilityFunctions":47}],43:[function(e,t){"use strict";function i(e){this.message="HttpRequest Error: "+(e||"")}function n(e){if(!s.isFunction(e))throw new i("Missing XMLHttpRequest factory method");this.createXhr=e}function r(){var e=new XMLHttpRequest;return"withCredentials"in e||(e=new XDomainRequest),e}var a=e("./urlUtils"),s=e("./utilityFunctions");i.prototype=new Error,i.prototype.name="HttpRequest Error",n.prototype.run=function(e,t,n,r){function o(e,t,n){if(!s.isString(e)||s.isEmptyString(e))throw new i("Invalid url '"+e+"'");if(!s.isFunction(t))throw new i("Invalid handler '"+t+"' for the http request");if(s.isDefined(n)&&!s.isObject(n))throw new i("Invalid options map '"+n+"'")}function l(e,t){s.forEach(t,function(t,i){s.isDefined(t)&&e.setRequestHeader(i,t)})}function u(){n(-1,null,null,"")}var c,d;o(t,n,r);var h=this.createXhr();r=r||{},c=s.isNumber(r.timeout)?r.timeout:0,h.open(e,a.urlParts(t).href,!0),r.headers&&l(h,r.headers),r.withCredentials&&(h.withCredentials=!0),h.onload=function(){var e,t,i;h.getAllResponseHeaders||(h.getAllResponseHeaders=function(){return null}),h.status||(h.status=200),s.isDefined(d)&&(clearTimeout(d),d=undefined),e=h.statusText||"",t="response"in h?h.response:h.responseText,i=1223===h.status?204:h.status,n(i,t,h.getAllResponseHeaders(),e)},h.onerror=u,h.onabort=u,h.send(),c>0&&(d=setTimeout(function(){h&&h.abort()},c))},n.prototype.get=function(e,t,n){function r(e,n,r,s){a(e)?t(null,n,e,r,s):t(new i(s),n,e,r,s)}function a(e){return 200<=e&&e<300}this.run("GET",e,r,n)};var o=new n(r);t.exports={http:o,HttpRequest:n,HttpRequestError:i,createXhr:r}},{"./urlUtils":46,"./utilityFunctions":47}],44:[function(e,t){"use strict";t.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],flash:["application/x-shockwave-flash"]}},{}],45:[function(e,t){"use strict";var i=e("./dom"),n=e("./utilityFunctions"),r={getPlayerSnapshot:function(e){function t(e){var t=e.remoteTextTracks?e.remoteTextTracks():[];t&&n.isArray(t.tracks_)&&(t=t.tracks_),n.isArray(t)||(t=[]);var i=[];return t.forEach(function(e){i.push({track:e,mode:e.mode}),e.mode="disabled"}),i}var i=e.el().querySelector(".vjs-tech"),r={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),type:e.currentType(),playing:!e.paused(),suppressedTracks:t(e)};return i&&(r.nativePoster=i.poster,r.style=i.getAttribute("style")),r},restorePlayerSnapshot:function(e,t){function i(){var t=setTimeout(function(){e.trigger("canplay")},1e3);e.one("canplay",function(){clearTimeout(t)})}function n(e,t){return e.src()?e.src()!==t.src:e.currentSrc()!==t.src}function a(){t.suppressedTracks.forEach(function(e){e.track.mode=e.mode})}function s(){if(!r.isReadyToResume(e)&&l--)setTimeout(s,50);else try{e.currentTime()!==t.currentTime?(t.playing&&e.one("seeked",function(){e.play()}),e.currentTime(t.currentTime)):t.playing&&e.play()}catch(o){videojs.log.warn("Failed to resume the content after an advertisement",o)}}var o=e.el().querySelector(".vjs-tech"),l=20;t.nativePoster&&(o.poster=t.nativePoster),"style"in t&&o.setAttribute("style",t.style||""),n(e,t)?(e.one("contentloadedmetadata",a),e.one("canplay",s),i(),e.src({src:t.src,type:t.type}),e.load()):(a(),t.playing&&e.play())},isReadyToResume:function(e){return e.readyState()>1||(e.seekable()===undefined||e.seekable().length>0)},prepareForAds:function(e){function t(){var t=e.play;e.play=function(i){function a(){n.isIPhone()||(f=l(),e.muted(!0)),t.apply(u,arguments)}function s(i){r()&&!i?e.vast.adUnit.resumeAd():t.apply(u,arguments)}var u=this;return o()?a():s(i),this};var i=e.pause;e.pause=function(t){return r()&&!t?e.vast.adUnit.pauseAd():i.apply(this,arguments),this};var a=e.paused;e.paused=function(t){return r()&&!t?e.vast.adUnit.isPaused():a.apply(this,arguments)}}function r(){return e.vast&&e.vast.adUnit}function a(){o()&&(g=!1,e.trigger("vast.firstPlay"))}function s(){g=!0,m.show(),u()}function o(){return g}function l(){return{muted:e.muted(),volume:e.volume()}}function u(){f&&(e.currentTime(0),c(f),f=null)}function c(t){n.isObject(t)&&(e.volume(t.volume),e.muted(t.muted))}function d(){i.hasClass(m.el(),"vjs-hidden")||m.hide()}function h(){i.addClass(e.el(),"vjs-ad-playing")}function p(){i.removeClass(e.el(),"vjs-ad-playing")}var f,m=e.addChild("blackPoster"),g=!0;t(),e.on("play",a),e.on("vast.reset",s),e.on("vast.firstPlay",u),e.on("error",d),e.on("vast.adStart",d),e.on("vast.adsCancel",d),e.on("vast.adError",d),e.on("vast.adStart",h),e.on("vast.adEnd",p),e.on("vast.adsCancel",p)},removeNativePoster:function(e){var t=e.el().querySelector(".vjs-tech");t&&t.removeAttribute("poster")},once:function(e,t,i){function n(){i.apply(null,arguments),t.forEach(function(t){e.off(t,n)})}t.forEach(function(t){e.on(t,n)})}};t.exports=r},{"./dom":42,"./utilityFunctions":47}],46:[function(e,t){"use strict";function i(e){var t=e;return o&&(s.setAttribute("href",t),t=s.href),s.setAttribute("href",t),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:a.isNotEmptyString(s.port)?s.port:80,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}function n(e,t){var i,n;return t=a.isFunction(t)?t:function(){return!0},i=(e=e.trim().replace(/^\?/,"")).split("&"),n={},a.forEach(i,function(e){var i,r,a;""!==e&&(r=(i=e.split("="))[0],a=i[1],t(r,a)&&(n[r]=a))}),n}function r(e){var t=[];return a.forEach(e,function(e,i){t.push(i+"="+e)}),t.join("&")}var a=e("./utilityFunctions"),s=document.createElement("a"),o=document.documentMode;t.exports={urlParts:i,queryStringToObj:n,objToQueryString:r}},{"./utilityFunctions":47}],47:[function(e,t){"use strict";function i(){}function n(e){return null===e}function r(e){return e!==undefined}function a(e){return e===undefined}function s(e){return"object"==typeof e}function o(e){return"function"==typeof e}function l(e){return"number"==typeof e}function u(e){return F.isObject(e)&&e.window===e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){if(null===e||F.isWindow(e)||F.isFunction(e)||F.isUndefined(e))return!1;var t=e.length;return!(e.nodeType!==M||!t)||(F.isString(e)||F.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e)}function h(e){return"string"==typeof e}function p(e){return F.isString(e)&&0===e.length}function f(e){return F.isString(e)&&0!==e.length}function m(e){return Array.prototype.slice.call(e)}function g(e,t,i){var n,r;if(e)if(o(e))for(n in e)"prototype"===n||"length"===n||"name"===n||e.hasOwnProperty&&!e.hasOwnProperty(n)||t.call(i,e[n],n,e);else if(c(e)){var a="object"!=typeof e;for(n=0,r=e.length;n<r;n++)(a||n in e)&&t.call(i,e[n],n,e)}else if(e.forEach&&e.forEach!==g)e.forEach(t,i,e);else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e);return e}function v(e,t){return t=t||"_",e.replace(R,function(e,i){return(i?t:"")+e.toLowerCase()})}function y(e){return!!F.isString(e)&&N.test(e.trim())}function _(e){var t,i,r;for(i=1;i<arguments.length;i++)for(r in t=arguments[i])t.hasOwnProperty(r)&&(s(e[r])&&!n(e[r])&&s(t[r])?e[r]=_({},e[r],t[r]):e[r]=t[r]);return e}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function T(e){return e.charAt(0).toLowerCase()+e.slice(1)}function w(e,t){var i=[];return e.forEach(function(e,n){var r=t(e,n);F.isDefined(r)&&i.push(r)}),i}function k(e,t){var i=e+"";if(t=F.isNumber(t)?t:0,e=F.isNumber(e)?e:parseInt(e,10),F.isNumber(e)&&!isNaN(e)){for(i=e+"";i.length<t;)i="0"+i;return i}return NaN+""}function S(e,t){var i=(new Date).getTime()-(t+1);return function(){var n=(new Date).getTime();n-i>=t&&(i=n,e.apply(this,arguments))}}function C(e,t){var i;return function(){i&&clearTimeout(i),i=setTimeout(function(){e.apply(this,arguments),i=undefined},t)}}function E(e,t,i){for(var n=t(e),r=0;r<n.length;r++){if(i(n[r]))return n[r];var a=E(n[r],t,i);if(a)return a}}function x(e){return function(){return e}}function A(e){return F.isNumber(e)&&(e+=""),!!F.isString(e)&&U.test(e.trim())}function P(){var e=F.getInternetExplorerVersion(navigator);return-1!==e&&e<10}function I(e){var t=-1;if("Microsoft Internet Explorer"==e.appName){var i=e.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i);null!==n&&(t=parseFloat(n[1]))}return t}function L(){return/iP(hone|ad)/.test(F._UA)}function D(){return/iP(hone|ad|od)|Android|Windows Phone/.test(F._UA)}function O(){return/iP(hone|od)/.test(F._UA)}function j(){return/Android/.test(F._UA)}var M=1,R=/[A-Z]/g,N=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,U=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,F={_UA:navigator.userAgent,noop:i,isNull:n,isDefined:r,isUndefined:a,isObject:s,isFunction:o,isNumber:l,isWindow:u,isArray:c,isArrayLike:d,isString:h,isEmptyString:p,isNotEmptyString:f,arrayLikeObjToArray:m,forEach:g,snake_case:v,isValidEmail:y,extend:_,capitalize:b,decapitalize:T,transformArray:w,toFixedDigits:k,throttle:S,debounce:C,treeSearch:E,echoFn:x,isISO8601:A,isOldIE:P,getInternetExplorerVersion:I,isIDevice:L,isMobile:D,isIPhone:O,isAndroid:j};t.exports=F},{}],48:[function(e,t){"use strict";var i=e("./utilityFunctions"),n={strToXMLDoc:function(e){function t(e){var t,r=new DOMParser;try{if(n(t=r.parseFromString(e,"application/xml"))||i.isEmptyString(e))throw new Error}catch(a){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+e+"'")}return t}function n(e){try{var t=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===t?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(t,"parsererror").length>0}catch(n){}}if("undefined"==typeof window.DOMParser){var r=new ActiveXObject("Microsoft.XMLDOM");return r.async=!1,r.loadXML(e),r}return t(e)},parseText:function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):i.isISO8601(e)?new Date(e):e.trim()},JXONTree:function(e){var t=n.parseText;if(e.documentElement)return new n.JXONTree(e.documentElement);if(e.hasChildNodes()){for(var r,a,s,o="",l=0;l<e.childNodes.length;l++)3==((r=e.childNodes.item(l)).nodeType-1|1)?o+=3===r.nodeType?r.nodeValue.trim():r.nodeValue:1!==r.nodeType||r.prefix||(a=i.decapitalize(r.nodeName),s=new n.JXONTree(r),this.hasOwnProperty(a)?(this[a].constructor!==Array&&(this[a]=[this[a]]),this[a].push(s)):this[a]=s);o&&(this.keyValue=t(o))}if("undefined"==typeof e.hasAttributes?e.attributes.length>0:e.hasAttributes())for(var u,c=0;c<e.attributes.length;c++)u=e.attributes.item(c),this["@"+i.decapitalize(u.name)]=t(u.value.trim())}};n.JXONTree.prototype.attr=function(e){return this["@"+i.decapitalize(e)]},n.toJXONTree=function(e){var t=n.strToXMLDoc(e);return new n.JXONTree(t)},n.keyValue=function(e){return e?e.keyValue:undefined},n.attr=function(e,t){return e?e["@"+i.decapitalize(t)]:undefined},n.encode=function(e){return i.isString(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):undefined},n.decode=function(e){return i.isString(e)?e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"):undefined},t.exports=n},{"./utilityFunctions":47}],49:[function(e){"use strict";e("./plugin/components/ads-label_5"),e("./plugin/components/black-poster_5");var t=e("./plugin/videojs.vast.vpaid");videojs.plugin("vastClient",t)},{"./plugin/components/ads-label_5":36,"./plugin/components/black-poster_5":38,"./plugin/videojs.vast.vpaid":39}]},{},[49]),$(function(){$(".liveprogrammes,.livetitle").refreshLivePopUp()}),function(e){e.fn.refreshLivePopUp=function(){this.each(function(){function t(i,n,r){var a=e("."+i);n=a.data("url"),r=parseInt(a.data("nextquery"));i&&n&&r&&e.ajax({url:n,method:"GET",success:function(e){a.before(e),a.remove(),window.setTimeout(function(){t(i,n,r)},r)}})}var i=e(this),n=i.hasClass("livetitle")?"livetitle":"liveprogrammes",r=i.data("url"),a=i.data("nextquery");window.setTimeout(function(){t(n,r,a)},a)})}}(jQuery),jQuery.fn.cleanWS=function(){this.each(function(){for(var e=this,t=e.parentNode,i=e.previousSibling,n=e.nextSibling;i;){var r=i.previousSibling;if(3==i.nodeType&&i.nodeValue)for(var a=i.nodeValue.length-1;a>-1&&(9==(o=i.nodeValue.charCodeAt(a))||10==o||32==o);a--)i.nodeValue=i.nodeValue.slice(0,a);8==i.nodeType&&t.removeChild(i),i=r}for(;n;){var s=n.nextSibling;if(3==n.nodeType&&n.nodeValue)for(;n.nodeValue.length;){var o;if(9!=(o=n.nodeValue.charCodeAt(0))&&10!=o&&32!=o)break;n.nodeValue=n.nodeValue.slice(1)}8==n.nodeType&&t.removeChild(n),n=s}})},function(e){e.fn.audionota=function(){this.each(function(){var t=e(this),i=e('<div class="audioplayer"></div>').prependTo(t),n=t.find(".title").text(),r={},a="",s=t.attr("id")?t.attr("id"):"a"+(new Date).getTime(),o=t.find(".media a").eq(0),l=localStorage.getItem("mediaQuality")||"low";t.find(".media a").each(function(t){var i=e(this);a+=t>0?","+i.attr("rel"):i.attr("rel"),"high"===l&&i.data("q2")?r[i.attr("rel")]=i.data("q2"):r[i.attr("rel")]=i.attr("href")});t.data("width")&&t.data("width"),!!t.data("autoplay")&&t.data("autoplay"),!!t.data("mute")&&t.data("mute");var u,c=t.data("swf")?t.data("swf"):"/assets";t.data("volume")?(u=t.data("volume"),null!=localStorage.getItem("volume")&&(console.log(localStorage.getItem("volume")),u=localStorage.getItem("volume"))):u=.5;var d='<div id="container_'+s+'" class="nota_audio"><div class="nota_type-single"><div id="notaplayer_'+s+'" class="nota_jplayer"></div><div class="nota_gui"><div class="nota_interface"><div class="nota_title-container"><div class="nota_title">'+n+'</div></div><div class="nota_progress-container"><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a>';o.data("q1")&&o.data("q2")&&(d+='<div class="nota_quality">\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e: <a href="javascript:;" onclick="setQuality(\''+s+"', this, '"+o.data("q1")+"', 'low')\" class=\"nota_quality_item "+("low"===l?"active":"")+'" tabindex="1">\u043e\u0431\u044b\u0447\u043d\u043e\u0435</a> / <a href="javascript:;" onclick="setQuality(\''+s+"', this, '"+o.data("q2")+"', 'high')\" class=\"nota_quality_item "+("high"===l?"active":"")+'" tabindex="1">\u0432\u044b\u0441\u043e\u043a\u043e\u0435</a></div>'),e(d+='<div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div></div></div></div><div class="errorlayer"><div class="errorstatus"></div></div><div class="waitinglayer"><div class="waitingstatus">\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0430\u0443\u0434\u0438\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div>').appendTo(i);var h,p=0,f=0,m=0,g=0,v=0,y=0,_=i.find(".errorlayer"),b=_.find(".errorstatus"),T=i.find(".waitinglayer");"apready"!=i.data("apready")&&e("#notaplayer_"+s).jPlayer({ready:function(){e(this).jPlayer("setMedia",r),i.data("apready","apready")},loadedmetadata:function(){},timeupdate:function(){},error:function(t){var i=e(this);t.jPlayer.status.currentTime!=undefined&&t.jPlayer.status.currentTime>0&&(p=t.jPlayer.status.currentTime,f=t.jPlayer.status.currentPercentRelative,m=t.jPlayer.status.currentPercentAbsolute,g=t.jPlayer.status.currentTime,v=t.jPlayer.status.duration,y=t.jPlayer.status.remaining),"play"==h&&(window.setTimeout(function(){t.jPlayer.status.currentPercentRelative=f,t.jPlayer.status.currentPercentAbsolute=m,t.jPlayer.status.currentTime=g,t.jPlayer.status.duration=v,t.jPlayer.status.remaining=y,_.css("display",""),i.jPlayer("play",p)},1e4),_.css("display","block"),b.html("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e.<br>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f..."))},play:function(){h="play";var t=e(this);p>0&&t.jPlayer("play",p)},pause:function(){h="pause"},stop:function(){h="stop"},waiting:function(){T.css("display","block")},canplay:function(){T.css("display","")},seeking:function(e){p=e.jPlayer.status.currentTime},swfPath:c,errorAlerts:!1,cssSelectorAncestor:"#container_"+s,cssSelector:{play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},volumechange:function(e){var t=e.jPlayer.options.volume;localStorage.setItem("volume",t)},volume:u,supplied:a,wmode:"window",smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery),function(e){e.fn.notaplayer=function(){this.each(function(){function t(t,r){if(!n.data("stat"))return!1;i();var a=300*(r-t);T=window.setTimeout(function(){var i;e(".playlist a",n).each(function(){var n=e(this);n.data("cutstart")==t&&n.data("cutend")==r&&(i=n.data("fragment"))}),e.ajax({url:n.data("stat"),dataType:"text",type:"GET",data:{videoid:n.data("videoid"),fragment:i,start:t,end:r},complete:function(){}})},a)}function i(){window.clearTimeout(T)}var n=e(this),r=e('<div class="videoplayer"></div>').prependTo(n),a={},s="",o=n.attr("id")?n.attr("id"):"v"+(new Date).getTime();n.find(".media a").each(function(t){var i=e(this);s+=t>0?","+i.attr("rel"):i.attr("rel"),a[i.attr("rel")]=i.attr("href")}),a.poster=n.find(".preview img").attr("src");var l,u,c,d,h,p,f,m,g,v,y,_,b,T,w={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return w.Android()||w.BlackBerry()||w.iOS()||w.Windows()}
},k=n.data("width")?n.data("width"):590,S=n.data("height")?n.data("height"):396,C=!!n.data("autoplay")&&n.data("autoplay"),E=n.data("volume")?n.data("volume"):.6,x=!!n.data("mute")&&n.data("mute"),A=n.data("swf")?n.data("swf"):"/assets",P=!1,I=!1,L=!1,D=e(window).width();k>640&&(S=Math.floor(S/k*640),k=640),D<k&&(S=Math.floor(S/k*D),k=D),e('<div id="container_'+o+'" class="nota_video" style="width:'+k+'px;"><div class="nota_type-single"><div id="notaplayer_'+o+'" class="nota_jplayer"></div><div class="nota_video-play"><a href="javascript:;" class="nota_video-play-icon" tabindex="1">\u0432\u043e\u0441\u043f\u0440.</a></div><div class="nota_gui"><div class="nota_interface"><div class="nota_progress-container"><div class="nota_time-cut"></div><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_previous" tabindex="1"><span>\u043f\u0440\u0435\u0434.</span></a><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_next" tabindex="1"><span>\u0441\u043b\u0435\u0434.</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a><div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div><div class="nota_controls_row2"><div class="nota_toggles"><a href="javascript:;" class="nota_full-screen" tabindex="1" title="\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d">\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d</a><a href="javascript:;" class="nota_restore-screen" tabindex="1" title="\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440">\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440</a><a href="javascript:;" class="nota_repeat" tabindex="1" title="\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c">\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c</a><a href="javascript:;" class="nota_repeat-off" tabindex="1" title="\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c">\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c</a><a href="javascript:;" class="nota_shuffle" tabindex="1" title="\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439">\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439</a><a href="javascript:;" class="nota_shuffle-off" tabindex="1" title="\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443">\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443</a></div><div class="nota_speed"><a href="javascript:;" class="nota_speed-up" tabindex="1" title="\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c">\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c</a></div><div class="nota_jump"><a href="javascript:;" class="nota_jump-back" tabindex="1" title="\u0447\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434">-</a><span class="nota_jump-step">10</span><a href="javascript:;" class="nota_jump-forward" tabindex="1" title="\u0447\u0443\u0442\u044c \u0432\u043f\u0435\u0440\u0435\u0434">+</a></div><div class="nota_cut-control"><a href="javascript:;" class="nota_cut-start" tabindex="1" title="\u043e\u0442 \u0441\u0438\u0445">\u043e\u0442 \u0441\u0438\u0445</a><a href="javascript:;" class="nota_cut-cancel" tabindex="1" title="\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"><i></i><span>\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c</span></a><a href="javascript:;" class="nota_cut-end" tabindex="1" title="\u0434\u043e \u0441\u0438\u0445">\u0434\u043e \u0441\u0438\u0445</a></div></div><div class="nota_share-control"><a href="javascript:;" class="nota_share-button" tabindex="1" title="\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"><i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span></a></div></div></div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0435\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div><div class="nota_share-panel"><a href="#" class="nota_close_share">\u0437\u0430\u043a\u0440\u044b\u0442\u044c</a><form action="." method="post"><div class="nota_sp-getlink"><span class="nota_code-field"><label for="getlink_'+o+'">\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0440\u043e\u043b\u0438\u043a</label><input type="text" id="getlink_'+o+'" name="getlink" readonly="readonly" /><button type="button" value="getlink" data-clipboard-target="getlink_'+o+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443</button></span></div><div class="nota_sp-embed"><div class="nota_sp-size"><span class="nota_title">\u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0432\u0438\u0434\u0435\u043e</span><span class="nota_radio nota_checked"><input type="radio" id="vsize_'+o+'_1" name="vsize" value="large" checked="checked" /><label for="vsize_'+o+'_1">(590x396)<i></i>\u0411\u043e\u043b\u044c\u0448\u043e\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+o+'_2" name="vsize" value="medium" /><label for="vsize_'+o+'_2">(420x282)<i></i>\u0421\u0440\u0435\u0434\u043d\u0435\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+o+'_3" name="vsize" value="small" /><label for="vsize_'+o+'_3">(180x120)<i></i>\u041c\u0430\u043b\u043e\u0435</label></span></div><div class="nota_sp-getcode"><span class="nota_code-field"><label for="getcode_'+o+'">\u0412\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u043e\u043b\u0438\u043a \u043d\u0430 \u0432\u0430\u0448 \u0441\u0430\u0439\u0442</label><input type="text" id="getcode_'+o+'" name="getcode" readonly="readonly" /><button type="button" value="getcode" data-clipboard-target="getcode_'+o+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434</button></span></div><div class="nota_sp-cutsettings"><div class="nota_sp-cutset"><span class="nota_radio"><input type="radio" id="vcut_'+o+'_1" name="vcut" value="full" /><label for="vcut_'+o+'_1"><i><i></i></i>\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e</label></span><span class="nota_radio nota_checked"><input type="radio" id="vcut_'+o+'_2" name="vcut" value="cut" checked="checked" /><label for="vcut_'+o+'_2"><i><i></i></i>\u041e\u0442\u0440\u044b\u0432\u043e\u043a</label></span></div><div class="nota_sp-cutstart"><span class="nota_cut-field"><label for="cutstart_'+o+'">\u041d\u0430\u0447\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutstart_'+o+'" name="cutstart" readonly="readonly" /></span></div><div class="nota_sp-cutend"><span class="nota_cut-field"><label for="cutend_'+o+'">\u041a\u043e\u043d\u0435\u0446 \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutend_'+o+'" name="cutend" readonly="readonly" /></span></div><div class="nota_sp-cuttime"><span class="nota_cut-field"><label for="cuttime_'+o+'">\u041f\u043e\u043b\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f</label><input type="text" id="cuttime_'+o+'" name="cuttime" readonly="readonly" /></span></div><div class="nota_sp-cutbut"><div><button type="button" value="preview">\u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440</button></div><div><button type="button" value="reset">\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043b\u0438\u043f</button></div></div></div></div></form></div><div class="nota_loader"></div></div></div>').appendTo(r),e("#notaplayer_"+o).jPlayer({ready:function(){var t=e(this);t.jPlayer("setMedia",a);var r=n.find(".nota_gui");n.find(".prepare").hide(),n.find(".nota_video-play").css({"margin-top":"-"+S+"px",height:S+"px"}),C&&t.jPlayer("play"),v=n.find(".nota_loader"),y=n.find(".nota_video-play"),w.any()&&v.hide(),_=n.find(".nota_time-tooltip"),b=e("span",_);var s=n.find(".nota_progress"),o=s.offset(),g=s.width();s.mouseenter(function(e){_.show(),o=s.offset(),_.css({left:e.pageX-o.left+"px",top:e.pageY-o.top+"px"})}).mouseleave(function(){_.hide()}).mousemove(function(t){var i=t.pageX-o.left;_.css({left:i+"px",top:t.pageY-o.top+"px"}),b.text(e.jPlayer.convertTime(100*i/g*u/100))}).click(function(){});var T=n.find(".nota_share-button"),E=n.find(".nota_share-panel");E.css("opacity",0),T.click(function(t){t.preventDefault(),e(this).blur(),T.hasClass("opened")?E.stop().animate({opacity:0},function(){T.removeClass("opened").html("<i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span>"),E.css("display","none")}):E.stop().css("display","block").animate({opacity:1},function(){T.addClass("opened").html("<i></i><span>\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443</span>")})}),n.find(".nota_close_share").click(function(t){t.preventDefault(),e(this).blur(),T.click()}),n.find(".nota_radio").each(function(){var t=e(this),i=t.parent();t.find(":radio").bind("change",function(){e(this).prop("checked")&&(i.find(".nota_checked").removeClass("nota_checked"),t.addClass("nota_checked"))})}),n.find(".nota_jump-back").click(function(n){n.preventDefault(),e(this).blur(),i(),t.jPlayer("play",l-10)}),n.find(".nota_jump-forward").click(function(n){n.preventDefault(),e(this).blur(),i(),t.jPlayer("play",l+10)}),h=e(':input[name="cutstart"]',n),p=e(':input[name="cutend"]',n),f=e(':input[name="cuttime"]',n);var x=e(':input[name="getcode"]',n);""!=n.data("permalink")?e(':input[name="getlink"]',n).val(n.data("permalink")):n.find(".nota_sp-getlink").remove(),n.data("embed")||n.find(".nota_sp-embed").remove(),e(".nota_sp-cutbut button[value=reset]",n).click(function(){e(':input[name="vcut"]:eq(0),:input[name="vsize"]:eq(0)',n).click(),n.trigger("cutchange"),e(this).blur()}),e(".nota_sp-cutbut button[value=preview]",n).click(function(){n.find(".nota_share-button").click(),t.jPlayer("play",c),e(this).blur()}),e(':input[name="vcut"],:input[name="vsize"]',n).bind("change",function(t){var i=e(t.target);"vcut"==i.attr("name")&&("full"==i.val()?(m.slider({values:[0,100]}),c=0,d=u):(c=l,m.slider("values",0,100*c/u))),n.trigger("cutchange")});var A=e('button[value="getlink"]',n),P=new ZeroClipboard(A,{moviePath:n.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});P.on("noFlash",function(){A.hide()}),P.on("complete",function(){});var I,L=e('button[value="getcode"]',n),D=new ZeroClipboard(L,{moviePath:n.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});D.on("noFlash",function(){L.hide()}),D.on("complete",function(){}),n.bind("cutchange",function(t){if(h.val(e.jPlayer.convertTime(c)),p.val(e.jPlayer.convertTime(d)),f.val(e.jPlayer.convertTime(d-c)),""!=n.data("embed")){var i=n.data("embed"),r=e(':input:checked[name="vcut"]',n).val(),a=e(':input:checked[name="vsize"]',n).val();i=i.indexOf("?")>-1?i+"&":i+"?";var s="full"==r?0:c,o=(t="full"==r?u:d,590),l=396;"medium"==a&&(o=420,l=282),"small"==a&&(o=180,l=120),(c>0||d<u)&&e(':input[name="vcut"][value="cut"]',n).click(),x.val('<object data="'+i+"s="+Math.round(s)+"&e="+Math.round(t)+"&w="+o+"&h="+l+'" width="'+o+'" height="'+l+'"></object>')}}),n.data("permalink")||n.data("embed")||n.find(".nota_share-control").remove(),n.mouseenter(function(){window.clearTimeout(I),r.css("opacity","")}).mouseleave(function(){I=window.setTimeout(function(){T.hasClass("opened")||r.css("opacity","0")},2e3)}),k<500&&n.addClass("sizesmall"),k<300&&n.addClass("sizelite")},loadedmetadata:function(t){var i=e(this),r=n.find(".nota_cut-control");m=n.find(".nota_time-cut"),u=t.jPlayer.status.duration,c=n.data("cutstart")?n.data("cutstart"):0,d=n.data("cutend")?n.data("cutend"):u,m.slider({range:!0,step:.01,values:[100*c/u,100*d/u],slide:function(){_.css({display:"block",left:+m.slider("values",g.data("index"))+"%",top:"-10px"}),b.text(e.jPlayer.convertTime(m.slider("values",g.data("index"))*u/100))},stop:function(e,t){var r=100*l/u;t.values[0]>=r?(m.slider({values:[r,t.values[1]]}),c=l):c=t.values[0]*u/100,t.values[1]<=r?(i.jPlayer("pause",l),m.slider({values:[t.values[0],r]}),d=l):d=t.values[1]*u/100,n.trigger("cutchange"),_.css("display","none")},start:function(){g=m.find(".ui-slider-handle.ui-state-hover, .ui-slider-handle.ui-state-active")},create:function(){m.hide(),r.find(".nota_cut-start").click(function(t){t.preventDefault(),e(this).blur(),c=l,m.slider("values",0,100*c/u),n.trigger("cutchange")}),r.find(".nota_cut-end").click(function(t){t.preventDefault(),e(this).blur(),d=l,m.slider("values",1,100*d/u),n.trigger("cutchange")}),r.find(".nota_cut-cancel").click(function(t){t.preventDefault(),e(this).blur(),c=0,d=u,m.slider({values:[100*c/u,100*d/u]}),n.trigger("cutchange")}),m.find(".ui-slider-handle").each(function(t){e(this).data("index",t)}),n.trigger("cutchange");var t=n.find(".playlist");if(t.length>0){t.find(".fullplay").data("cutstart",0).data("cutend",u),e("a",t).click(function(t){t.preventDefault();var r=e(this);c=r.data("cutstart"),d=r.data("cutend"),m.slider({values:[100*c/u,100*d/u]}),n.trigger("cutchange"),i.jPlayer("play",c),r.blur()}),e(".nota_previous, .nota_next",n).click(function(){var i,n=e(this);if(e(".fragments a",t).each(function(){var t=e(this);t.data("cutstart")<=l&&t.data("cutend")>=l&&(i=t.parent(".fragment"))}),i&&i.length>0){var r=n.hasClass("nota_next")?i.next():i.prev();r.length<1&&(r=n.hasClass("nota_next")?e(".fragment:eq(0)",t):e(".fragment:last",t)),e("a",r).click()}else e(".fragments a:eq(0)",t).click();n.blur()});var a=e(".fragments a:eq(0)",t);c=a.data("cutstart"),d=a.data("cutend"),c>0&&!C&&i.jPlayer("pause",c),m.slider({values:[100*c/u,100*d/u]}),n.trigger("cutchange")}else n.addClass("no_prev").addClass("no_next")}}),y.show(),P=!0},loadeddata:function(){v.hide()},seeked:function(){l>d&&(d=u,m.slider("values",1,100),n.trigger("cutchange")),l<c&&(c=l,m.slider("values",0,100*c/u),n.trigger("cutchange")),P?(v.hide(100,function(){v.css({"background-color":"transparent",opacity:1})}),m.show(),P=!1):(y.hide(),v.hide()),I=!1},seeking:function(){I=!0,w.any()||v.show()},waiting:function(){},timeupdate:function(t){l=t.jPlayer.status.currentTime,!I&&L&&l>=d&&e(this).jPlayer("pause",d)},play:function(){var t=e(this);t.jPlayer("pauseOthers"),(l<=c||l>=d)&&t.jPlayer("play",c),L=!0,y.hide()},playing:function(){v.hide(),y.hide(),L=!0,t(c,d)},pause:function(){L=!1,y.show(),i()},cssSelectorAncestor:"#container_"+o,cssSelector:{videoPlay:".nota_video-play",play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},swfPath:A,preload:"metadata",solution:"html,flash",volume:E,muted:x,supplied:s,size:{width:k+"px",height:S+"px",cssClass:"nota_video-"+k+"p"},smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery);var WND,DOC,BODY,CONT,_columns=4,touchdevice=!1,echoears=!1,main={total:{fb_cnt:null,vk_cnt:null,tw_cnt:null},init:function(){pageuri=window.location},display_block:function(e){$(e).show()}},social={fb_count:function(){main.total.fb_cnt=0},vk_count:function(e){VK={},VK.Share={},VK.Share.count=function(t,i){$("span",e).text(i),main.total.vk_cnt=parseInt(i)},$.getJSON("https://vk.com/share.php?act=count&index=1&url="+pageuri+"&format=json&callback=?")},click_button:function(e){var t=!1;$(e).click(function(){if(!t){var e=$(this).parent("div"),i=parseInt($("span",e).text());isNaN(i)||(i+=1,$("span",e).text(i)),t=!0}return window.open($(this).attr("href"),"displayWindow","width=700,height=400,left=200,top=100,location=no, directories=no,status=no,toolbar=no,menubar=no"),!1})}};$(function(){var e;WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$("html").hasClass("no-touch")||(touchdevice=!0),$(".echoears").length>0&&(echoears=!0),bodyclassName(WND,BODY,CONT),WND.on("resize",function(){window.clearTimeout(e),e=window.setTimeout(function(){bodyclassName(WND,BODY,CONT),BODY.trigger("changecolumns")},150)}),DOC.trigger("pagechange")}),$(document).bind("pagechange",function(){var e,t,i,n;WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$(".iblock, .mainmenu a, .secondmenu a").cleanWS(),$(".supermaincarousel").supermaincarousel(),$(".liveaudioplayer").initLive(),$(".toair").on("click",function(){$.scrollTo($(this).attr("href"),500,{easing:"easeOut"})}),$(".echotop").echotop(),$(".echoleft, .echoright").echoleftright(),$(".icsearch").showSearch(),$(".open_auth").authForm(),$(".authorized").logoutForm(),$(".imgcarousel").mediacarousel(),$(".fragments").columnize({columns:3,lastNeverTallest:!0}),$(".mainpreview").mainpreview(),$(".mainpeoples").mainpeoples(),$(".notaplayer").notaplayer(),$(".audionota").audionota(),$(".multimedia").mmtabs(),$(".bonustabs").bonustabs(),$(".commentList").comFunc(),$(".shareBlock").sharePopup(),$(".custom_check").replaceCheckBox(),$(".custom_radio").radioReplace(),$(".votescharts").votescharts(),$(".piechart").piechart(),$(".carousel").notacarousel(),$("#onair").onaircarousel(),$(".title_info .open").footOpen(),$(".programm_info").descrOpen(),$(".search_result .c_select").selectReplace(),$(".faq").faq(),$("body").on("click",".ajax_comments",function(e){e.preventDefault();var t=$(this),i=$(".answform");return $.ajax({url:t.attr("href"),method:"GET",success:function(e){$(e).insertBefore(i).fadeIn("slow"),t.parent().remove()}}),!1}),$(".abc a").click(function(e){e.preventDefault();var t=$(this),i=$(".broadcast_list, .person_list");return $(".abc a").removeClass("cur"),$.ajax({url:t.attr("href"),method:"GET",success:function(e){i.html(e),t.addClass("cur"),$(".iblock").cleanWS(),i.trigger("update",[])}}),!1}),$("#searchList").letterlist({inp:"#quicksearch",spn:".author .name, .guestst b, .title h2 a"}),e=$(".js-suggest"),t=$("#psearch",e),i=$(".js-suggest-list",e),n=e.data("src"),t.on("keyup",function(){var e=t.val();e.length<3?i.addClass("_hidden"):i.load(n+"?val="+e,function(){i.removeClass("_hidden")})}),$(".calendar").each(function(){$(this).calendar()}),pageUp(),popularblFunc(),touchdevice||DOC.on("mouseenter",".preview",function(){var e=$(this);if(e.hasClass("mouseenter")||e.hasClass("previewclone")||e.parents(".mainpeoples").length>0||e.hasClass("voicepreview"))return!1;$(".mouseenter").removeClass("mouseenter"),$(".previewclone").remove();var t=e.clone(!0);t.addClass("previewclone"),e.hasClass("bdjhot")&&t.addClass("bdjhot"),e.hasClass("bdjnew")&&t.addClass("bdjnew"),e.addClass("mouseenter");var i=e.offset(),n="clone"+(new Date).getTime();t.appendTo("body"),t.css({opacity:0,position:"absolute",top:i.top,left:i.left,margin:0,"z-index":10}).addClass("hover").addClass(n),t.stop().animate({opacity:1},250),t.on("mouseleave",function(i){if($(i.tagret).parents("."+n).length>0)return!1;t.stop().animate({opacity:0},100,function(){e.removeClass("mouseenter"),t.remove()})})}),DOC.on("click",".js-expandtxt",function(){$(this).toggleClass("op")}),DOC.on("click",".js-popup",function(){return $(this).popupList(),!1}),$(".uipopup").uipopup(),$(".connect_bl").tabs(),$(".typical ul:not([class]), .typical ol:not([class])").each(function(){var e=$(this);e.addClass("norm"),$("li",e).wrapInner('<div class="dark"></div>')}),$(".typical table:not([class]) tr:gt(0)").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")}),$(".typicalform").each(function(){var e=$(this);$(":checkbox",e).replaceCheckBox(),$(":radio",e).radioReplace(),$("select",e).selectReplace(),e.find(".birthdate").on("change",function(){e.find(".setbirthdate").val($(this).val())}).mask("99.99.9999"),e.find(".setbirthdate").on("change",function(){e.find(".birthdate").val($(this).val())}).on("focus",function(){$.scrollTo($(this),{offset:{left:0,top:-150}})})}),$(".calend").click(function(){return!1}),$(".calendarmonth").each(function(){$(this).calendarmonth()}),$(".calendaryear").each(function(){$(this).calendaryear()}),$(".calendarweek").each(function(){$(this).calendarweek()}),$("#mainsidebar").each(function(){function e(){t.height("").removeClass("asideheightajust");var e=t.outerHeight(),i=0;cont.each(function(){i+=$(this).outerHeight(!0)}),e>i&&t.height(i).addClass("asideheightajust")}var t=$(this),i=t.parent();cont=i.children("section"),cont.length>0&&e(),WND.on("resize load",e)}),$("body").on("click",".open_auth_link, .open_reg_link",function(e){e.preventDefault();var t=$(this),i=$(".auth_popup");i.find(".open").removeClass("open"),i.children(t.hasClass("open_auth_link")?".reg":".auth").addClass("open"),i.find(t.hasClass("open_auth_link")?".authform, .socialblock":".regform").addClass("open"),$("html, body").animate({scrollTop:0},600,"easeOutQuad",function(){$(".header .open_auth").trigger("click")})}),$(".mainmenu").submenuOpen()}),$(window).load(function(){WND=$(window),BODY=$("body"),CONT=BODY.find(".content"),bodyclassName(WND,BODY,CONT),$(".mainbanner_box").fadeIn()}),$(function(){var e=0;main.init(),social.click_button(".fb_btn"),social.click_button(".vk_btn"),social.click_button(".tw_btn"),social.fb_count(".fb_sharer"),social.vk_count(".vk_sharer"),interval=setInterval(function(){e++,null!==main.total.fb_cnt&&null!==main.total.vk_cnt&&null!==main.total.tw_cnt?(main.display_block(".social_block"),clearInterval(interval)):e>30&&clearInterval(interval)},100)}),jQuery.fn.cleanWS=function(){this.each(function(){for(var e=this,t=e.parentNode,i=e.previousSibling,n=e.nextSibling;i;){var r=i.previousSibling;if(3==i.nodeType&&i.nodeValue)for(var a=i.nodeValue.length-1;a>-1&&(9==(o=i.nodeValue.charCodeAt(a))||10==o||32==o);a--)i.nodeValue=i.nodeValue.slice(0,a);8==i.nodeType&&t.removeChild(i),i=r}for(;n;){var s=n.nextSibling;if(3==n.nodeType&&n.nodeValue)for(;n.nodeValue.length;){var o;if(9!=(o=n.nodeValue.charCodeAt(0))&&10!=o&&32!=o)break;n.nodeValue=n.nodeValue.slice(1)}8==n.nodeType&&t.removeChild(n),n=s}})},function(e){e.fn.notacarousel=function(t){this.each(function(){function i(){var t=l.find(".current");u.wrapAll('<div class="carouselwrapper"><div class="carouselslide"></div></div>');var i=0;if(u.each(function(){i+=e(this).outerWidth(!0)}),l.find(".carouselslide").width(i),a("init"),t.length>0){t.nextAll(".preview").addClass("later");var n=100*(t.index()+1)/c;l.find(".carouselslider").slider({value:n}),r(n,!0)}}function n(){s.slider=l.find(".carouselslider").length>0,l.find(".carouselnav").remove(),a("reinit")}function r(t,i){var n=Math.round(t*c/100),r=Math.ceil(n/_columns),a=l.find(".carouselnav"),s=e("li.slide",a);if(i){var o=l.find(".carouselslide"),d=l.find(".carouselwrapper"),h=0,p=o.width(),f=d.width();if(a.find(".current").removeClass("current"),s.eq(r-1).addClass("current"),n-2>0){for(var m=0;m<n-2;m++){var g=u.eq(m);g.length>0&&(h+=Math.ceil(g.outerWidth(!0)))}p-h<f&&(h=p-f-parseInt(u.last().css("margin-right")))}o.css({"margin-left":-h})}else s.eq(r-1>0?r-1:0).trigger("click",["slide"])}function a(t){for(var i=e('<ul class="carouselnav"/>').appendTo(l),n=0;n<c;n++)n%_columns==0&&i.append('<li class="slide"><i class="num">'+n+"</i></li>");i.append('<li class="toleft"><i class="wsico">&#x0033;</i></li><li class="toright"><i class="wsico">&#x0034;</i></li>'),e("li.toleft,li.toright",i).on("click",function(){var t=e(this),n=i.find(".current"),r=t.hasClass("toleft")?n.prev(".slide"):n.next(".slide");r.length>0&&r.trigger("click")});var a=0;for(n=0;n<u.length;n++){if(u.eq(n).position().left>=0)break;n%_columns==0&&a++}var o=e("li.slide",i),p=o.length;o.each(function(t){var n=e(this);t==a?n.addClass("current"):n.addClass("gtcurrent"),n.bind("dblclick",function(e){e.preventDefault()}),n.children("i").text(t+1),n.click(function(t,n){t.preventDefault();var r=e(this),a=l.find(".carouselwrapper"),o=l.find(".carouselslide");if(r.hasClass("current")||l.hasClass("inaction"))return!1;"slide"!=n?(d=s.T,h=s.A,l.addClass("inaction")):(d=0,h="linear");for(var f=i.find(".current"),m=r.index(),g=0,v=m*_columns,y=o.width(),_=a.width(),b=0;b<v;b++){var T=u.eq(b);T.length>0&&(g+=Math.ceil(T.outerWidth(!0)))}if(y-g<_&&(g=y-_-parseInt(u.last().css("margin-right"))),o.stop().animate({"margin-left":-g},d,h,function(){f.removeClass("current"),r.addClass("current"),l.removeClass("inaction"),e("li.gtcurrent",i).removeClass("gtcurrent"),e("li.slide:gt("+t+")",i).addClass("gtcurrent");var t=e("li.current",i).index();e("li.toleft,li.toright",i).removeClass("disabled"),0==t&&e("li.toleft",i).addClass("disabled"),t==p-1&&e("li.toright",i).addClass("disabled")}),s.slider){var w=100*v/c;0==m&&(w=0),m==p-1&&(w=100),l.find(".carouselslider").slider({value:w})}});var r=e("li.current",i).index();e("li.toleft,li.toright",i).removeClass("disabled"),0==r&&e("li.toleft",i).addClass("disabled"),r==p-1&&e("li.toright",i).addClass("disabled")});var f=0,m=l.find(".carouselslide"),g=m.width(),v=l.find(".carouselwrapper").width();(parseInt(m.css("margin-left"))<v-g&&(f=g-v-parseInt(u.last().css("margin-right")),m.stop().animate({"margin-left":-f},d/10,h,function(){})),"init"==t&&s.slider)&&e('<div class="carouselslider" />').appendTo(l).slider({step:100/c,slide:function(e,t){r(t.value)},stop:function(e,t){r(t.value)},change:function(){}})}var s,o={T:touchdevice?350:800,A:"easeOutQuad",slider:!1};s="string"!=typeof t?e.extend(o,t):o;var l=e(this),u=l.find(".iblock.preview"),c=u.length,d=s.T,h=s.A;"reinit"==t?n():i(),e("body").bind("changecolumns",function(){n()})})}}(jQuery),function(e){e.fn.mainpeoples=function(t){this.each(function(){function i(){fake_showcase=s.clone(),fake_showcase.find(".freshentry").remove(),fake_showcase.addClass("fake").appendTo(a),r("init")}function n(){r("reinit")}function r(t){var i=4*s.width()/9;s.children(".iblock").each(function(){var n=e(this),r=n.position();n.width();r.left<i?n.removeClass("tol").addClass("tor"):n.removeClass("tor").addClass("tol"),"init"==t&&(n.find(".mainperson").each(function(){var t=e(this),i=t.find(".freshentry"),r=t.children(".photo"),a=i.find(".photo");i.children().wrapAll('<div class="fe_bg"><div class="fe_cont"></div></div>');var o=e(".author, .when, .txt, .meta, .mediamenu",i);t.find(".mediamenu").length>0&&t.addClass("wmarg"),o.css("opacity",0),r.on("mouseenter",function(){r.css("z-index",100),t.css("z-index",99),s.find(".vis").each(function(){var t=e(this);t.children(".photo").css("z-index",""),t.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),t.removeClass("vis").find(".freshentry").stop().animate({width:0},300,"easeOutQuad")});parseInt(a.css("border-top-width"));a.css("top",r.position().top),n.hasClass("tor")?i.css({right:"auto",left:n.position().left-parseInt(a.css("left"))}):i.css({left:"auto",right:s.width()-n.position().left-n.width()-parseInt(a.css("right"))-parseInt(a.css("border-right-width"))});var l=t.hasClass("wmarg")?"41.625em":"36.625em";n.hasClass("type2")&&(l=t.hasClass("wmarg")?"33.125em":"28.125em"),n.hasClass("type3")&&(l=t.hasClass("wmarg")?"28.4375em":"23.4375em"),i.stop().animate({width:l},300,"easeOutQuad",function(){o.animate({opacity:1},500,function(){r.css("z-index","")})}),t.addClass("vis"),e(document).off("mousemove.closefreshentry").on("mouseout.closefreshentry",function(t){e(t.target).parents(".vip_showcase").length<1&&s.find(".vis").each(function(){var t=e(this);t.children(".photo").css("z-index",""),t.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),t.removeClass("vis").find(".freshentry").stop().animate({width:0},100,"easeOutQuad")})})}).on("mouseout",function(){}).on("click dblclick",function(e){e.preventDefault()})}),s.addClass("mp_ready"))})}var a=e(this),s=(a.find(".vip_sign"),a.find(".vip_showcase"));"reinit"==t?n():i(),e("body").bind("changecolumns",function(){n()})})}}(jQuery),function(e){e.fn.mainpreview=function(t){this.each(function(){function i(e){d.css("margin-top","0");for(var t=0,i=0,n=0;n<e.length;n++){var r=e[n][e[n].length-1];t=Math.max(r.sum,t),n>0&&n<e.length-1&&(i=Math.max(r.sum,i))}u.height(t);var a=i-t+20;d.css({"margin-top":a}),l.css({"margin-bottom":0});var s=Math.abs(a);s-60>0&&l.css({"margin-bottom":s-60})}function n(t,i){var n=t.find('img[src!=""]'),r=[];n.each(function(){if(e(this).attr("src")){var t=new Image;t.src=e(this).attr("src"),r.push(t)}});var a=0;t.off("updatestat").on("updatestat",function(){++a>=r.length&&(o("reinit"),i&&i.length>0&&i.remove(),e("a",d).removeClass("onload"))});for(var s=0;s<r.length;s++)e(r[s]).bind("load abort error",function(){t.trigger("updatestat")})}function r(){e("a",d).click(function(t){t.preventDefault();var i=e(this);if(i.hasClass("onload"))return!1;i.addClass("onload");var r=e('<div class="loader" style="margin-left:-15px;"><img src="/i/ajax-loader_.gif" alt="\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"></div>').prependTo(i.parent());e.ajax({url:i.attr("href"),method:"GET",success:function(t){var a=e(window).scrollTop(),s=e(e(t).html());u.height(""),u.append(s),l.find(".iblock").cleanWS(),l.hasClass("recently-mainpreview")?(initAudioPlayer(e(".video-js")),r.remove(),i.removeClass("onload")):(n(u,r),o("reinit")),l.trigger("change"),e(window).scrollTop(a)}})}),o("init")}function a(){o("reinit")}function s(e,t,i){if(!h&&!p){p=!0;for(var n,r,a=0,o=0,l=0,u=0,c=0,d=0;d<e.length;d++){var f=(y=e[d][e[d].length-1]).sum;0==d?(o=f,a=f,l=0,u=0,r=y.obj,n=y.obj):(f<o&&(o=f,l=d,r=y.obj),f>a&&(a=f,u=d,n=y.obj))}var m=e[u][e[u].length-1],g=e[l][e[l].length-1],v=!1;if(m.sum-m.H>g.sum&&"mainsidebar"!=m.obj.attr("id")&&(v=!0),!v&&"mainsidebar"!=g.obj.attr("id")){for(d=0;d<e.length;d++){var y,_=(y=e[d][e[d].length-1]).sum-y.H;0==d?(y.H,c=0):_>o&&(c=d)}var b=e[c][e[c].length-1];b.H<m.sum-g.sum&&b.sum-b.H>g.sum&&(n=(m=b).obj,r=g.obj,u=c,v=!0)}if(v){var T=Math.abs(parseInt(r.css("margin-bottom")));n.css({left:240*(l-u),top:r.offset().top-n.offset().top+r.outerHeight()+T});var w=e[u].splice(e[u].length-1,1),k=e[l][e[l].length-1].sum;w[0].sum=k+w[0].H,e[l]?e[l][e[l].length]=w[0]:e[l]=w}if(!v&&"mainsidebar"!=m.obj.attr("id")&&"mainsidebar"!=g.obj.attr("id")&&"mainnewscolumn"!=m.obj.attr("id")&&"mainnewscolumn"!=g.obj.attr("id")&&m.H>g.H){var S=e[u].splice(e[u].length-1,1),C=e[l].splice(e[l].length-1,1),E=(T=Math.abs(parseInt(C[0].obj.css("margin-bottom"))),parseInt(S[0].obj.css("left"))+240*(l-u)),x=parseInt(S[0].obj.css("top"))+((e[l].length>0?e[l][e[l].length-1].sum:0)-(e[u].length>0?e[u][e[u].length-1].sum:0));S[0].obj.css({left:E,top:x});T=Math.abs(parseInt(S[0].obj.css("margin-bottom"))),E=parseInt(C[0].obj.css("left"))+240*(u-l),x=parseInt(C[0].obj.css("top"))+((e[u].length>0?e[u][e[u].length-1].sum:0)-(e[l].length>0?e[l][e[l].length-1].sum:0));C[0].obj.css({left:E,top:x}),S[0].sum=(e[l].length>0?e[l][e[l].length-1].sum:0)+S[0].H,C[0].sum=(e[u].length>0?e[u][e[u].length-1].sum:0)+C[0].H,e[l]?e[l][e[l].length]=S[0]:e[l]=S,e[u]?e[u][e[u].length]=C[0]:e[u]=C}p=!1,++t<e.length?s(e,t,i):i||(t=0)}}function o(t){var n=l.find(".preview, .infinityitem");if(n.length<5)return!1;"reinit"==t&&n.css({"margin-top":""});var r=0,a=[],o=l.width(),u=Math.ceil(o/240),d=e("#mainsidebar"),p=e("#mainnewscolumn");l.closest("section").hasClass("content")||(a[u-1]=new Array({obj:d,H:d.outerHeight()-c.top+20,sum:d.outerHeight()-c.top+20}),a[u-2]=new Array({obj:p,H:p.outerHeight()-c.top+20,sum:p.outerHeight()-c.top+20})),n.css({position:"static",top:"",left:""}).each(function(){var t=e(this);if(!t.hasClass("preview"))return!1;t.css("position","relative");var i=t.position(),n=t.outerHeight(!0)
;i.top>r&&(r=i.top);var s=Math.round(i.left/240),o=a[s]&&a[s][a[s].length-1]?a[s][a[s].length-1].sum:0;a[s]?a[s].push({obj:t,id:t.data("maxid"),H:n,sum:o+n}):a[s]=new Array({obj:t,id:t.data("maxid"),H:n,sum:o+n}),t.css({"margin-top":-(i.top-o)})}),h=!1,s(a,0),i(a),e(window).load(function(){i(a)})}var l=e(this),u=l.children(".rel"),c=u.position(),d=l.find(".moregiant");d.css({position:"relative","margin-top":0,clear:"none","margin-bottom":0,width:500,left:"50%","margin-left":-250}),l.addClass("clearfix").css({"margin-bottom":0});var h=!1,p=!1;"reinit"==t?a():r(),n(u,!1),n(e("#mainnewscolumn"),!1),n(e("#mainsidebar"),!1),e(window).bind("load",function(){window.setTimeout(function(){a()},1e3)}),e("body").bind("changecolumns",function(){a()})})}}(jQuery),function(e){e.fn.bonustabs=function(){this.each(function(){var t=e(this),i=t.find(".tabopener"),n=450,r="easeOutQuad";i.on("click",function(i){if(i.preventDefault(),!e(this).hasClass("inaction")){var a=e(this),s=a.attr("href"),o=e(s),l=o.find(".cont");if(a.addClass("inaction"),o.hasClass("opened"))l.css("opacity",0),o.stop().animate({height:0},n,r,function(){e(this).removeClass("opened"),a.removeClass("inaction")});else{l.css("opacity",0),o.height("auto");var u=o.height();o.height(0),t.find(".opened").stop().animate({height:0},n/10,r,function(){e(this).removeClass("opened")}),o.stop().animate({height:u},n,r,function(){o.addClass("opened").height("auto"),a.removeClass("inaction")}),window.setTimeout(function(){l.animate({opacity:1},n/3,function(){})},n/4)}}}),t.find(".form").submit(function(t){var i=e(this);return i.data("valid",!1),i.formValidator(),!!i.data("valid")||(t.preventDefault(),!1)})})}}(jQuery),function(e){e.fn.supermaincarousel=function(t){this.each(function(){function i(){s("init")}function n(){s("reinit")}function r(t,i){t.find(".iblock").each(function(t){var n=e(this),r=o.find(".slidestorage");e(".iblock:eq("+(t+i)+")",r).children(".slide").clone(!0).addClass("opened").appendTo(n),n.find(".opened .info").on("mouseenter",function(){n.addClass("hover"),n.find(".text").stop().slideDown(300)}).on("mouseleave",function(){n.find(".text").stop().slideUp(200,function(){n.removeClass("hover")})})})}function a(t,i){t.html(""),i?(e('<div class="iblock type0" data-type="type0" />').appendTo(t),_columns<5?e('<div class="iblock type4" data-type="type4" />').appendTo(t):e('<div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(t)):_columns<5?e('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type4" data-type="type4" />').appendTo(t):e('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(t)}function s(t){if("init"==t){var i=e('<div class="slidesmask" />').appendTo(o),n=o.children(".iblock"),s=e('<div class="slidestorage" />').appendTo(o);n.appendTo(s),e(".iblock:first",s).hasClass("emergency")?a(i,!0):a(i,!1),r(i,0);var u=e('<div class="slidenav"><a href="#" class="toleft"><span class="wsico">&#x0033;</span></a><a href="#" class="toright"><span class="wsico">&#x0034;</span></a></div>').appendTo(o);u.find(".toright").on("click",function(t){if(t.preventDefault(),!o.hasClass("inaction")){o.addClass("inaction");var i=4==_columns?2:3;e(".iblock",s).slice(0,i).appendTo(s);var n=o.find(".slidesmask"),u=e('<div class="slidesmask" />');n.before(u),e(".iblock:eq(0)",s).hasClass("emergency")?a(u,!0):a(u,!1),r(u,0),u.css({opacity:0,position:"absolute",top:0,left:0,"z-index":10});var c=u.find(".iblock"),d=n.find(".iblock"),h=e(".section, .info",d),p=d.find(".photo"),f=c.find(".photo");newtxt=e(".section, .info",c),f.css("margin-left","100%"),newtxt.css("opacity",0),h.stop().animate({opacity:0},100,function(){u.stop().animate({opacity:1},100,l),c.each(function(t){var i=e(this),r=i.find(".slide"),a=r.find(".photo"),s=e(".section, .info",r),d=a.data(i.data("type"))?a.data(i.data("type")):0;r.removeClass("opened"),window.setTimeout(function(){a.stop().animate({"margin-left":d+"px"},550,l,function(){window.setTimeout(function(){s.stop().animate({opacity:1},300,l,function(){t==c.length-1&&(u.css({position:"","z-index":"",left:"",top:""}),t==c.length-1&&(o.removeClass("inaction"),n.remove()))})},100)}),0==t&&p.each(function(){var t=e(this);t.animate({"margin-left":-t.width()},550,l,function(){})})},150)})})}}),u.find(".toleft").on("click",function(t){if(t.preventDefault(),!o.hasClass("inaction")){o.addClass("inaction");var i=4==_columns?2:3,n=e(".iblock",s).slice(-i);n.length>0&&n.prependTo(s);var u=o.find(".slidesmask"),c=e('<div class="slidesmask" />');u.before(c),e(".iblock:eq(0)",s).hasClass("emergency")?a(c,!0):a(c,!1),r(c,0),c.css({opacity:.5,position:"absolute",top:0,left:0,"z-index":10});var d=c.find(".iblock"),h=u.find(".iblock"),p=e(".section, .info",h),f=h.find(".photo"),m=d.find(".photo");newtxt=e(".section, .info",d),newtxt.css("opacity",0),m.each(function(){var t=e(this);t.css("margin-left",-t.width())}),p.stop().animate({opacity:0},100,function(){c.stop().animate({opacity:1},100,l),d.each(function(t){var i=e(this),n=i.find(".slide"),r=n.find(".photo"),a=e(".section, .info",n),s=r.data(i.data("type"))?r.data(i.data("type")):0;n.removeClass("opened"),window.setTimeout(function(){r.stop().animate({"margin-left":s+"px"},550,l,function(){window.setTimeout(function(){a.stop().animate({opacity:1},300,l,function(){t==d.length-1&&c.css({position:"","z-index":"",left:"",top:""}),t==d.length-1&&(o.removeClass("inaction"),u.remove())})},150)}),0==t&&f.stop().animate({"margin-left":"100%"},550,l,function(){})},150)})})}})}else{i=o.find(".slidesmask"),n=o.children(".iblock"),s=o.find(".slidestorage");e(".iblock:first",s).hasClass("emergency")?a(i,!0):a(i,!1),r(i,0)}}var o=e(this),l="easeInOutQuad";"reinit"==t?n():i(),e("body").bind("changecolumns",function(){n()})})}}(jQuery),function(e){e.fn.onaircarousel=function(t){this.each(function(){function i(){r("init")}function n(){r("reinit")}function r(){var t=(new Date).getTimezoneOffset()/60;e.ajax({url:a.data("url"),type:"get",data:{timezone:t},cache:!1}).done(function(t){return e(t).appendTo(a),a.find(".iblock").cleanWS(),a.find(".carousel").notacarousel({slider:!0}),e("#fulldayswitcher a").on("click",function(t){t.preventDefault();var i=e(this).attr("href"),n=Math.floor((e(i).index()+_columns)/_columns);e(".carouselnav .slide:eq("+(n-1>0?n-1:0)+")",a).trigger("click")}),!1})}var a=e(this);"reinit"==t?n():i()})}}(jQuery),function(e){e.fn.initLive=function(){this.each(function(){e(this).find(".playerbutton").on("click.firstclick",function(t){t.preventDefault();var i=e(this);window.open(i.attr("href"),"echoliveplayer","location=no,locationbar=no,chrome=yes,titlebar=yes,menubar=no,toolbar=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,status=no,width=1000,height=820").focus()})})}}(jQuery),function(e){e.fn.footOpen=function(){this.each(function(){var t=e(this),i=["\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c","\u0441\u043a\u0440\u044b\u0442\u044c"],n=e(".info_partner_block");n.hide(),t.on("click",function(e){return e.preventDefault(),t.hasClass("show")?(t.find("span:last-child").text(i[0]),t.removeClass("show"),t.closest(".footer").height(500).prev().css({"padding-bottom":"550px"}),n.slideUp()):(t.find("span:last-child").text(i[1]),t.addClass("show"),t.closest(".footer").height(850).prev().css({"padding-bottom":"900px"}),n.slideDown()),popularblFunc(),!1})})}}(jQuery),function(e){e.fn.showSearch=function(){this.each(function(){function t(){s.removeClass("show")}function i(){s.addClass("show"),s.find("#searchq").focus(),window.clearTimeout(n),s.one("mouseleave.opened",function(){r=window.setTimeout(function(){t()},3e3)})}var n,r,a=e(this),s=e(this).parent().find("form");s.find("#searchq").on("focus",function(){s.off("mouseleave.opened"),window.clearTimeout(r)}).on("blur",function(){var i=e(this);r=window.setTimeout(function(){""==e.trim(i.val())&&t()},3e3)}),a.on("mouseenter",function(e){e.preventDefault(),window.clearTimeout(n),n=window.setTimeout(function(){i()},500)}).on("mouseleave",function(){window.clearTimeout(n)}).on("click",function(e){e.preventDefault(),window.clearTimeout(n),i()}),s.find(".icmenu").on("click",function(e){return e.preventDefault(),t(),!1})})}}(jQuery),function(e){e.fn.logoutForm=function(){this.each(function(){var t=e(this),i=e(".open_logout"),n=e(".logout-cont");t.on("click",function(){n.toggleClass("show"),i.toggleClass("show")})})}}(jQuery),function(e){passwordSwitcher(),e.fn.authForm=function(){this.each(function(){var t=e(this),i=e(".auth_popup");t.on("click",function(e){return e.preventDefault(),i.addClass("show"),t.addClass("show"),i.find(".reg").hasClass("open")?i.find(".formsholder").css("min-width",""):i.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em"),!1}),i.find(".close").on("click",function(e){return e.preventDefault(),i.removeClass("show"),t.removeClass("show"),!1}),i.find(".open_form").bind("click",function(t){t.preventDefault(),i.find(".form").removeClass("open"),i.find("form"+e(this).attr("href")).addClass("open");var n=e(this).parent();return n.hasClass("reg")&&(n.removeClass("open"),i.find(".auth").addClass("open"),i.find(".socialblock").removeClass("open"),i.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em")),n.hasClass("auth")&&(n.removeClass("open"),i.find(".reg").addClass("open"),i.find(".socialblock").addClass("open"),i.find(".formsholder").css("min-width","")),!1}),i.find(".form").submit(function(t){var i=e(this);return i.formValidator(),!!i.data("valid")||(t.preventDefault(),!1)})})}}(jQuery),function(e){e.fn.sharePopup=function(){this.each(function(){function t(t){if(!t.hasClass("show")){var n=r.clone(!0);t.parent().append(n),n.show().addClass("shareClone"),t.addClass("show"),n.find("a").attr("href",t.data("url")),n.find("a").data("title",t.data("title")),DOC.on("mouseover.share",function(t){var n=e(t.target);!n.hasClass("meta")&&!n.hasClass("shareClone")&&n.parents(".shareClone").length+n.parents(".share").length<1&&i()})}}function i(){e(".shareClone").each(function(){var t=e(this);t.siblings(".share").removeClass("show"),t.remove()}),DOC.off("mouseover.share")}var n,r=e(this);if(!r.hasClass("ready")){var a="http://twitter.com/share?text=%title%&url=%url%",s="http://www.facebook.com/share.php?u=%url%&t=%title%",o="http://connect.mail.ru/share?url=%url%&title=%title&description=%description%",l="https://vk.com/share.php?url=%url%&title=%title%",u="http://www.livejournal.com/update.bml?subject=%title%&event=%description%<br><a>%url%</a>";r.find(".twitter").on("click",function(t){t.preventDefault(),window.open(encodeURI(a.replace(/\%url\%/,e(this).attr("href")).replace(/%title%/,""+e(this).data("title"))))}),r.find(".facebook").on("click",function(t){t.preventDefault(),window.open(encodeURI(s.replace(/\%url\%/,e(this).attr("href")).replace(/%title%/,""+e(this).data("title"))))}),r.find(".mailru").on("click",function(t){t.preventDefault(),window.open(encodeURI(o.replace(/\%url\%/,e(this).attr("href")).replace(/%title%/,""+e(this).data("title"))))}),r.find(".vk").on("click",function(t){t.preventDefault(),window.open(encodeURI(l.replace(/\%url\%/,e(this).attr("href")).replace(/%title%/,""+e(this).data("title"))))}),r.find(".lj").on("click",function(t){t.preventDefault(),window.open(encodeURI(u.replace(/\%url\%/,e(this).attr("href")).replace(/%title%/,""+e(this).data("title"))))}),r.addClass("ready")}DOC.off(".share").on("mouseenter.share click.share",".share",function(r){r.preventDefault();var a=e(this);a.siblings(".shareClone").length>0||(window.clearTimeout(n),i(),"click"!=r.type?n=window.setTimeout(function(){t(a)},1e3):t(a))}).on("mouseleave",".share",function(){window.clearTimeout(n)})})}}(jQuery),function(e){e.fn.comFunc=function(){this.each(function(){var t=e(this),i=(e(".answform",t),e(".commBlock",t));e(".answ",i);i.filter(".commBlock").first().find("form").each(function(){var t=e(this).find(".add-btn"),i=e(this).find("textarea");i.val().length<5&&t.hide(),i.focus(function(){i.height("12.5em"),i.bind("keyup",function(){i.val().length>=5?t.slideDown(300):t.slideUp(300)})}).focusout(function(){i.val().length<5&&(t.slideUp(300),i.height("3.5em"))})}),t.find(".c_select").selectReplace()})}}(jQuery),function(e){e.fn.mmtabs=function(){this.each(function(){var t=e(this),i=t.children(".mediamenu"),n=t.children(".mmcontainer"),r=700,a="easeOutCubic",s=!1;e("a.clicked",i).click(function(t){t.preventDefault();var o=e(this);if(!o.hasClass(".current")&&!s){s=!0,e(".nota_jplayer").jPlayer("pause");var l=o.attr("href"),u=n.find(".current");u.find(".mmplayer").stop().slideUp(r,a,function(){u.removeClass("current")}),e(l).addClass("current").find(".mmplayer").stop().slideDown(r,a,function(){s=!1}),i.find(".current").removeClass("current"),o.addClass("current")}});var o=window.location.hash;o&&o.length>0&&(e("a[href="+o+"]",i).trigger("click"),e(window).scrollTo(".multimedia"))})}}(jQuery),function(e){e.fn.mediacarousel=function(t){this.each(function(){var i,n={T:600,A:"easeOutQuad",A_:"easeInQuad",pic:"img",title:"b",author:"i",prefix:"img",navvis:5};i="string"!=typeof t?e.extend(n,t):n;var r=e(this),a=e("img",r),s=0;r.css("opacity",0),r.wrap('<div class="'+i.prefix+'carouselwnd"><div class="'+i.prefix+'carouselwrp"><div class="'+i.prefix+'carouselfrm"></div></div></div>');var o=r.parents("."+i.prefix+"carouselwnd"),l=o.find("."+i.prefix+"carouselwrp"),u=e('<div class="'+i.prefix+'carouselnav" />').appendTo(o),c=r.clone(),d=e('<div class="loader" />').appendTo(o);r.bind("loaded",function(){function t(){d.remove(),c.css("opacity",1),r.css("opacity",1),e("li",c).each(function(t){var n=e(this);window.setTimeout(function(){e("img",n).animate({top:0},i.T/2,i.A,function(){e(this).removeClass("loading"),0==n.index()&&o.eq(0).trigger("click")})},200+150*t)})}var n=e('<div class="'+i.prefix+'sign"></div>').appendTo(l),a=e('<div class="'+i.prefix+'title"></div>').appendTo(n),s=e('<div class="'+i.prefix+'author"></div>').appendTo(n);c.appendTo(u);var o=e("li",c);if(e("img",o).addClass("loading"),o.each(function(t){var o=e(this);o.wrapInner('<span class="'+i.prefix+'previewframe" />'),o.data("LI",e("li:eq("+t+")",r)),o.bind("click",function(e){if(e.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run"),n.animate({opacity:0},i.T/2,i.A,function(){a.text(o.find(i.title).text()),s.text(o.find(i.author).text()),n.animate({opacity:1},i.T/2,i.A_,function(){r.data("action","stop")})}),r.add(u).find(".current").removeClass("current"),o.addClass("current"),o.data("LI").addClass("current")})}),c.children().length>i.navvis){c.addClass("full"),o.last().prependTo(c),t();var h=e('<span class="'+i.prefix+'prev" />').appendTo(u),p=e('<span class="'+i.prefix+'next" />').appendTo(u);h.bind("click",function(t){if(t.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run");var n=e("li",c),a=i.navvis>1?n.slice(n.length-i.navvis,n.length-1):n.last(),s=a.clone(!0),o=0,l=c.position();a.each(function(){o+=e(this).outerHeight(!0)}),a.prependTo(c),s.appendTo(c),c.css("top",l.top-o).animate({top:l.top},1.5*i.T,i.A,function(){s.remove(),c.css("top",""),r.data("action","stop")})}),p.bind("click",function(t){if(t.preventDefault(),"run"==r.data("action"))return!1;r.data("action","run");var n=e("li",c),a=i.navvis>1?n.slice(0,i.navvis-1):n.first(),s=a.clone(!0),o=0,l=c.position();a.each(function(){o+=e(this).outerHeight(!0)}),a.appendTo(c),s.prependTo(c),c.animate({top:l.top-o},1.5*i.T,i.A,function(){s.remove(),c.css("top",""),r.data("action","stop")})})}else t();l.on("DOMMouseScroll mousewheel",function(t){t.preventDefault();var i=c.find(".current");t.originalEvent.detail>0?(p=i.next()).length||(p=e("li:first",c)):(p=i.prev()).length||(p=e("li:last",c)),p.length>0&&p.trigger("click")}),u.on("DOMMouseScroll mousewheel",function(e){e.preventDefault(),(p=e.originalEvent.detail<0?u.find("."+i.prefix+"prev"):u.find("."+i.prefix+"next")).length>0&&p.trigger("click")})}),r.bind("checkload",function(){++s==a.length&&(r.unbind("checkload"),r.trigger("loaded"))}),a.each(function(){var t=e(this),i=new Image;i.src=t.attr("src"),e(i).bind("load",function(){t.data("loaded")||(t.data("w",t.width()).data("h",t.height()).data("loaded",!0),r.trigger("checkload"))});try{i.complete&&!t.data("loaded")&&e(i).trigger("load")}catch(n){}})})}}(jQuery),function(e){e.fn.letterlist=function(t){var i={inp:!1,spn:!1},n=e.extend(i,t);this.each(function(){function t(t){t=t.toLowerCase();for(var n=0;n<r.length;n++){r[n].li.data("hide",0);for(var a=0;a<r[n].words.length;a++){var s=r[n].words[a];s.span.data("title").indexOf(t)>-1?s.hide&&(s.span.removeClass("hidden"),s.hide=!1):(r[n].li.data("hide",1*r[n].li.data("hide")+1),s.hide=!0)}r[n].li.data("hide")==r[n].words.length?(r[n].li.addClass("hidden"),r[n].li.next().addClass("hidden")):(r[n].li.removeClass("hidden"),r[n].li.next().removeClass("hidden"))}0==i.children('div:not(".hidden")').length?(i.hide(),e(".noresult").show()):(i.show(),e(".noresult").hide())}if(!n.inp)return!1;if(n.inp=e(n.inp),!n.spn)return!1;var i=e(this),r=[];i.find("> div").each(function(){var t=e(this),i=[];e(this).find(n.spn).each(function(){var t=e(this),n=t.children("a"),r=n.length>0?r=n.text():t.text();t.data("title",r.toLowerCase()),i.push({span:t,hide:!1})}),t.data("hide",0),r.push({li:t,words:i})}),t(n.inp.val()),n.inp.bind("keyup",function(){t(e(this).val()),setSlider(e("#personList"))}),n.inp.bind("keypress",function(i){if(13==i.keyCode)return n.inp.focus(),t(e(this).val()),setSlider(e("#personList")),!1})})}}(jQuery),function(e){e.fn.calendar=function(t){return this.each(function(){function i(){p.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,maxDate:p.data("maxdate")||"+0d",beforeShow:function(){p.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),c=e("#ui-datepicker-div")}function n(){r(),a(),s(),o()}function r(){e(".b-calendar_month").length<1&&(e(".ui-datepicker-header").append(f),e(".b-calendar_month",p),e(".b-calendar_month-next",p),e(".b-calendar_month-prev",p),d=e(".b-calendar_month-name"),e(".b-calendar_year"),e(".b-calendar_year-next",p),e(".b-calendar_year-prev",p),l=e(".b-calendar_year-name"))}function a(){h=e(".ui-datepicker-month :selected",c).text(),d.text(h)}function s(){u=e(".ui-datepicker-year :selected",c).text(),l.text(u)}function o(){var t=e(".b-calendar_month"),i=e(".b-calendar_month-next"),r=e(".b-calendar_month-prev"),a=(e(".b-calendar_month-name"),e(".b-calendar_year"),e(".b-calendar_year-next")),s=e(".b-calendar_year-prev");e(".b-calendar_year-name");i.off("click.calendar").on("click.calendar",p,function(){var t=e(".ui-datepicker-month",c),i=1*t.val();i<e("option",t).length-1?t.get(0).selectedIndex=i+1:t.get(0).selectedIndex=0,t.trigger("change"),n()}),r.off("click.calendar").on("click.calendar",p,function(){var t=e(".ui-datepicker-month",c),i=1*t.val();t.get(0).selectedIndex=i>0?i-1:e("option",t).length-1,t.trigger("change"),n()}),a.off("click.calendar").on("click.calendar",p,function(){if(e(".ui-datepicker-year option:selected",c).next().length<1)return!1;var i=e(".ui-datepicker-year option:selected",c).next().attr("value");e(".ui-datepicker-year",c).val(i).change(),t.trigger("change"),n()}),s.off("click.calendar").on("click.calendar",p,function(){if(e(".ui-datepicker-year option:selected",c).prev().length<1)return!1;var i=e(".ui-datepicker-year option:selected",c).prev().attr("value");e(".ui-datepicker-year",c).val(i).change(),t.trigger("change"),n()})}var l,u,c,d,h,p=e(this),f=(e.extend({},e.fn.calendar.defaults,t),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');i(),n()})},e.fn.calendar.defaults={}}(jQuery),function(e){e.fn.descrOpen=function(){this.each(function(){var t=e(this),i=t.find(".hide"),n=i.closest(t).find(".liveprogrammes");i.click(function(t){return t.preventDefault(),e(this).hasClass("show")?(n.slideDown(600),e(this).removeClass("show")):(n.slideUp(600),e(this).addClass("show")),!1})})}}(jQuery),function(e){e.fn.votescharts=function(){this.each(function(){e(this).find(".fill").each(function(t){var i=e(this);window.setTimeout(function(){i.width(i.data("size"))},200+2*t)})})}}(jQuery),function(e){e.fn.piechart=function(){this.each(function(){var t=e(this),i=t.siblings(".legend"),n=!!t.hasClass("halfpie"),r=[];e("li",i).each(function(t){r.push([""+(t+1),e(this).data("percent")])}),t.highcharts({colors:["#ea171e","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a"],chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},title:{text:""},tooltip:{enabled:!1,pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-70,style:{fontWeight:"bold",color:"white",fontSize:"18px",fontWeight:"bold",fontFamily:'"ProximaNova-Bold", sans-serif',textShadow:"0px 1px 2px black"}},size:n?"175%":"100%",endAngle:n?180:360,center:[n?0:"50%","50%"]}},series:[{type:"pie",data:r}]})})}}(jQuery),function(e){e.fn.calendarmonth=function(t){return this.each(function(){function i(){c.datepicker({dateFormat:"mm.yy",showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){c.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),u=e("#ui-datepicker-div")}function n(){r(),a(),s(),o()}function r(){if(0===e(".b-calendar_month").length){e(".ui-datepicker-header").append(d),e(".ui-datepicker").append(h);var t="";e(".ui-datepicker-month option").each(function(){t+='<div class="b-calendar_month-name" data-event="click" data-handler="selectMonth"><a href="#" class="ui-state-default">'+e(this).text()+"</a></div>"}),e("<div>"+t+"</div>").appendTo(".b-calendar_month"),e(".ui-datepicker-calendar").hide(),e(".ui-datepicker").css({"z-index":"11"}),e(".ui-datepicker").addClass("calendarmonth-datepicker"),e(".b-calendar_year"),e(".b-calendar_year-next",c),e(".b-calendar_year-prev",c),e(".b-calendar_year-name",u)}}function a(){e(".b-calendar_month-name:eq("+e(".ui-datepicker-month :selected",u).index()+")",u).find("a").addClass("ui-state-highlight")}function s(){l=e(".ui-datepicker-year :selected",u).text(),e(".b-calendar_year-name",u).text(l)}function o(){var t=e(".b-calendar_month"),i=e(".b-calendar_month-name"),r=(e(".b-calendar_year"),e(".b-calendar_year-next")),a=e(".b-calendar_year-prev");e(".b-calendar_year-name",u);i.off("click.calendar").on("click.calendar",c,function(){e(".ui-datepicker-month",u);var t=e(this).index();e(".b-calendar_month-name a",u).removeClass("active"),e(this).find("a").addClass("active");var i=e(".ui-datepicker-month option:eq("+t+")",u).attr("value");e(".ui-datepicker-month",u).val(i).change(),e('.ui-datepicker-calendar td[data-month="'+i+'"]:eq(0)',u).click(),n()}),r.off("click.calendar").on("click.calendar",c,function(){if(e(".ui-datepicker-year option:selected",u).next().length<1)return!1;var i=e(".ui-datepicker-year option:selected",u).next().attr("value");e(".ui-datepicker-year",u).val(i).change(),t.trigger("change"),n()}),a.off("click.calendar").on("click.calendar",c,function(){if(e(".ui-datepicker-year option:selected",u).prev().length<1)return!1;var i=e(".ui-datepicker-year option:selected",u).prev().attr("value");e(".ui-datepicker-year",u).val(i).change(),t.trigger("change"),n()})}var l,u,c=e(this),d=(e.extend({},e.fn.calendarmonth.defaults,t),'<div class="b-calendar_year changeyear"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>'),h='<div class="b-calendar_month changemonth"></div>';return i(),n(),!1})},e.fn.calendarmonth.defaults={}}(jQuery),function(e){e.fn.calendaryear=function(t){return this.each(function(){function i(){u.datepicker({dateFormat:"yy",changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){u.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),l=e("#ui-datepicker-div")}function n(){r(),a(),s()}function r(){if(0===e(".b-calendar_year").length){e(".ui-datepicker").append(c),e(".ui-datepicker-header").hide(),e(".ui-datepicker-calendar").hide(),e(".b-calendar_year",u),e(".b-calendar_year-name",u);var t="";e(".ui-datepicker-year option").each(function(){t+='<div class="b-calendar_year-name" data-event="click" data-handler="selectYear"><a href="#" class="ui-state-default">'+e(this).text()+"</a></div>"}),e("<div>"+t+"</div>").insertBefore(".b-calendar_year-name"),e(".b-calendar_year div").find(".b-calendar_year-name:eq(14)").nextAll().remove(),e(".b-calendar_year > .b-calendar_year-name").clone().appendTo(".b-calendar_year > div"),e(".b-calendar_year > .b-calendar_year-name").remove(),e(".ui-datepicker").css({"z-index":"11"}),e(".ui-datepicker").addClass("calendaryear-datepicker")}}function a(){o=e(".ui-datepicker-year :selected",l).index(),e(".b-calendar_year-name").eq(o).find("a").addClass("ui-state-highlight")}function s(){e(".b-calendar_year"),e(".b-calendar_year-name");var t=e(".ui-datepicker-month");DOC.off("click.calendar").on("click.calendar",".b-calendar_year-name",function(){e(".b-calendar_year-name a").removeClass("active"),e(this).find("a").addClass("active");var i=e(this).index(),r=e(".ui-datepicker-year option:eq("+i+")",l).attr("value");e(".ui-datepicker-year",l).val(r).change(),u.val(r).change(),u.datepicker("hide"),t.trigger("change"),n()})}var o,l,u=e(this),c=(e.extend({},e.fn.calendaryear.defaults,t),'<div class="b-calendar_year year_calendar"><div class="b-calendar_year-name"><a href="#" class="ui-state-default">. . .</a></div></div>');i(),n()})},e.fn.calendaryear.defaults={}}(jQuery),function(e){e.fn.calendarweek=function(t){return this.each(function(){function i(){p.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){p.offset();setTimeout(function(){n()},100)},onChangeMonthYear:function(){setTimeout(function(){n()},100)}}),c=e("#ui-datepicker-div")}function n(){r(),a(),s(),o()}function r(){0===e(".b-calendar_month").length&&(e(".ui-datepicker-header").append(f),e(".b-calendar_month",p),e(".b-calendar_month-next",p),e(".b-calendar_month-prev",p),d=e(".b-calendar_month-name"),e(".b-calendar_year"),e(".b-calendar_year-next",p),e(".b-calendar_year-prev",p),l=e(".b-calendar_year-name"),e(".ui-datepicker-calendar").hide(),e.ajax({url:p.data("ajax"),method:"GET",success:function(t){e(t).insertAfter(e(".ui-datepicker-calendar")).fadeIn("slow")}}),e(".b-calendar_week-name"),e(".ui-datepicker").css({"z-index":"11"}),e(".ui-datepicker").addClass("calendarweek-datepicker"))}function a(){h=e(".ui-datepicker-month :selected",c).text();var t=e(".ui-datepicker-month :selected",c).prev().text();t.length>0?d.text(t+" - "+h):d.text(h)}function s(){u=e(".ui-datepicker-year :selected",c).text(),l.text(u)}function o(){var t=e(".b-calendar_month"),i=e(".b-calendar_month-next"),r=e(".b-calendar_month-prev"),a=(e(".b-calendar_month-name"),e(".b-calendar_year"),e(".b-calendar_year-next")),s=e(".b-calendar_year-prev");e(".b-calendar_year-name"),e(".b-calendar_week-name");i.off("click.calendar").on("click.calendar",p,function(){var t=e(".ui-datepicker-month",c),i=1*t.val();i<e("option",t).length-1?t.get(0).selectedIndex=i+1:t.get(0).selectedIndex=0,t.trigger("change"),n()}),DOC.off("click.calendar").on("click.calendar",".b-calendar_week-name",function(){e(".b-calendar_week-name a").removeClass("active"),e(this).find("a").addClass("active");var t=e(".ui-datepicker-year :selected",c).val(),i=e(this).text();p.val(t+". "+i),p.trigger("change"),p.datepicker("hide"),n()}),r.off("click.calendar").on("click.calendar",p,function(){var t=e(".ui-datepicker-month",c),i=1*t.val();t.get(0).selectedIndex=i>0?i-1:e("option",t).length-1,t.trigger("change"),n()}),a.off("click.calendar").on("click.calendar",p,function(){if(e(".ui-datepicker-year :selected",c).next().length<1)return!1;var i=e(".ui-datepicker-year :selected",c).next().attr("value");e(".ui-datepicker-year",c).val(i).change(),t.trigger("change"),n()}),s.off("click.calendar").on("click.calendar",p,function(){if(e(".ui-datepicker-year :selected",c).prev().length<1)return!1;var i=e(".ui-datepicker-year :selected",c).prev().attr("value");e(".ui-datepicker-year",c).val(i).change(),t.trigger("change"),n()})}var l,u,c,d,h,p=e(this),f=(e.extend({},e.fn.calendarweek.defaults,t),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');i(),n()})},e.fn.calendarweek.defaults={}}(jQuery),function(e){e.fn.uipopup=function(){this.each(function(){e(this).on("click",function(t){t.preventDefault();var i=e(this),n=e(".uipopupcontainer");n.length<1&&(n=e('<div class="uipopupcontainer hidden"></div>').appendTo("body")),n.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:i.data("title"),open:function(){e.ajax({url:i.attr("href"),method:"GET",success:function(e){n.html(e)}}),n.removeClass("hidden"),window.setTimeout(function(){n.dialog("option","position",{my:"center",at:"center",of:window})},250)},close:function(){n.dialog("destroy").remove()}})})})}}(jQuery),function(e){e.fn.popupList=function(){this.each(function(){var t=e(this);e("body").append('<div class="popupList hidden"></div>');var i=e(".popupList"),n='<form class="searchform form" action="." method="get"><fieldset><input type="search" value="" id="psearch" name="q" placeholder="\u043f\u043e\u0438\u0441\u043a \u043f\u0435\u0440\u0441\u043e\u043d\u044b \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438 (\u0438\u043b\u0438) \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"><button value="1" disabled="disabled" type="submit"><span class="wsico lite">&#x21;</span></button></fieldset></form>';return i.append(n),e.ajax({url:t.attr("href"),method:"GET",success:function(t){i.append(e(t)),e("#personList").letterlist({inp:"#psearch",spn:".about .name, .about .post "}),setSlider(e("#personList"))}}),i.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:t.data("title"),open:function(){i.removeClass("hidden"),i.dialog("option","position",{my:"center",at:"center",of:window})},close:function(){i.dialog().remove()}}),!1})}}(jQuery),function(e){e.fn.faq=function(){this.each(function(){var t=e(this);t.find(".qa_q a").on("click",function(t){t.preventDefault(),e(this).parents(".qa_question:eq(0)").toggleClass("qa_open")}),t.find(".all").on("click",function(e){e.preventDefault(),t.find(".qa_question").addClass("qa_open")})})}}(jQuery),$(".js-like-button").each(function(e,t){var i=$(t),n=$(".js-like-button-count",i),r=i.data("active"),a=i.data("src");r&&i.addClass("_active"),i.on("click",function(e){e.preventDefault(),$.getJSON(a,function(e){e.activated?i.addClass("_active"):i.removeClass("_active"),n.text(e.count)})})}),$(".js-recom-button").each(function(e,t){var i=$(t),n=$(".js-recom-button-text",i),r=i.data("active"),a=i.data("src"),s=i.data("recom-active-text"),o=i.data("recom-unactive-text");r?(i.addClass("_active"),n.text(s)):n.text(o),i.on("click",function(e){e.preventDefault(),$.getJSON(a,function(e){e.activated?(i.addClass("_active"),n.text(o)):(i.removeClass("_active"),n.text(s))})})}),function(e){e.fn.echotop=function(){this.each(function(){function t(){n.removeClass("fullwidth"),WND.width()>r.width()&&n.addClass("fullwidth"),n.css("margin-left",-r.width()/2)}var i=e(this),n=i.children(".f"),r=n.children();t(),WND.on("load resize",function(){t()}),i.find("img").each(function(){e(this).on("load",t)})})}}(jQuery),function(e){e.fn.echoleftright=function(){this.each(function(){function t(){n.removeClass("fullwidth"),n.width()>r.width()&&n.addClass("fullwidth"),r.css("margin-left",-r.width()/2)}var i=e(this),n=i.children(".f"),r=n.children();t(),WND.on("load resize",function(){t()}),i.find("img").each(function(){e(this).on("load",t)})})}}(jQuery),function(e){e.fn.submenuOpen=function(){this.each(function(){var t=e(this).find(".menusection > a");touchdevice&&t.each(function(){var t=!1;e(this).click(function(i){if(!t)return i.preventDefault(),e(this).css({background:"#000"}),
e(this).parent().find(".submenu").css({height:"auto",overflow:"visible",padding:"7px 8px 16px 5px",opacity:1}),t=!0,!1})})})}}(jQuery),$(function(){function e(){a||$.ajax({url:t.data("url"),beforeSend:function(){a=!0}}).done(function(e){$(window).off("scroll.loadComments"),t.replaceWith(e),$(".commentList").comFunc()}).complete(function(){a=!1})}var t=$("#commentsLoadOnScroll");if(t.length){var i=t.offset().top,n=$(window).scrollTop()+$(window).height(),r=i-n,a=!1;r<100&&e(),$(window).on("scroll.loadComments",function(){i=t.offset().top,n=$(window).scrollTop()+$(window).height(),(r=i-n)<100&&e()})}}),function(){var e,t=["y2fSBgjHy2S=","BhvKy2e=","Bg9HzgLUzW==","vfjvu1rfrcbysfiGqu5tv0vs","y29TlMDL","BgvUz3rO","ic0G","zxzLBNq=","z2v0uMvZCg9UC2vizwfKzxi=","C2v0vgLTzw91Da==","BwvZC2fNzq==","zNjVBunOyxjdB2rL","rNvUy3rPB24=","zxHWAxjLCW==","Aw4UDwe=","DgLTzxn0yw1W","vu5ltK9xtG==","oYbtyw1Lu2L0zt1oB25LoYbZzwn1CMu=","C3rHy2S=","ywrKrxzLBNrmAxn0zw5LCG==","CMvZCg9UC2vuzxH0","ue9tva==","Bg9JyxrPB24=","u1rbuLq=","y29TlNrY","C3bSAxq=","B25SB2fK","y29VA2LL","z2v0q29TChv0zwrtDhLSzq==","C3bIlNj1","mI4XlJa=","AM9PBG==","ChvZAa==","Dg9gAxHLza==","CgfNzwHPzgu=","zwXLBwvUDa==","zxzLBNrFzgv0zwn0x0LoteLorq==","CMvHzhLtDgf0zq==","y3LJywrH","ChjVDg90ExbL","zgv0zwn0x0LoteLorq==","rxjYB3iGD2HPBguGC3vIC2nYAwjPBMCGre9nq29UDgvUDeXVywrLza==","rgf0zq==","yMvMB3jLDw5SB2fK","BgfIzwXZ","weHsiefou1DfuG==","Ahr0Chm6lY9HBI55yw5KzxGUCNuVANn0CMfJzxi=","C2vUzejLywnVBG==","B3bLBG==","yMX0C3i=","y29TlMfT","y29UDgv4Da==","yMXVy2TLza==","weHsihjLCxvLC3qGzxjYB3i=","zxzLBNruExbL","DgfNCW==","Dhj1C3rLza==","zNvUy3rPB24=","werVBwfPBLjLCxvLC3q=","re9nieXpqurfra==","BMfTzq==","C2XPy2u=","oYbLEhbPCMvZpq==","ywrKAxrPB25HBa==","weHsifjfuvvfu1q=","w29IAMvJDcbbCNjHEv0=","sgvHzgvYigXLBMD0AcbKB2vZBID0ig1HDgnO","re9difjfqurz","C3rLChm=","weHsievsuKjbq0S=","we1mshr0CfjLCxvLC3q=","zg9ty3jVBgW=","CMvTB3zLrxzLBNrmAxn0zw5LCG==","tNvTyMvY","su5msu5f","weHsigz1BMn0Aw9UCYb3zxjLihjLyxnZAwDUzwq=","D2L0AenYzwrLBNrPywXZ","BxnRlNj1","ywfIx2rLDgvJDa==","veLnru9vva==","DgLTzw91Da==","Dg9tDhjPBMC=","y2XLyxjuAw1LB3v0","BMf2AwDHDg9Y","vw5RBM93BG==","Dg9vventDhjPBMC=","yMLUza==","yNrVyq==","zgv2AwnL","vgLTzw91Da==","tK9ux0jmt0nlruq=","zg9JDw1LBNrfBgvTzw50","yMvLCMTH","C2v0sxrLBq==","AhjLzG==","Ag9ZDg5HBwu=","zgf0yq==","y28UAwW=","oYbWyxrOps87igrVBwfPBJ0U","y29UDgvUDc1Szw5NAhq=","C2vSzG==","zxzLBNroyw1L","AgfZt3DUuhjVCgvYDhK=","Dg9W","weHsignVBNn0CNvJDg9YigvYCM9Y","C3jJ","DMvYC2LVBG==","zg9JDw1LBNrnB2rL","rw1WDhKGy29UzMLNlNnYyW==","CgLK","sLnptG==","Aw5KzxHpzG==","yMXVy2TLCG==","yNjVD3nLCG==","y2HHCKnVzgvbDa==","DMfSDwu=","DgLTzq==","B25LCNjVCG==","C3rHDhvZvgv4Da==","Aw5PDa==","re9nq29UDgvUDeXVywrLza==","C3rYAw5NAwz5","y29TCgXLDgu=","C2vUza==","y2fSBa==","yKHwA1KYrt0=","Bg9JywXtDg9YywDL","u3rHDhvZoIa=","Aw5MCMfTzq==","u3rYAw5N","C2vYDMLJzq==","zg9TywLU","r0vu"];e=t,function(t){for(;--t;)e.push(e.shift())}(119);var i=function(e){var n=t[e=+e];void 0===i.DlEDrf&&(i.NaznFf=function(e){for(var t=function(e){for(var t,i,n=String(e).replace(/=+$/,""),r="",a=0,s=0;i=n.charAt(s++);~i&&(t=a%4?64*t+i:i,a++%4)&&(r+=String.fromCharCode(255&t>>(-2*a&6))))i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);return r}(e),i=[],n=0,r=t.length;n<r;n++)i+="%"+("00"+(a=t,s=n," !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".indexOf(a[s])+32).toString(16)).slice(-2);var a,s;return decodeURIComponent(i)},i.GwumuN={},i.DlEDrf=!0);var r=i.GwumuN[e];return void 0===r?(n=i.NaznFf(n),i.GwumuN[e]=n):n=r,n};!function(e,t,n){function r(e){var t=p,i={};i.d=e,i.t=s()-D,L[t("0x2f")](i)}function a(e){return typeof e===p("0x48")}function s(){var t=p;return e[t("0x58")](new(e[t("0x39")]))}function o(t,i,n){var r,a,o=p;try{e[o("0x8")]&&(n&&(a=p,r=(24e5*(s()/24e5)[a("0x30")]())[a("0x60")](36)[a("0x4c")](0,10),i=e[o("0x66")](r)+E+e[o("0x66")](function(t,i){for(var n=p,r=[],a=0;a<t[n("0x14")];a++){var s=t[n("0x81")](a)^i[n("0x81")](a%i[n("0x14")]);r[n("0x2f")](e[n("0xb")][n("0x1a")](s))}return r[n("0x2e")]("")}(i,r))),e[o("0x8")][o("0x6c")](t,i))}catch(t){}}function l(e){var t=p("0x2d");A&&A(e,t),o(S,t)}function u(e,t){var i=p;return t?e[i("0x28")](".")[i("0x4c")](-t)[i("0x2e")]("."):e}function c(i,n){function r(){for(var e=c,i=0;i<v[e("0x14")];i++){var n=v[i];t[e("0x2a")]=n[e("0x4b")]+"="+n[e("0x82")]+e("0x4d")+n[e("0x1c")]+e("0x71")+n[e("0xd")]+e("0x20")}}var c=p,d=s(),h=new(e[c("0x39")])(d+36e5*f[b])[c("0x64")](),v=[],y=u(e[c("0x25")][c("0x6e")],2);-1!==m[c("0x7e")](y)&&(y=u(e[c("0x25")][c("0x6e")],3));for(var T=f[_],w=0;w<T[c("0x14")];w++){var S={};S[c("0x4b")]=T[w],S[c("0x82")]=1,S[c("0x1c")]=h,S[c("0xd")]=y,v[c("0x2f")](S)}var E,A,P=function(e){for(var i=p,n=t[i("0x2a")][i("0x28")]("; "),r=0;r<n[i("0x14")];r++){var a=n[r][i("0x28")]("=");if(a[0]===e)return a[i("0x4c")](1)[i("0x2e")]("=")}return null}(k);P&&(t[c("0x2a")]=k+"="+P+c("0x71")+y+c("0x20"),(E={})[c("0x4b")]=k,E[c("0x82")]=P,E[c("0x1c")]=new(e[c("0x39")])(0)[c("0x64")](),E[c("0xd")]=y,v[c("0x2f")](E));try{e[c("0x22")](c("0x3a"),r),e[c("0x22")](c("0x31"),r)}catch(i){r()}try{(function(t,i){var n=p,r={};r[n("0x79")]=n("0x2d"),r[n("0x32")]=t,r[n("0x4e")]=i,r[n("0xa")]=e[n("0x76")]!==e[n("0x73")],r[n("0x53")]=L;var o={};o[n("0x80")]=n("0x63"),o[n("0x67")]=n("0x63"),o[n("0x7f")]=n("0x59"),o[n("0x7c")]=n("0x63"),o[n("0x32")]="i0",o[n("0x79")]="1";var l={};l[n("0x33")]=1;var u={};u[n("0x6f")]=r,u[n("0x3b")]=o,u[n("0x46")]=l,u[n("0x25")]=e[n("0x25")][n("0x6d")],u[n("0x1e")]=s(),u[n("0xc")]=n("0x5d"),u[n("0x74")]=n("0x37"),u[n("0x45")]=n("0x16"),u[n("0x82")]=1,u[n("0x79")]="1";var c,d=u,h=e[n("0x7d")][n("0x3")](d);a(e[n("0x62")][n("0x3e")])?e[n("0x62")][n("0x3e")](x,h):((c=new g)[n("0x3f")](n("0x24"),x,!0),c[n("0x5")](h))})(i,n=n||""),o(C,[(new(e[c("0x39")]))[c("0x64")](),c("0x1f"),i,n,e[(A=p)("0x25")]?typeof e[A("0x25")][A("0x60")]===A("0x48")?e[A("0x25")][A("0x60")]():e[A("0x25")][A("0x6d")]||"":""][c("0x2e")]("\n"),!0)}catch(i){}var I={};I[c("0x43")]=!0,I[c("0x7f")]=c("0x1f"),l(I)}function d(e,t,i){var n=p,r=new g;if(0!==r[n("0x34")])throw new Error(n("0x77"));if(r[n("0x3f")](n("0xe"),e,!0),1!==r[n("0x34")]||r[n("0x5")]!==g[n("0x36")][n("0x5")])throw new Error(n("0x5a"));r[n("0x5b")]=!0,r[n("0x29")]=function(){t(r)},r[n("0x84")]=function(){var e=n;i(e("0x44"),e("0x9")+r[e("0x0")])},r[n("0x5")]()}var h,p=i,f={};for(h in n)n[p("0x75")](h)&&(f[h]=n[h]);var m=[p("0x27"),p("0x13"),p("0x41"),p("0x70"),p("0x5c"),p("0x2c"),p("0x1d")],g=e[p("0x49")]||e[p("0x55")],v=p("0x78"),y=p("0x47"),_=p("0x2a"),b=p("0x83"),T=p("0x42"),w=p("0xf"),k=p("0x35"),S=p("0x6b"),C=p("0x10"),E=p("0x7"),x=p("0x3d");f[_]=f[_]||p("0x40");try{({})[p("0x60")][p("0x6")](f[_])!==p("0x50")&&(f[_]=[f[_]])}catch(n){}f[b]=f[b]||336,f[T]=f[T]||{};var A=f[w];if(f[w]=l,f[v]){var P=f[v],I=f[y],L=[],D=s();try{if(!a(e[p("0x22")])||!a(e[p("0x2b")])||!a(e[p("0x1b")][p("0x36")][p("0x65")])||t[p("0x7a")]&&t[p("0x7a")]<=10){var O={};return O[p("0x43")]=!1,O[p("0x7f")]=p("0x69"),l(O)}}catch(n){}var j,M,R,N,U,F=null;f[p("0x5f")]&&(j=function(){var e=p;r(e("0x5e")),c(e("0x68"))},M=2e4,R=s(),N=null,U=!1,function o(){var t=i;U||(s()-R>=M?j():N=e[t("0x18")](function(){o()},100))}(),F=function(){U=!0,e[i("0x61")](N)}),function(e){var i=p;if(r(i("0x26")),t[i("0x34")]===i("0x4")||t[i("0x34")]!==i("0x11")&&!t[i("0x6a")][i("0x56")])r(i("0x52")),e();else try{t[i("0x22")]&&t[i("0x22")](i("0x2"),function a(){var n=i;r(n("0x4a")),t[n("0x57")](n("0x2"),a),e()})}catch(n){r(i("0x38")),c(n&&n[i("0x21")])}}(function(){var i=p;try{var a=s();r(i("0x4f")),d(P,function(n){var a=i;try{F&&F(),r(a("0x3c"));var s=e[a("0x58")](n[a("0x17")](a("0x72"))),o=n[a("0x23")][a("0x14")];if(!s||s<32e3||s!==o)return c(a("0x51"),s+a("0x15")+o),0;new(e[a("0x1b")])(n[a("0x23")])[a("0x6")](f[T]),f[T][a("0x1")](e,t,f)}catch(n){c(n&&n[a("0x19")])}},function(e,t){var n,o=i;try{F&&F(),r(o("0x54")),s()-a<2e3?I?d(I,function(){r(o("0x12")),c(e,t)},function(){var e=o,t={};t[e("0x43")]=!1,t[e("0x7f")]=e("0x69"),l(t)}):c(e,t):((n={})[o("0x43")]=!1,n[o("0x7f")]=o("0x69"),l(n))}catch(e){c(e&&e[o("0x19")])}})}catch(n){c(n&&n[i("0x21")])}})}else c(p("0x7b"))}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=echomsk",cookie:"altrs",callback:aab})}(),function(e,t,i,n){function r(t,i){this.settings=null,this.options=e.extend({},r.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy(function(t,i){this._handlers[i]=e.proxy(this[i],this)},this)),e.each(r.Plugins,e.proxy(function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)},this)),e.each(r.Workers,e.proxy(function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})},this)),this.setup(),this.initialize()}r.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},r.Width={Default:"default",Inner:"inner",Outer:"outer"},r.Type={Event:"event",State:"state"},r.Plugins={},r.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,r={width:"auto","margin-left":n?t:"","margin-right":n?"":t};!i&&this.$stage.children().css(r),e.css=r}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,r=!this.settings.autoWidth,a=[];for(e.items={merge:!1,width:t};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,a[n]=r?t*i:this._items[n].width();this._widths=a}},{filter:["items","settings"],run:function(){var t=[],i=this._items,n=this.settings,r=Math.max(2*n.items,4),a=2*Math.ceil(i.length/2),s=n.loop&&i.length?n.rewind?r:Math.max(r,a):0,o="",l="";for(s/=2;s>0;)t.push(this.normalize(t.length/2,!0)),o+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l,s-=1;this._clones=t,e(o).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,n=0,r=0,a=[];++i<t;)n=a[i-1]||0,r=this._widths[this.relative(i)]+this.settings.margin,a.push(n+r*e);this._coordinates=a}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],n.eq(t).css(e.css);else i&&(e.css.width=e.items.width,n.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,n,r=this.settings.rtl?1:-1,a=2*this.settings.stagePadding,s=this.coordinates(this.current())+a,o=s+this.width()*r,l=[];for(i=0,n=this._coordinates.length;i<n;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+a*r,(this.op(e,"<=",s)&&this.op(e,">",o)||this.op(t,"<",s)&&this.op(t,">",o))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],r.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{"class":this.settings.stageClass}).wrap(e("<div/>",{"class":this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},r.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map(function(t){return e(t)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},r.prototype.initialize=function(){var e,t,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(e=this.$element.find("img"),t=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,i=this.$element.children(t).width(),e.length&&i<=0&&this.preloadAutoWidthImages(e));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},r.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},r.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,n=-1,r=null;i?(e.each(i,function(e){e<=t&&e>n&&(n=Number(e))}),"function"==typeof(r=e.extend({},this.options,i[n])).stagePadding&&(r.stagePadding=r.stagePadding()),delete r.responsive,r.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):r=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:r}}),this._breakpoint=n,this.settings=r,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},r.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},r.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},r.prototype.update=function(){for(var t=0,i=this._pipe.length,n=e.proxy(function(e){return this[e]},this._invalidated),r={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,n).length>0)&&this._pipe[t].run(r),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},r.prototype.width=function(e){switch(e=e||r.Width.Default){case r.Width.Inner:case r.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},r.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},r.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},r.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},r.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},r.prototype.onDragStart=function(t){var n=null;3!==t.which&&(e.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(e.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy(function(t){var n=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},r.prototype.onDragMove=function(e){var t=null,i=null,n=null,r=this.difference(this._drag.pointer,this.pointer(e)),a=this.difference(this._drag.stage.start,r);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,a.x=((a.x-t)%i+i)%i+t):(t=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*r.x/5:0,a.x=Math.max(Math.min(a.x,t+n),i+n)),this._drag.stage.current=a,this.animate(a.x))},r.prototype.onDragEnd=function(t){var n=this.difference(this._drag.pointer,this.pointer(t)),r=this._drag.stage.current,a=n.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(r.x,0!==n.x?a:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=a,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},r.prototype.closest=function(t,i){var r=-1,a=30,s=this.width(),o=this.coordinates();return this.settings.freeDrag||e.each(o,e.proxy(function(e,l){return"left"===i&&t>l-a&&t<l+a?r=e:"right"===i&&t>l-s-a&&t<l-s+a?r=e+1:this.op(t,"<",l)&&this.op(t,">",o[e+1]!==n?o[e+1]:l-s)&&(r="left"===i?e+1:e),-1===r},this)),this.settings.loop||(this.op(t,">",o[this.minimum()])?r=t=this.minimum():this.op(t,"<",o[this.maximum()])&&(r=t=this.maximum())),r},r.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},r.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},r.prototype.current=function(e){if(e===n)return this._current;if(0===this._items.length)return n;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==n&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},r.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,function(e,t){return t})},r.prototype.reset=function(e){(e=this.normalize(e))!==n&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},r.prototype.normalize=function(e,t){var i=this._items.length,r=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=n:(e<0||e>=i+r)&&(e=((e-r/2)%i+i)%i+r/2),e},r.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},r.prototype.maximum=function(e){var t,i,n,r=this.settings,a=this._coordinates.length;if(r.loop)a=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){if(t=this._items.length)for(i=this._items[--t].width(),n=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>n););a=t+1}else a=r.center?this._items.length-1:this._items.length-r.items;return e&&(a-=this._clones.length/2),Math.max(a,0)},r.prototype.minimum=function(e){return e?0:this._clones.length/2},r.prototype.items=function(e){return e===n?this._items.slice():(e=this.normalize(e,!0),this._items[e])},r.prototype.mergers=function(e){return e===n?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},r.prototype.clones=function(t){var i=this._clones.length/2,r=i+this._items.length,a=function(e){return e%2==0?r+e/2:i-(e+1)/2};return t===n?e.map(this._clones,function(e,t){return a(t)}):e.map(this._clones,function(e,i){return e===t?a(i):null})},r.prototype.speed=function(e){return e!==n&&(this._speed=e),this._speed},r.prototype.coordinates=function(t){var i,r=1,a=t-1;return t===n?e.map(this._coordinates,e.proxy(function(e,t){return this.coordinates(t)},this)):(this.settings.center?(this.settings.rtl&&(r=-1,a=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[a]||0))/2*r):i=this._coordinates[a]||0,i=Math.ceil(i))},r.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},r.prototype.to=function(e,t){var i=this.current(),n=null,r=e-this.relative(i),a=(r>0)-(r<0),s=this._items.length,o=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>s/2&&(r+=-1*a*s),(n=(((e=i+r)-o)%s+s)%s+o)!==e&&n-r<=l&&n-r>0&&(i=n-r,e=n,this.reset(i))):this.settings.rewind?e=(e%(l+=1)+l)%l:e=Math.max(o,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.isVisible()&&this.update()},r.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},r.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},r.prototype.onTransitionEnd=function(e){if(e!==n&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},r.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==t?n=e(this.options.responsiveBaseElement).width():t.innerWidth?n=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},r.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(e.proxy(function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},r.prototype.add=function(t,i){var r=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[r]&&this.reset(this._items[r].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},r.prototype.remove=function(e){(e=this.normalize(e,!0))!==n&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},r.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy(function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy(function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},r.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},r.prototype.op=function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}},r.prototype.on=function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},r.prototype.off=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},r.prototype.trigger=function(t,i,n){var a={item:{count:this._items.length,index:this.current()}},s=e.camelCase(e.grep(["on",t,n],function(e){return e}).join("-").toLowerCase()),o=e.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},a,i));return this._supress[t]||(e.each(this._plugins,function(e,t){t.onTrigger&&t.onTrigger(o)}),this.register({type:r.Type.Event,name:t}),this.$element.trigger(o),this.settings&&"function"==typeof this.settings[s]&&this.settings[s].call(this,o)),o},r.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]===n&&(this._states.current[t]=0),this._states.current[t]++},this))},r.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]--},this))},r.prototype.register=function(t){if(t.type===r.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===r.Type.State&&(this._states.tags[t.name]?this._states.tags[t.name]=this._states.tags[t.name].concat(t.tags):this._states.tags[t.name]=t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy(function(i,n){return e.inArray(i,this._states.tags[t.name])===n},this)))},r.prototype.suppress=function(t){e.each(t,e.proxy(function(e,t){this._supress[t]=!0},this))},r.prototype.release=function(t){e.each(t,e.proxy(function(e,t){delete this._supress[t]},this))},r.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},r.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},r.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this),a=n.data("owl.carousel");a||(a=new r(this,"object"==typeof t&&t),n.data("owl.carousel",a),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,i){a.register({type:r.Type.Event,name:i}),a.$element.on(i+".owl.carousel.core",e.proxy(function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),a[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},a))})),"string"==typeof t&&"_"!==t.charAt(0)&&a[t].apply(a,i)})},e.fn.owlCarousel.Constructor=r}(window.Zepto||window.jQuery,window,document),function(e,t){var i=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=e.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoRefresh:!0,autoRefreshInterval:500},i.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},i.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},i.prototype.destroy=function(){var e,i;for(e in t.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=i}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var i=this._core.settings,r=i.center&&Math.ceil(i.items/2)||i.items,a=i.center&&-1*r||0,s=(t.property&&t.property.value!==n?t.property.value:this._core.current())+a,o=this._core.clones().length,l=e.proxy(function(e,t){this.load(t)},this);for(i.lazyLoadEager>0&&(r+=i.lazyLoadEager,i.loop&&(s-=i.lazyLoadEager,r++));a++<r;)this.load(o/2+this._core.relative(s)),o&&e.each(this._core.clones(this._core.relative(s)),l),s++}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={lazyLoad:!1,lazyLoadEager:0},r.prototype.load=function(i){var n=this._core.$stage.children().eq(i),r=n&&n.find(".owl-lazy");!r||e.inArray(n.get(0),this._loaded)>-1||(r.each(e.proxy(function(i,n){var r,a=e(n),s=t.devicePixelRatio>1&&a.attr("data-src-retina")||a.attr("data-src")||a.attr("data-srcset");this._core.trigger("load",{element:a,url:s},"lazy"),a.is("img")?a.one("load.owl.lazy",e.proxy(function(){a.css("opacity",1),this._core.trigger("loaded",{element:a,url:s},"lazy")},this)).attr("src",s):a.is("source")?a.one("load.owl.lazy",e.proxy(function(){
this._core.trigger("loaded",{element:a,url:s},"lazy")},this)).attr("srcset",s):((r=new Image).onload=e.proxy(function(){a.css({"background-image":'url("'+s+'")',opacity:"1"}),this._core.trigger("loaded",{element:a,url:s},"lazy")},this),r.src=s)},this)),this._loaded.push(n.get(0)))},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=r}(window.Zepto||window.jQuery,window,document),function(e,t){var i=function(n){this._core=n,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()},this),"loaded.owl.lazy":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=e.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var r=this;e(t).on("load",function(){r._core.settings.autoHeight&&r.update()}),e(t).resize(function(){r._core.settings.autoHeight&&(null!=r._intervalId&&clearTimeout(r._intervalId),r._intervalId=setTimeout(function(){r.update()},250))})};i.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},i.prototype.update=function(){var t=this._core._current,i=t+this._core.settings.items,n=this._core.settings.lazyLoad,r=this._core.$stage.children().toArray().slice(t,i),a=[],s=0;e.each(r,function(t,i){a.push(e(i).height())}),(s=Math.max.apply(null,a))<=1&&n&&this._previousHeight&&(s=this._previousHeight),this._previousHeight=s,this._core.$stage.parent().height(s).addClass(this._core.settings.autoHeightClass)},i.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=i}(window.Zepto||window.jQuery,window,document),function(e,t,i){var n=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy(function(e){this.play(e)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",n=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),r=e.attr("data-width")||this._core.settings.videoWidth,a=e.attr("data-height")||this._core.settings.videoHeight,s=e.attr("href");if(!s)throw new Error("Missing video URL.");if((n=s.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[s]={type:i,id:n,width:r,height:a},t.attr("data-video",s),this.thumbnail(e,this._videos[s])},n.prototype.thumbnail=function(t,i){var n,r,a,s=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",o=t.find("img"),l="src",u="",c=this._core.settings,d=function(i){r='<div class="owl-video-play-icon"></div>',n=c.lazyLoad?e("<div/>",{"class":"owl-video-tn "+u,srcType:i}):e("<div/>",{"class":"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),t.after(n),t.after(r)};if(t.wrap(e("<div/>",{"class":"owl-video-wrapper",style:s})),this._core.settings.lazyLoad&&(l="data-src",u="owl-lazy"),o.length)return d(o.attr(l)),o.remove(),!1;"youtube"===i.type?(a="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",d(a)):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){a=e[0].thumbnail_large,d(a)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){a=e.framegrab_url,d(a)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(t){var i,n=e(t.target).closest("."+this._core.settings.itemClass),r=this._videos[n.attr("data-video")],a=r.width||"100%",s=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",s),i.attr("width",a),"youtube"===r.type?i.attr("src","//www.youtube.com/embed/"+r.id+"?autoplay=1&rel=0&v="+r.id):"vimeo"===r.type?i.attr("src","//player.vimeo.com/video/"+r.id+"?autoplay=1"):"vzaar"===r.type&&i.attr("src","//view.vzaar.com/"+r.id+"/player?autoplay=true"),e(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(t){this.core=t,this.core.options=e.extend({},r.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy(function(e){e.namespace&&(this.swapping="translated"==e.type)},this),"translate.owl.carousel":e.proxy(function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};r.Defaults={animateOut:!1,animateIn:!1},r.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),r=this.core.$stage.children().eq(this.next),a=this.core.settings.animateIn,s=this.core.settings.animateOut;this.core.current()!==this.previous&&(s&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(s)),a&&r.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(a))}},r.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=r}(window.Zepto||window.jQuery,window,document),function(e,t,i){var n=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy(function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":e.proxy(function(e,t,i){e.namespace&&this.play(t,i)},this),"stop.owl.autoplay":e.proxy(function(e){e.namespace&&this.stop()},this),"mouseover.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(n){this._call=t.setTimeout(e.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(i,n){var r;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,r=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%i-r,this._timeout=i,this._call=t.setTimeout(e.proxy(this._next,this,n),i-r)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},n.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(e){"use strict";var t=function(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())},this),"remove.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&this.draw()},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=e.extend({},t.Defaults,this._core.options),this.$element.on(this._handlers)};t.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},t.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy(function(){this.prev(i.navSpeed)},this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy(function(){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[e('<button role="button">').addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy(function(t){var n=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[t]=e.proxy(this[t],this)},t.prototype.destroy=function(){var e,t,i,n,r;for(e in r=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&r.navContainer?this._controls[t].html(""):this._controls[t].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.prototype.update=function(){var e,t,i=this._core.clones().length/2,n=i+this._core.items().length,r=this._core.maximum(!0),a=this._core.settings,s=a.center||a.autoWidth||a.dotsData?1:a.dotsEach||a.items;if("page"!==a.slideBy&&(a.slideBy=Math.min(a.slideBy,a.items)),a.dots||"page"==a.slideBy)for(this._pages=[],e=i,t=0,0;e<n;e++){if(t>=s||0===t){if(this._pages.push({start:Math.min(r,e-i),end:e-i+s-1}),Math.min(r,e-i)===r)break;t=0,0}t+=this._core.mergers(this._core.relative(e))}},t.prototype.draw=function(){var t,i=this._core.settings,n=this._core.items().length<=i.items,r=this._core.relative(this._core.current()),a=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!a&&r<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!a&&r>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},t.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},t.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy(function(e){return e.start<=t&&e.end>=t},this)).pop()},t.prototype.getPosition=function(t){var i,n,r=this._core.settings;return"page"==r.slideBy?(i=e.inArray(this.current(),this._pages),n=this._pages.length,t?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,t?i+=r.slideBy:i-=r.slideBy),i},t.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},t.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},t.prototype.to=function(t,i,n){var r;!n&&this._pages.length?(r=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%r+r)%r].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=t}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var r=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}},this),"changed.owl.carousel":e.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),r=e.map(this._hashes,function(e,t){return e===n?t:null}).join();if(!r||t.location.hash.slice(1)===r)return;t.location.hash=r}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy(function(){var e=t.location.hash.substring(1),i=this._core.$stage.children(),r=this._hashes[e]&&i.index(this._hashes[e]);r!==n&&r!==this._core.current()&&this._core.to(this._core.relative(r),!1,!0)},this))};r.Defaults={URLhashListener:!1},r.prototype.destroy=function(){var i,n;for(i in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){function r(t,i){var r=!1,a=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+o.join(a+" ")+a).split(" "),function(e,t){if(s[t]!==n)return r=!i||t,!1}),r}function a(e){return r(e,!0)}var s=e("<support>").get(0).style,o="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},u={csstransforms:function(){return!!r("transform")},csstransforms3d:function(){return!!r("perspective")},csstransitions:function(){return!!r("transition")},cssanimations:function(){return!!r("animation")}};u.csstransitions()&&(e.support.transition=new String(a("transition")),e.support.transition.end=l.transition.end[e.support.transition]),u.cssanimations()&&(e.support.animation=new String(a("animation")),e.support.animation.end=l.animation.end[e.support.animation]),u.csstransforms()&&(e.support.transform=new String(a("transform")),e.support.transform3d=u.csstransforms3d())}(window.Zepto||window.jQuery,window,document),$(function(){$(".podcasts__group").each(function(){var e=$(this);e.find(".owl-carousel").owlCarousel({loop:!1,margin:10,dots:!1,nav:!0,navText:['<span class="podcasts__group-prev"><i class="wsico">3</i></span>','<span class="podcasts__group-next"><i class="wsico">4</i></span>'],navContainer:e.find(".podcasts__group-nav"),navElement:"span",responsive:{0:{items:1,autoWidth:!1},320:{autoWidth:!0},1000:{autoWidth:!0}}})}),$("#podcastsRubricList").on("click",".podcasts__group-list-item",function(e){e.preventDefault();var t=$(this);$("#podcastsRubricList").find(".podcasts__group-list-item").removeClass("m-active"),t.addClass("m-active"),$(t.attr("href")).addClass("m-active").siblings(".podcasts__group.m-rubric-items").removeClass("m-active")}),!window.is_adaptive&&$(".podcasts__group-list.owl-carousel").not("#podcastsRubricList").find(".podcasts__group-list-item").on("mouseenter",function(){var e=$(this);$("#podcastItemTooltip").remove(),$("body").prepend('<div id="podcastItemTooltip"><div class="podcasts__group-item-description"></div></div>'),$("#podcastItemTooltip").find(".podcasts__group-item-description").html(e.find(".podcasts__group-item-description").html()).show(),$("#podcastItemTooltip").css({position:"absolute",height:e.outerHeight(),width:e.outerWidth(),left:e.offset().left,top:e.offset().top}).show(),$("#podcastItemTooltip").on("mouseleave",function(){$("#podcastItemTooltip").remove()})}).on("mouseleave",function(e){$(e.toElement).hasClass("podcasts__group-item-description")||$("#podcastItemTooltip").remove()})}),$(function(){$(".podcast__episodes-item, .podcast-item__header").find(".download").attr("target","_blank"),$(".podcast__episodes-item, .podcast-item__header").on("click",".download",function(){var e=$(this).data("callback-url");e&&$.get(e)}),$(".podcastplayer").find(".video-js").on("play",function(){var e=$(this).closest(".podcastplayer");e.data("callback-url")&&($.get(e.data("callback-url")),e.data("callback-url",""))})}),$(function(){$("body").on("click",".jsDownloadMedia",function(e){e.preventDefault();var t=$(this),i='<div class="download-modal__wrapper download-modal__close"><div class="download-modal"><div class="download-modal__header">\u0421\u043a\u0430\u0447\u0430\u0442\u044c</div><span class="download-modal__close-icon download-modal__close"></span> <div class="download-modal__body"><div class="download-modal__qty">';t.data("q1")&&(i+='<a target="_blank" href="'+t.data("q1")+'">SD (\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e) <span class="download-modal__qty-size">'+t.data("q1-size")+"</span></a>"),t.data("q2")&&(i+='<a target="_blank" href="'+t.data("q2")+'">HD (\u0412\u044b\u0441\u043e\u043a\u043e\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e) <span class="download-modal__qty-size">'+t.data("q2-size")+"</span></a>"),i+="</div></div></div></div>",$("body").append(i),$("body").on("keydown.downloadModal",function(e){27==e.keyCode&&$(".download-modal__close").trigger("click")})}),$("body").on("click",".download-modal__close",function(){$(".download-modal__wrapper").remove(),$("body").off("keydown.downloadModal")}),$("body").on("click",".download-modal",function(e){e.stopPropagation()})}),$(function(){$(".adv__form").on("submit",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("action"),data:t.serialize(),method:"POST",complete:function(){t[0].reset(),t.find("input[type=submit]").hide(),t.find(".adv__form-success").css("display","flex")}})}),$(".adv__carousel").owlCarousel({loop:!0,items:1,dots:!1,nav:!0,navText:['<span class="adv__carousel-prev"><i class="wsico">3</i></span>','<span class="adv__carousel-next"><i class="wsico">4</i></span>'],navContainer:$(".adv__carousel-nav"),navElement:"span"})});var initAudioPlayer=function(e){var t=$.extend({adsEnabled:!0},window.vastClientConfig||{});e.each(function(e){var i=$(this);if("function"==typeof videojs&&!i.hasClass("vjs-audio")){var n=videojs(this,{plugins:{vastClient:t},liveui:!0,livetracker:!1,controlBar:{fullscreenToggle:!1,pictureInPictureToggle:!1,playToggle:{replay:!1}}});if(n.ready(function(){var t,i=$(".video-js").eq(e);t=i.closest(".podcast__episodes-item").length?i.closest(".podcast__episodes-item"):i.closest(".podcast-item__header").length?i.closest(".podcast-item__header"):i,this.on("play",function(){$(".video-js").each(function(t){e!==t&&this.player.pause()})}),this.on("vast.adStart",function(){this.vast.vastResponse.ads[0].inLine.creatives.map(function(e){e.companionAds&&e.companionAds.filter(function(e){return 728===e.width}).map(function(e){var i='<div class="vjs-companion-wrapper"><a target="_blank" href="'+e.companionClickThrough+'"><img src="'+e.staticResource+'" /></a></div>';t.after(i)})})}),this.on("vast.contentStart",function(){t.next(".vjs-companion-wrapper").remove()})}),i.data("q1")&&i.data("q2")){var r=n.controlBar.addChild("button");r.el().innerHTML='\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e: <a href="javascript:;" onclick="setQualityAudio(\''+i.attr("id")+"', this, '"+i.data("q1")+'\')">\u043e\u0431\u044b\u0447\u043d\u043e\u0435</a> / <a href="javascript:;" onclick="setQualityAudio(\''+i.attr("id")+"', this, '"+i.data("q2")+'\')" class="active">\u0432\u044b\u0441\u043e\u043a\u043e\u0435</a>',r.addClass("vjs-quality")}if(i.attr("title")){var a=n.controlBar.addChild("button");a.el().innerHTML=i.attr("title"),a.addClass("vjs-title")}}})},setQualityAudio=function(e,t,i){$(t).addClass("active").siblings().removeClass("active");var n=videojs(e);n.src({type:"audio/mp3",src:i}),n.play()};$(function(){initAudioPlayer($(".video-js"))});